---
title: Notas de versão do Magento Open Source 2.4.1
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos no Magento Open Source versão 2.4.1.
source-git-commit: 4c3a5b6462668993dcfb0ecb9327a7ffc47ced44
workflow-type: tm+mt
source-wordcount: '14729'
ht-degree: 0%

---


# Notas de versão do Magento Open Source 2.4.1

O Magento Open Source 2.4.1 apresenta aprimoramentos no desempenho e na segurança. Os aprimoramentos de segurança incluem suporte para o `SameSite` para cookies e a adição da proteção CAPTCHA para pontos de extremidade de API relacionados ao pagamento e ao pedido e da página de loja Inserir pedido .

Esta versão inclui todas as melhorias na qualidade principal incluídas na versão 2.4.0, mais de 150 novas correções no código principal e mais de 15 aprimoramentos na segurança. Ele inclui a resolução de quase 300 problemas do GitHub por nossos membros da comunidade. Essas contribuições da comunidade variam desde uma pequena limpeza do código principal até melhorias significativas em GraphQL.

Todos os problemas conhecidos identificados em 2.4.0 foram corrigidos nesta versão.

{{bics}}

## Patch de segurança disponível

Os comerciantes agora podem instalar correções de segurança sensíveis ao tempo sem aplicar as centenas de correções funcionais e aprimoramentos que uma versão trimestral completa (por exemplo, 2.4.0-p1) oferece. O patch 2.4.0.1 (Pacote Composer 2.4.0-p1) é um patch de segurança que fornece correções para vulnerabilidades que foram identificadas em nossa versão trimestral anterior, 2.4.0. Todos os hotfixes que foram aplicados à versão 2.4.0 foram incluídos neste patch de segurança. A *hotfix* fornece uma correção para uma versão lançada que soluciona um problema ou bug específico.)

Para obter informações gerais sobre patches de segurança, consulte [Introdução à nova versão do patch de segurança](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Para obter instruções sobre como baixar e aplicar patches de segurança (incluindo o patch 2.3.5-p2), consulte [Instalação no local de início rápido](../../../installation/composer.md). Os patches de segurança incluem somente correções de erros de segurança, não os aprimoramentos de segurança adicionais incluídos no patch completo.

## Aplicar `AC-3022.patch` continuar a oferecer à DHL como transportadora

A DHL introduziu o schema versão 6.2 e descontinuará o schema versão 6.0 em breve. Adobe Commerce 2.4.4 e versões anteriores que oferecem suporte à integração com a DHL somente a versão 6.0. Os comerciantes que implantam essas versões devem se aplicar `AC-3022.patch` logo que possível, continuar a oferecer à DHL como transportadora marítima. Consulte a [Aplicar um patch para continuar oferecendo a DHL como transportadora](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Artigo da Base de conhecimento para obter informações sobre como baixar e instalar o patch.

## Outras informações de versão

Embora o código para esses recursos seja fornecido com versões trimestrais , vários desses projetos (por exemplo, Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros desses projetos estão documentadas nas informações separadas da versão específica do projeto, disponíveis na documentação de cada projeto.

## Destaques

Procure os seguintes destaques nesta versão.

### Melhorias substanciais na segurança

Esta versão inclui mais de 15 correções de segurança e melhorias na segurança da plataforma. Todas as correções de segurança foram enviadas para 2.4.0-p1 e 2.3.6.

#### Mais de 15 aprimoramentos de segurança que ajudam a fechar as vulnerabilidades de execução de código remoto (RCE) e script entre sites (XSS)

Até à data, não ocorreram ataques confirmados relacionados com estas questões. No entanto, certas vulnerabilidades podem ser exploradas para acessar informações do cliente ou tomar as sessões do administrador. A maioria desses problemas exige que um invasor obtenha acesso primeiro ao Administrador. Como resultado, lembramos que você deve tomar todas as medidas necessárias para proteger seu administrador, incluindo, entre outras, esses esforços:  de IP incluir na lista de permissões, [autenticação de dois fatores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), uso de uma VPN, uso de um local exclusivo em vez de `/admin`e boa higiene de senhas. Consulte [Atualizações de segurança disponíveis para o Magento](https://helpx.adobe.com/security/products/magento/apsb20-59.html) para uma discussão sobre estas questões fixas.

#### Melhorias adicionais na segurança

As melhorias de segurança para esta versão incluem:

* **CAPTCHA** A proteção foi adicionada às seguintes áreas de produtos:

   * Colocar página de loja de pedidos e pontos de extremidade REST e GraphQL <!-- MC-36067-->
   * Pontos de extremidade REST e GraphQL relacionados ao pagamento.<!-- MC-36064-->

   A proteção CAPTCHA para essas páginas adicionais é desativada por padrão. Ele pode ser ativado no Administrador da mesma forma que outras páginas cobertas por CAPTCHA. Essa proteção foi adicionada como um mecanismo anti-bruta de força para proteger lojas contra ataques de cartografia. Consulte [CAPTCHA](https://docs.magento.com/user-guide/stores/security-captcha.html).

* **Suporte para o atributo SameSite para cookies**. Para dar suporte à imposição do Google Chrome do novo sistema de classificação de cookies, as classes de aplicativo que lidam com cookies foram atualizadas para dar suporte à `SameSite` atributo de cookie. Este atributo está definido como `Lax` por padrão, mas pode ser explicitamente substituído. <!-- MC-35389-->

* **Ferramenta aprimorada de verificação de segurança**. A Adobe fez parceria com [Segurança de idioma](https://sansec.io/), líder na prevenção da remoção digital, para integrar o banco de dados de mais de 8700 assinaturas de ameaça à Ferramenta de Verificação de Segurança. Essa parceria permitirá que os comerciantes obtenham informações em tempo real sobre o status de segurança de seu site por meio da detecção proativa de malware e da redução de falsos positivos. Os comerciantes podem se registrar para a ferramenta ao visitar https://account.magento.com/scanner. Para obter mais informações, consulte o [Proteja sua vitrine com a ferramenta aprimorada de verificação de segurança](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) postagem no blog.

{{cve-notice}}

### Melhorias na infraestrutura

Esta versão contém aprimoramentos na qualidade principal, que melhoram a qualidade da Estrutura e dessas áreas funcionais: Conta do cliente, Catálogo, CMS, OMS, Importação/Exportação, Promoções e Direcionamento, Carrinho e Check-out, além do armazenamento temporário e pré-visualização.

### Melhorias de desempenho

* **Redução da dimensão das transferências de rede entre Redis e Magento**. A configuração da lista de plug-ins agora é gerada durante a execução do `bin/magento di:compile` comando. Essas informações de configuração são gravadas em pastas de metadados geradas com base no escopo. Anteriormente, essas informações eram armazenadas no cache. As melhorias de desempenho resultantes incluem uma redução no tamanho do cache da rede e no tempo de execução para muitos cenários.<!-- MC-31617-->

* **Desempenho aprimorado do consumidor da fila de mensagens**. Três novas configurações suportam uma diminuição no consumo de CPU da fila de consumidores. Esses parâmetros opcionais fornecem maior controle sobre os consumidores e economizam recursos do servidor. Consulte [Configurar filas de mensagem](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para uma descrição do `maxIdleTime`, `sleep`e `onlySpawnWhenMessageAvailable` parâmetros.

* **Tempo de execução aprimorado** para `bin/magento` comandos.

### Integração do Adobe Stock

Esta versão inclui o Adobe Stock Integration v2.1.0.

### Nova Galeria de Mídia

A Nova Galeria de Mídia agora está ativada por padrão no Administrador. Os comerciantes agora podem executar essas ações em imagens na Galeria de mídia:

* Excluir imagens em massa
* Otimize o armazenamento de mídia identificando imagens e imagens duplicadas que não são usadas na loja
* Filtrar imagens pela área de loja em que são usadas, incluindo conteúdo de produto e categoria e blocos CMS
* Trabalhar com metadados de imagem
   * Visualizar metadados das imagens carregadas na Galeria de Mídia
   * Editar metadados da imagem (título, descrição e palavras-chave)
   * Pesquisar imagens por seus metadados

### GraphQL

Esta versão adiciona a cobertura GraphQL para os seguintes recursos:

* **Resenhas do produto**. Clientes e convidados podem gravar revisões de produtos. Os clientes podem recuperar seus históricos de revisão do produto. Consulte [Criar uma revisão de produto](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) e [consulta productReviewRatingsMetadata](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) para obter informações sobre a recuperação de informações sobre a infraestrutura de revisões.<!-- MC-32349-->

* **Opções de presentes**. Todos os clientes e convidados podem adicionar uma mensagem de presente ao seu pedido. Os clientes também podem adicionar o encapsulamento de presentes, os recibos de presente e os cartões impressos no pedido. Consulte [`setGiftOptionsOnCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) e [`updateCartItems` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html)<!-- MC-32345-->

* **Histórico do pedido**. Todos os clientes podem visualizar detalhes sobre seus históricos de pedidos, incluindo faturas, remessa e reembolsos.<!-- MC-20635-->

* **Adicionar ao carrinho**. O [`addProductsToCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) permite adicionar qualquer tipo de produto ao carrinho ativo. Recomendamos usar essa mutação em vez de mutações de propósito único como `addSimpleProductsToCart`. _Correção apresentada por Yaroslav Rogoza no pedido de pull [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **Métodos de pagamento armazenados**. Os clientes conectados agora podem armazenar os detalhes do pagamento (incluindo o cartão de crédito do Braintree e o Braintree com PayPal) em Minha conta.

* **Suporte para listas de desejos no Magento Open Source**. Você pode [adicionar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) para, [atualizar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) em, e [remover itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) de uma lista de desejos.

* **Gerenciamento aprimorado de contas de clientes**. Acrescentamos o [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) e [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutações para gerenciar contas de clientes. Essas novas mutações exigem objetos de entrada diferentes dos objetos `createCustomer` e `updateCustomer` mutações. Para alterar o endereço de email de um cliente, use o novo [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutação.

* **Suporte para o Payflow Pro Vault**. Adição de suporte ao GraphQL Vault para o [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) método de pagamento. _Correção enviada por Oleh Usik na solicitação de pull [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* GraphQL atualizado [`storeConfig` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) para incluir novas configurações do cliente. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adicionado o [`requestPasswordResetEmail` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html), que aciona o email de redefinição de senha para o endereço de email fornecido. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **GraphQL da Klarna**. Tópicos adicionados ou atualizados no Klarna GraphQL em [Método de pagamento de Klarna](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) e [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

Consulte a [Guia do desenvolvedor GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) para obter detalhes sobre essas melhorias.

### PWA Studio

O PWA Studio v8.0.0 apresenta novos recursos e melhorias:

* Atualizações do guia de estilo Venia que se aplicam a tokens de design, tipografia, cores, componentes principais e layouts de página. <!-- PWA-519 419-->

* Melhorias na experiência do minicarrinho Venia <!-- PWA-236-->

* Suporte inicial para várias localidades e conteúdo localizado na loja Venia <!-- PWA-295-->

* Várias melhorias na experiência da Minha conta da loja Venia <!-- PWA-247-->

Consulte [compatibilidade](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões compatíveis. Para obter informações sobre aprimoramentos e correções de erros, consulte [Versões de PWA Studio](https://github.com/magento/pwa-studio/releases).

### Estrutura de teste funcional (MFTF)

O MFTF 3.1.0 já está disponível. Consulte [Código de alteração da estrutura de teste funcional](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Extensões desenvolvidas do fornecedor

Consulte os seguintes artigos para obter atualizações sobre recursos e alterações desta versão:

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [Klarna](https://docs.magento.com/user-guide/payment/klarna.html)

* [Nuvem de vértex](https://docs.magento.com/user-guide/tax/vertex.html)

* [Revisões do produto Yotpo](https://docs.magento.com/user-guide/marketing/yotpo-reviews-intro.html)

## Problemas corrigidos

Corrigimos centenas de problemas no código principal 2.4.1.

### Instalação, atualização, implantação

<!-- MC-36113-->

* A instalação com extensões de terceiros que têm dependências de APIs para o módulo Loja em comandos CLI não falha mais. Anteriormente, o aplicativo exibia esta mensagem de erro: `The default website isn't defined. Set the website and try again`. Esse era um problema conhecido na versão 2.4.0.

<!-- MC-33273-->

* `bin/magento setup:di:compile` O não gera mais um erro fatal. Anteriormente, o aplicativo exibia um erro na primeira vez que você executava esse comando, mas a segunda execução resultava em uma compilação bem-sucedida.

<!-- MC-34429-->

* A atualização não falha mais quando um plug-in é declarado em `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* O aplicativo agora exibe uma mensagem de erro informativa quando alguns temas não são implantados após a execução `bin/magento setup:static-content:deploy`. Anteriormente, quando a implantação era concluída com êxito, mas nem todos os pacotes eram implantados, o aplicativo não exibia um erro. Quando o comando é executado com processamento paralelo ativado e cada tema requer mais tempo para ser implantado do que o tempo máximo de execução especificado, esse comando pode ser concluído com êxito, embora os temas não sejam implantados.

<!-- MC-35001-->

* O **Usar padrão** caixa de seleção para pagamentos da Klarna (**Lojas** > **Configuração** > **Vendas** > **Métodos de pagamento** > **Klarna**) agora permanecem marcadas como esperado quando o escopo do site é alterado.

<!-- MC-33788-->

* A atualização não resulta mais na falha súbita do cluster Galera. Anteriormente, o cluster Galera era era encerrado abruptamente após a reindexação imediatamente após a atualização. Durante uma atualização, as tabelas de índice são alteradas e o mecanismo é alterado de `MEMORY` para `InnoDB`. Nesse ponto, o conteúdo dessas tabelas ficou fora de sincronia entre os nós do cluster Galera. [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* A desativação do módulo PageBuilder não afeta mais a renderização da página do produto. Anteriormente, os layouts personalizados na página de produto desapareciam quando o módulo era desativado e o aplicativo exibia uma página em branco.

<!-- ENGCOM-7219-->

* Agora você pode usar `bin/magento sampledata:deploy` para implantar dados de amostra conforme esperado após a instalação do Magento Open Source usando o Composer. Anteriormente, o aplicativo exibia esse erro: `Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`. _Correção apresentada por Andrii Beziazychnyi no pedido de pull [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* O desempenho da vitrine foi aprimorado com a eliminação do carregamento desnecessário da `Datepicker` componente. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* Em execução `bin/magento setup:upgrade` O não exibe mais informações irrelevantes sobre caches. _Correção apresentada por Sathish Subramanian no pedido de pull [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* Em execução `bin/magento config:show <vendor_module>/general/value` agora retorna `0` ou uma string vazia, conforme esperado. Anteriormente, retornava `Configuration for path: "vendor_module/general/value" doesn't exist`. _Correção enviada por Vadim Malesh em solicitação de pull [28549](https://github.com/magento/magento2/pull/28549)_. [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` agora implanta todos os idiomas usados na loja e todos os idiomas configurados pelos usuários administradores quando nenhum parâmetro de idioma é definido. (`en_US` é sempre implantado por padrão.) _Correção enviada por Anton Evers na solicitação de pull [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* O aplicativo não exibe mais o menu Backup quando o recurso Backup está desativado. _Correção apresentada por Eden Duong no pedido de pull [2922](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* A inicialização do assistente de imagem de catálogo agora usa o modelo de produto em vez de `DataObject`. _Correção enviada por jmonteros422 na solicitação de pull [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* Agora, os usuários administradores podem salvar um campo vazio **Duração do token do cliente (horas)** campo (Administrador) **Lojas**  >  **Configurações**  >  **Serviços**  >  **OAuth**  >  **Expiração do token de acesso**). [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* O **Criar redirecionamento permanente para URL antigo** agora está desativada por padrão para categorias. _Correção enviada por Vadim Malesh em solicitação de pull [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Integração do Adobe Stock

<!-- ENGCOM-7776-->

* As imagens na grade de imagens do Adobe Stock agora são alinhadas corretamente após a limpeza dos filtros. _Correção apresentada por Nazar Klovanych no pedido de pull [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824), [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* O **Usado em** O campo da página de detalhes da imagem da galeria do Adobe Stock agora identifica com precisão se a imagem está associada a um produto. _Correção apresentada por Nazar Klovanych no pedido de pull [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` agora exclui os links para as palavras-chave que não estão especificadas nos parâmetros e insere as novas ao excluir tags de palavra-chave ao editar detalhes da imagem. _Correção enviada por jmonteros422 na solicitação de pull [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* O `Login failed` mensagem que o aplicativo exibe quando um comerciante clica **Licença** para uma imagem do Adobe Stock salva anteriormente, não licenciada não contém mais tags HTML. _Correção enviada por yolouiese na solicitação de pull [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* Ao clicar nos links no **Usado em** A seção da página Detalhes da imagem agora exibe uma grade que exibe todas as entidades filtradas pela imagem. O filtro de ativo também é definido e exibido corretamente. Anteriormente, o aplicativo não exibia o título do ativo no **Filtros aplicados** seção. _Correção apresentada por Nazar Klovanych no pedido de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* O aplicativo não exibe mais a variável **Usado em** seção da página Detalhes da imagem quando a imagem não estiver em uso. _Correção apresentada por Nazar Klovanych no pedido de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* Correção de problemas de exibição ao adicionar uma nova tag de imagem que excede o número máximo de caracteres. _Correção apresentada por Nazar Klovanych no pedido de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* Os ativos agora podem ser verificados conforme esperado usando o filtro de ativos na imagem Detalhes **Usado em** seção. _Correção apresentada por Nazar Klovanych no pedido de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* Informações sobre imagens usadas por entidades diferentes (por exemplo, `page` e `category`) agora está listada e corrigida na página Detalhes da imagem. _Correção apresentada por Nazar Klovanych no pedido de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* O aplicativo não gera mais uma exceção quando um comerciante tenta salvar um produto com sua imagem associada quando a Galeria de mídia está desativada. _Correção apresentada por Nazar Klovanych no pedido de pull [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* Clicar em links na seção Usado em para uma imagem na Galeria de mídia agora abre a grade de entidades que são filtradas pela imagem conforme esperado. Anteriormente, o título da imagem não era exibido na seção Filtros aplicados da grade. _Correção apresentada por Nazar Klovanych no pedido de pull [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* O aplicativo agora adiciona tags corretamente ao editar várias imagens sucessivamente na Galeria de mídia. _Correção apresentada por Nazar Klovanych no pedido de pull [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* O aplicativo agora remove tags de imagens do Adobe Stock depois que um comerciante exclui as tags e salva os detalhes da imagem. Anteriormente, as tags não eram excluídas até que a página fosse atualizada. _Correção apresentada por Honeymay Louiese Ignacio no pedido de pull [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* O Amazon Pay agora verifica se um usuário já está conectado antes de renderizar as opções de pagamento.

* Problemas com autenticação multifator e carrinhos abandonados foram resolvidos.

* O Amazon Pay agora preenche corretamente a variável `store name` em emails e outros locais exibidos.  Se a variável **Nome da loja** na configuração do Amazon Pay está vazia, a extensão recupera o nome padrão do armazenamento (ou seja, o nome que você dá ao armazenamento em Admin).

* Problemas de localização/tradução para cenários Recusar foram abordados. O texto exibido nem sempre é mais em inglês.

### Produtos do pacote

<!-- MC-36281-->

* O aplicativo não gera mais uma exceção quando você tenta criar um produto em uma implantação na qual o Inventory está instalado, mas o `Magento_InventoryBundleProduct` está desativado.

<!-- MC-34261-->

* O aplicativo agora calcula corretamente os reembolsos offline para pedidos que contêm produtos do pacote.

<!-- MC-24363-->

* O minicarrinho agora exibe os preços corretos para produtos de pacote quando os preços de camada também são atribuídos para produtos simples. [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* Os comerciantes agora podem criar um aviso de crédito para produtos de pacote que fornece um reembolso sem exigir a devolução do produto. Anteriormente, o aplicativo exibia um erro. _Correção apresentada por Dzung Nguyen no pedido de pull [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* O aplicativo não exibe mais mensagens de validação redundantes quando um comprador adiciona um produto de pacote ao carrinho sem selecionar uma opção necessária. _Correção apresentada por Dzung Nguyen no pedido de pull [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_Correção apresentada por Michał Derlatka no pedido de pull [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### Cache

<!-- MC-36096-->

* O armazenamento de cache local agora é retido pelo período definido em **Lojas** > **Configuração** > **Geral** > **Web** > **Configurações de cookie padrão**. Anteriormente, a data de expiração dos cookies era codificada para um dia, o que o colocava fora de sincronia com essa configuração. Como resultado, as mensagens de boas-vindas não mantiveram as informações de retorno do cliente pela duração esperada.

<!-- ENGCOM-7780-->

* O número de chamadas para o cache de página `config` foi reduzida. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* O verniz não joga mais um `Connection reset by peer` erro quando um catálogo grande é reindexado na programação. _Correção apresentada por Matthew O&#39;Loughlin no pedido de pull [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* O cache de página inteira não é mais limpo para produtos não relacionados quando um produto foi editado no Administrador. [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### Carrinho e check-out

<!-- ENGCOM-7950-->

* As consultas SQL diretas foram substituídas pelo Provedor de dados, o que melhorou o desempenho do check-out. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* As listas Produtos na Comparação e Produtos recentemente comparados agora funcionam como esperado. Anteriormente, quando a lista de comparação era expandida, o aplicativo não exibia produtos, mesmo que a seção indicasse que a lista continha produtos.

<!-- MC-35329-->

* O **Excluir** no botão **Adicionar ao carrinho de compras por SKU** seção de um cliente **Gerenciar carrinho de compras** agora funciona conforme o esperado quando várias linhas são selecionadas.

<!-- MC-34999-->

* O aplicativo não gera mais um erro quando você tenta solicitar um produto por SKU quando os dígitos que você digita correspondem a um SKU válido, mas a letra desses dígitos é diferente. Anteriormente, quando você inseria um SKU em **Minha conta** > **Pedido por SKU** que não correspondia exatamente a um SKU válido, o aplicativo exibiu um erro.

<!-- MC-25042-->

* O endereço de envio de um cliente agora é selecionado por padrão no check-out quando o endereço está localizado no país identificado na lista Permitir países e essa lista inclui apenas esse país. Anteriormente, o aplicativo não selecionava o endereço como padrão e exibia esta mensagem de erro: `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* Os comerciantes podem agora habilitar **Aplicar à Quantia de Entrega** na guia Action de **Marketing** > **Regras de preço do carrinho** > **Adicionar nova regra** when **Desconto de valor fixo para o carrinho inteiro** é aplicada. [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* O aplicativo não gera mais uma exceção quando um comprador tenta desdefinir o cookie de persistência após iniciar o check-out e navegar até a página inicial da loja. Anteriormente, quando o comprador clicava no **Você não?** na página inicial, o aplicativo lançou esta exceção: `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* O aplicativo agora exibe uma mensagem de sucesso de adicionar ao carrinho quando um cliente adiciona um produto esgotado ao carrinho. Anteriormente, o produto era adicionado, mas o aplicativo não exibia uma mensagem de sucesso.

<!-- MC-35989-->

* Os atributos de endereço personalizados agora são incluídos conforme esperado no formulário exibido para a etapa de pagamento no fluxo de trabalho de finalização.

<!-- MC-36060-->

* O **Estado/Província/Região** a caixa de entrada agora está ativada como esperado em **Minha conta** > **Catálogo de endereços** > **Adicionar novo endereço**.

<!-- ENGCOM-7746-->

* Os descontos são agora aplicados como esperado nas taxas de frete quando **Aplicar à Quantia de Entrega** estiver ativado. _Correção apresentada por Andrii Kalinich no pedido de pull [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* O código que suporta o fechamento do minicarrinho foi refatorado para remover o `closeSidebar` . O vínculo de cliques apropriado foi adicionado ao `[data-action="close"]` elemento. _Correção enviada por solicitação de pull de logon [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* O novo **Mostrar o botão &quot;Limpar carrinho de compras&quot; na página do carrinho** a configuração fornece controle sobre a exibição de um **Limpar carrinho** na página de exibição do carrinho de compras. Por padrão, essa configuração está desativada. _Correção apresentada por Pavlo Sydorenko no pedido de pull [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* A validação foi adicionada ao campo de telefone no fluxo de trabalho de check-out. _Correção enviada por Oleh Usik na solicitação de pull [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* O check-out de convidado agora está desativado conforme esperado quando um carrinho contém produtos baixáveis quando a variável **Compartilhável** e **Desative o check-out de convidado se o carrinho contiver itens baixáveis** estão desativadas. _Correção enviada por Rani Priya em solicitação de pull [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* A mensagem de sucesso que o aplicativo exibe quando um comprador adiciona um produto ao carrinho pela barra lateral da conta do cliente agora contém um link para o carrinho de compras do comprador. _Correção apresentada por Ajith na solicitação de pull [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* O aplicativo agora seleciona um valor vazio por padrão para o menu de opções suspenso de prefixo no fluxo de trabalho de finalização. _Correção enviada por Vadim Malesh em solicitação de pull [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* A mensagem pop-up exibida pelo aplicativo ao excluir vários itens de um carrinho de compras agora descreve com precisão o número e o tipo de entidades selecionadas para exclusão. _Correção apresentada por Nazar Klovanych no pedido de pull [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* O aplicativo agora exibe um formulário de registro de cliente quando um usuário convidado conclui o check-out.

<!-- MC-35607-->

* Os campos personalizados de atributos de endereço do cliente agora são exibidos conforme esperado no fluxo de trabalho de finalização da loja.

<!-- ENGCOM-7793-->

* O aplicativo agora recupera o grupo de clientes atual para uma cotação ativa durante o check-out. Anteriormente, o aplicativo usava o grupo de clientes que estava ativo quando o produto foi adicionado ao carrinho pela primeira vez e se esse grupo de clientes era excluído antes do check-out, o aplicativo gerava um erro. _Correção enviada por Konstantin pull request [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### Catálogo

<!-- MC-31068-->

* O aplicativo agora remove produtos desativados do carrinho de um comprador antes do check-out. Anteriormente, quando um comprador adicionava um produto ao carrinho que era desativado antes da conclusão do check-out, o aplicativo removia o produto desativado do carrinho, mas o produto permanecia na cotação e o comprador não podia fazer check-out. [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* O aplicativo agora classifica os produtos mais vendidos como esperado. Anteriormente, a contagem de produtos e a paginação dos resultados da classificação estavam incorretas. [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* Os compradores agora podem abrir a página de detalhes de um produto clicando no nome do produto na barra lateral de comparação de produtos. _Correção apresentada por Eduard Chitoraga no pedido de pull [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` agora permanecem positivos quando um administrador exclui categorias. Anteriormente, quando um administrador excluía categorias, a variável `children_count` para as categorias restantes foi negativo. _Correção enviada pelo Vitaliy Prokopov na solicitação de pull [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* O aplicativo agora usa a opção padrão (**Configuração** > **Web** > **Layouts padrão** > **Layout padrão do produto**) que você selecionou para a variável `page_layout` ao criar um novo produto. Anteriormente, o valor padrão selecionado não era aplicado.

<!-- MC-34258-->

* Agora é possível executar ações em massa no estoque de produtos de Inventário com êxito. Anteriormente, quando você tentava executar uma ação em massa no estoque de produtos de inventário, o aplicativo exibia uma página em branco. Se você executou esta ação com o aplicativo no modo desenvolvedor, o aplicativo exibiu este erro: `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`.

<!-- MC-32552-->

* A contagem total de registros exibida ao clicar **Adicionar produtos** na guia Produtos ao adicionar produtos a uma categoria de catálogo não altera mais com base na ordem de classificação do produto.

<!-- ENGCOM-7854 -->

* O `{products(filter: {sku: {eq: "some sku"}}) {…}` agora retorna valores que foram convertidos para a moeda esperada. Anteriormente, `price_tiers.final_price.value` exibia preços especiais na moeda base. _Correção apresentada por Petkovski Marjan no pedido de pull [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Limpeza

<!-- ENGCOM-7281-->

* Corrigido o alinhamento incorreto da caixa de seleção da grade Ordem de Venda do Administrador . _Correção enviada por Tu Nguyen na solicitação de pull [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* Correção de um erro ortográfico no getter de ID do endereço de entrega no manipulador de salvamento do endereço da ordem de venda. _Correção enviada por Konstantin pull request [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* Corrigido o erro `getRegionNameExpresion` nome do método para `getRegionNameExpression`. _Correção apresentada por Pierre Grimaud no pedido de pull [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* Um redundante `init` foi removido de `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` e `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _Correção enviada por Oleh Usik na solicitação de pull [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-2909](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` o polyfill foi movido de `base` para `frontend`. _Correção enviada por Ihor Sviziev na solicitação de pull [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* Atualização do logotipo do Adobe Commerce e remoção de espaços irrelevantes do arquivo principal README do `magento/magento2` repositório. _Correção apresentada por Rafael Corr̻ a Gomes em pedido de pull [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* Os `overflowed` A classe foi removida do miniwidget barra lateral do carrinho. _Correção enviada por solicitação de pull de logon [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* Um seletor de CSS incorreto na página Entrega foi corrigido. _Correção enviada por Tu Nguyen na solicitação de pull [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* O `lib/internal/Magento/Framework/App/Request/Http.php` O arquivo foi simplificado por meio da otimização da lógica e da remoção de atribuições de variáveis redundantes e uso excessivo de retornos em uma função. _Correção apresentada por Chris Snedaker no pedido de pull [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* O `bin/magento module:status` agora aceita vários nomes de módulo como argumentos. _Correção enviada por Chandru Rajendran em solicitação de pull [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* Correção de um erro de digitação na descrição da classe de `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _Correção apresentada por Benjamin Rosenberger no pedido de pull [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* O `TierPriceManagement` foi refatorado para remover o código redundante. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` O foi refatorado para melhorar a legibilidade e a velocidade de retorno. _Correção apresentada por Vitaliy Ryaboy em pedido de pull [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### Conteúdo CMS

<!-- MC-35971-->

* A guia Hierarquia de uma exibição de armazenamento padrão selecionada agora exibe a página pai selecionada, conforme esperado.

<!-- ENGCOM-7602-->

* O aplicativo não gera mais um erro durante a criação da exibição de loja quando a nova exibição de loja contém uma página CMS com a mesma chave de URL de uma página em uma exibição de loja diferente. _Correção enviada por Vadim Malesh em solicitação de pull [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### Produtos configuráveis

<!-- MC-33523-->

* Os problemas de paginação com a lista de Variações Atuais de Edição de Produto Configurável foram corrigidos.

<!-- MC-33406-->

* O aplicativo não atualiza mais a caixa de preço de Produtos Relacionados sempre que um comprador seleciona opções para um produto configurável. Anteriormente, o aplicativo atualizava a caixa de preço sempre que um comprador selecionava uma opção para um produto configurável.

<!-- MC-29882-->

* O aplicativo agora exibe o preço correto para produtos configuráveis com opções personalizáveis na página Criar pedido de administrador . Como esperado, o preço exibido é a soma do preço do produto filho e do preço da opção personalizada. Anteriormente, o aplicativo exibia apenas o preço da opção personalizada. [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* O resumo do pedido agora exibe a quantia de desconto correta quando uma regra de preço do carrinho foi aplicada. Anteriormente, a regra não arredondava corretamente os valores ao calcular os descontos de remessa.

<!-- MC-33765-->

* As contas de usuário administrador criadas em uma conta de administrador com um escopo restrito agora podem criar um produto configurável com atributos, conforme esperado. Anteriormente, o aplicativo exibia esse erro: `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* O aplicativo não gera mais um erro de validação quando você usa o POST `/V1/products` para um produto configurável com um `int` valor de 0. Anteriormente, o aplicativo exibia esse erro: `Product with id "%1" does not contain required attribute "%2"."` _Correção enviada por Vadim Malesh em solicitação de pull [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* O atributo de opções de configuração de um produto pai não é mais atribuído a um novo produto configurável `size` atributo. _Correção enviada por Abel Truong em solicitação de pull [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookies

<!-- ENGCOM-7156-->

* O aplicativo agora cria um máximo de um `mage-translation-file-version` e `mage-translation-storage` cookie por sessão. _Correção enviada por Ihor Sviziev na solicitação de pull [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* A configuração do consumidor da fila de mensagens foi estendida com novos parâmetros que ajudam a controlar consumidores e salvar recursos do servidor e que podem diminuir o consumo da CPU na fila do consumidor:

   * `maxIdleTime` define o tempo máximo de espera em segundos para uma nova mensagem da fila.
   * `sleep` especifica o tempo em segundos a ser suspenso antes de verificar se uma nova mensagem está disponível na fila.
   * `onlySpawnWhenMessageAvailable` identifica se um consumidor deve ser gerado apenas quando existe uma mensagem disponível na fila relacionada. Essa configuração é ativada globalmente, por padrão, para todos os consumidores, mas pode ser configurada por consumidor.

<!-- ENGCOM-7863-->

* `cron` expressões como  `3/10 * * * *` agora estão programadas conforme esperado. _Correção enviada por Anton Evers na solicitação de pull [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` O não carrega mais todas as aspas expiradas de uma vez. Anteriormente, o aplicativo falhava com esse erro fatal porque todas as aspas expiradas eram carregadas simultaneamente: `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* O aplicativo não duplica mais CSS quando **CSS Crítico** estiver ativado. _Correção enviada por Tu Nguyen na solicitação de pull [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* O compilador LESS do lado do servidor agora importa todos os arquivos CSS remotos conforme esperado ao executar `bin/magento setup:static-content:deploy -f`. Anteriormente, o aplicativo não importava os arquivos remotos e gerava um erro. [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### Cliente

<!-- MC-33679-->

* Os nomes de região nos endereços de cliente de Administração agora são traduzidos conforme esperado.

<!-- MC-36226-->

* O **Estado/Província** Os campos agora são preenchidos conforme esperado na página Editar endereço (**Minha conta** > **Catálogo de endereços**).

<!-- MC-34655-->

* O aplicativo não gera mais um erro quando um cliente clica no **Enviar** botão várias vezes em formulários na loja para a qual o reCAPTCHA invisível foi ativado. Anteriormente, clicar neste botão várias vezes resultava em um erro interno semelhante a este: `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* Salvar um cliente excluído do Administrador agora gera apenas uma mensagem de erro. Anteriormente, o aplicativo exibia uma página em branco e gerava um relatório que contém essa sequência de caracteres: `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* O aplicativo agora exibe uma mensagem de erro, como esperado, quando um administrador tenta salvar um endereço para um cliente cuja conta acabou de ser excluída. Anteriormente, o aplicativo exibia uma caixa de mensagem em branco.

<!-- MC-33150-->

* Os rótulos para campos de endereço no fluxo de trabalho de check-out e no catálogo de endereços foram editados para fins de consistência.

<!-- ENGCOM-7244 -->

* Os rótulos de fronteira agora voltam para armazenar rótulos se seus valores não forem nulos. Anteriormente, os atributos do cliente usavam os rótulos de frontend padrão. _Correção enviada por Toan Nguyen na solicitação de pull [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* O `sortOrder`o número de links no XML do layout foi corrigido. Anteriormente, essa ordem era revertida e usada em ordem decrescente. _Correção enviada por Tu Nguyen na solicitação de pull [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### Diretório

<!-- MC-32271-->

* O formato do menu suspenso Estado/província agora é consistente em todo o Administrador.

### dotdigital

* A sincronização de pedidos não falha muito quando um pedido contém SKUs de produto que não existem mais no catálogo.

* Categorias de produtos vazias não são mais incluídas nos dados de insight da Web.

* O rastreamento do comportamento na Web agora funciona para comerciantes com determinadas configurações de tema. Um novo seletor de fallback aborda isso.

* O campo de dados de status do assinante não inclui mais valores vazios quando a sincronização do cliente foi executada usando o cron. (A emulação do aplicativo aborda esse problema.)

* O mapeamento do catálogo de endereços agora funciona conforme o esperado quando uma conta dotdigital é ativada no nível padrão, mas desabilitada para o site principal.

* Os cupons agora são gerados (usando o URL de conteúdo dinâmico externo para geração de cupom) para endereços de email que contêm sinais de mais (&#39;+&#39;).

* Os contatos não são mais rescritos quando seus `last_subscribed_at` é nulo.

* Os erros de atualização (que datam da versão 4.5.2) que afetavam as versões anteriores foram resolvidos.

* Correção de um problema de regressão introduzido na versão 4.5.3 que afetava o uso de um método para obter o status do assinante ao preparar a exportação do assinante.

* O número total de assinantes sincronizados (apresentado nos logs e na tela) agora é calculado corretamente.

### Baixável

<!-- MC-35026-->

* A área Meus produtos baixáveis agora exibe links para produtos baixáveis adquiridos que fazem parte de um produto agrupado conforme esperado.

<!-- MC-34262-->

* Clicar em um produto baixável **Amostra** Agora, o botão da página Admin product baixa uma amostra como esperado. Anteriormente, ao clicar **Amostra**, o aplicativo exibiu esse erro: `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* Os compradores agora podem baixar amostras de produtos baixáveis que estão esgotados. Anteriormente, quando um comprador tentava baixar uma amostra, o aplicativo abria uma nova guia, mas não exibia uma mensagem informativa ou iniciava o processo de download. _Correção enviada por Vadim Malesh em solicitação de pull [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* A mensagem de exceção que o aplicativo exibe quando um comprador tenta definir um endereço de entrega para um produto que pode ser baixado foi aprimorada. _Correção apresentada por Michał Derlatka no pedido de pull [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* Um produto `stock_item` os dados são atualizados e os links de produtos e amostras baixáveis são preservados conforme esperado quando você usa uma chamada PUT REST para atualizar `stock_item` valores. Anteriormente, após a atualização do produto, o produto não continha mais links para baixar conteúdo. _Correção enviada por Vadim Malesh em solicitação de pull [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* O aplicativo agora exibe uma mensagem mais informativa quando um cliente define o endereço de entrega de um pedido que contém apenas produtos para download.

### Email

<!-- MC-32789-->

* O aplicativo agora envia notificações por email sobre alterações de pedido para o email correto do cliente se o email do cliente foi alterado após a criação do pedido.

<!-- MC-36015-->

* Os emails de atualização de pedido que são enviados para os clientes agora incluem o status correto do pedido. Anteriormente, se um status de pedido era alterado de `processing` para outro estado, o email do pedido não refletia a alteração de status.

<!-- MC-34107-->

* A aplicação não exibe mais mensagens enganosas sobre contas existentes durante o check-out do convidado. Anteriormente, quando um convidado navegava até a página de check-out e, em seguida, navegava de volta para a página de envio, o aplicativo exibia este erro: `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* Os modelos de email personalizados agora carregam os mesmos elementos dos modelos de email padrão nativos. Anteriormente, alguns elementos estavam ausentes, incluindo valores de variável.

<!-- ENGCOM-7576-->

* O CSS desnecessário foi removido do modelo Visualização de email. _Correção enviada por Tu Nguyen na solicitação de pull [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* O texto no modelo de email que duplica o texto já exibido pelo rodapé foi removido. _Correção apresentada por Paweł Tylek no pedido de pull [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* Os emails de alerta do produto agora são enviados da loja da qual o alerta é assinado. Anteriormente, esse email sempre era enviado da loja padrão. _Correção apresentada por Maciej Pawłowski no pedido de pull [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* Uma duplicata `customer.name` foi removida do template de email. _Correção apresentada por Paweł Tylek no pedido de pull [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* Agora você pode criar um template de email com o qual enviar email  `Content-Type: "text/plain"`. Anteriormente, o aplicativo ignorava o tipo de conteúdo especificado no modelo. _Correção enviada por solicitação de pull de twonesixdigital [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### Estruturas

<!-- MC-35893-->

* O **Hora do dia para enviar dados** do Administrador **Lojas** > **Configuração** > GERAL > **Relatórios avançados** agora é renderizada corretamente.

<!-- MC-34153-->

* Os compradores agora podem alterar o número de pedidos exibidos por página quando a lista de Pedidos abrange várias páginas. Anteriormente, o aplicativo exibia a seguinte mensagem quando o comprador navegava até a última página de pedidos e tentava alterar o número de pedidos exibidos por página: `You have placed no orders`. Esse foi um problema conhecido para a versão 2.4.0.

<!-- MC-35020-->

* Agora é possível adicionar produtos a uma categoria ao implementar o cache de Nível 2.

<!-- MC-29755-->

* `X-Magento-Tags` os cabeçalhos não excedem mais o tamanho permitido pela especificação HTTP. Anteriormente, as páginas de categoria que continham muitos produtos retornavam uma `X-Magento-Tag` que resultava em um erro 503.

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` O agora é acionado conforme esperado quando você usa a REST API para criar uma remessa.

<!-- MC-33898-->

* O aplicativo agora exibe uma mensagem de erro informativa quando uma `di compile` falha devido a uma dependência inexistente. Anteriormente, a mensagem exibida não identificava a classe na qual a exceção ocorria.

<!-- MC-32929-->

* O aplicativo não gera mais o seguinte erro fatal quando Redis usa toda a memória permitida: `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* Os compradores agora podem adicionar vários produtos ao carrinho quando a função `Persistent` está desativado. [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### Correções gerais

<!-- MC-36048-->

* Classificação de produtos no Administrador (**Lojas** > **Atributos** > **Produtos**) agora exibe todos os produtos que atendem aos seus critérios de pesquisa. Anteriormente, o aplicativo não exibia registros e, para classificar os registros, era necessário navegar até a primeira página de resultados da pesquisa.

<!-- MC-36343-->

* Aspas desnecessárias e escape em torno de um URL em `tracking.phtml` foram removidas.

<!-- MC-35998-->

* O `var/log/system.log` agora exibe uma mensagem mais precisa quando um usuário tenta acessar um arquivo de recurso não existente no diretório estático e o SCD OnDemand e o modo de produção estão habilitados. O aplicativo agora registra um erro 404. Anteriormente, o aplicativo registrava a mesma mensagem que era registrada quando o erro ocorria no modo desenvolvedor.

<!-- ENGCOM-7286-->

* A minificação do JavaScript agora funciona corretamente. O resolvedor de minificação de arquivos não vaza mais variáveis para o escopo global. Anteriormente, `ctx`, `origNameToUrl`e `baseUrl` variáveis em window vazaram. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* Ao depurar um erro que impede a criação do objeto, o aplicativo agora imprime, bem como registra a mensagem de exceção original. Anteriormente, a mensagem só era registrada. _Correção apresentada por Marvin Hinz no pedido de pull [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* A execução de retorno de chamada depois que as alterações no banco de dados são confirmadas foi aprimorada. Anteriormente, se um retorno de chamada falhasse com uma exceção, todos os retornos de chamada falhavam. _Correção enviada pela Alok Patel na solicitação de pull [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* As misturas para módulos sem dependências definidas não exibem mais este erro: `TypeError: Cannot read property 'map' of null`. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* O polyfill de armazenamento agora é carregado e aplicado somente quando `localStorage` ou `sessionStorage` não estão disponíveis. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* As listas de pedidos de loja de várias páginas agora se comportam conforme esperado quando um comprador altera o número de resultados exibidos por página da segunda página de resultados ou da página de resultados subsequente. Anteriormente, o aplicativo exibia esse erro quando um comprador alterava o número de resultados de pesquisa exibidos no **Minha conta** > **Meus pedidos** lista: `You have placed no orders`. _Correção enviada por Vadim Malesh em solicitação de pull [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* O obsoleto `addWarning` foi substituído pelo método `addWarningMessage` no módulo de segurança. _Correção enviada por kishorekumarkesavan no pedido de pull [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* Código gerado usando o `bin/magento` os comandos de linha de comando agora são consistentes com os requisitos e os padrões de codificação. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* Salvar um atributo com `backend_type = static` O não remove mais o conteúdo da variável `frontend_class` campo. _Correção enviada por jiten-patel na solicitação de pull [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* Código desnecessário e `responsive.js` foram removidos dos arquivos carregados por temas. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* A validação foi adicionada ao **Número de símbolos** na página Configuração do CAPTCHA do administrador. _Correção apresentada por Eden Duong no pedido de pull [29.199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* O feed RSS agora é carregado corretamente. Anteriormente, o feed não carregava na primeira vez, embora fosse carregado como esperado quando a página era atualizada. _Correção enviada por Vadim Malesh em solicitação de pull [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* Uma sessão persistente expirada agora é renovada conforme esperado quando o comprador faz logon novamente.

<!-- MC-35230-->

* Duração da senha, conforme definido em **Lojas** > **Configuração** > **Avançado** > **Administrador** agora é honrado. Anteriormente, se você clicava **Esqueceu a senha?** ao ser solicitado a redefinir sua senha, você pode ignorar a redefinição de senha.

<!-- MC-34369-->

* Os códigos de cupom agora são aplicados somente ao produto especificado. Anteriormente, o aplicativo aplicava o código do cupom a todos os produtos no carrinho. [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* As configurações de expiração do carrinho não são mais redefinidas quando ocorre uma atualização de inventário ou preço. Anteriormente, quando um carrinho era definido para expirar em 24 horas e uma atualização de inventário ou de preço ocorria, os indexadores preenchiam a variável `updated_at table`, que redefine o prazo de validade.

<!-- MC-33313-->

* O aplicativo não gera mais um erro fatal quando um administrador atribui um cliente que tem um carrinho de compras ativo a um grupo de clientes.

<!-- ENGCOM-7834 -->

* Selecionar uma opção da barra de ferramentas de **Ferramentas do desenvolvedor**  >  **Rede**  em uma página de produto, ao executar o navegador Chrome, não inicializa mais `toolbar.js` duas vezes. _Correção apresentada por Paweł Tylek no pedido de pull [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* O aplicativo agora adiciona uma ID de função ACL do usuário administrador à ID de cache da árvore de categoria do produto. Isso limitará as árvores de categoria que um administrador com escopo limitado pode ver como esperado. _Correção enviada pela solicitação de pull quangdo-alinhamento [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* Os compradores podem selecionar opções de mensagem de presente durante o check-out. GraphQL agora cobre as opções de mensagem de presente para diferentes tipos de itens do carrinho. Consulte [`setGiftOptionsOnCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) e [`updateCartItems` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html). _Correção enviada pelo Oleh Usik em solicitações de pull [28519](https://github.com/magento/magento2/pull/28105), [27956](https://github.com/magento/magento2/pull/27956), [28072](https://github.com/magento/magento2/pull/28072), [28072](https://github.com/magento/magento2/pull/28072). [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* Clientes e convidados podem gravar revisões de produtos. Os clientes também podem recuperar seus históricos de revisão do produto. Consulte [Criar uma revisão de produto](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) e [consulta productReviewRatingsMetadata](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) para obter informações sobre a recuperação de informações sobre a infraestrutura de revisões. _Correção apresentada por Eduard Chitoraga no pedido de pull [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* O [`addProductsToCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) permite adicionar qualquer tipo de produto ao carrinho ativo. Recomendamos usar essa mutação em vez de mutações de propósito único como `addSimpleProductsToCart`. _Correção apresentada por Yaroslav Rogoza no pedido de pull [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* O novo `availableStores` query retorna uma lista de atributos de configuração para várias lojas disponíveis no mesmo site (com base na loja atual). Não expõe a lista de sites. Consulte [`availableStores` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html). _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL agora usa apenas um token de autorização para recuperar um tipo de usuário e sua ID. Anteriormente, a GraphQL usava os cookies de um cliente ativo para recuperar essas informações quando o token de autorização estava vazio. _Correção apresentada por Alexander Taranovsky no pedido de pull [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* Acrescentamos o [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) e [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutações para gerenciar contas de clientes. Essas novas mutações exigem objetos de entrada diferentes dos objetos `createCustomer` e `updateCustomer` mutações. Para alterar o endereço de email de um cliente, use o novo [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutação. _Correção apresentada por Michał Derlatka no pedido de pull [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* O `updateCustomer` não permite mais definir um valor inválido `INT` na variável `gender` argumento . _Correção apresentada por Alexander Taranovsky no pedido de pull [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* Você pode usar o `subscribeEmailToNewsletter` mutação para assinar clientes a um boletim informativo. Consulte [`subscribeEmailToNewsletter` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html). _Correção apresentada por Alexander Taranovsky no pedido de pull [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* Foi removida a lógica redundante no `setShippingMethodsOnCart` resolvedor de mutação. _Correção apresentada por Alexander Taranovsky no pedido de pull [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* Adição da cobertura de teste para o `Please provide Email of sender` erro associado ao `sendEmailToFriend` mutação. _Correção apresentada por Alexander Taranovsky no pedido de pull [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* O `products` agora retorna rótulos de opção de atributo do produto para a visualização de loja padrão, conforme esperado. Anteriormente, esse query retornava os rótulos de opção do atributo do produto que estavam definidos para o Administrador. _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* As agregações de atributos personalizados agora retornam valores de opções específicos da loja. _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* Os intervalos de preço que são retornados em uma agregação de produto agora podem ser somente numéricos (sem curingas permitidas). _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* O `categoryList` query agora retorna a resposta correta ao usar fragmentos. _Correção apresentada pela Ulzii no pedido de pull [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* A pesquisa de produto GraphQL agora considera as permissões de categoria configuradas. Anteriormente, a pesquisa de produto ignorava o **Habilitar** definição (**Lojas**  >  **Configuração**  >  **Catálogo**  >  **Catálogo** > **Permissões de categoria**). _Correção apresentada por Petkovski Marjan no pedido de pull [28757](https://github.com/magento/magento2/pull/28757) e pedido de pull 271 em acordo de recompra privado`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* Agora você pode adicionar um produto a um carrinho usando `addSimpleProductToCart` quando outros itens no carrinho estiverem esgotados. Anteriormente, o aplicativo retornava este erro: `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* GraphQL padrão `Category` O método agora classifica por posição de categoria conforme esperado. _Correção apresentada por Derrik Nyomo no pedido de pull [29301](https://github.com/magento/magento2/pull/29301)_. [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* Adição de suporte para listas de desejos no Magento Open Source. Você pode [adicionar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) para, [atualizar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) em, e [remover itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) de uma lista de desejos. _Correção apresentada por Eduard Chitoraga no pedido de pull [28205](https://github.com/magento/magento2/pull/28205)_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* Acrescentamos o [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) e [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutações para gerenciar contas de clientes. Essas novas mutações exigem objetos de entrada diferentes dos objetos `createCustomer` e `updateCustomer` mutações. Para alterar o endereço de email de um cliente, use o novo [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutação.

* Adição de suporte ao GraphQL Vault para o [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) método de pagamento. _Correção enviada por Oleh Usik na solicitação de pull [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* GraphQL atualizado [`storeConfig` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) para incluir novas configurações do cliente. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adicionado o [`resetPassword` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adicionado o [`resetPassword` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adicionado o [`requestPasswordResetEmail` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html), que aciona o email de redefinição de senha para o endereço de email fornecido. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Tópicos adicionados ou atualizados no Klarna GraphQL em [Método de pagamento de Klarna](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) e[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### Imagens

<!-- ENGCOM-7691-->

* A marcação de HTML para imagens em miniatura foi aprimorada. _Correção enviada por Tu Nguyen na solicitação de pull [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### Importar/exportar

<!-- MC-35479-->

* O `error_report.csv` O arquivo agora é baixado com conteúdo e está disponível dentro do `var/import_history/` como esperado. Anteriormente, esse arquivo não era gerado após a importação.

<!-- ENGCOM-7616-->

* A importação de um produto usando um arquivo CSV agora gera um `error_report.csv` como esperado. Anteriormente, o aplicativo gerava o arquivo, mas o removia após a conclusão da importação. _Correção enviada por Vadim Malesh em solicitação de pull [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* Remoção de importações de classe redundante em toda a base de código. _Correção enviada por Oleh Usik na solicitação de pull [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* O aplicativo agora importa com êxito endereços de clientes que contêm uma região para um país que não tem regiões definidas. Anteriormente, o aplicativo exibia esse erro: `Please enter a valid region`.

<!-- MC-33277-->

* O aplicativo agora carrega o conjunto correto de atributos da entidade quando um comerciante seleciona um tipo de entidade ao programar uma nova exportação.

<!-- MC-32956-->

* A posição dos produtos no `catalog_category_product` agora a tabela é atualizada conforme esperado quando um administrador cria um produto no Administrador e o atribui a uma categoria. Anteriormente, o valor 0 sempre era atribuído à posição dos novos produtos.

<!-- MC-34939-->

* Os dados do cliente agora são exportados com êxito do Administrador e a grade de dados de exportação exibe os dados do cliente conforme esperado. Anteriormente, ocorria um erro relacionado à alocação de memória durante a exportação.

<!-- MC-34657-->

* Arquivos CSV importados agora capturam informações relacionadas do produto conforme esperado. Anteriormente, as informações do produto relacionado não eram carregadas consistentemente na primeira vez que o arquivo CSV era importado.

<!-- MC-37424-->

* Remoção de parâmetros de construção não utilizados em `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Índice

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` agora lida corretamente com padrões de tags grandes ao executar uma `PURGE`. `sendPurgeRequest` foi refatorado para lidar com uma matriz de tags em vez de exigir que o chamador use `implode()`. _Correção apresentada por Matthew O&#39;Loughlin no pedido de pull [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* Os indexadores compartilhados agora mostram o status de **valid** após executar `bin/magento indexer:status` após reindexação. Anteriormente, os indexadores compartilhados tinham um **inválido** status após um reíndice completo.

### Infraestrutura

<!-- MC-37243-->

* Problemas ao carregar páginas de catálogo e produto em implantações que executam o PHP 7.4.9 não ocorrem mais. Anteriormente, o aplicativo exibia esse erro ao tentar carregar o catálogo e as páginas do produto: `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* Todas as exceções que ocorrem quando layouts são renderizados no modo de produção agora são registradas no arquivo de log de exceção (`var/report`). Anteriormente, o aplicativo registrava essas mensagens no log do sistema como problemas críticos.

<!-- ENGCOM-7154-->

* As expressões regulares agora funcionam adequadamente para páginas grandes como resultado de um aumento no `ipcre.backtrack_limi`t e `pcre.recursion_limit` para aproximadamente 100000. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* A geração de interceptores foi melhorada. `} else {` as declarações foram retiradas dos interceptores e `array_map` foi substituído `foreach`. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* A criação da matriz agora é consistente em toda a classe (`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`). _Correção enviada por Nathan de Graaf no pedido de pull [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* Os plug-ins foram migrados da estrutura para seguir a prática recomendada de proibição de plug-ins no namespace Framework. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* Agora você pode usar o novo `UrlFilterApplier` componente para aplicar filtros no produto,`cms_page`e `cms_block` grades usando o parâmetro de URL do GET. _Correção enviada por Gabriel da Gama em solicitação de pull [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* O aplicativo não lança mais um `Undefined class constant` quando um interceptor é gerado. _Correção apresentada por Vova Yatsyuk no pedido de pull [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* Os dados do formulário agora persistem quando o aplicativo lança uma exceção de integração ao salvar uma integração usando um nome que já está em uso. _Correção enviada por Aditya Yadav em solicitação de pull [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* O aplicativo não trunca mais `X-Forwarded-For` até 32 caracteres. _Correção enviada por Ihor Sviziev na solicitação de pull [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* A lógica que verifica se um redirecionamento é interno agora funciona corretamente no Administrador ao usar um domínio de Administrador personalizado. Anteriormente, os problemas com essa lógica resultavam em muitos redirecionamentos de administrador para a página inicial da loja padrão. _Correção enviada por Vadim Malesh em solicitação de pull [2906](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* Problemas com o `styles-old.less` O arquivo foi eliminado e a impressão não identifica mais os erros. _Correção enviada por Tu Nguyen na solicitação de pull [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` foi refatorado. _Correção apresentada por Vitaliy Ryaboy em pedido de pull [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` O foi refatorado para melhorar a legibilidade da classe. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* O arquivo README para o servidor Web integrado foi atualizado para incluir todos os parâmetros de Elasticsearch. _Correção apresentada por Yevhenii Dumskyi no pedido de pull [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* O `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` agora retorna um valor como esperado. Anteriormente, esse plug-in não retornava um valor e, como resultado, salvar uma visualização da loja resultava em um erro. _Correção enviada por Pieter Hoste na solicitação de pull [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* Adição do seguinte suporte para métodos mágicos para `DataObject`:

   * nova extensão para oferecer suporte a `get/set/has/uns` métodos mágicos (com utilização de `__call`)
   * suporte para SessionManager, que encaminha todas as chamadas para o contêiner DataObject
   * cobertura de teste para extensões
   * testes atualizados para verificação de erro filtrado
   * nível de verificação de PHPStan aumentado de 0 para 1. _Correção apresentada por Oleksandr Kravchuk no pedido de pull [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` pode ser mais do que uma string. A restrição de `magentoConfigFixture` somente para string foi o resultado inadvertido de uma solicitação de pull anterior e foi revertido. _Correção apresentada por Kristof, Fooman em solicitação de pull [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* O `convertConfigTimeToUtc` O método não gera mais um erro fatal devido ao envio de parâmetros incorretos para o `Phrase` construtor. _Correção apresentada por Kos Rafał em pedido de pull [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* Os filtros de preço agora funcionam como esperado nos dados de grade quando `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` e `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` retornar uma matriz com índices que contêm `from` ou `to` dados da string. Anteriormente, o aplicativo exibia esse erro: `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Correção enviada por Nikita Sarychev em solicitação de pull [29.214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* Adição de um ponto de extensão para oferecer suporte à adição de HTML à página de categoria. Isso corrige um erro que foi introduzido por uma solicitação de pull anterior. _Correção enviada pelo iGerchak na solicitação de pull [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### Navegação em camadas

<!-- MC-25043-->

* A barra lateral de navegação em camadas agora mostra atributos booleanos com ambas as opções (**sim**/**não**) e contagens de produto correspondentes. Anteriormente, a navegação em camadas não retornava um **não** opção para atributos booleanos em implantações usando Elasticsearch.

<!-- ENGCOM-7493-->

* O filtro de navegação em camadas de amostra agora é consistente com os filtros padrão usados no Magento Open Source. _Correção apresentada por Bartłomiej Szubert no pedido de pull [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### Registro

<!-- ENGCOM-7692-->

* Todos os erros de referência quebrados agora são registrados quando as implantações estão somente no modo desenvolvedor. Anteriormente, um erro era registrado para implantações no modo de produção, também, o que gerava registros de erros de log. _Correção apresentada por Bartłomiej Szubert no pedido de pull [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### Galeria de Mídia

<!-- ENGCOM-8014-->

* A interface do usuário de configuração da Galeria de mídia (Administrador) **Lojas**  >  **Configuração**  >   **Avançado**  >  **Sistema** ) foi reorganizada. _Correção enviada pelo Shankar Konar na solicitação de pull [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* Foram adicionados testes para cobrir a **Usado em** links para uma imagem na galeria de mídia. _Correção apresentada por Nazar Klovanych no pedido de pull [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* O `AdminSubmitAdvancedInventoryFormActionGroup` , `AdminClickOnAdvancedInventoryLinkActionGroup`e  `AdminSetStockStatusConfigActionGroup` grupos de ação agora são usados em testes de acordo com as práticas recomendadas. _Correção enviada por Oleh USIA em solicitação de pull [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` agora é usada para pesquisa na grade do produto. _Correção enviada por Oleh Usik na solicitação de pull [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` agora é usado para clicar em **Concluído** no pop-up Categorias de pesquisa . _Correção enviada por Oleh Usik na solicitação de pull [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` O agora é usado para substituir uma sequência de ações que é usada para o logon inicial do cliente da loja. _Correção apresentada por Sathish Subramanian no pedido de pull [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` O foi refatorado para atender às práticas recomendadas do MFTF. _Correção enviada por Kate Kyzyma em solicitação de pull [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* Os nomes de teste foram alterados para atender às convenções MFTF. _Correção enviada por Evgeny Levinsky na solicitação de pull [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### Novos grupos de ação

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_Correção enviada por Oleh Usik na solicitação de pull [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` e `AdminProductFormCategoryNotExistInCategoryListActionGroup` _Correção apresentada por Alexander Steshuk no pedido de pull [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [2913](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [2907](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### Novos testes

<!-- ENGCOM-7600 -->

* Adição de um teste para excluir uma página CMS como um usuário administrador. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* Adicionado o `StorefrontShareCustomerWishlistActionGroup` teste para compartilhamento da lista de desejos do cliente com endereços de email inválidos. O teste existente para compartilhamento da lista de desejos (`StorefrontShareWishlistEntityTest`) foi refatorado. `StorefrontCustomerShareWishlistActionGroup` foi substituída.

<!-- ENGCOM-7682 -->

* Adição de um teste para verificar a implementação do **Limite esquerdo de apenas X** configuração. _Correção enviada por Oleh Usik na solicitação de pull [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### Informativo

<!-- MC-34714-->

* Exportar a lista de assinantes de boletim informativo usando o `EXCEL XML` agora resulta na exportação de todas as linhas conforme esperado. Anteriormente, os dados exportados incluíam apenas o valor de paginação da página, não todas as linhas.

<!-- ENGCOM-7522-->

* Os emails de assinatura do boletim informativo agora usam as mesmas tags de HTML que outros emails relacionados ao boletim informativo. _Correção apresentada por Paweł Tylek no pedido de pull [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* Adição de um teste para excluir um assinante de boletim informativo como um usuário administrador. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* Foram adicionados testes para subscrição do boletim informativo para convidados com uma opção não permitida nas instruções de configuração. Este teste substitui obsoleto `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` e `StorefrontCreateNewSubscriberActionGroup`. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### Pedidos

<!-- ENGCOM-7858-->

* O `GetAssetIdByContentFieldInterface` e a sua aplicação `MediaContent` Agora, os módulos permitem que a integração com a Adobe Stock estenda `MediaGallery` funcionalidade de filtro. _Correção enviada por Gabriel da Gama em solicitação de pull [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* O `CustomerAddressId` valores para um cliente recém-criado agora são validados entre aspas. _Correção apresentada por Andrii Kalinich no pedido de pull [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* O status do pedido de um aviso de crédito com total zero agora é `Closed`. Anteriormente, o aplicativo relatava o status do pedido como `Complete`. _Correção apresentada por Andrii Kalinich no pedido de pull [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### Métodos de pagamento

<!-- MC-34363-->

* O aplicativo agora exibe uma mensagem que solicita a inserção de dados obrigatórios do cartão de crédito ao clicar em **Enviar** para uma ordem de administrador sem inserir informações de pagamento válidas. Anteriormente, o validador do cartão Braintree não gerava um erro quando os campos de entrada de pagamento eram inválidos e a página ficava inativa.

<!-- MC-33494-->

* Agora é possível alterar o método de entrega de um pedido criado em Admin para um cliente cuja conta tem um cartão de crédito armazenado (Braintree). Anteriormente, quando você selecionava um método de envio diferente, o cartão armazenado não era selecionado e o aplicativo não colocava o pedido.

#### PayPal

<!-- MC-33879-->

* A página Revisão do pedido do fluxo de trabalho de finalização agora exibe a quantia de entrega correta para PayPal por meio de ordens de Braintree para as quais o método de entrega foi alterado durante o check-out. Anteriormente, quando um cliente alterava o método de entrega na página Revisão de Pedido de Pagamento do fluxo de trabalho de finalização, o aplicativo não atualizava o total do pedido com o método correto.

<!-- MC-34152-->

* Os comerciantes agora podem cancelar pedidos que foram autorizados usando o PayPal. Anteriormente, o aplicativo não cancelava o pedido e exibia este erro: `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* O aplicativo não esvazia mais seu carrinho quando você cancela um pedido fechando a janela pop-up de pagamento PayPal após concluir outro pedido pela primeira vez.

### Desempenho

* Três novas configurações suportam uma diminuição no consumo de CPU da fila de consumidores. Esses parâmetros opcionais fornecem maior controle sobre os consumidores e economizam recursos do servidor. Consulte [Configurar filas de mensagem](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para uma descrição do `maxIdleTime`, `sleep`e `onlySpawnWhenMessageAvailable` parâmetros.

<!-- MC-31617-->

* A configuração da lista de plug-ins agora é gerada durante a execução do `di:compile` comando. Essas informações de configuração são gravadas em pastas de metadados geradas com base no escopo. Anteriormente, essas informações eram armazenadas no cache. As melhorias de desempenho resultantes incluem:

   * O tamanho do cache de rede diminuiu
   * O tempo de execução de muitos cenários foi aprimorado.

<!-- ENGCOM-7290-->

* O aplicativo agora carrega o widget de controle deslizante apropriado sob demanda, o que melhorou o carregamento da página. A personalização do widget de controle deslizante de toque foi movida para um arquivo separado, para que possa ser carregada somente em dispositivos compatíveis. O tipo de widget de controle deslizante apropriado agora é carregado somente quando a vinculação de intervalo é realmente usada na página. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* O desempenho do check-out com vários pedidos simultâneos foi aprimorado.

<!-- MC-25062-->

* Os bloqueios não ocorrem mais quando o processo de importação executa uma inserção em massa e o processo de reindexação executa simultaneamente uma inserção grande a partir da seleção. Anteriormente, o aplicativo exibia esse erro: `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### Resenhas

<!-- MC-33405-->

* Uma chave exclusiva para `entity_pk_value-entity_type-store_id` foi adicionado ao `review_entity_summary` tabela, que impede a criação de linhas duplicadas para a mesma ID de produto (`entity_pk_value`). Anteriormente, essa falta de chave exclusiva resultava em linhas duplicadas para a mesma ID de produto e erros de SQL.

### Vendas

<!-- MC-35675-->

* O aplicativo não atribui mais um status de `Complete` após faturar uma ordem que exija pagamento zero.

<!-- MC-35888-->

* O email Nova Remessa gerado pela API REST agora contém as mesmas informações de envio e de cliente que as remessas criadas manualmente do Administrador. Anteriormente, esse email não continha o nome do cliente, as informações de rastreamento, os produtos solicitados e outras informações do pedido.

<!-- MC-35837-->

* Os nomes de usuário convidados agora estão visíveis como esperado em emails relacionados a fatura e remessa quando os emails são carregados ou personalizados do Administrador.

<!-- MC-35707-->

* A fatura PDF agora é traduzida para o idioma da exibição de loja onde o pedido foi feito. Anteriormente, a fatura do PDF era traduzida no idioma do Administrador.

<!-- MC-35858-->

* Agora é possível emitir um reembolso conforme esperado na página de aviso de crédito. [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* Nomes de região localizados exibidos na página Ordem de loja agora são traduzidos corretamente. Anteriormente, o nome da região não era baseado na localidade especificada, a menos que fosse editado no Administrador.

<!-- MC-35633-->

* Remessas criadas por meio do POST `/rest/V1/shipment` O endpoint agora atualiza os pedidos corretamente. Anteriormente, o aplicativo criava uma entrega, mas o status da entrega permanecia no estado de processamento.

<!-- ENGCOM-7639 -->

* Os avisos de crédito agora exibem o método de pagamento derivado do escopo do armazenamento no qual a ordem foi feita. Anteriormente, os avisos de crédito exibiam o nome conforme definido no escopo de armazenamento padrão. _Correção enviada por Ledian Hymetllari na solicitação de pull [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### Pesquisar

<!-- MC-31304-->

* Agora é possível pesquisar produtos por atributo na exibição Cliente do administrador usando o QuickSearch. Anteriormente, ocorria uma exceção na página de resultados da pesquisa de catálogo.

<!-- MC-32518-->

* O aplicativo agora exibe produtos configuráveis na página categoria, conforme esperado, depois que você adiciona um atributo de produto.

<!-- MC-33952-->

* Os resultados de Elasticsearch agora incluem os valores corretos para cada opção de atributo de exibição de loja. Se uma `Dropdown` ou `Multiple Select` tem um valor de opção diferente na exibição de loja não padrão do que na exibição de loja padrão, o Elasticsearch agora indexa esse valor ou retorna o produto com esse valor nos resultados. Anteriormente, o Elasticsearch não indexava esse valor ou retornava o produto com esse valor nos resultados.

<!-- MC-35013-->

* A pesquisa por SKU agora funciona como esperado na pesquisa avançada com o Elasticsearch. Anteriormente, quando você tentava pesquisar por SKU, o aplicativo exibia esta mensagem de erro: `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* A pesquisa avançada não permite mais que os compradores filtrem em preços negativos. _Correção apresentada por Rohan Hapani no pedido de pull [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* Agora, os valores de escopo são redefinidos conforme esperado no formulário Novo grupo de sinônimos . _Correção apresentada por Sathish Subramanian no pedido de pull [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### Envio

<!-- MC-34734-->

* O aplicativo agora calcula as taxas da tabela de remessa corretamente após a atualização. Anteriormente, as taxas da tabela de entrega eram calculadas com base no preço líquido, o que excluía o IVA.

<!-- MC-33737-->

* O aplicativo agora exibe as taxas de entrega na moeda correta no fluxo de trabalho de check-out de ordens especificando FedEx como o método de entrega.

<!-- MC-33267-->

* PDF de várias páginas de rótulos de envio para pedidos enviados por UPS agora exibem a contagem correta.

<!-- MC-35514-->

* Os problemas com os componentes JavaScript da página Criar pacotes foram resolvidos. Anteriormente, o aplicativo não exibia a variável **Criar etiqueta de remessa** caixa de seleção nesta página e não foi possível criar um rótulo de envio para um pedido existente.

### Mapa do site

<!-- ENGCOM-7924-->

* O mapa do site em `robots.txt` O agora é específico da loja. _Correção enviada por Vadim Malesh em solicitação de pull [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* Agora, os valores codificados são evitados corretamente na variável `sitemap.xml` arquivo. Anteriormente, ao incluir caracteres codificados em um nome de produto ou título de imagem, o mapa de site gerado era inválido.

### Loja

<!-- MC-35853-->

* A exclusão de uma visualização de armazenamento criada anteriormente não resulta mais em um erro em implantações com uma configuração de banco de dados dividida. Anteriormente, o aplicativo lançava uma exceção.

<!-- MC-32634-->

* Agora é possível exportar `config.php` e o código de site padrão de um site para instalar e configurar o aplicativo em um segundo site em uma implantação de vários sites. Anteriormente, a loja e a exibição padrão desapareciam após a exportação, e ocorreram erros na loja.

### Swagger

<!-- ENGCOM-7720-->

* Agora você pode gerar um token de cliente com o Swagger. Anteriormente, o Swagger não gerava um código de resposta quando informações válidas de acesso do cliente eram inseridas e o aplicativo exibia esse erro: `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _Correção enviada por Vadim Malesh em solicitação de pull [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### Amostras

<!-- ENGCOM-7845-->

* Produtos configuráveis com amostras agora mostram o preço da camada quando um comprador clica **Editar** no carrinho. Anteriormente, o aplicativo não exibia os preços da camada no carrinho antes do check-out. _Correção apresentada por Sathish Subramanian no pedido de pull [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* O aplicativo agora exibe os preços da camada conforme esperado para variações configuráveis do produto.

### Imposto

<!-- MC-36049-->

* O aplicativo não exibe mais um atributo de imposto fixo do produto na loja de um produto depois que um comerciante não o atribuiu do conjunto de atributos do produto.

### Teste

<!-- ENGCOM-7874-->

* Erros PHPUnit 9 foram corrigidos em testes de unidade. _Correção enviada por Anton Evers na solicitação de pull [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* Testes de unidade adicionados para aprovação de um pedido de compra feito com um desconto que já expirou colocarão um pedido no valor total e não atualizarão o total do pedido de compra. _Correção apresentada por Joan He in pull request [18º](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` O agora é abordado pelos testes de integração. _Correção enviada por jmonteros422 na solicitação de pull [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* Uma função foi adicionada a `\Magento\TestFramework\TestCase\WebapiAbstract` que permite a comparação de grandes matrizes aninhadas de resultados esperados e reais em testes e permite que os testadores ignorem chaves irrelevantes no resultado real. _Correção apresentada por Jekabs no pedido de pull [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* Correção da inversão do valor esperado com o valor real em `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* Problemas com a serialização e unserialização de propriedades estáticas ao executar testes consecutivos foram resolvidos. _Correção enviada pelo Pavel Bystritsky na solicitação de pull [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* Usando `ObjectManager` para instanciar classes durante o teste, foi substituída pela nova palavra-chave em testes de unidade. _Correção apresentada por Lukasz Bajsarowicz no pedido de pull [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* Foi adicionada uma cobertura de teste para estes casos da `updateCustomer` mutação: data de nascimento inválida, endereço de email inválido e sobrenome vazio do cliente. _Correção apresentada por Alexander Taranovsky no pedido de pull [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* O `ApiFunctional TestFramework` O cliente GraphQL agora analisa os cabeçalhos corretamente. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### Tema

<!-- MC-34397-->

* Os temas adicionados nas Regras do Agente do Usuário agora são afetados conforme esperado ao executar `bin/magento catalog:images:resize`. Anteriormente, somente os temas que eram atribuídos às lojas eram afetados quando `bin/magento catalog:images:resize` foi executado.

### Tradução e localidades

<!-- MC-20372-->

* O aplicativo não gera mais um erro quando um administrador altera a variável **Data** durante a criação do produto Administrador ou salvar quando o idioma Administrador for chinês ou japonês. [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* O aplicativo agora verifica a área (frontend ou `adminhtml`) antes de renderizar a marcação de tradução em linha. Anteriormente, fazer uma chamada de API para `POST /V1/integration/admin/token` com credenciais incorretas enquanto a tradução em linha estava ativada, resulta na inclusão da marcação de tradução em linha ao redor da mensagem de erro na resposta da API. _Correção enviada por Zach Nanninga em solicitação de pull [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* As regiões búlgaras foram acrescentadas ao `directory_country_region` tabela. _Correção enviada por Nikola Lardev em solicitação de pull [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* Os títulos e botões no Administrador **Clientes**  >  **Adicionar novo endereço** e **Editar produto**  >  **Inventário avançado** modais agora podem ser traduzidos. _Correção apresentada por Sathish Subramanian no pedido de pull [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* O termo FPT agora pode ser traduzido para Admin  **Lojas**  > **Configuração**  > **Vendas**  > **Imposto**  > **Impostos fixos sobre produtos**. _Correção enviada por Vadim Malesh em solicitação de pull [28108](https://github.com/magento/magento2/pull/28108)_. [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* O **Entregar aqui** O rótulo do botão no modal de endereço de entrega do workflow de check-out foi alterado para corresponder ao caso do camel usado para outros botões. Esse caso agora corresponde ao caso usado nos arquivos de tradução. Anteriormente, devido à incompatibilidade no caso, esse rótulo não era traduzido. _Correção enviada pelo WK na solicitação de pull [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### interface

<!-- ENGCOM-7514-->

* O link da política de privacidade e cookie no rodapé da página agora é exibido como um link ativo quando a página Privacidade e política de cookies é exibida. _Correção apresentada por Sathish Subramanian no pedido de pull [2804](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* Correção do alinhamento incorreto do cursor na área de texto Comentários da fatura associada a uma ordem que você selecionou em Administrador **Vendas** > **Pedidos**.

<!-- MC-36044-->

* A página Criar novo pedido agora é exibida **Adicionar produtos por SKU** e **Adicionar produtos** botões conforme esperado.

<!-- MC-35974-->

* O aplicativo agora exibe a página Editar revisão corretamente quando uma classificação de produto está disponível para o produto selecionado.

<!-- MC-35475-->

* Agora, o aplicativo exibe corretamente a página de edição Admin customer em uma iPhone que executa o Safari.

<!-- MC-35370-->

* Corrigida a rolagem desnecessária na página Criar novo pedido .

<!-- MC-35345-->

* Clicando diretamente no botão **Taxas de imposto de exportação** na página Adicionar Nova Regra de Imposto (**Lojas**  >  **Regras de Imposto**) agora baixa o `tax_rates.csv` como esperado. Anteriormente, os comerciantes tinham que clicar na borda do **Taxas de imposto de exportação** botão. Esse era um problema conhecido na versão 2.4.0.

<!-- MC-35313-->

* O **Adicionar seleções ao meu carrinho** agora funciona como esperado na parte inferior do carrinho de compras. Esse era um problema conhecido na versão 2.4.0.

<!-- MC-35296-->

* O **Atualizar** botão do **Produtos visualizados recentemente** A seção da página Atividades do cliente agora funciona conforme o esperado. Anteriormente, ao clicar **Atualizar**, a lista de produtos não foi atualizada e a página foi rolada.

<!-- MC-35412-->

* O aplicativo agora exibe corretamente o ícone de calendário usado para selecionar a data de nascimento de um cliente na guia Condições de **Clientes** > **Segmentos** > **Adicionar segmento**.

<!-- MC-35658-->

* A seção de resumo do check-out do fluxo de trabalho não cintila mais quando um comprador rolar por essa página no Internet Explorer 11.x.

<!-- MC-34602-->

* O aplicativo agora exibe corretamente o widget Ordem por SKU na página Categoria da loja. Anteriormente, o código de HTML para esse widget não era renderizado e o aplicativo não exibia a variável **Carregar uma lista de SKUs** link .

<!-- MC-37444-->

* Componentes da interface do usuário que foram desativados usando `this.disabled(true)` não aparece mais na loja. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* O aplicativo agora exibe o widget de produtos visualizados recentemente corretamente na exibição móvel. _Correção enviada por Tu Nguyen na solicitação de pull [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* Alterar a posição de um produto de Admin agora é refletida na posição do produto na loja. _Correção apresentada por Oleg Aleksin no pedido de pull [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* O estilo do formulário de logon agora é consistente com o estilo em outros formulários do tema em branco. Estilos desnecessários que definem a largura para campos de entrada de quebra de controle de contêiner foram removidos. _Correção enviada por Tu Nguyen na solicitação de pull [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* O **OK** O botão na janela pop-up de confirmação de produto de exclusão do minicarrinho agora se comporta como esperado. _Correção enviada por Tu Nguyen na solicitação de pull [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* Os elementos da galeria de produtos não piscam mais durante o carregamento da página. _Correção apresentada por Mateusz Krzeszowiak no pedido de pull [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* A classe CSS que controla a largura do campo agora é aplicada conforme esperado para o elemento Hora de início em todo o Administrador. _Correção enviada pelo Shankar Konar na solicitação de pull [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* O rótulo de texto Termos e condições agora pode exibir sequências de texto maiores corretamente. _Correção apresentada por Bartłomiej Szubert no pedido de pull [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* O título da página de falha do pedido foi reescrito para precisão. Anteriormente, quando um comprador cancelava um pedido, o aplicativo exibia uma página com este título: `We received your order!`. _Correção apresentada por Angelo Romano no pedido de pull [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* O número total de itens cancelados na página de exibição de pedido cancelado agora é identificado corretamente na página de exibição de pedido cancelado. Anteriormente, esse campo era rotulado **Total Vencido**. _Correção apresentada por Madhu Rajawat em pedido de pull [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* O botão de alternância na página criar produto configurável agora funciona como esperado. _Correção enviada por Tu Nguyen na solicitação de pull [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* O ícone de bloco de propriedades avançadas do atributo na página Propriedades avançadas do atributo agora se comporta conforme esperado. _Correção enviada por Tu Nguyen na solicitação de pull [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* A seção Admin da página de configuração do sistema agora é expandida para exibir os campos obrigatórios conforme esperado ao tentar salvar as configurações de um novo módulo. _Correção apresentada por Bartłomiej Szubert no pedido de pull [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* Comportamento corrigido da lente de aumento quando o modo está definido como `inside`. _Correção enviada por Sean van Zuidam em solicitação de pull [2907](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* Correção da largura do campo de entrada distrativamente longa que resultava quando um comprador inseria um endereço de email inválido no campo de assinatura do rodapé da página. _Correção enviada por Dipesh Rangani em solicitação de pull [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* Um `Uncaught ReferenceError` O erro não aparece mais no console dev ao adicionar uma nova tag e mover o cursor do mouse sobre ela. _Correção apresentada por Nazar Klovanych no pedido de pull [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### Regravações de URL

<!-- MC-34483-->

* Mover uma exibição de loja para um site diferente não redefine mais os URLs. Anteriormente, o aplicativo gerava CMS e URLs de produto de maneira incorreta.

<!-- MC-33028-->

* O aplicativo agora preserva as substituições do URL do catálogo existente, conforme esperado, quando uma exibição de loja é atribuída a uma loja diferente. Anteriormente, o aplicativo excluía as regravações de URL específicas da loja.

### Verniz

<!-- ENGCOM-7761-->

* Reiniciar o Varnish não resulta mais em erros 503. _Correção enviada por Ihor Sviziev na solicitação de pull [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### Cofre

<!-- MC-34674-->

* O aplicativo não salva mais os números de cartão de crédito quando a variável **Salvar para uso posterior** a caixa de seleção na seção pagamento do fluxo de trabalho de check-out não está selecionada.

### Estrutura da API da Web

<!-- MC-35838-->

* Os comerciantes com vários sites agora podem usar a REST API para criar e atualizar produtos, preservando a herança de imagem e de função de imagem. Anteriormente, quando um comerciante usava a REST API para criar e atualizar produtos e um produto era atualizado para exibição de loja, as funções de imagem padrão eram carregadas e salvas para essa exibição de loja. Como resultado, as funções de imagem de exibição de loja pararam de herdar do escopo padrão após a atualização.

<!-- MC-36419-->

* Uma conta de usuário de integração sem escopo agora pode acessar um recurso por meio da API REST quando permissões de recurso permitem acesso.

<!-- MC-35975-->

* Agora, os filtros de critérios de pesquisa funcionam como esperado para atributos de produto usados durante a criação de um produto configurável. [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* A ID do grupo de clientes agora é validada para o POST `/rest/V1/customers` solicitações. Anteriormente, o aplicativo não exibia uma mensagem de erro quando você usava um valor inválido `group_id` nestes pedidos. _Correção enviada por Vadim Malesh em solicitação de pull [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* As sessões PHP não são criadas por padrão para chamadas REST anônimas. Anteriormente, as sessões eram iniciadas mesmo quando desnecessárias. _Correção apresentada por Maciej Pawłowski no pedido de pull [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* O uso de vários endpoints REST para atualizar pedidos que contêm a opção personalizada não exclui mais as informações da opção personalizada. Anteriormente, os valores em `info_buyRequest` foram excluídos. _Correção enviada por Vadim Malesh em solicitação de pull [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* Uso do GET `V1/customers/me` agora honras **Compartilhar contas de cliente** configuração (Admin **Lojas** >  **Configuração**  >  **Clientes**  >  **Configuração do cliente**  > **Opções de compartilhamento de conta**) ao recuperar informações do usuário. _Correção enviada pelo Pavel Bystritsky na solicitação de pull [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* Atributos de extensão relacionados a endereços podem ser definidos como matrizes de dados. Anteriormente, o aplicativo exibia um erro quando uma solicitação POST continha  `extension_attributes` foi enviado para `estimate-shipping-methods`. Este erro, que foi introduzido por uma confirmação anterior, afetou qualquer atributo de extensão definido em `Magento\Quote\Api\Data\AddressInterface` que não eram objetos. _Correção apresentada por Alexander Menk no pedido de pull [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* Agora é possível especificar um único campo ao atualizar um cliente com o PUT `V1/customers/:id` endpoint . Anteriormente, o ponto de extremidade exigia que você especificasse o email do cliente e outros campos necessários para criar um cliente. _Correção enviada por Vadim Malesh em solicitação de pull [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### Lista de desejos

<!-- MC-35622-->

* Os clientes agora podem alterar a quantidade de um produto em uma lista de desejos da própria lista de desejos. Anteriormente, o aplicativo não atualizava a quantidade do produto e não exibia uma mensagem.

<!-- MC-35618-->

* Os clientes agora podem alterar a quantidade de um produto agrupado em uma lista de desejos na própria lista de desejos. Anteriormente, o aplicativo não atualizava a quantidade do produto ou exibia uma mensagem.

<!-- ENGCOM-7580-->

* Enchimentos de polietileno para `Map`, `WeakMap`, `FormData`e `MutationObserver` agora são carregadas somente conforme necessário. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* O processo de atualização da lista de desejos agora oferece suporte à atualização simultânea de um item da lista de desejos e sua descrição. _Correção apresentada por Eduard Chitoraga no pedido de pull [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* Adição de um teste para compartilhar a lista de desejos de um cliente com mais do que o número permitido de emails. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* Agora, os administradores podem configurar um produto configurável que foi adicionado por um cliente a uma lista de desejos de uma loja não padrão. Anteriormente, quando o cliente também tinha adicionado o produto configurável de uma loja não padrão, o aplicativo exibia um erro.

<!-- ENGCOM-7660-->

* Adição de um teste para compartilhar a lista de desejos de um cliente com mais do que o número permitido de emails. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* Adição de um teste para excluir itens da lista de desejos de um cliente como um usuário administrador. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* Adição de um teste para desativar a funcionalidade da lista de desejos. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* Adição de um teste para usar endereços de email inválidos ao compartilhar listas de desejos de clientes. `StorefrontShareWishlistEntityTest` foi refatorado. `StorefrontCustomerShareWishlistActionGroup` foi substituída. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* Adição de um teste para compartilhar a lista de desejos de um cliente que excede o limite de comprimento de texto permitido. _Correção enviada por Dmitry Tsimbal na solicitação de pull [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## Problemas conhecidos

**Problema**: O novo recurso CAPTCHA para check-out não funciona como esperado na página Inserir pedido ao usar provedores de pagamento de terceiros. Os comerciantes que estiverem executando a versão 2.3.6 ou 2.4.1 e tiverem ativado a proteção CAPTCHA na página de vitrine de Colocar Pedido verão esse erro ao fazer check-out usando um provedor de pagamento de terceiros, como o PayPal: `Please provide CAPTCHA code and try again`. **Solução alternativa**: Uma correção para esse problema está disponível. Consulte a [Magento Open Source v2.3.6/2.4.1 CAPTCHA no check-out não está funcionando](https://support.magento.com/hc/en-us/articles/360051235772) Artigo da Base de conhecimento. Uma correção também será incluída em nosso próximo patch trimestral (Q12021).

**Problema**: Usuários sem privilégios de administrador não podem configurar seu acesso pessoal 2FA no momento. O 2FA inclui duas funções ACL. Uma função afeta a configuração global do sistema e só é necessária ao configurar o sistema. A segunda função da ACL afeta contas de usuário individual 2FA. Um usuário administrador deve configurar esse segundo tipo de ACL do 2FA. **Solução alternativa**: Depois que o usuário fizer logon e visualizar a tela Acesso negado, ele poderá visitar `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` para forçar a configuração. Observação: Não é recomendável desativar as configurações de segurança. No entanto, essa solução alternativa só é eficaz quando chaves secretas de URL de administrador estão desativadas.

**Problema**: O **Criar uma conta** O botão na página Criar nova conta permanece desativado se um comprador tiver inserido dados inválidos. Isso evita que os compradores tentem criar uma conta novamente após cometerem um erro. **Solução alternativa**: Aplicar patch `MC-38509`. Uma correção também será incluída em nossas próximas versões trimestrais (2.4.2, 2.4.1-p1 e 2.3.6-p1), que estão programadas para lançamento no primeiro trimestre de 2021. Consulte a [2.4.1 e 2.3.6 criar um hotfix desativado do botão de conta](https://support.magento.com/hc/en-us/articles/360051130212) Artigo da Base de conhecimento.  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**Problema**: Os comerciantes não podem fazer logon no dotdigital a partir do Admin no Safari quando o dotdigital está ativado. Consulte a [É impossível fazer logon no dotdigital por meio do painel de administração quando a conta dotdigital está habilitada](https://support.magento.com/hc/en-us/articles/360050092291) Artigo da Base de conhecimento.

**Problema**: A validação de endereço de vértice não funciona durante o pagamento quando o comprador seleciona um endereço de entrega que difere do endereço de faturamento. O problema será corrigido na versão 2.4.2. Consulte o [2.4.1 problema conhecido: A mensagem de validação de endereço vertical não desaparece após a atualização do endereço](https://support.magento.com/hc/en-us/articles/360050139631) Artigo da Base de conhecimento.

**Problema**: O aplicativo exibe uma página vazia quando um comerciante salva um formulário dotdigital Page Builder no navegador Safari. **Solução alternativa**: Recarregue a página para aplicar as alterações. Consulte a [2.4.1 problema conhecido: página vazia após salvar o formulário dotdigital Page Builder](https://support.magento.com/hc/en-us/articles/360049819092) Artigo da Base de conhecimento.

**Problema**: Em determinadas condições, o aplicativo faz logon automaticamente em clientes para contas do Amazon usadas anteriormente, solicitando que façam logon durante o check-out com o Amazon Pay. Consulte a [2.4.1 problema conhecido: não é possível alterar a conta do Amazon no Google Chrome](https://support.magento.com/hc/en-us/articles/360049814152) Artigo da Base de conhecimento.

**Problema**: O aplicativo exibe brevemente uma mensagem de erro na página de faturamento do fluxo de trabalho de check-out quando o pagamento de Braintree PayPal e a entrega de vários endereços são selecionados. Consulte a [2.4.1 problema conhecido: erro ao aparecer no checkout com o Braintree do PayPal](https://support.magento.com/hc/en-us/articles/360050253211) Artigo da Base de conhecimento.

**Problema**: O aplicativo exibe uma mensagem de erro não informativa quando um cliente convidado tenta colocar um pedido com PayPal por Braintree quando o check-out do convidado está desativado. Consulte a [2.4.1 problema conhecido: mensagem de erro não informativa durante o check-out do convidado usando Paypal pelo Braintree](https://support.magento.com/hc/en-us/articles/360050368111) Artigo da Base de conhecimento.

## Contribuições comunitárias

Estamos gratos à comunidade Magento Open Source mais ampla e gostaríamos de reconhecer os seus contributos para esta versão. Veja as seguintes maneiras de saber mais sobre as contribuições da comunidade para nossas versões atuais:

* Se um membro da comunidade tiver fornecido uma correção para esta versão, identificamos a correção na seção Edição Fixa dessas notas com a frase, &quot;*Correção fornecida pelo membro da comunidade*&quot;.

* A equipe de engenharia da Comunidade [Colaboradores de Magento](https://magento.com/magento-contributors) mantém uma lista dos principais indivíduos e parceiros contribuintes por mês, trimestre e ano. Nessa página de Contribuidores, você pode seguir os links para suas PRs mescladas no GitHub.

### Contribuições de parceiros

O quadro a seguir destaca as contribuições dos parceiros. Essa tabela lista o Parceiro que contribuiu com a solicitação de pull, a solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### Contribuições individuais

A tabela a seguir identifica as contribuições dos membros da comunidade. Essa tabela lista as solicitações de pull externas, o número de problema do GitHub associado a ela (se disponível) e o membro da comunidade que contribuiu com a solicitação de pull.

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### Requisitos do sistema

Nossa pilha de tecnologia é baseada em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](../../../installation/system-requirements.md).

### Instruções de instalação e atualização

Você pode instalar o Magento Open Source 2.4.1 usando o Composer.

## Kits de ferramentas de migração

A Ferramenta de migração de dados ajuda a transferir os dados de armazenamento do Magento 1.x existentes para o Magento 2.x. Essa interface de linha de comando inclui funções de verificação, rastreamento de progresso, registro e teste. Para obter instruções de instalação, consulte [Instalar a ferramenta Migração de dados](../../../tools/data-migration-tool/install.md). Considere explorar ou contribuir para a variável [Repositório de migração de dados](https://github.com/magento/data-migration-tool).

O [Kit de ferramentas de migração de código](https://github.com/magento-commerce/code-migration) ajuda a transferir extensões e personalizações de loja do Magento 1.x existentes para o Magento 2.x. A interface da linha de comando inclui scripts para conversão de módulos e layouts do Magento 1.x.
