---
title: Notas de versão do Magento Open Source 2.4.1
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.1 do Magento Open Source.
exl-id: 63d04bfc-96c9-4fe3-b3c1-252f1243459a
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '14729'
ht-degree: 0%

---

# Notas de versão do Magento Open Source 2.4.1

O Magento Open Source 2.4.1 traz aprimoramentos de desempenho e segurança. Os aprimoramentos de segurança incluem suporte para o `SameSite` atributo para cookies e a adição da proteção CAPTCHA para endpoints de API relacionados a pagamentos e pedidos e a página de frente da loja Fazer pedido.

Esta versão inclui todas as melhorias na qualidade principal incluídas na versão 2.4.0, mais de 150 novas correções no código principal e mais de 15 aprimoramentos de segurança. Ele inclui a resolução de quase 300 problemas do GitHub por membros da nossa comunidade. Essas contribuições da comunidade variam desde uma pequena limpeza do código principal até melhorias significativas no GraphQL.

Todos os problemas conhecidos identificados na versão 2.4.0 foram corrigidos nessa versão.

{{bics}}

## Patch de segurança disponível

Os comerciantes agora podem instalar correções de segurança com prazo confidencial sem aplicar as centenas de correções e aprimoramentos funcionais que uma versão trimestral completa (por exemplo, 2.4.0-p1) fornece. O Patch 2.4.0.1 (Pacote do Composer 2.4.0-p1) é um patch de segurança que fornece correções para vulnerabilidades que foram identificadas na versão trimestral anterior, 2.4.0. Todos os hot fixes aplicados à versão 2.4.0 estão incluídos neste patch de segurança. A) *hot fix* O fornece uma correção para uma versão lançada que aborda um problema ou erro específico.)

Para obter informações gerais sobre patches de segurança, consulte [Introdução à Nova Versão de Patch de Segurança](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Para obter instruções sobre como baixar e aplicar patches de segurança (incluindo o patch 2.3.5-p2), consulte [Instalação de início rápido local](../../../installation/composer.md). Os patches de segurança incluem apenas correções de bugs de segurança, não as melhorias de segurança adicionais incluídas no patch completo.

## Aplicar `AC-3022.patch` continuar a oferecer a DHL como transportadora

A DHL apresentou o schema versão 6.2 e descontinuará o schema versão 6.0 em breve. Adobe Commerce 2.4.4 e versões anteriores que suportam a integração DHL suportam apenas a versão 6.0. Os comerciantes que implantarem essas versões devem aplicar `AC-3022.patch` continuar a oferecer a DHL como transportadora. Consulte a [Aplique um patch para continuar oferecendo a DHL como transportadora](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Artigo da Base de conhecimento para obter informações sobre como baixar e instalar o patch.

## Outras informações sobre a versão

Embora o código para esses recursos esteja incluído nas versões trimestrais , vários desses projetos (por exemplo, Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros para esses projetos estão documentadas nas informações de versão separadas e específicas do projeto, disponíveis na documentação de cada projeto.

## Destaques

Procure os seguintes destaques nesta versão.

### Aprimoramentos substanciais de segurança

Esta versão inclui mais de 15 correções de segurança e melhorias na segurança da plataforma. Todas as correções de segurança tiveram backport para 2.4.0-p1 e 2.3.6.

#### Mais de 15 aprimoramentos de segurança que ajudam a fechar as vulnerabilidades de execução remota de código (RCE) e criação de script entre sites (XSS)

Nenhum ataque confirmado relacionado a esses problemas ocorreu até o momento. No entanto, certas vulnerabilidades podem ser potencialmente exploradas para acessar informações do cliente ou assumir o controle de sessões de administrador. A maioria desses problemas exige que um invasor obtenha acesso ao Administrador primeiro. Como resultado, lembramos você de tomar todas as medidas necessárias para proteger seu administrador, incluindo, mas não limitado a, esses esforços: incluir na lista de permissões de IP, [autenticação de dois fatores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), o uso de uma VPN, o uso de um local único em vez de `/admin`e boa higiene de senhas. Consulte [Atualizações de segurança disponíveis para o Magento](https://helpx.adobe.com/security/products/magento/apsb20-59.html) para obter uma discussão sobre esses problemas corrigidos.

#### Aprimoramentos adicionais de segurança

Os aprimoramentos de segurança para esta versão incluem:

* **CAPTCHA** A proteção do foi adicionada às seguintes áreas de produtos:

   * Coloque a página de frente da loja de pedidos e os endpoints REST e GraphQL <!-- MC-36067-->
   * Terminais REST e GraphQL relacionados a pagamentos.<!-- MC-36064-->

   A proteção CAPTCHA para essas páginas adicionais é desativada por padrão. Ele pode ser ativado no Admin da mesma forma que outras páginas cobertas por CAPTCHA. Esta proteção foi adicionada como um mecanismo de força anti-bruto para proteger lojas contra ataques de cardação. Consulte [CAPTCHA](https://docs.magento.com/user-guide/stores/security-captcha.html).

* **Suporte para o atributo SameSite para cookies**. Para oferecer suporte à aplicação do Google Chrome do novo sistema de classificação de cookies, as classes de aplicativo que lidam com cookies foram atualizadas para oferecer suporte à `SameSite` atributo de cookie. Este atributo está definido como `Lax` por padrão, mas pode ser explicitamente substituído. <!-- MC-35389-->

* **Ferramenta Verificação de Segurança Avançada**. O Adobe fez parceria com a [Segurança Sanguine](https://sansec.io/), líder na prevenção de defasagem digital, para integrar seu banco de dados de mais de 8.700 assinaturas de ameaças à Ferramenta de verificação de segurança. Essa parceria permitirá que os comerciantes obtenham insights em tempo real sobre o status de segurança de seu site por meio da detecção proativa de malware e da redução de falsos positivos. Os comerciantes podem se registrar na ferramenta visitando https://account.magento.com/scanner. Para obter mais informações, consulte [Proteja sua vitrine eletrônica com a ferramenta Enhanced Security Scan](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) publicação do blog.

{{cve-notice}}

### Melhorias na infraestrutura

Esta versão inclui aprimoramentos na qualidade principal, que melhoram a qualidade da Estrutura e estas áreas funcionais: Conta do cliente, Catálogo, CMS, OMS, Importação/Exportação, Promoções e direcionamento, Carrinho e finalização e Preparo e Pré-visualização.

### Melhorias de desempenho

* **Redução no tamanho das transferências de rede entre Redis e Magento**. A configuração da lista de plug-ins agora é gerada durante a execução do `bin/magento di:compile` comando. Essas informações de configuração são gravadas nas pastas de metadados geradas com base no escopo. Anteriormente, essas informações eram armazenadas em cache. As melhorias de desempenho resultantes incluem uma redução no tamanho do cache de rede e no tempo de execução para muitos cenários.<!-- MC-31617-->

* **Desempenho aprimorado do consumidor da fila de mensagens**. Três novas definições de configuração suportam uma redução no consumo de CPU da fila do consumidor. Esses parâmetros opcionais oferecem maior controle sobre os consumidores e economia de recursos do servidor. Consulte [Configurar filas de mensagens](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para obter uma descrição do `maxIdleTime`, `sleep`, e `onlySpawnWhenMessageAvailable` parâmetros.

* **Tempo de execução aprimorado** para `bin/magento` comandos.

### Integração do Adobe Stock

Esta versão inclui a Integração do Adobe Stock v2.1.0.

### Nova Galeria de Mídia

A Galeria de novas mídias agora está ativada por padrão no Administrador. Os comerciantes agora podem executar essas ações em imagens na Galeria de mídia:

* Excluir imagens em massa
* Otimizar o armazenamento de mídia identificando imagens e imagens duplicadas que não são usadas na loja
* Filtrar imagens pela área de vitrine em que são usadas, incluindo conteúdo de produto e categoria e blocos de CMS
* Trabalhar com metadados de imagem
   * Exibir metadados das imagens carregadas na Galeria de mídia
   * Editar metadados da imagem (título, descrição e palavras-chave)
   * Pesquisar imagens pelos metadados

### GraphQL

Esta versão inclui a cobertura da GraphQL para os seguintes recursos:

* **Resenhas do produto**. Os clientes e hóspedes podem escrever resenhas de produtos. Os clientes podem recuperar seus históricos de análise de produtos. Consulte [Criar uma análise do produto](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) e [consulta productReviewRatingsMetadata](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) para obter informações sobre como recuperar informações sobre a infraestrutura de revisões.<!-- MC-32349-->

* **Opções de presente**. Todos os clientes e convidados podem adicionar uma mensagem de presente a seu pedido. Os clientes também podem adicionar invólucro do presente, recibos de presentes e cartões impressos ao pedido. Consulte [`setGiftOptionsOnCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) e [`updateCartItems` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html)<!-- MC-32345-->

* **Histórico de pedidos**. Todos os clientes podem exibir detalhes sobre seus históricos de pedidos, incluindo faturas, remessa e reembolsos.<!-- MC-20635-->

* **Adicionar ao carrinho**. A variável [`addProductsToCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) permite adicionar qualquer tipo de produto ao carrinho ativo. Recomendamos usar essa mutação em vez de mutações de propósito único, como `addSimpleProductsToCart`. _Correção enviada por Yaroslav Rogoza no pedido de pull [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **Métodos de pagamento armazenados**. Os clientes conectados agora podem armazenar detalhes de pagamento (incluindo cartão de crédito Braintree e Braintree com PayPal) em Minha Conta.

* **Suporte para listas de desejos no Magento Open Source**. Você pode [adicionar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) para, [atualizar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) no e [remover itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) de uma lista de desejos.

* **Melhor gerenciamento das contas do cliente**. Adicionamos o [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) e [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutações para gerenciar contas de clientes. Essas novas mutações requerem objetos de entrada diferentes do `createCustomer` e `updateCustomer` mutações. Para alterar o endereço de email de um cliente, use o novo [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutação.

* **Suporte para Payflow Pro Vault**. Adição do suporte ao GraphQL Vault para o [Fluxo de pagamento Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) método de pagamento. _Correção enviada por Oleh Usik na solicitação de pull [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* Atualização da GraphQL [`storeConfig` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) para incluir as novas definições de configuração do cliente. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adição de [`requestPasswordResetEmail` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html), que aciona o email de redefinição de senha para o endereço de email fornecido. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **Klarna GraphQL**. Tópicos adicionados ou atualizados sobre o Klarna GraphQL em [Método de pagamento de Klarna](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) e [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

Consulte a [Guia do desenvolvedor do GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) para obter detalhes sobre esses aprimoramentos.

### PWA Studio

O PWA Studio v8.0.0 apresenta novos recursos e melhorias:

* Atualizações no guia de estilo Venia que se aplicam a tokens de design, tipografia, cores, componentes principais e layouts de página. <!-- PWA-519 419-->

* Melhorias na experiência do minicarrinho Venia <!-- PWA-236-->

* Suporte inicial para várias localidades e conteúdo localizado na loja Venia <!-- PWA-295-->

* Várias melhorias na experiência da Minha conta na loja Venia <!-- PWA-247-->

Consulte [compatibilidade](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões compatíveis. Para obter informações sobre aprimoramentos e correções de erros, consulte [Versões do PWA Studio](https://github.com/magento/pwa-studio/releases).

### Quadro de testes funcionais (MFTF)

O MFTF 3.1.0 já está disponível. Consulte [Log de alterações da estrutura de teste funcional](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Extensões desenvolvidas pelo fornecedor

Consulte os seguintes artigos para obter atualizações sobre recursos e alterações desta versão:

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [Dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [Klarna](https://docs.magento.com/user-guide/payment/klarna.html)

* [Vertex Cloud](https://docs.magento.com/user-guide/tax/vertex.html)

* [Análises de produto do Yotpo](https://docs.magento.com/user-guide/marketing/yotpo-reviews-intro.html)

## Problemas corrigidos

Corrigimos centenas de problemas no código principal 2.4.1.

### Instalação, atualização, implantação

<!-- MC-36113-->

* A instalação com extensões de terceiros que têm dependências nas APIs para o módulo Store em comandos CLI não falha mais. Anteriormente, o aplicativo exibia esta mensagem de erro: `The default website isn't defined. Set the website and try again`. Esse foi um problema conhecido na versão 2.4.0.

<!-- MC-33273-->

* `bin/magento setup:di:compile` O não lança mais um erro fatal. Anteriormente, o aplicativo exibia um erro na primeira vez que esse comando era executado, mas a segunda execução resultava em uma compilação bem-sucedida.

<!-- MC-34429-->

* A atualização não falha mais quando um plug-in é declarado em `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* O aplicativo agora exibe uma mensagem de erro informativa quando alguns temas não são implantados após a execução `bin/magento setup:static-content:deploy`. Anteriormente, quando a implantação era concluída com sucesso, mas nem todos os pacotes eram implantados, o aplicativo não exibia um erro. Quando o comando é executado com o processamento paralelo habilitado e cada tema requer mais tempo para ser implantado do que o tempo máximo de execução especificado, esse comando pode ser concluído com êxito, embora os temas não sejam implantados.

<!-- MC-35001-->

* A variável **Usar padrão** caixa de seleção para pagamentos Klarna (**Lojas** > **Configuração** > **Vendas** > **Métodos de pagamento** > **Klarna**) agora permanecem verificados conforme esperado quando o escopo do site é alterado.

<!-- MC-33788-->

* A atualização não resulta mais na falha repentina do cluster Galera. Anteriormente, o cluster Galera saía abruptamente após a reindexação imediatamente após a atualização. Durante uma atualização, as tabelas de índice são alteradas e o mecanismo é alterado de `MEMORY` para `InnoDB`. Nesse ponto, o conteúdo dessas tabelas ficou fora de sincronia entre os nós do cluster Galera. [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* A desativação do módulo PageBuilder não afeta mais a renderização da página do produto. Anteriormente, os layouts personalizados na página do produto desapareciam quando o módulo do era desativado e o aplicativo exibia uma página em branco.

<!-- ENGCOM-7219-->

* Agora você pode usar `bin/magento sampledata:deploy` para implantar dados de amostra conforme esperado após instalar o Magento Open Source usando o Composer. Anteriormente, o aplicativo exibia este erro: `Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`. _Correção enviada por Andrii Beziazychnyi na solicitação de pull [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* O desempenho da loja melhorou ao eliminar o carregamento desnecessário do `Datepicker` componente. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* Execução `bin/magento setup:upgrade` O não exibe mais informações irrelevantes sobre caches. _Correção enviada por Sathish Subramanian na solicitação de pull [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* Executando `bin/magento config:show <vendor_module>/general/value` agora retorna `0` ou uma string vazia, conforme esperado. Anteriormente, retornava `Configuration for path: "vendor_module/general/value" doesn't exist`. _Correção enviada por Vadim Malesh em solicitação de pull [28549](https://github.com/magento/magento2/pull/28549)_. [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` O agora implanta todos os idiomas usados na loja e todos os idiomas configurados pelos usuários administradores quando nenhum parâmetro de idioma é definido. (`en_US` é sempre implantado por padrão.) _Correção enviada por Anton Evers em solicitação de pull [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* O aplicativo não exibe mais o menu Backup quando o recurso Backup está desativado. _Correção enviada por Eden Duong no pull request [29222](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* A inicialização do auxiliar de imagem do catálogo agora usa o modelo do produto em vez de `DataObject`. _Correção enviada por jmonteros422 na solicitação de pull [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* Agora, os usuários administradores podem salvar um campo de trabalho vazio **Duração do token do cliente (horas)** campo (Administrador **Lojas**  >  **Configurações**  >  **Serviços**  >  **OAuth**  >  **Expiração do token de acesso**). [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* A variável **Criar redirecionamento permanente para o URL antigo** A configuração agora está desativada por padrão para categorias. _Correção enviada por Vadim Malesh em solicitação de pull [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Integração do Adobe Stock

<!-- ENGCOM-7776-->

* As imagens na grade de imagens do Adobe Stock agora estão alinhadas corretamente após a limpeza dos filtros. _Correção enviada por Nazar Klovanych em solicitação de pull [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824), [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* A variável **Usado em** da página de detalhes da imagem da galeria de Adobe Stock agora identifica com precisão se a imagem está associada a um produto. _Correção enviada por Nazar Klovanych em solicitação de pull [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` agora o exclui os links para as palavras-chave que não estão especificadas nos parâmetros e insere os novos ao excluir tags de palavra-chave ao editar detalhes da imagem. _Correção enviada por jmonteros422 na solicitação de pull [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* A variável `Login failed` mensagem que o aplicativo exibe quando um comerciante clica **Licença** para uma imagem do Adobe Stock salva anteriormente e não licenciada, ela não contém mais tags HTML. _Correção enviada pelo yolouiese na solicitação de pull [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* Ao clicar nos links na variável **Usado em** A seção da página Detalhes da imagem agora exibe uma grade que exibe todas as entidades filtradas pela imagem. O filtro de ativos também é definido e exibido corretamente. Anteriormente, o aplicativo não exibia o título do ativo na variável **Filtros aplicados** seção. _Correção enviada por Nazar Klovanych em solicitação de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* O aplicativo não exibe mais o **Usado em** seção da página Detalhes da imagem quando a imagem não está em uso. _Correção enviada por Nazar Klovanych em solicitação de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* Problemas de exibição corrigidos ao adicionar uma nova tag de imagem que excede o número máximo de caracteres. _Correção enviada por Nazar Klovanych em solicitação de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* Os ativos agora podem ser verificados conforme esperado usando o filtro de ativos na imagem Detalhes **Usado em** seção. _Correção enviada por Nazar Klovanych em solicitação de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* Informações sobre imagens usadas por entidades diferentes (por exemplo, `page` e `category`) agora está listada como corrigida na página Detalhes da imagem. _Correção enviada por Nazar Klovanych em solicitação de pull [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* O aplicativo não lança mais uma exceção quando um comerciante tenta salvar um produto com sua imagem associada quando a Galeria de mídia está desativada. _Correção enviada por Nazar Klovanych em solicitação de pull [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* Clicar nos links na seção Usado em para uma imagem na Galeria de mídia agora abre a grade de entidades que são filtradas pela imagem, conforme esperado. Anteriormente, o título da imagem não era exibido na seção de filtros aplicados da grade. _Correção enviada por Nazar Klovanych em solicitação de pull [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* O aplicativo agora adiciona tags corretamente ao editar várias imagens sucessivamente na Galeria de mídia. _Correção enviada por Nazar Klovanych em solicitação de pull [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* O aplicativo agora remove as tags das imagens do Adobe Stock depois que um comerciante exclui as tags e salva os detalhes da imagem. Anteriormente, as tags não eram excluídas até que a página fosse atualizada. _Correção enviada por Honeymay Louiese Ignacio no pedido de pull [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* O Amazon Pay agora verifica se um usuário já está conectado antes de renderizar as opções de pagamento.

* Problemas com a autenticação multifator e carrinhos abandonados foram resolvidos.

* O Amazon Pay agora preenche corretamente o `store name` em emails e outros locais exibidos.  Se a variável **Nome do armazenamento** Amazon estiver vazio, a extensão recuperará o nome padrão da loja (ou seja, o nome que você deu à loja na Administração).

* Problemas de localização/tradução para cenários de declínio foram abordados. O texto exibido nem sempre está em inglês.

### Produtos do pacote

<!-- MC-36281-->

* O aplicativo não lança mais uma exceção quando você tenta criar um produto em uma implantação na qual o Inventory está instalado, mas a `Magento_InventoryBundleProduct` O módulo do está desativado.

<!-- MC-34261-->

* O aplicativo agora calcula corretamente os reembolsos offline para pedidos que contêm produtos agrupados.

<!-- MC-24363-->

* O minicarrinho agora exibe os preços corretos para pacotes de produtos quando os preços de nível também são atribuídos para produtos simples. [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* Os comerciantes agora podem criar um memorando de crédito para produtos agrupados que fornece um reembolso sem exigir a devolução do produto. Anteriormente, o aplicativo exibia um erro. _Correção enviada por Dzung Nguyen em solicitação de pull [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* O aplicativo não exibe mais mensagens de validação redundantes quando um comprador adiciona um pacote de produtos ao carrinho sem selecionar uma opção necessária. _Correção enviada por Dzung Nguyen em solicitação de pull [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_Correção enviada por Michał Derlatka no pull request [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### Cache

<!-- MC-36096-->

* O armazenamento local em cache agora é retido pelo período definido em **Lojas** > **Configuração** > **Geral** > **Web** > **Configurações de cookie padrão**. Anteriormente, a data de expiração dos cookies era codificada permanentemente para um dia, o que a deixava fora de sincronia com essa configuração. Como resultado, as mensagens de boas-vindas não mantiveram as informações do cliente retornadas pela duração esperada.

<!-- ENGCOM-7780-->

* O número de chamadas para o cache da página `config` foi reduzida. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* O verniz não lança mais um `Connection reset by peer` erro quando um catálogo grande é reindexado no cronograma. _Correção enviada por Matthew O&#39;Loughlin na solicitação de pull [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* O cache de página inteira não é mais limpo para produtos não relacionados quando um produto foi editado no Administrador. [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### Carrinho e check-out

<!-- ENGCOM-7950-->

* As consultas SQL diretas foram substituídas pelo Provedor de dados, que melhorou o desempenho de check-out. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* As listas Produtos na comparação e Produtos comparados recentemente agora funcionam conforme esperado. Anteriormente, quando a lista de comparação era expandida, o aplicativo não exibia produtos, mesmo que a seção indicasse que a lista continha produtos.

<!-- MC-35329-->

* A variável **Excluir** botão no **Adicionar ao carrinho por SKU** seção de um cliente **Gerenciar carrinho de compras** A página agora funciona conforme esperado quando várias linhas são selecionadas.

<!-- MC-34999-->

* O aplicativo não emite mais um erro quando você tenta solicitar um produto por SKU quando os dígitos inseridos correspondem a um SKU válido, mas as letras maiúsculas e minúsculas desses dígitos são diferentes. Anteriormente, ao inserir um SKU em **Minha conta** > **Solicitar por SKU** que não correspondia exatamente a um SKU válido, o aplicativo emitiu um erro.

<!-- MC-25042-->

* O endereço de entrega de um cliente agora é selecionado por padrão no check-out quando o endereço está localizado no país identificado na lista Países de permissão e essa lista inclui apenas esse país. Anteriormente, o aplicativo não selecionava o endereço como padrão e exibia esta mensagem de erro: `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* Os comerciantes agora podem habilitar **Aplicar ao Valor de Remessa** na guia Ação de **Marketing** > **Regras de preço do carrinho** > **Adicionar nova regra** quando **Desconto de valor fixo para o carrinho inteiro** é aplicada. [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* O aplicativo não lança mais uma exceção quando um comprador tenta cancelar a definição do cookie de persistência após iniciar o check-out e depois navegar até a página inicial da loja. Anteriormente, quando o comprador clicava no **Não é você?** na página inicial, o aplicativo gerou esta exceção: `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* O aplicativo agora exibe uma mensagem de sucesso de adição ao carrinho quando um cliente adiciona um produto indisponível ao carrinho. Anteriormente, o produto era adicionado, mas o aplicativo não exibia uma mensagem de sucesso.

<!-- MC-35989-->

* Os atributos personalizados do endereço agora são incluídos conforme esperado no formulário que é exibido para a etapa de pagamento no fluxo de trabalho de finalização.

<!-- MC-36060-->

* A variável **Estado/Província/Região** a caixa de entrada agora está ativada, conforme esperado, em **Minha conta** > **Catálogo de Endereços** > **Adicionar novo endereço**.

<!-- ENGCOM-7746-->

* Os descontos agora são aplicados conforme esperado aos encargos de remessa quando **Aplicar ao Valor de Remessa** está ativado. _Correção enviada por Andrii Kalinich no pull request [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* O código que oferece suporte ao fechamento do minicarrinho foi refatorado para remover o `closeSidebar` função. A vinculação de cliques apropriada foi adicionada à variável `[data-action="close"]` elemento. _Correção enviada pelo lumn na solicitação de pull [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* O novo **Mostrar o botão &quot;Limpar carrinho de compras&quot; na página do carrinho** configuração fornece controle sobre a exibição de um **Limpar carrinho** na página de exibição do carrinho de compras. Por padrão, essa configuração está desativada. _Correção enviada por Pavlo Sydorenko na solicitação de pull [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* A validação foi adicionada ao campo de telefone no fluxo de trabalho de check-out. _Correção enviada por Oleh Usik na solicitação de pull [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* O check-out de convidado agora é desativado conforme esperado quando um carrinho contém produtos para download quando a variável **Compartilhável** e **Desabilitar Check-out de Convidado se o carrinho contiver itens baixáveis** as configurações estão desabilitadas. _Correção enviada por Rani Priya em solicitação de pull [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* A mensagem de sucesso que o aplicativo exibe quando um comprador adiciona um produto ao carrinho pela barra lateral da conta do cliente agora contém um link para o carrinho de compras do comprador. _Correção enviada por Ajith na solicitação de pull [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* O aplicativo agora seleciona um valor vazio por padrão no menu suspenso de opções de prefixo no fluxo de trabalho de check-out. _Correção enviada por Vadim Malesh em solicitação de pull [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* A mensagem pop-up que o aplicativo exibe quando você exclui vários itens de um carrinho de compras agora descreve com precisão o número e o tipo de entidades que você selecionou para exclusão. _Correção enviada por Nazar Klovanych em solicitação de pull [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* O aplicativo agora exibe um formulário de registro do cliente quando um usuário convidado conclui o check-out.

<!-- MC-35607-->

* Os campos personalizados de atributos de endereço do cliente agora são exibidos conforme esperado no fluxo de trabalho de finalização da loja.

<!-- ENGCOM-7793-->

* O aplicativo agora recupera o grupo de clientes atual para uma cotação ativa durante o check-out. Anteriormente, o aplicativo usava o grupo de clientes que estava ativo quando o produto foi adicionado ao carrinho pela primeira vez e, se esse grupo de clientes era excluído antes do check-out, o aplicativo emitia um erro. _Correção enviada por Konstantin em solicitação de pull [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### Catálogo

<!-- MC-31068-->

* O aplicativo agora remove os produtos desativados do carrinho do comprador antes do check-out. Anteriormente, quando um comprador adicionava um produto ao carrinho que estava desativado antes da conclusão do check-out, o aplicativo removia o produto desativado do carrinho, mas o produto permanecia na cotação e o comprador não podia fazer o check-out. [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* O aplicativo agora classifica os produtos mais vendidos conforme esperado. Anteriormente, a contagem de produtos e a paginação de resultados de classificação estavam incorretas. [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* Os compradores agora podem abrir a página de detalhes de um produto clicando no nome do produto na barra lateral para comparar produtos. _Correção enviada por Eduard Chitoraga na solicitação de pull [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` Os valores agora permanecem positivos quando um administrador exclui categorias. Anteriormente, quando um administrador excluía categorias, a variável `children_count` para as restantes categorias era negativo. _Correção enviada por Vitaliy Prokopov na solicitação de pull [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* O aplicativo agora usa a opção padrão (**Configuração** > **Web** > **Layouts padrão** > **Layout padrão do produto**) selecionado para a variável `page_layout` ao criar um novo produto. Anteriormente, o valor padrão selecionado não era aplicado.

<!-- MC-34258-->

* Agora é possível executar com êxito ações em massa no estoque de produtos do Inventário. Anteriormente, quando você tentava executar uma ação em massa no estoque de produtos do inventário, o aplicativo exibia uma página em branco. Se você executou essa ação com o aplicativo no modo de desenvolvedor, o aplicativo emitiu este erro: `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`.

<!-- MC-32552-->

* A contagem total de registros exibida ao clicar em **Adicionar produtos** na guia Produtos ao adicionar produtos a uma categoria de catálogo, não é mais alterado com base na ordem de classificação do produto.

<!-- ENGCOM-7854 -->

* A variável `{products(filter: {sku: {eq: "some sku"}}) {…}` query agora retorna valores que foram convertidos na moeda esperada. Anteriormente, `price_tiers.final_price.value` exibiu preços especiais na moeda base. _Correção enviada por Petkovski Marjan em solicitação de pull [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Cleanup

<!-- ENGCOM-7281-->

* Corrigido o desalinhamento da caixa de seleção da grade Ordem de Venda do Administrador. _Correção enviada por Tu Nguyen em solicitação de pull [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* Correção de um erro ortográfico no getter da ID do endereço de entrega no manipulador de salvamento do endereço da ordem de venda. _Correção enviada por Konstantin em solicitação de pull [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* Corrigido o `getRegionNameExpresion` nome do método a `getRegionNameExpression`. _Correção apresentada por Pierre Grimaud no pedido de pull [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* Um redundante `init` o método foi removido de `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` e `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _Correção enviada por Oleh Usik na solicitação de pull [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` polyfill foi movido de `base` para `frontend`. _Correção enviada por Ihor Sviziev em uma solicitação de pull [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* Atualização do logotipo do Adobe Commerce e remoção de espaços irrelevantes do arquivo README principal do `magento/magento2` repositório. _Correção apresentada por Rafael Corr̻a Gomes em pedido de pull [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* O desnecessário `overflowed` A classe foi removida do widget de barra lateral do minicarrinho. _Correção enviada pelo lumn na solicitação de pull [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* Um seletor de CSS incorreto na página Remessa foi corrigido. _Correção enviada por Tu Nguyen em solicitação de pull [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* A variável `lib/internal/Magento/Framework/App/Request/Http.php` O arquivo do foi simplificado com a otimização da lógica e a remoção de atribuições de variáveis redundantes e do uso excessivo de retornos em uma função. _Correção enviada por Chris Snedaker na solicitação de pull [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* A variável `bin/magento module:status` O comando agora aceita vários nomes de módulo como argumentos. _Correção enviada por Chandru Rajendran em um pedido de pull [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* Correção de um erro de digitação na descrição de classe de `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _Correção enviada por Benjamin Rosenberger no pull request [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* A variável `TierPriceManagement` A classe foi refatorada para remover código redundante. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` O foi refatorado para melhorar a legibilidade e a velocidade de retorno. _Correção enviada por Vitaliy Ryaboy na solicitação de pull [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### Conteúdo do CMS

<!-- MC-35971-->

* A guia Hierarquia de uma visualização de loja padrão selecionada agora exibe a página principal selecionada, conforme esperado.

<!-- ENGCOM-7602-->

* O aplicativo não gera mais um erro durante a criação de exibições de loja quando a nova exibição de loja contém uma página CMS com a mesma chave de URL de uma página em uma exibição de loja diferente. _Correção enviada por Vadim Malesh em solicitação de pull [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### Produtos configuráveis

<!-- MC-33523-->

* Problemas de paginação com a lista Configurable Product Edit Current Variations foram corrigidos.

<!-- MC-33406-->

* O aplicativo não atualiza mais a caixa de preço Produtos relacionados sempre que um comprador seleciona opções para um produto configurável. Anteriormente, o aplicativo atualizava a caixa de preço sempre que um comprador selecionava uma opção para um produto configurável.

<!-- MC-29882-->

* O aplicativo agora exibe o preço correto para produtos configuráveis com opções personalizáveis na página Criar pedido do administrador. Como esperado, o preço exibido é uma soma do preço do produto filho e do preço da opção personalizada. Anteriormente, o aplicativo exibia somente o preço da opção personalizada. [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* O resumo do pedido agora exibe o valor de desconto correto quando uma regra de preço do carrinho foi aplicada. Anteriormente, a regra não arredondava corretamente os valores ao calcular descontos de remessa.

<!-- MC-33765-->

* As contas de usuário administrador criadas de uma conta de administrador com um escopo restrito agora podem criar um produto configurável com atributos, conforme esperado. Anteriormente, o aplicativo exibia este erro: `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* O aplicativo não lança mais um erro de validação quando você usa o POST `/V1/products` para um produto configurável com um `int` valor de 0. Anteriormente, o aplicativo exibia este erro: `Product with id "%1" does not contain required attribute "%2"."` _Correção enviada por Vadim Malesh em solicitação de pull [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* O atributo de opções de configuração de um produto principal não é mais atribuído a um novo `size` atributo. _Correção enviada por Abel Truong na solicitação de pull [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookies

<!-- ENGCOM-7156-->

* O aplicativo agora cria no máximo um `mage-translation-file-version` e `mage-translation-storage` cookie por sessão. _Correção enviada por Ihor Sviziev em uma solicitação de pull [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* A configuração do consumidor da fila de mensagens foi estendida com novos parâmetros que ajudam a controlar os consumidores e a salvar recursos do servidor e que possivelmente reduzem o consumo de CPU da fila do consumidor:

   * `maxIdleTime` define o tempo máximo de espera em segundos para uma nova mensagem da fila.
   * `sleep` especifica o tempo em segundos para suspender antes de verificar se uma nova mensagem está disponível na fila.
   * `onlySpawnWhenMessageAvailable` identifica se um consumidor deve ser gerado somente quando existe uma mensagem disponível na fila relacionada. Essa configuração é habilitada globalmente por padrão para todos os consumidores, mas pode ser definida por consumidor.

<!-- ENGCOM-7863-->

* `cron` expressões como  `3/10 * * * *` agora estão programadas conforme esperado. _Correção enviada por Anton Evers em solicitação de pull [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` O não carrega mais todas as cotações expiradas de uma só vez. Anteriormente, o aplicativo falhava com este erro fatal porque todas as cotas expiradas eram carregadas simultaneamente: `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* O aplicativo não duplica mais o CSS quando **CSS Crítico** está ativado. _Correção enviada por Tu Nguyen em solicitação de pull [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* O compilador LESS do lado do servidor agora importa todos os arquivos CSS remotos conforme esperado quando você executa o `bin/magento setup:static-content:deploy -f`. Anteriormente, o aplicativo não importava os arquivos remotos e exibia um erro. [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### Cliente

<!-- MC-33679-->

* Os nomes da região em Endereços de administrador do cliente agora são traduzidos conforme esperado.

<!-- MC-36226-->

* A variável **Estado/Província** Os campos agora são preenchidos conforme esperado na página Editar endereço (**Minha conta** > **Catálogo de endereços**).

<!-- MC-34655-->

* O aplicativo não lança mais um erro quando um cliente clica no **Enviar** botão várias vezes em formulários em toda a loja para a qual o reCAPTCHA invisível foi ativado. Anteriormente, clicar nesse botão várias vezes resultava em um erro interno semelhante a este: `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* Salvar um cliente excluído do Administrador agora gera apenas uma mensagem de erro. Anteriormente, o aplicativo exibia uma página em branco e gerava um relatório que contém esta string: `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* O aplicativo agora exibe uma mensagem de erro, conforme esperado, quando um administrador tenta salvar um endereço de um cliente cuja conta acabou de ser excluída. Anteriormente, o aplicativo exibia uma caixa de mensagem em branco.

<!-- MC-33150-->

* Os rótulos para campos de endereço no fluxo de trabalho de check-out e no catálogo de endereços foram editados para fins de consistência.

<!-- ENGCOM-7244 -->

* Os rótulos de front-end agora retornam para armazenar rótulos se os valores não forem nulos. Anteriormente, os atributos do cliente usavam os rótulos de front-end padrão. _Correção enviada por Toan Nguyen na solicitação de pull [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* A variável `sortOrder`o número de links no layout XML foi corrigido. Anteriormente, essa ordem era revertida e usada em ordem decrescente. _Correção enviada por Tu Nguyen em solicitação de pull [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### Diretório

<!-- MC-32271-->

* O formato do menu suspenso Estado/Província agora é consistente em todo o Administrador.

### dotdigital

* A sincronização de pedidos não falha mais quando um pedido contém SKUs de produto que não existem mais no catálogo.

* Categorias de produto vazias não são mais incluídas nos dados de insight da Web.

* O rastreamento de comportamento da Web agora funciona para comerciantes com determinadas configurações de tema. Um novo seletor de fallback aborda isso.

* O campo de dados de status do assinante não inclui mais valores vazios quando a sincronização do cliente foi executada usando o cron. (A emulação de aplicativo aborda esse problema.)

* O mapeamento do catálogo de endereços agora funciona conforme esperado quando uma conta dotdigital é ativada no nível padrão, mas desativada para o site principal.

* Os cupons agora são gerados (usando o URL de conteúdo dinâmico externo para geração de cupom) para endereços de email que contêm sinais de adição (&#39;+&#39;).

* Os contatos não são mais reinscritos quando seus `last_subscribed_at` o valor é nulo.

* Erros de atualização (datados de 4.5.2) que afetaram versões anteriores foram resolvidos.

* Um problema de regressão introduzido na versão 4.5.3 que afetava o uso de um método para obter o status do assinante ao preparar a exportação do assinante foi corrigido.

* O número total de assinantes sincronizados (apresentado nos logs e na tela) agora é calculado corretamente.

### Baixável

<!-- MC-35026-->

* A área Meus produtos baixáveis agora exibe links para produtos baixáveis comprados que fazem parte de um produto agrupado, conforme esperado.

<!-- MC-34262-->

* Ao clicar no link de um produto para download **Amostra** na página do produto Admin agora baixa uma amostra como esperado. Anteriormente, ao clicar em **Amostra**, o aplicativo exibiu este erro: `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* Os compradores agora podem baixar amostras de produtos baixáveis que estão indisponíveis. Anteriormente, quando um comprador tentava baixar uma amostra, o aplicativo abria uma nova guia, mas não exibia uma mensagem informativa ou começava o processo de download. _Correção enviada por Vadim Malesh em solicitação de pull [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* A mensagem de exceção que o aplicativo exibe quando um comprador tenta definir um endereço de entrega para um produto baixável foi aprimorada. _Correção enviada por Michał Derlatka no pull request [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* Do produto `stock_item` Os dados do são atualizados e os links de produtos para download e amostras são preservados conforme esperado ao usar uma chamada REST PUT para atualizar `stock_item` valores. Anteriormente, após a atualização do produto, o produto não continha mais links para download de conteúdo. _Correção enviada por Vadim Malesh em solicitação de pull [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* O aplicativo agora exibe uma mensagem mais informativa quando um cliente define o endereço de entrega para um pedido que contém apenas produtos baixáveis.

### E-mail

<!-- MC-32789-->

* O aplicativo agora envia notificações por email sobre alterações em pedidos para o email correto do cliente, caso o email do cliente tenha sido alterado após a criação do pedido.

<!-- MC-36015-->

* Os emails de atualização de pedidos enviados aos clientes agora incluem o status correto do pedido. Anteriormente, se um status de pedido mudasse de `processing` para outro estado, o email do pedido não refletia a alteração de status.

<!-- MC-34107-->

* O aplicativo não exibe mais mensagens enganosas sobre contas existentes durante a finalização da compra do convidado. Anteriormente, quando um convidado navegava para a página de check-out e, em seguida, retornava à página de remessa, o aplicativo exibia este erro: `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* Os modelos de email personalizados agora carregam os mesmos elementos que os modelos de email padrão nativos. Anteriormente, alguns elementos estavam ausentes, incluindo valores de variáveis.

<!-- ENGCOM-7576-->

* O CSS desnecessário foi removido do modelo de Visualização de email. _Correção enviada por Tu Nguyen em solicitação de pull [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* O texto no modelo de email que duplica o texto já exibido pelo rodapé foi removido. _Correção enviada por Paweł Tylek na solicitação de pull [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* Os emails de alerta de produto agora são enviados da loja da qual o alerta foi inscrito. Anteriormente, esse email era sempre enviado da loja padrão. _Correção enviada por Maciej Pawłowski na solicitação de pull [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* Uma duplicata `customer.name` foi removida do modelo de email. _Correção enviada por Paweł Tylek na solicitação de pull [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* Agora você pode criar um modelo de email que envia emails com  `Content-Type: "text/plain"`. Anteriormente, o aplicativo ignorava o tipo de conteúdo especificado no modelo. _Correção enviada por twoonesixdigital na solicitação de pull [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### Estruturas

<!-- MC-35893-->

* A variável **Hora do dia em que os dados serão enviados** campo do Administrador **Lojas** > **Configuração** > GERAL > **Relatórios avançados** A página agora é renderizada corretamente.

<!-- MC-34153-->

* Os compradores agora podem alterar o número de pedidos exibidos por página quando a lista Pedidos abrange várias páginas. Anteriormente, o aplicativo exibia a seguinte mensagem quando o comprador navegava até a última página de pedidos e tentava alterar o número de pedidos exibidos por página: `You have placed no orders`. Esse era um problema conhecido da versão 2.4.0.

<!-- MC-35020-->

* Agora é possível adicionar produtos a uma categoria ao implementar o cache de Nível 2.

<!-- MC-29755-->

* `X-Magento-Tags` Os cabeçalhos não excedem mais o tamanho permitido pela especificação HTTP. Anteriormente, as páginas de categoria que continham muitos produtos retornavam um `X-Magento-Tag` cabeçalho que resultou em um erro 503.

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` Agora é acionado conforme esperado quando você usa a REST API para criar uma remessa.

<!-- MC-33898-->

* O aplicativo agora exibe uma mensagem de erro informativa quando um `di compile` falha devido a uma dependência inexistente. Anteriormente, a mensagem exibida não identificava a classe em que a exceção ocorreu.

<!-- MC-32929-->

* O aplicativo não lança mais o seguinte erro fatal quando o Redis usa toda a memória permitida: `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* Agora, os compradores podem adicionar vários produtos ao carrinho quando a variável `Persistent` O módulo do está desativado. [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### Correções gerais

<!-- MC-36048-->

* Classificação de produtos no Administrador (**Lojas** > **Atributos** > **Produtos**) agora exibe todos os produtos que atendem aos seus critérios de pesquisa. Anteriormente, o aplicativo não exibia registros e, para classificá-los, era necessário navegar até a primeira página de resultados da pesquisa.

<!-- MC-36343-->

* Aspas desnecessárias e escape em torno de um URL no `tracking.phtml` foram removidas.

<!-- MC-35998-->

* A variável `var/log/system.log` O agora exibe uma mensagem mais precisa quando um usuário tenta acessar um arquivo de recurso não existente no diretório estático e o modo de produção e OnDemand do SCD são ativados. O aplicativo agora registra um erro 404. Anteriormente, o aplicativo registrava a mesma mensagem registrada quando o erro ocorre no modo de desenvolvedor.

<!-- ENGCOM-7286-->

* Agora a minificação do JavaScript funciona corretamente. O resolvedor de arquivos de minificação não vaza mais variáveis para o escopo global. Anteriormente, `ctx`, `origNameToUrl`, e `baseUrl` variáveis na janela vazaram. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* Ao depurar um erro que impede a criação de objetos, o aplicativo agora imprime e registra a mensagem de exceção original. Anteriormente, a mensagem só era registrada. _Correção enviada por Marvin Hinz na solicitação de pull [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* A execução do retorno de chamada após a confirmação das alterações no banco de dados foi aprimorada. Anteriormente, se um retorno de chamada falhava com uma exceção, todos os retornos de chamada falhavam. _Correção enviada por Alok Patel na solicitação de pull [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* Os mixins para módulos sem dependências definidas não geram mais este erro: `TypeError: Cannot read property 'map' of null`. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* O polyfill de armazenamento agora é carregado e aplicado somente quando `localStorage` ou `sessionStorage` não estão disponíveis. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* As listas de pedidos de vitrine de várias páginas agora se comportam conforme esperado quando um comprador altera o número de resultados exibidos por página da segunda página de resultados ou página de resultados subsequente. Anteriormente, o aplicativo exibia esse erro quando um comprador alterava o número de resultados de pesquisa exibidos no **Minha conta** > **Meus Pedidos** lista: `You have placed no orders`. _Correção enviada por Vadim Malesh em solicitação de pull [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* O obsoleto `addWarning` foi substituído pelo método `addWarningMessage` no módulo de segurança. _Correção enviada por kishorekumarkesavan em solicitação de pull [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* Código gerado usando o `bin/magento` os comandos da linha de comando agora estão em conformidade com os requisitos e padrões de codificação. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* Salvar um atributo com `backend_type = static` O não remove mais o conteúdo do `frontend_class` campo. _Correção enviada pela jiten-patel na solicitação de pull [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* Código e senha desnecessários `responsive.js` foram removidos dos arquivos carregados por temas. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* A validação foi adicionada à **Número de símbolos** na página de configuração Admin CAPTCHA. _Correção enviada por Eden Duong no pull request [29199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* O RSS feed agora é carregado corretamente. Anteriormente, o feed não carregava na primeira vez, embora carregasse conforme esperado quando a página era atualizada. _Correção enviada por Vadim Malesh em solicitação de pull [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* Uma sessão persistente expirada agora é renovada conforme esperado quando o comprador faz logon novamente.

<!-- MC-35230-->

* Tempo de vida da senha conforme definido em **Lojas** > **Configuração** > **Avançado** > **Admin** O agora é honrado. Anteriormente, se você clicou em **Esqueceu a senha?** quando solicitado a redefinir sua senha, você pode ignorar a redefinição de senha.

<!-- MC-34369-->

* Os códigos de cupom agora são aplicados somente ao produto especificado. Anteriormente, o aplicativo aplicava o código do cupom a todos os produtos no carrinho. [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* As configurações de expiração do carrinho não são mais redefinidas quando ocorre uma atualização de inventário ou preço. Anteriormente, quando um carrinho estava definido para expirar em 24 horas e uma atualização de inventário ou de preço ocorria, os indexadores preencheram o `updated_at table`, que redefine o tempo de expiração.

<!-- MC-33313-->

* O aplicativo não lança mais um erro fatal quando um administrador atribui um cliente que tem um carrinho de compras ativo a um grupo de clientes.

<!-- ENGCOM-7834 -->

* Selecionar uma opção da barra de ferramentas em **Ferramentas do desenvolvedor**  >  **Rede**  em uma página de produto ao executar o navegador Chrome não inicializa mais `toolbar.js` duas vezes. _Correção enviada por Paweł Tylek na solicitação de pull [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* O aplicativo agora adiciona uma ID de função ACL do usuário administrador à ID do cache da árvore de categoria do produto. Isso limitará as árvores de categoria que um administrador com escopo limitado pode ver, conforme esperado. _Correção enviada pelo alinhamento de quangdo na solicitação de pull [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* Os compradores podem selecionar opções de mensagem de presente durante o check-out. O GraphQL agora cobre opções de mensagens de presente para diferentes tipos de itens de carrinho. Consulte [`setGiftOptionsOnCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) e [`updateCartItems` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html). _Correção enviada por Oleh Usik em solicitações pull [28519](https://github.com/magento/magento2/pull/28105), [27956](https://github.com/magento/magento2/pull/27956), [28072](https://github.com/magento/magento2/pull/28072), [28072](https://github.com/magento/magento2/pull/28072). [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* Os clientes e hóspedes podem escrever resenhas de produtos. Os clientes também podem recuperar seus históricos de análise de produtos. Consulte [Criar uma análise do produto](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) e [consulta productReviewRatingsMetadata](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) para obter informações sobre como recuperar informações sobre a infraestrutura de revisões. _Correção enviada por Eduard Chitoraga na solicitação de pull [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* A variável [`addProductsToCart` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) permite adicionar qualquer tipo de produto ao carrinho ativo. Recomendamos usar essa mutação em vez de mutações de propósito único, como `addSimpleProductsToCart`. _Correção enviada por Yaroslav Rogoza no pedido de pull [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* O novo `availableStores` o query retorna uma lista de atributos de configuração para várias lojas disponíveis no mesmo site (com base na loja atual). Ele não expõe a lista de sites. Consulte [`availableStores` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html). _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* O GraphQL agora usa apenas um token de autorização para recuperar um tipo de usuário e sua ID. Anteriormente, o GraphQL usava os cookies de um cliente ativo para recuperar essas informações quando o token de autorização estava vazio. _Correção enviada por Alexander Taranovsky em solicitação de pull [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* Adicionamos o [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) e [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutações para gerenciar contas de clientes. Essas novas mutações requerem objetos de entrada diferentes do `createCustomer` e `updateCustomer` mutações. Para alterar o endereço de email de um cliente, use o novo [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutação. _Correção enviada por Michał Derlatka no pull request [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* A variável `updateCustomer` mutação não permite mais definir uma variável inválida `INT` valor no `gender` argumento. _Correção enviada por Alexander Taranovsky em solicitação de pull [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* Você pode usar o `subscribeEmailToNewsletter` para inscrever clientes em um boletim informativo. Consulte [`subscribeEmailToNewsletter` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html). _Correção enviada por Alexander Taranovsky em solicitação de pull [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* Lógica redundante removida na `setShippingMethodsOnCart` resolvedor de mutação. _Correção enviada por Alexander Taranovsky em solicitação de pull [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* Adição da cobertura de teste para o `Please provide Email of sender` erro associado à `sendEmailToFriend` mutação. _Correção enviada por Alexander Taranovsky em solicitação de pull [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* A variável `products` o query agora retorna rótulos de opção de atributo de produto para a exibição de loja padrão, conforme esperado. Anteriormente, essa consulta retornava os rótulos de opção do atributo de produto que foram definidos para o Administrador. _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* As agregações de atributo personalizadas agora retornam valores de opção específicos do armazenamento. _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* Intervalos de preço retornados em uma agregação de produto agora podem ser somente numéricos (curingas não são permitidos). _Correção enviada por Dmitriy Gallyamov na solicitação de pull [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* A variável `categoryList` o query agora retorna a resposta correta ao usar fragmentos. _Correção enviada pelo Ulzii na solicitação de pull [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* A pesquisa de produto do GraphQL agora considera permissões de categoria configuradas. Anteriormente, a pesquisa de produtos ignorava a **Ativar** configuração (**Lojas**  >  **Configuração**  >  **Catálogo**  >  **Catálogo** > **Permissões de categoria**). _Correção enviada por Petkovski Marjan em solicitação de pull [28757](https://github.com/magento/magento2/pull/28757) e pull request 271 no repositório privado`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* Agora é possível adicionar um produto ao carrinho usando `addSimpleProductToCart` quando outros itens no carrinho estão esgotados. Anteriormente, o aplicativo retornava este erro: `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* O GraphQL padrão `Category` O método do agora classifica por posição de categoria, conforme esperado. _Correção enviada por Derrik Nyomo no pedido de pull [29301](https://github.com/magento/magento2/pull/29301)_. [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* Adição de suporte para listas de desejos no Magento Open Source. Você pode [adicionar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) para, [atualizar itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) no e [remover itens](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) de uma lista de desejos. _Correção enviada por Eduard Chitoraga na solicitação de pull [28205](https://github.com/magento/magento2/pull/28205)_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* Adicionamos o [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) e [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) mutações para gerenciar contas de clientes. Essas novas mutações requerem objetos de entrada diferentes do `createCustomer` e `updateCustomer` mutações. Para alterar o endereço de email de um cliente, use o novo [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) mutação.

* Adição do suporte ao GraphQL Vault para o [Fluxo de pagamento Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) método de pagamento. _Correção enviada por Oleh Usik na solicitação de pull [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* Atualização da GraphQL [`storeConfig` query](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) para incluir as novas definições de configuração do cliente. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adição de [`resetPassword` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adição de [`resetPassword` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Adição de [`requestPasswordResetEmail` mutação](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html), que aciona o email de redefinição de senha para o endereço de email fornecido. _Correção enviada por Oleh Usik na solicitação de pull [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* Tópicos adicionados ou atualizados sobre o Klarna GraphQL em [Método de pagamento de Klarna](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) e[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### Imagens

<!-- ENGCOM-7691-->

* A marcação HTML para imagens em miniatura foi aprimorada. _Correção enviada por Tu Nguyen em solicitação de pull [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### Importar/exportar

<!-- MC-35479-->

* A variável `error_report.csv` O arquivo agora é baixado com conteúdo e está disponível dentro do `var/import_history/` diretório conforme esperado. Anteriormente, esse arquivo não era gerado após a importação.

<!-- ENGCOM-7616-->

* A importação de um produto usando um arquivo CSV agora gera um `error_report.csv` conforme esperado. Anteriormente, o aplicativo gerava o arquivo, mas o removia após a conclusão da importação. _Correção enviada por Vadim Malesh em solicitação de pull [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* Remoção de importações de classe redundantes em toda a base de código. _Correção enviada por Oleh Usik na solicitação de pull [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* O aplicativo agora importa com êxito endereços de clientes que contêm uma região para um país que não tem regiões definidas. Anteriormente, o aplicativo exibia este erro: `Please enter a valid region`.

<!-- MC-33277-->

* O aplicativo agora carrega o conjunto correto de atributos de entidade quando um comerciante seleciona um tipo de entidade ao programar uma nova exportação.

<!-- MC-32956-->

* A posição dos produtos no mercado `catalog_category_product` A tabela agora é atualizada conforme esperado quando um administrador cria um produto no Administrador e o atribui a uma categoria. Anteriormente, a posição de novos produtos sempre recebia um valor 0.

<!-- MC-34939-->

* Os dados do cliente agora são exportados com sucesso do Administrador, e a grade de dados de exportação exibe os dados do cliente conforme esperado. Anteriormente, um erro relacionado à alocação de memória ocorria durante a exportação.

<!-- MC-34657-->

* Agora os arquivos CSV importados capturam as informações do produto relacionadas conforme esperado. Anteriormente, as informações relacionadas ao produto não eram carregadas de forma consistente na primeira vez que o arquivo CSV era importado.

<!-- MC-37424-->

* Parâmetros de construção não utilizados removidos em `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Índice

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` O agora lida corretamente com padrões de tags grandes ao fazer uma `PURGE`. `sendPurgeRequest` foi refatorado para lidar com uma matriz de tags em vez de exigir que o chamador use `implode()`. _Correção enviada por Matthew O&#39;Loughlin na solicitação de pull [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* Os indexadores compartilhados agora mostram um status de **válido** depois de executar `bin/magento indexer:status` após a reindexação. Anteriormente, os indexadores compartilhados tinham uma **inválido** após uma reindexação completa.

### Infraestrutura

<!-- MC-37243-->

* Problemas ao carregar páginas de catálogo e produto em implantações executando o PHP 7.4.9 não ocorrem mais. Anteriormente, o aplicativo exibia esse erro quando você tentava carregar as páginas do catálogo e do produto: `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* Todas as exceções que ocorrem quando os layouts são renderizados no modo de produção agora são registradas no arquivo de log de exceções (`var/report`). Anteriormente, o aplicativo registrava essas mensagens no log do sistema como problemas críticos.

<!-- ENGCOM-7154-->

* As expressões regulares agora funcionam corretamente para páginas grandes, como resultado de um aumento na `ipcre.backtrack_limi`t e `pcre.recursion_limit` para aproximadamente 1000000. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* A geração de interceptores foi aprimorada. `} else {` tiverem sido retiradas dos interceptores, e `array_map` substituiu `foreach`. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* A criação de arrays agora é consistente em toda a classe (`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`). _Correção enviada por Nathan de Graaf em pull request [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* Os plug-ins foram migrados para fora da estrutura para seguir a prática recomendada de proibição de plug-ins no namespace da Estrutura. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* Agora você pode usar o novo `UrlFilterApplier` componente para aplicar filtros ao produto,`cms_page`, e `cms_block` grades usando o parâmetro GET URL. _Correção enviada por Gabriel da Gama no pull request [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* O aplicativo não lança mais um `Undefined class constant` erro quando um interceptor é gerado. _Correção enviada por Vova Yatsyuk na solicitação de pull [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* Os dados de formulário agora persistem quando o aplicativo lança uma exceção de integração quando você salva uma integração usando um nome que já está em uso. _Correção enviada por Aditya Yadav na solicitação de pull [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* O aplicativo não trunca mais `X-Forwarded-For` para 32 caracteres. _Correção enviada por Ihor Sviziev em uma solicitação de pull [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* A lógica que verifica se um redirecionamento é interno agora funciona corretamente no Administrador ao usar um domínio Admin personalizado. Anteriormente, problemas com essa lógica resultavam em muitos redirecionamentos de Administrador para a página inicial da loja padrão. _Correção enviada por Vadim Malesh em solicitação de pull [29066](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* Problemas com o `styles-old.less` arquivo foram eliminados e a impressão não identifica mais erros. _Correção enviada por Tu Nguyen em solicitação de pull [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` foi refatorada. _Correção enviada por Vitaliy Ryaboy na solicitação de pull [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` foi refatorada para melhorar a legibilidade da classe. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* O arquivo README para o servidor Web integrado foi atualizado para incluir todos os parâmetros de Elasticsearch. _Correção enviada por Yevhenii Dumskyi no pedido de pull [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* A variável `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` O plug-in agora retorna um valor conforme esperado. Anteriormente, esse plug-in não retornava um valor e, como resultado, salvar uma visualização de loja resultava em um erro. _Correção enviada por Pieter Hoste na solicitação de pull [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* Adição do seguinte suporte para métodos mágicos para `DataObject`:

   * nova extensão para oferecer suporte `get/set/has/uns` métodos mágicos (com uso de `__call`)
   * suporte para SessionManager, que encaminha todas as chamadas para o contêiner DataObject
   * testar cobertura para extensões
   * testes atualizados para verificação de erro filtrado
   * nível de verificação PHPStan aumentado de 0 para 1. _Correção enviada por Oleksandr Kravchuk na solicitação de pull [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` agora pode ser mais do que uma sequência de caracteres. A restrição da `magentoConfigFixture` para cadeia de caracteres foi o resultado involuntário de uma solicitação de pull anterior e foi revertido. _Correção enviada por Kristof, Fooman em solicitação de pull [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* A variável `convertConfigTimeToUtc` não lança mais um erro fatal devido ao envio de parâmetros incorretos para o `Phrase` construtor. _Correção apresentada por Kos Rafał no pull request [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* Agora, os filtros de preço funcionam conforme esperado nos dados de grade quando `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` e `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` retornam uma matriz com índices que contêm `from` ou `to` dados da string. Anteriormente, o aplicativo exibia este erro: `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Correção enviada por Nikita Sarychev no pedido de pull [29214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* Adição de um ponto de extensão para oferecer suporte à adição de HTML à página de categoria. Isso corrige um erro introduzido por uma solicitação anterior de pull. _Correção enviada por Gerchak na solicitação de pull [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### Navegação em camadas

<!-- MC-25043-->

* A barra lateral de navegação em camadas agora mostra atributos booleanos com ambas as opções (**sim**/**não**) e contagens de produtos correspondentes. Anteriormente, a navegação em camadas não retornava um **não** opção para atributos booleanos em implantações usando Elasticsearch.

<!-- ENGCOM-7493-->

* O filtro de navegação em camadas de amostra agora é consistente com os filtros padrão usados no Magento Open Source. _Correção enviada por Bartłomiej Szubert no pedido de pull [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### Logs

<!-- ENGCOM-7692-->

* Todos os erros de referência quebrados agora são registrados quando as implantações estão somente no modo de desenvolvedor. Anteriormente, também havia um erro registrado para implantações no modo de produção, o que aumentava os logs de erro. _Correção enviada por Bartłomiej Szubert no pedido de pull [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### Galeria de mídia

<!-- ENGCOM-8014-->

* A interface de configuração da Galeria de mídia (Admin) **Lojas**  >  **Configuração**  >   **Avançado**  >  **Sistema** ) foi reorganizado. _Correção enviada por Shankar Konar em solicitação de pull [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* Adição de testes para cobrir a **Usado em** links para uma imagem na galeria Mídia. _Correção enviada por Nazar Klovanych em solicitação de pull [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* A variável `AdminSubmitAdvancedInventoryFormActionGroup` , `AdminClickOnAdvancedInventoryLinkActionGroup`, e  `AdminSetStockStatusConfigActionGroup` os grupos de ação agora são usados nos testes de acordo com as práticas recomendadas. _Correção enviada por Oleh USIA na solicitação de pull [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` agora é usado para pesquisa na grade de produtos. _Correção enviada por Oleh Usik na solicitação de pull [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` agora é usado para clicar em **Concluído** no pop-up Categorias de pesquisa. _Correção enviada por Oleh Usik na solicitação de pull [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` O agora é usado para substituir uma sequência de ações usada para logon de cliente da loja. _Correção enviada por Sathish Subramanian na solicitação de pull [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` foi refatorada para cumprir as melhores práticas do MFTF. _Correção enviada por Kate Kyzyma na solicitação de pull [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* Os nomes dos testes foram alterados para atender às convenções do MFTF. _Correção enviada por Evgeny Levinsky em uma solicitação de pull [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### Novos grupos de ação

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_Correção enviada por Oleh Usik na solicitação de pull [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` e `AdminProductFormCategoryNotExistInCategoryListActionGroup` _Correção enviada por Alexander Steshuk na solicitação de pull [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29133](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29007](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Correção enviada por Oleh Usik na solicitação de pull [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### Novos testes

<!-- ENGCOM-7600 -->

* Adição de teste para excluir uma página CMS como um usuário administrador. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* Adição de `StorefrontShareCustomerWishlistActionGroup` teste para compartilhamento da lista de desejos do cliente com endereços de email inválidos. O teste existente para compartilhamento da lista de desejos (`StorefrontShareWishlistEntityTest`) foi refatorada. `StorefrontCustomerShareWishlistActionGroup` foi descontinuado.

<!-- ENGCOM-7682 -->

* Adição de um teste para verificar a implementação do **Limite esquerdo somente X** definição de configuração. _Correção enviada por Oleh Usik na solicitação de pull [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### Informativo

<!-- MC-34714-->

* Exportar a lista de assinantes do informativo usando o `EXCEL XML` agora resulta na exportação de todas as linhas, conforme esperado. Anteriormente, os dados exportados incluíam somente o valor de paginação da página, não todas as linhas.

<!-- ENGCOM-7522-->

* Os emails de assinatura do informativo agora usam as mesmas tags HTML que outros emails relacionados ao informativo. _Correção enviada por Paweł Tylek na solicitação de pull [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* Adição de um teste para excluir um assinante de boletim informativo como usuário administrador. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* Adição de testes para subscrição de boletim informativo para convidados com uma opção não permitida em instruções de configuração. Este teste substitui o obsoleto `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` e `StorefrontCreateNewSubscriberActionGroup`. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### Pedidos

<!-- ENGCOM-7858-->

* A variável `GetAssetIdByContentFieldInterface` e sua implementação em `MediaContent` Os módulos do agora permitem que a integração do Adobe Stock se estenda `MediaGallery` funcionalidade de filtro. _Correção enviada por Gabriel da Gama no pull request [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* A variável `CustomerAddressId` os valores de um cliente recém-criado agora são validados entre aspas. _Correção enviada por Andrii Kalinich no pull request [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* O status do pedido de um aviso de crédito com total zero agora é `Closed`. Anteriormente, o aplicativo relatava o status do pedido como `Complete`. _Correção enviada por Andrii Kalinich no pull request [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### Métodos de pagamento

<!-- MC-34363-->

* O aplicativo agora exibe uma mensagem que solicita que você insira dados obrigatórios de cartão de crédito ao clicar em **Enviar** para uma ordem de Administrador sem inserir informações de pagamento válidas. Anteriormente, o validador do cartão de Braintree não exibia um erro quando os campos de entrada de pagamento eram inválidos e a página ficava inativa.

<!-- MC-33494-->

* Agora você pode alterar o método de envio de um pedido criado por você no Administrador de um cliente cuja conta tenha um cartão de crédito armazenado (Braintree). Anteriormente, ao selecionar um método de envio diferente, o cartão armazenado não era selecionado e o aplicativo não fazia o pedido.

#### PayPal

<!-- MC-33879-->

* A página Revisão do pedido do fluxo de trabalho de finalização da compra agora exibe o valor de envio correto para o PayPal por meio de pedidos Braintree para os quais o método de envio foi alterado durante a finalização da compra. Anteriormente, quando um cliente alterava o método de envio na página Revisão de pedido do PayPal do fluxo de trabalho de finalização, o aplicativo não atualizava o total do pedido com o método correto.

<!-- MC-34152-->

* Os comerciantes agora podem cancelar com êxito pedidos que foram autorizados usando PayPal. Anteriormente, o aplicativo não cancelava o pedido e exibia este erro: `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* O aplicativo não esvazia mais seu carrinho quando você cancela um pedido fechando a janela pop-up de pagamento do PayPal após concluir outro pedido pela primeira vez.

### Desempenho

* Três novas definições de configuração suportam uma redução no consumo de CPU da fila do consumidor. Esses parâmetros opcionais oferecem maior controle sobre os consumidores e economia de recursos do servidor. Consulte [Configurar filas de mensagens](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) para obter uma descrição do `maxIdleTime`, `sleep`, e `onlySpawnWhenMessageAvailable` parâmetros.

<!-- MC-31617-->

* A configuração da lista de plug-ins agora é gerada durante a execução do `di:compile` comando. Essas informações de configuração são gravadas nas pastas de metadados geradas com base no escopo. Anteriormente, essas informações eram armazenadas em cache. Os aprimoramentos de desempenho resultantes incluem:

   * O tamanho do cache de rede diminuiu
   * O tempo de execução de muitos cenários foi aprimorado.

<!-- ENGCOM-7290-->

* O aplicativo agora carrega o widget de controle deslizante apropriado sob demanda, o que melhorou o carregamento da página. A personalização do widget controle deslizante de toque foi movida para um arquivo separado para que ele possa ser carregado somente em dispositivos compatíveis. O tipo de widget de controle deslizante apropriado agora é carregado somente quando a vinculação de intervalo é realmente usada na página. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* O desempenho do check-out com vários pedidos simultâneos foi aprimorado.

<!-- MC-25062-->

* Os bloqueios não ocorrem mais quando o processo de importação executa uma inserção em massa e o processo de reindexação executa simultaneamente uma inserção grande a partir da seleção. Anteriormente, o aplicativo exibia este erro: `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### Resenhas

<!-- MC-33405-->

* Uma chave exclusiva para `entity_pk_value-entity_type-store_id` foi adicionado ao `review_entity_summary` tabela, que impede a criação de linhas duplicadas para a mesma ID de produto (`entity_pk_value`). Anteriormente, essa falta de chave exclusiva resultava em linhas duplicadas para a mesma ID de produto e em erros de SQL.

### Vendas

<!-- MC-35675-->

* O aplicativo não atribui mais um status de `Complete` após faturar uma ordem que exija pagamento zero.

<!-- MC-35888-->

* O email Nova remessa gerado pela API REST agora contém as mesmas informações de remessa e cliente que as remessas criadas manualmente pelo Administrador. Anteriormente, esse e-mail não continha o nome do cliente, informações de rastreamento, produtos solicitados e outras informações do pedido.

<!-- MC-35837-->

* Os nomes de usuários convidados agora ficam visíveis, conforme esperado, em emails relacionados a fatura e remessa quando os emails são carregados ou personalizados pelo Administrador.

<!-- MC-35707-->

* A fatura PDF agora é traduzida para o idioma da exibição da loja onde o pedido foi feito. Anteriormente, a fatura PDF era traduzida no idioma do Administrador.

<!-- MC-35858-->

* Agora você pode emitir um reembolso conforme esperado da página de aviso de crédito. [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* Os nomes das regiões localizadas exibidos na página Ordem da loja agora são traduzidos corretamente. Anteriormente, o nome da região não se baseava no local especificado, a menos que fosse editado no Administrador.

<!-- MC-35633-->

* Remessas criadas por meio do POST `/rest/V1/shipment` O endpoint agora atualiza os pedidos corretamente. Anteriormente, o aplicativo criava uma remessa, mas o status da remessa permanecia no estado de processamento.

<!-- ENGCOM-7639 -->

* Os avisos de crédito agora exibem o método de pagamento derivado do escopo do armazenamento no qual o pedido foi feito. Anteriormente, os avisos de crédito exibiam o nome conforme definido no escopo de armazenamento padrão. _Correção enviada por Ledian Hymetllari na solicitação de pull [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### Pesquisar {#search-heading}

<!-- MC-31304-->

* Agora você pode pesquisar produtos por atributo na exibição Admin Customer usando a Pesquisa rápida. Anteriormente, ocorria uma exceção na página de resultados da pesquisa do catálogo.

<!-- MC-32518-->

* O aplicativo agora exibe produtos configuráveis na página de categoria, conforme esperado depois que você adiciona um atributo de produto.

<!-- MC-33952-->

* Os resultados de Elasticsearch agora incluem os valores corretos para cada opção de atributo da visualização de loja. Se um `Dropdown` ou `Multiple Select` o atributo tem um valor de opção diferente na exibição de armazenamento não padrão do que na exibição de armazenamento padrão, o Elasticsearch agora indexa esse valor ou retorna o produto com esse valor nos resultados. Anteriormente, o Elasticsearch não indexava esse valor ou retornava o produto com esse valor nos resultados.

<!-- MC-35013-->

* A pesquisa por SKU agora funciona conforme esperado na pesquisa avançada com o Elasticsearch. Anteriormente, quando você tentava pesquisar por SKU, o aplicativo exibia esta mensagem de erro: `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* A pesquisa avançada não permite mais que os compradores filtrem por preços negativos. _Correção enviada por Rohan Hapani na solicitação de pull [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* Os valores de escopo agora são redefinidos conforme esperado no formulário Novo grupo de sinônimos. _Correção enviada por Sathish Subramanian na solicitação de pull [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### Envio

<!-- MC-34734-->

* O aplicativo agora calcula as taxas da tabela de envio corretamente após a atualização. Anteriormente, as taxas da tabela de remessa eram calculadas com base no preço líquido, o que excluía o IVA.

<!-- MC-33737-->

* O aplicativo agora exibe as taxas de envio na moeda correta no workflow de finalização para pedidos que especificam FedEx como o método de envio.

<!-- MC-33267-->

* PDF de várias páginas de etiquetas de remessa para pedidos enviados por UPS agora exibem a contagem correta.

<!-- MC-35514-->

* Problemas com os componentes JavaScript da página Criar pacotes foram resolvidos. Anteriormente, o aplicativo não exibia a variável **Criar etiqueta de remessa** nesta página, e não foi possível criar uma etiqueta de remessa para um pedido existente.

### Mapa do site

<!-- ENGCOM-7924-->

* O mapa do site em `robots.txt` agora é específico da loja. _Correção enviada por Vadim Malesh em solicitação de pull [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* Os valores codificados agora são escapados corretamente na variável `sitemap.xml` arquivo. Anteriormente, ao incluir caracteres codificados em um nome de produto ou título de imagem, o mapa de site gerado era inválido.

### Loja

<!-- MC-35853-->

* A exclusão de uma visualização de armazenamento criada anteriormente não resulta mais em erro em implantações com uma configuração de banco de dados dividido. Anteriormente, o aplicativo lançava uma exceção.

<!-- MC-32634-->

* Agora você pode exportar `config.php` e código de site padrão de um site para instalar e configurar o aplicativo em um segundo site em uma implantação de vários sites. Anteriormente, o armazenamento e a visualização padrão desapareciam após a exportação e ocorriam erros na loja.

### Swagger

<!-- ENGCOM-7720-->

* Agora você pode gerar um token do cliente com o Swagger. Anteriormente, o Swagger não gerava um código de resposta quando informações válidas de acesso ao cliente eram inseridas e o aplicativo exibia este erro: `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _Correção enviada por Vadim Malesh em solicitação de pull [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### Amostras

<!-- ENGCOM-7845-->

* Os produtos configuráveis com amostras agora mostram preços de camada quando um comprador clica **Editar** no carrinho. Anteriormente, o aplicativo não exibia os preços de nível no carrinho antes do check-out. _Correção enviada por Sathish Subramanian na solicitação de pull [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* O aplicativo agora exibe os preços de nível conforme esperado para variações de produtos configuráveis.

### Imposto

<!-- MC-36049-->

* O aplicativo não exibe mais um atributo fixo de imposto sobre o produto na vitrine de um produto depois que um comerciante o desatribuiu do conjunto de atributos do produto.

### Teste

<!-- ENGCOM-7874-->

* Erros de PHPUnit 9 foram corrigidos em testes de unidade. _Correção enviada por Anton Evers em solicitação de pull [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* Adicionados testes de unidade para aprovar uma ordem de compra que foi feita com um desconto que expirou desde então colocarão uma ordem no valor total e não atualizarão o total da ordem de compra. _Correção enviada por Joan He no pull request [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` O agora é coberto por testes de integração. _Correção enviada por jmonteros422 na solicitação de pull [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* Uma função foi adicionada a `\Magento\TestFramework\TestCase\WebapiAbstract` que permite a comparação de grandes matrizes aninhadas de resultados esperados e reais em testes e permite que os testadores ignorem chaves irrelevantes no resultado real. _Correção enviada pelo Jekabs na solicitação de pull [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* Correção da inversão do valor esperado com o valor real em `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* Problemas com a serialização e desserialização de propriedades estáticas ao executar testes consecutivos foram resolvidos. _Correção enviada por Pavel Bystritsky em solicitação de pull [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* Usar `ObjectManager` para instanciar classes durante teste foi substituída pela nova palavra-chave em testes de unidade. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* A cobertura de teste foi adicionada para estes casos de `updateCustomer` mutação: data de nascimento inválida, endereço de email inválido e sobrenome vazio do cliente. _Correção enviada por Alexander Taranovsky em solicitação de pull [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* A variável `ApiFunctional TestFramework` O cliente do GraphQL agora analisa os cabeçalhos corretamente. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### Tema

<!-- MC-34397-->

* Os temas adicionados às Regras de agente do usuário agora são afetados conforme esperado ao executar `bin/magento catalog:images:resize`. Anteriormente, somente os temas atribuídos às lojas eram afetados quando `bin/magento catalog:images:resize` foi executado.

### Tradução e códigos de idiomas

<!-- MC-20372-->

* O aplicativo não lança mais um erro quando um administrador altera o **Data** durante a criação do produto Admin ou salve quando a localidade Admin for chinesa ou japonesa. [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* O aplicativo agora verifica a área (front-end ou `adminhtml`) antes de renderizar a marcação de tradução em linha. Anteriormente, fazer uma chamada de API para o `POST /V1/integration/admin/token` com credenciais incorretas enquanto a tradução em linha estava habilitada, resulta na inclusão da marcação de tradução em linha ao redor da mensagem de erro na resposta da API. _Correção enviada por Zach Nanninga na solicitação de pull [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* As regiões búlgaras foram acrescentadas à `directory_country_region` tabela. _Correção enviada por Nikola Lardev no pedido de pull [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* Os títulos e botões no Admin **Clientes**  >  **Adicionar novo endereço** e **Editar produto**  >  **Inventário avançado** os modais agora podem ser traduzidos. _Correção enviada por Sathish Subramanian na solicitação de pull [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* O termo FPT agora pode ser traduzido em Administrador  **Lojas**  > **Configuração**  > **Vendas**  > **Imposto**  > **Impostos Fixos sobre Produtos**. _Correção enviada por Vadim Malesh em solicitação de pull [28108](https://github.com/magento/magento2/pull/28108)_. [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* A variável **Enviar aqui** o rótulo do botão no modal de endereço de envio do fluxo de trabalho de check-out foi alterado para corresponder ao camel case usado para outros botões. Esse caso agora corresponde ao caso usado nos arquivos de tradução. Anteriormente, devido à incompatibilidade de letras maiúsculas e minúsculas, esse rótulo não era traduzido. _Correção enviada por WK em solicitação de pull [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### IU

<!-- ENGCOM-7514-->

* O link da política de privacidade e cookie no rodapé da página agora é exibido como um link ativo quando a página Política de privacidade e cookie é exibida. _Correção enviada por Sathish Subramanian na solicitação de pull [28004](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* Corrigido o desalinhamento do cursor na área de texto Comentários da fatura da fatura associada a um pedido selecionado do Administrador **Vendas** > **Pedidos**.

<!-- MC-36044-->

* A página Criar novo pedido agora é exibida **Adicionar produtos por SKU** e **Adicionar produtos** conforme esperado.

<!-- MC-35974-->

* O aplicativo agora exibe a página Editar revisão corretamente quando uma classificação de produto está disponível para o produto selecionado.

<!-- MC-35475-->

* O aplicativo agora exibe corretamente a página Admin customer edit em uma iPhone que executa o Safari.

<!-- MC-35370-->

* Corrigida a rolagem desnecessária na página Criar novo pedido.

<!-- MC-35345-->

* Clicando diretamente no link **Exportar Alíquotas de Imposto** botão da página Adicionar Nova Regra de Imposto (**Lojas**  >  **Regras de Imposto**) agora baixa o `tax_rates.csv` conforme esperado. Anteriormente, os comerciantes tinham que clicar na borda do **Exportar Alíquotas de Imposto** botão. Esse foi um problema conhecido na versão 2.4.0.

<!-- MC-35313-->

* A variável **Adicionar seleções ao meu carrinho** na parte inferior do carrinho de compras agora funciona conforme esperado. Esse foi um problema conhecido na versão 2.4.0.

<!-- MC-35296-->

* A variável **Atualizar** botão do **Produtos visualizados recentemente** da página Atividades do cliente agora funciona conforme esperado. Anteriormente, ao clicar em **Atualizar**, a lista de produtos não foi atualizada e a página foi rolada.

<!-- MC-35412-->

* O aplicativo agora exibe corretamente o ícone de calendário usado para selecionar a data de nascimento de um cliente na guia Condições de **Clientes** > **Segmentos** > **Adicionar segmento**.

<!-- MC-35658-->

* A seção de resumo de check-out do fluxo de trabalho de check-out não cintila mais quando um comprador navega por essa página no Internet Explorer 11.x.

<!-- MC-34602-->

* O aplicativo agora exibe corretamente o widget Ordenar por SKU na página Categoria da loja. Anteriormente, o código HTML desse widget não era renderizado e o aplicativo não exibia o **Carregar uma lista de SKUs** link.

<!-- MC-37444-->

* Componentes da interface do usuário que foram desativados usando `this.disabled(true)` não aparecerá mais na loja. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* O aplicativo agora exibe corretamente o widget produtos visualizados recentemente na exibição móvel. _Correção enviada por Tu Nguyen em solicitação de pull [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* A alteração da posição de um produto do Administrador agora se reflete na posição do produto na loja. _Correção enviada por Oleg Aleksin na solicitação de pull [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* O estilo de formulário de logon agora é consistente com o estilo em outros formulários no tema em branco. Os estilos desnecessários que definem a largura dos campos de entrada de quebra automática de controle de contêiner foram removidos. _Correção enviada por Tu Nguyen em solicitação de pull [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* A variável **OK** no pop-up de confirmação do produto de exclusão do minicarrinho agora se comporta conforme esperado. _Correção enviada por Tu Nguyen em solicitação de pull [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* Os elementos da galeria de produtos não piscam mais durante o carregamento da página. _Correção enviada por Mateusz Krzeszowiak em um pedido de pull [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* A classe CSS que controla a largura do campo agora é aplicada como esperado para o elemento de Tempo inicial em todo o Admin. _Correção enviada por Shankar Konar em solicitação de pull [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* O rótulo de texto dos Termos e condições agora pode exibir strings de texto mais longas corretamente. _Correção enviada por Bartłomiej Szubert no pedido de pull [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* O título da página de falha do pedido foi reescrito para fins de precisão. Anteriormente, quando um comprador cancelava um pedido, o aplicativo exibia uma página com este título: `We received your order!`. _Correção enviada por Angelo Romano no pull request [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* O número total de itens cancelados na página de exibição do pedido cancelado agora é identificado corretamente na página de exibição do pedido cancelado. Anteriormente, esse campo era rotulado como **Total Devido**. _Correção enviada por Madhu Rajawat na solicitação de pull [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* O botão de alternância na página Criar produto configurável agora funciona conforme esperado. _Correção enviada por Tu Nguyen em solicitação de pull [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* O ícone de bloco das propriedades avançadas de atributo na página Propriedades avançadas de atributo agora se comporta conforme esperado. _Correção enviada por Tu Nguyen em solicitação de pull [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* A seção Admin da página de configuração do sistema agora se expande para exibir campos obrigatórios conforme esperado quando você tenta salvar as definições de configuração de um novo módulo. _Correção enviada por Bartłomiej Szubert no pedido de pull [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* Comportamento corrigido da lente de aumento quando o modo está definido como `inside`. _Correção enviada por Sean van Zuidam em solicitação de pull [29077](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* Correção da largura do campo de entrada distraidamente longa que resultava quando um comprador inseria um endereço de email inválido no campo de inscrição do rodapé da página. _Correção enviada por Dipesh Rangani na solicitação de pull [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* Um `Uncaught ReferenceError` o erro não aparece mais no console dev quando você adiciona uma nova tag e move o cursor do mouse sobre ela. _Correção enviada por Nazar Klovanych em solicitação de pull [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### Substituições de URL

<!-- MC-34483-->

* Mover uma exibição da loja para um site diferente não redefine mais os URLs. Anteriormente, o aplicativo regenerava incorretamente o CMS e o URL do produto era reescrito.

<!-- MC-33028-->

* O aplicativo agora preserva as substituições de URL do catálogo existente, conforme esperado, quando uma visualização de loja é atribuída a uma loja diferente. Anteriormente, o aplicativo excluía as regravações de URL específicas do armazenamento.

### Verniz

<!-- ENGCOM-7761-->

* Reiniciar o Varnish não resultará mais em erros 503. _Correção enviada por Ihor Sviziev em uma solicitação de pull [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### Cofre

<!-- MC-34674-->

* O aplicativo não salva mais números de cartão de crédito quando a variável **Salvar para uso posterior** a caixa de seleção na seção pagamento do fluxo de trabalho de finalização não está marcada.

### Estrutura da API da Web

<!-- MC-35838-->

* Os comerciantes com vários sites agora podem usar a REST API para criar e atualizar produtos, preservando a herança das funções de imagem e imagem. Anteriormente, quando um comerciante usava a API REST para criar e atualizar produtos e um produto era atualizado para exibição da loja, as funções de imagem padrão eram carregadas e salvas para essa exibição da loja. Como resultado, as funções de imagem de exibição de loja pararam de herdar do escopo padrão após a atualização.

<!-- MC-36419-->

* Uma conta de usuário de integração sem escopo agora pode acessar um recurso por meio da API REST quando as permissões de recurso permitem acesso.

<!-- MC-35975-->

* Os filtros de critérios de pesquisa agora funcionam como esperado para atributos de produto usados durante a criação de um produto configurável. [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* A ID do grupo de clientes agora está validada para o POST `/rest/V1/customers` solicitações. Anteriormente, o aplicativo não exibia uma mensagem de erro quando você usava um `group_id` nessas solicitações. _Correção enviada por Vadim Malesh em solicitação de pull [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* Sessões PHP não são criadas por padrão para chamadas REST anônimas. Anteriormente, as sessões eram iniciadas mesmo quando desnecessárias. _Correção enviada por Maciej Pawłowski na solicitação de pull [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* O uso de vários pontos de extremidade REST para atualizar pedidos que contêm a opção personalizada não exclui mais as informações da opção personalizada. Anteriormente, os valores em `info_buyRequest` foram excluídos. _Correção enviada por Vadim Malesh em solicitação de pull [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* Utilização do GET `V1/customers/me` now honors **Compartilhar contas de clientes** configuração (Administrador **Lojas** >  **Configuração**  >  **Clientes**  >  **Configuração do cliente**  > **Opções de compartilhamento de conta**) ao recuperar informações do usuário. _Correção enviada por Pavel Bystritsky em solicitação de pull [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* Os atributos de extensão relacionados ao endereço podem ser definidos como arrays de dados. Anteriormente, o aplicativo exibia um erro quando uma solicitação POST que continha  `extension_attributes` foi enviado para `estimate-shipping-methods`. Esse bug, que foi introduzido por uma confirmação anterior, afetava qualquer atributo de extensão definido em `Magento\Quote\Api\Data\AddressInterface` que não eram objetos. _Correção enviada por Alexander Menk na solicitação de pull [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* Agora é possível especificar um único campo ao atualizar um cliente com o PUT `V1/customers/:id` terminal. Anteriormente, o endpoint exigia que você especificasse o email do cliente e outros campos necessários para criar um cliente. _Correção enviada por Vadim Malesh em solicitação de pull [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### Lista de desejos

<!-- MC-35622-->

* Os clientes agora podem alterar a quantidade de um produto em uma lista de desejos a partir da própria lista. Anteriormente, o aplicativo não atualizava a quantidade do produto e não exibia uma mensagem.

<!-- MC-35618-->

* Os clientes agora podem alterar a quantidade de um produto agrupado em uma lista de desejos da própria lista. Anteriormente, o aplicativo não atualizava a quantidade do produto nem exibia uma mensagem.

<!-- ENGCOM-7580-->

* Poligloretos para `Map`, `WeakMap`, `FormData`, e `MutationObserver` agora são carregados somente conforme necessário. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* O processo de atualização da lista de desejos agora permite atualizar um item da lista de desejos e sua descrição simultaneamente. _Correção enviada por Eduard Chitoraga na solicitação de pull [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* Foi adicionado um teste para compartilhar a lista de desejos de um cliente com mais do que o número permitido de emails. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* Os administradores agora podem configurar um produto configurável que foi adicionado por um cliente a uma lista de desejos de uma loja não padrão. Anteriormente, quando o cliente também adicionava o produto configurável de uma loja fora do padrão, o aplicativo exibia um erro.

<!-- ENGCOM-7660-->

* Foi adicionado um teste para compartilhar a lista de desejos de um cliente com mais do que o número permitido de emails. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* Foi adicionado um teste para excluir itens da lista de desejos de um cliente como um usuário administrador. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* Adição de um teste para desativar a funcionalidade da lista de desejos. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* Adição de um teste para usar endereços de email inválidos ao compartilhar listas de desejos do cliente. `StorefrontShareWishlistEntityTest` foi refatorada. `StorefrontCustomerShareWishlistActionGroup` foi descontinuado. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* Foi adicionado um teste para compartilhar a lista de desejos de um cliente que excede o limite de comprimento de texto permitido. _Correção enviada por Dmitry Tsymbal na solicitação de pull [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## Problemas conhecidos

**Problema**: O novo recurso CAPTCHA para check-out não funciona como esperado na página Fazer pedido ao usar provedores de pagamento de terceiros. Os comerciantes que executam o 2.3.6 ou 2.4.1 e que ativaram a proteção CAPTCHA na página principal da loja de Fazer pedido verão este erro ao fazer check-out usando um provedor de pagamento de terceiros, como o PayPal: `Please provide CAPTCHA code and try again`. **Solução alternativa**: uma correção para esse problema está disponível. Consulte a [Magento Open Source v2.3.6/2.4.1 CAPTCHA no check-out não funciona](https://support.magento.com/hc/en-us/articles/360051235772) Artigo da knowledge base. Uma correção também será incluída em nosso próximo patch trimestral (1º trimestre de 2021).

**Problema**: os usuários sem privilégios de administrador não podem configurar seu acesso pessoal ao 2FA no momento. 2FA inclui duas funções de ACL. Uma função afeta a configuração global do sistema e é necessária somente ao configurar o sistema. A segunda função da ACL afeta contas 2FA de usuário individuais. Um usuário administrador deve configurar esse segundo tipo de ACL 2FA. **Solução alternativa**: depois que o usuário fizer logon e visualizar a tela Acesso negado, ele poderá visitar `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` para forçar a configuração. Observação: não recomendamos desativar as configurações de segurança. No entanto, essa solução alternativa tem efeito somente quando as chaves secretas do URL do administrador estão desativadas.

**Problema**: A variável **Criar uma conta** O botão na página Criar nova conta permanece desativado se um comprador tiver inserido dados inválidos. Isso impede que os compradores tentem criar uma conta novamente após cometer um erro. **Solução alternativa**: Aplicar correção `MC-38509`. Uma correção também será incluída em nossas próximas versões trimestrais (2.4.2, 2.4.1-p1 e 2.3.6-p1), que estão programadas para lançamento no primeiro trimestre de 2021. Consulte a [2.4.1 e 2.3.6 criar um hotfix de botão de conta desativado](https://support.magento.com/hc/en-us/articles/360051130212) Artigo da knowledge base.  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**Problema**: Os comerciantes não podem fazer logon no dotdigital pelo Administrador no Safari quando o dotdigital está ativado. Consulte a [É impossível fazer logon no dotdigital por meio do painel do administrador quando a conta dotdigital está ativada](https://support.magento.com/hc/en-us/articles/360050092291) Artigo da knowledge base.

**Problema**: A validação do endereço Vertex não funciona durante o pagamento quando o comprador seleciona um endereço de entrega diferente do endereço de faturamento. O problema será corrigido na versão 2.4.2. Consulte a [2.4.1 problema conhecido: a mensagem de validação do endereço Vertex não desaparece após a atualização do endereço](https://support.magento.com/hc/en-us/articles/360050139631) Artigo da knowledge base.

**Problema**: o aplicativo exibe uma página vazia quando um comerciante salva um formulário dotdigital do Page Builder no navegador Safari. **Solução alternativa**: recarregue a página para aplicar as alterações. Consulte a [2.4.1 problema conhecido: página vazia após salvar o formulário dotdigital do Page Builder](https://support.magento.com/hc/en-us/articles/360049819092) Artigo da knowledge base.

**Problema**: em determinadas condições, o aplicativo faz logon automaticamente nos clientes para contas do Amazon usadas anteriormente, solicitando que façam logon durante o checkout com o Amazon Pay. Consulte a [2.4.1 problema conhecido: não é possível alterar a conta do Amazon no Google Chrome](https://support.magento.com/hc/en-us/articles/360049814152) Artigo da knowledge base.

**Problema**: o aplicativo exibe brevemente uma mensagem de erro na página de faturamento do fluxo de trabalho de check-out quando o pagamento do Braintree do PayPal e a entrega de vários endereços são selecionados. Consulte a [2.4.1 problema conhecido: erro que aparece no Check-out com o Braintree do PayPal](https://support.magento.com/hc/en-us/articles/360050253211) Artigo da knowledge base.

**Problema**: o aplicativo exibe uma mensagem de erro não informativa quando um cliente convidado tenta fazer um pedido no PayPal por meio do Braintree quando o check-out do convidado está desativado. Consulte a [2.4.1 problema conhecido: mensagem de erro não informativa durante o checkout do convidado usando Paypal por meio do Braintree](https://support.magento.com/hc/en-us/articles/360050368111) Artigo da knowledge base.

## Contribuições da Comunidade

Estamos gratos à comunidade Magento Open Source mais ampla e gostaríamos de reconhecer suas contribuições para esta versão. Confira as seguintes maneiras de saber mais sobre as contribuições da comunidade para nossas versões atuais:

* Se um membro da comunidade tiver fornecido uma correção para essa versão, identificaremos a correção na seção Problema corrigido dessas notas com a frase &quot;*Correção fornecida pelo membro da comunidade*&quot;.

* A equipe de engenharia da comunidade [Colaboradores Magento](https://magento.com/magento-contributors) O mantém uma lista dos principais contribuintes individuais e parceiros por mês, trimestre e ano. Nessa página de Contribuidores, você pode seguir os links para as PRs mescladas no GitHub.

### Contribuições do parceiro

A tabela a seguir destaca as contribuições feitas pelos Parceiros. Esta tabela lista o Parceiro que contribuiu com a solicitação de pull, a solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### Contribuições individuais do contribuinte

A tabela a seguir identifica as contribuições dos membros da comunidade. Esta tabela lista as solicitações de pull externas, o número do problema do GitHub associado a ela (se disponível) e o membro da comunidade que contribuiu com a solicitação de pull.

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### Requisitos do sistema

Nossa pilha de tecnologia é construída em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](../../../installation/system-requirements.md).

### Instruções de instalação e atualização

Você pode instalar o Magento Open Source 2.4.1 usando o Composer.

## Kits de ferramentas de migração

A Ferramenta de migração de dados ajuda a transferir os dados de armazenamento existentes do Magento 1.x para o Magento 2.x. Essa interface de linha de comando inclui funções de verificação, rastreamento de progresso, registro e teste. Para obter instruções de instalação, consulte [Instalar a Ferramenta de Migração de Dados](../../../tools/data-migration-tool/install.md). Considere explorar ou contribuir para o [Repositório de migração de dados](https://github.com/magento/data-migration-tool).

A variável [Kit de ferramentas de migração de código](https://github.com/magento-commerce/code-migration) O ajuda a transferir as extensões e personalizações do armazenamento do Magento 1.x existente para o Magento 2.x. A interface de linha de comando inclui scripts para converter módulos e layouts do Magento 1.x.
