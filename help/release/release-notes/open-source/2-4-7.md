---
title: Notas de versão do Magento Open Source 2.4.7-beta1
description: Saiba mais sobre novos recursos, melhorias, correções de bugs e problemas conhecidos na versão 2.4.7-beta1 do Magento Open Source.
badgeCoreBeta: label="2.4.7-beta1" type="informative"
source-git-commit: c0506139a4b4d08bee0a15f32543c56aa42ac6bc
workflow-type: tm+mt
source-wordcount: '6893'
ht-degree: 0%

---


# Notas de versão do Magento Open Source 2.4.7-beta1

>[!IMPORTANT]
>
>As versões Beta podem conter defeitos e são fornecidas &quot;NO ESTADO EM QUE SE ENCONTRAM&quot; sem garantias de nenhum tipo. O Adobe não terá nenhuma obrigação de manter, corrigir, atualizar, alterar, modificar ou oferecer suporte (por meio dos Serviços de suporte do Adobe ou de outra forma) às versões beta. Os clientes são aconselhados a ter cuidado e não depender de forma alguma do funcionamento ou do desempenho correto das versões beta e/ou de qualquer documentação ou material que as acompanhe. Portanto, qualquer uso das versões beta é de inteira responsabilidade do cliente.

O Magento Open Source 2.4.7-beta1 inclui mais de 140 correções e melhorias de qualidade. As dependências do Core Composer e bibliotecas de terceiros foram atualizadas para as versões mais recentes disponíveis. O suporte para o Composer 2.5 foi adicionado, enquanto o Composer 2.2.x permanece compatível.

Essa versão melhora a cobertura do GraphQL para atributos personalizados e recursos aprimorados de cache do GraphQL.

{{bics}}

## Outras informações sobre a versão

Embora o código para esses recursos esteja empacotado com versões do código núcleo Magento Open Source, vários desses projetos também são lançados independentemente. As correções de erros para esses projetos estão documentadas nas informações de versão separadas e específicas do projeto, disponíveis na documentação de cada projeto.

## Magento Open Source 2.4.7-beta1

O Magento Open Source 2.4.7-beta1 foi testado com as seguintes versões de componentes:

* Composer 2.5
* Elasticsearch 8.5
* MariaDB 10.6
* MySQL 8.0
* OpenSearch 2.5
* PHP 8.2 e 8.1
* RabbitMQ 3.11
* Redis 7.0
* Verniz 7.3

Nossa pilha de tecnologia é construída em PHP e MySQL. Consulte [Requisitos do sistema](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Destaques do Magento Open Source 2.4.7-beta1

Procure os seguintes destaques nesta versão.

### Aprimoramentos de segurança

Esta versão inclui 13 correções de segurança e melhorias na segurança da plataforma.

Nenhum ataque confirmado relacionado a esses problemas ocorreu até o momento. No entanto, certas vulnerabilidades podem ser potencialmente exploradas para acessar informações do cliente ou assumir o controle de sessões de administrador. A maioria desses problemas exige que um invasor obtenha acesso ao Administrador primeiro. Como resultado, lembretes para tomar todas as medidas necessárias para proteger seu administrador são:

* IP ➡ incluir na lista de permissões
* [autenticação de dois fatores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* uso de uma VPN
* uso de um local único em vez de `/admin`
* boa higiene de senha

Consulte [Boletim de segurança do Adobe](https://helpx.adobe.com/security/products/magento/apsb23-35.html) para obter a discussão mais recente sobre esses problemas corrigidos.

#### Aprimoramentos adicionais de segurança

Os aprimoramentos de segurança desta versão melhoram a conformidade com as práticas recomendadas de segurança mais recentes, incluindo essa alteração, que introduz uma alteração no comportamento padrão de um endpoint REST existente:

**Limitação de taxa nativa para informações de pagamento transmitidas por meio de REST e APIs do GraphQL**. Os comerciantes agora podem configurar a limitação de taxa para as informações de pagamento transmitidas usando REST e GraphQL. Essa camada adicional de proteção suporta a prevenção de ataques de cartões e potencialmente diminui o volume de ataques de cartões que testam muitos números de cartão de crédito de uma só vez. Consulte [Limitação de taxa](https://developer.adobe.com/commerce/webapi/get-started/rate-limiting/). <!-- AC-1271 -->

O comportamento padrão do [`isEmailAvailable`](https://developer.adobe.com/commerce/webapi/graphql/schema/customer/queries/is-email-available/) consulta do GraphQL e ([`V1/customers/isEmailAvailable`](https://adobe-commerce.redoc.ly/2.4.6-admin/tag/customersisEmailAvailable/#operation/PostV1CustomersIsEmailAvailable)) O endpoint REST foi alterado. Por padrão, a API agora sempre retorna `false`. Os comerciantes podem habilitar o comportamento original, que é retornar `true` se o email não existir no banco de dados e `false` se existir. <!-- AC-6695 -->

### Aprimoramentos na plataforma

As atualizações de plataforma para esta versão melhoram a conformidade com as práticas recomendadas de segurança mais recentes. O Magento Open Source 2.4.7-beta1 apresenta:

* Composer 2.5.x. A compatibilidade com o Composer 2.2.x permanece.  <!-- AC-8129 -->

* **Suporte ao cache vernish 7.3**. Esta versão é compatível com a versão mais recente do Varnish Cache 7.3. A compatibilidade permanece com as versões 6.0.x e 7.2.x, mas recomendamos usar o Magento Open Source 2.4.7-beta1 somente com o Cache de Varnish versão 7.3 ou versão 6.0 LTS.

* **Suporte ao RabbitMQ 3.11**. Esta versão é compatível com a versão mais recente do RabbitMQ 3.11. A compatibilidade permanece com o RabbitMQ 3.9, que é compatível até agosto de 2023, mas recomendamos usar o Magento Open Source 2.4.7-beta1 somente com o RabbitMQ 3.11.

#### Outras atualizações e substituições

As bibliotecas JavaScript desatualizadas foram atualizadas para suas versões mais recentes, incluindo:

* `moment.js` biblioteca (v2.29.4) <!-- AC-7389 -->
* `jQuery UI` biblioteca (v1.13.2)  <!-- AC-7775 -->
* `jQuery` biblioteca de plug-in de validação (v1.19.5) <!-- AC-8077 -->

### GraphQL

Esta versão adiciona recursos aprimorados de armazenamento em cache do GraphQL e suporte ao esquema do GraphQL para atributos do EAV do cliente, incluindo:

* **Suporte aprimorado para atributos personalizados**. O suporte ao atributo personalizado do GraphQL foi aprimorado com o enriquecimento dos dados da API, portanto, agora ele oferece suporte a todos os tipos de atributos. O esquema de atributos do EAV do GraphQL agora oferece suporte à extensão de atributos do cliente e objetos de endereço do cliente no Administrador e à recuperação deles usando o GraphQL. As áreas específicas de aprimoramento incluem: <!-- LYNX-61 110-->

   * suporte estendido/adicionado a atributos personalizados para áreas específicas, como cliente e endereço do cliente
   * adição de cache para atributos personalizados
   * suporte aprimorado a atributos personalizados existentes para produtos

* **Os recursos aprimorados de cache do GraphQL melhoram a velocidade de carregamento da página**. O recurso de armazenamento em cache foi adicionado a essas consultas, melhorando a velocidade do tempo de carregamento da página para a maioria das páginas de PWA:

   * [`storeConfig`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/store-config/) <!-- B2B-2487 2258 -->
   * [`currency`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/currency/) <!-- B2B-2255 -->
   * [`countries`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/countries/) e [`country`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/country/) <!-- B2B-2256 -->
   * [`availableStores`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/available-stores/) <!-- B2B-2257 -->
   * [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql-api/index.html#query-customAttributeMetadata) <!-- B2B-2259 -->

* **Novos tipos de cache do resolvedor do GraphQL** incluem:
   * página do CMS. Armazena em cache os resultados do resolvedor de páginas do CMS.  <!-- B2B-2451 -->
   * Blocos CMS. Armazena em cache os resultados retornados de `Magento\CmsGraphQl\Model\Resolver\Blocks::resolve`. <!-- B2B-2659 -->

* O desempenho do analisador do GraphQL melhorou ao reduzir o número de vezes que o `parse` é chamado por solicitação. Agora é chamado uma vez. Anteriormente, o analisador era chamado pelo menos três vezes. <!-- B2B-2606 -->

#### Nova consulta

[`customAttributeMetadataV2`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata-v2/) <!-- LYNX-152 160-->

#### Consultas obsoletas

* [`attributesMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/attributes-metadata/) <!-- LYNX-77-->
* [`customAttributeMetadata`](https://developer.adobe.com/commerce/webapi/graphql/schema/attributes/queries/custom-attribute-metadata/)

### Metapackage de extensão do Magento Open Source

Esta versão apresenta o Magento Open Source Extension metapackage v1.0.0-beta1, que agrupa automaticamente o [Payment Services](https://experienceleague.adobe.com/docs/commerce-merchant-services/payment-services/guide-overview.html) com esta versão principal. A versão desta extensão incluída neste metapackage é instalada quando `composer update` O é executado, simplificando o processo de atualização da extensão ao atualizar para a versão principal mais recente. Essa extensão mantém uma programação de lançamento independente.

As versões futuras deste metapackage de extensão conterão extensões adicionais.

### Page Builder

O Page Builder v.1.7.4 é compatível com o Magento Open Source 2.4.7-beta1.

### PWA Studio

O PWA Studio v.13.2.x é compatível com o Magento Open Source 2.4.7-beta1. Ele inclui várias melhorias para melhorar a acessibilidade. Para obter informações sobre correções de erros, consulte [Versões do PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [Compatibilidade de versão](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões compatíveis do Magento Open Source.

## Problemas corrigidos

Corrigimos centenas de problemas no código principal do Magento Open Source 2.4.7-beta1. Um subconjunto dos problemas corrigidos incluídos nesta versão está descrito abaixo.

### Instalação, atualização, implantação

<!-- ACP2E-1505 -->

* A variável `bin/magento setup:upgrade` comando não falha mais com este tipo de erro relacionado ao limite de memória do MySQL: `PHP Fatal error:  Allowed memory size of 4294967296 bytes exhausted (tried to allocate 20480 bytes)`. A migração de atributos de seleção múltipla foi otimizada para consumir menos memória durante `setup:upgrade`.

<!-- ACP2E-1751 -->

* A geração de um backup de banco de dados agora funciona conforme esperado do Admin e da linha de comando. Anteriormente, o Magento Open Source gerava este erro: `Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MariaDB server version for the right syntax to use near 'delimiter' at line 1, query was: delimiter ;;`.

<!-- ACP2E-1604 1605-->

* Executando `setup:config:set` sem especificar o `--lock-db-prefix` O parâmetro não apaga mais o valor atual do `env.php` arquivo.

<!-- ACP2E-1498 -->

* A configuração de verniz foi atualizada para impedir que usuários convidados acessem conteúdo em cache relacionado a outros grupos de clientes.

<!-- https://github.com/magento/magento2/pull/33092 -->

* `bin/magento setup:upgrade` O agora é concluído com sucesso ao instalar um novo módulo que instala as tabelas e os relatórios `mview` indexadores.

<!-- ENGCOM-9243 -->

* `bin/magento setup:upgrade` O agora exibe uma mensagem de erro mais informativa quando um tópico da fila de mensagens não inclui um nome de tópico. [GitHub-34246](https://github.com/magento/magento2/issues/34246)

<!-- https://github.com/magento/magento2/pull/36239 -->

* `bin/magento setup:upgrade` O agora exibe uma mensagem de erro mais informativa quando os arquivos XML mesclados são inválidos. A mensagem de erro agora inclui o nome do arquivo.

### Produtos do pacote

<!-- ACP2E-1478 -->

* Os produtos do pacote agora são importados com êxito sem duplicar SKUs nas opções do produto. Anteriormente, o Magento Open Source criava vários SKUs duplicados nas opções do produto quando você importava pacotes de produtos com entradas duplicadas.

<!-- ACP2E-1388 -->

* O preço do produto em pacote agora é calculado corretamente quando um dos produtos no pacote está esgotado. Anteriormente, se um produto que fazia parte do pacote estivesse esgotado, ele seria removido do cálculo de preço.

<!-- ACP2E-1503 -->

* Os produtos do pacote agora são exibidos como indisponíveis quando os últimos produtos secundários necessários são comprados. Anteriormente, os produtos do pacote eram exibidos como em estoque na loja quando seus produtos simples estavam indisponíveis.

<!-- ACP2E-1443 -->

* Problemas de desempenho ao adicionar produtos do pacote com opções não necessárias ao carrinho usando o `addBundleProductsToCart` mutação foram resolvidas.

<!-- ACP2E-1264 -->

* A variável `categoryList` o query agora retorna todas as opções do pacote conforme esperado quando a variável **[!UICONTROL Show out-of-stock products]** definição de configuração está habilitada. Anteriormente, as opções indisponíveis não eram incluídas na resposta da consulta.

<!-- ACP2E-1345 -->

* Produtos do pacote criados com o `POST V1/products` agora têm êxito quando o escopo de preço do catálogo está definido como `website`. Anteriormente, ocorria uma violação de restrição de integridade. [GitHub-35595](https://github.com/magento/magento2/issues/35595)

### Cache

<!-- ACP2E-1524 -->

* O cache da página agora é limpo conforme esperado para um produto principal quando um de seus produtos secundários foi salvo do administrador. Uma verificação de plug-in foi introduzida para atingir a invalidação de cache para variantes configuráveis, semelhantes a outros tipos de produtos, independentemente do estado do indexador (agendado ou tempo real). Anteriormente, os preços não eram atualizados corretamente na loja depois que uma variação configurável era atualizada do administrador.

<!-- ACP2E-1454 -->

* Adição de um mecanismo de cache para credenciais do AWS. Um provedor de credenciais agora usa o cache de Magento para armazenar em cache credenciais recuperadas do AWS para configuração EC2.

<!-- AC-7639 -->

* O plug-in cujo objetivo é adicionar a tag de cache configurável quando um produto simples associado a um produto configurável é salvo agora funciona conforme esperado. Todas as tags de cache relevantes e configuráveis são removidas conforme esperado quando um produto simples é atualizado pelo `POST V1/products`. Anteriormente, nem todos os preços eram atualizados na loja e os caches tinham que ser limpos manualmente. [GitHub-36726](https://github.com/magento/magento2/issues/36726)

### Carrinho e check-out

<!-- ACP2E-1580 -->

* O avaliador de imposto do carrinho e de remessa agora reflete com precisão a configuração de destino padrão. Anteriormente, ao definir as configurações padrão de cálculo do destino do imposto e especificar Estado/Região e CEP, somente o valor CEP era exibido no carrinho em **[!UICONTROL Estimate Tax and Shipping]**. Isso resultou da configuração Magento Open Source da ID da região como indefinida antes de chamar a declaração condicional que definiu a ID da região padrão do Admin.

<!-- ACP2E-1547 -->

* O Magento Open Source não lança mais esse erro durante o check-out quando o carrinho de compras persistente está ativado: `Invalid state change requested`. Anteriormente, quando esse erro era gerado, vários pedidos com o mesmo `quote_id` foram criados ocasionalmente.

<!-- ACP2E-1456 -->

* O minicarrinho agora exibe os preços de produtos agrupados que refletem as configurações de imposto do carrinho. Anteriormente, o minicarrinho sempre incluía impostos nos preços dos pacotes de produtos.

<!-- AC-7503 -->

* A estimativa de envio fornecida na página do carrinho agora é precisa. `collectShippingRates` agora é definido apenas uma vez. Anteriormente, a estimativa de envio era duplicada. [GitHub-36648](https://github.com/magento/magento2/issues/36648)

<!-- ACP2E-1417 -->

* A variável `cart` o query não retorna mais um erro quando um produto no carrinho especificado está indisponível. Anteriormente, os compradores que usavam essa query para fazer uma compra não podiam concluir sua compra quando um item estava esgotado e sua página de check-out estava em branco.

<!-- ACP2E-1459 -->

* Solicitações da API convidada para `POST V1/default/V1/guest-carts/<cartId>/shipping-information` não retornar mais um `cancel` Status se a página for recarregada durante o logon em um ambiente móvel. Anteriormente, o Magento Open Source gerava um erro 500 e registrava esta exceção: `TypeError: Argument 2 passed to Magento\CustomerCustomAttributes\Model\Plugin\ProcessCustomerShippingAddressCustomAttributes::beforeSaveAddressInformation() must be of the type string, null given`.

<!-- AC-7886 -->

* A elegibilidade para o transporte gratuito agora é calculada conforme esperado quando a **[!UICONTROL Subtotal (Excl. Tax)]** condição para regras de carrinho é aplicada. [GitHub-36760](https://github.com/magento/magento2/issues/36760)

<!-- AC-6672 -->

* A variável `cart` a consulta agora retorna o preço de camada correto para um produto. [GitHub-29655](https://github.com/magento/magento2/issues/29655)

<!-- AC-1162 -->

* Mensagens de erro informativas foram adicionadas à página de check-out para orientar os compradores quando a aplicação de um cupom na página de envio entra em conflito com o método de envio selecionado. Anteriormente, uma mensagem instruía os compradores a retornar à página anterior.

<!-- ENGCOM-8387 -->

* O pop-up de autenticação agora é inicializado somente quando é necessário, em vez de sempre que o check-out do convidado está habilitado. Agora ele é inicializado quando o comprador convidado tenta prosseguir para o check-out e o check-out do convidado é desativado. [GitHub-30672](https://github.com/magento/magento2/issues/30672)

### Regra de preço do carrinho

<!-- ACP2E-1516 -->

* As regras de preço do carrinho agora são aplicadas conforme esperado quando uma regra de preço do carrinho relacionada a um método de envio é configurada para a loja e esse método de envio é alterado para outro durante o check-out. Anteriormente, a variável `applied_rule_ids` o valor nunca foi alterado no `sales_order_item` e a regra de preço do carrinho não foi aplicada ao pedido.

<!-- AC-2044 -->

* Os cupons agora são aplicados com êxito a um pedido quando um comprador aplica o cupom depois de selecionar o método de envio de taxa uniforme em que uma regra de preço do carrinho com método de envio definido como uma condição é aplicável. Anteriormente, a página do carrinho exibia a variável `Coupon is Not valid` e o cupom não foi aplicado. [GitHub-34866](https://github.com/magento/magento2/issues/34866)

### Catálogo

<!-- ACP2E-1479 -->

* O Magento Open Source não exibe mais uma mensagem de aviso quando você salva um produto que foi criado com opções personalizadas após excluir a imagem.

<!-- ACP2E-1419 -->

* As imagens em miniatura do produto agora são exibidas conforme esperado no email de alerta de estoque do produto enviado quando um produto é colocado de volta no estoque. Anteriormente, essa imagem não era exibida no email de alerta

<!-- AC-3003 -->

* A contagem de produtos na árvore de categorias (Administrador) **[!UICONTROL Catalog]** > **[!UICONTROL Category]**) agora é precisa. Anteriormente, a contagem de produtos da categoria não podia ser recuperada do `catalog_category_product_index` tabela. O erro de digitação que acionou esse erro foi corrigido. [GitHub-35417](https://github.com/magento/magento2/issues/35417)

<!-- ACP2E-1239 -->

* A imagem principal do produto na página de detalhes do produto não muda mais visivelmente para baixo durante o carregamento da página quando `product_image_white_borders` no tema `view.xml` está desativado. Anteriormente, a imagem do produto deslocou-se visivelmente para baixo durante o carregamento da página devido a configurações incorretas de altura no Fotorama JS.

<!-- ACP2E-1361 -->

* Agora os clientes são notificados sobre quedas no preço do produto quando assinam alertas de queda de preço. Anteriormente, as notificações de queda de preço nem sempre eram enviadas devido ao armazenamento em cache no nível do aplicativo.

<!-- ACP2E-1422 -->

* A validação do lado do servidor foi adicionada ao processo de criação de atributos de produto por meio da API da Web. Você não pode ativar o **[!UICONTROL Use in Layered Navigation Catalog]** quando a variável **[!UICONTROL Catalog Input Type for Store Owner]** o valor do campo é `Text Field`,  `Text Area`,  `Text Editor`, `Date`ou `Date and Time`. Anteriormente, os produtos eram omitidos das categorias e dos resultados da pesquisa.

<!-- ACP2E-1413 -->

* A página de categoria agora é recarregada com a paginação correta depois que um comprador abre a página, altera a paginação, navega até uma página de produto e retorna à página de categoria.  [GitHub-36563](https://github.com/magento/magento2/issues/36563)

<!-- ACP2E-1334 -->

* Os produtos simples indisponíveis que são opções para um produto configurável agora são exibidos como desativados na loja quando **[!UICONTROL Display Out of Stock Products]** está definida como **Sim**. Anteriormente, todas as opções eram exibidas como disponíveis, apesar do status e da disponibilidade real.

<!-- ACP2E-1384 -->

* A atualização do atributo de escopo do site em uma exibição de armazenamento específica não substitui mais o valor desse atributo no escopo global. Anteriormente, a importação de preços de produtos quando várias linhas estão disponíveis com o mesmo SKU e `store_view_code` resultou em preços imprecisos para os escopos de exibição padrão e Todas as lojas.

<!-- ACP2E-1632 -->

* Os comerciantes agora podem adicionar uma imagem de GIF à galeria de imagens de um produto do Administrador. Anteriormente, o Magento Open Source exibia este erro:  `imagecolorsforindex(): Argument #2 ($color) is out of range`.

<!-- ACP2E-1709 -->

* Foram adicionadas verificações para manipular erros que resultam de chaves de matriz indefinidas. Anteriormente, um erro ocorria durante a geração da lista de permissões do esquema declarativo.

<!-- ACP2E-1749 -->

* Magento Open Source agora retorna um resultado válido para a data personalizada `01/01/1970`. Anteriormente, o atributo personalizado retornava este erro: `Invalid input datetime format of value '1/01/1970`. [GitHub-37274](https://github.com/magento/magento2/issues/37274)

<!-- AC-6507 -->

* `routes` as consultas que usam fragmentos agora retornam informações de categoria conforme esperado. Anteriormente, ocorria um erro interno do servidor na página de categoria. [GitHub-35906](https://github.com/magento/magento2/issues/35906)

<!-- ACP2E-1772 -->

* Problemas com o `cataloginventory_stock` o processo de reindexação parcial foi resolvido e o desempenho do indexador melhorou. Anteriormente, as categorias de estoque e produto não eram atualizadas com precisão.

<!-- AC-8226 -->

* O Magento Open Source agora gera um redirecionamento 301 para um produto quando a categoria à qual ele pertence é movida para um novo pai. [GitHub-37039](https://github.com/magento/magento2/issues/37039)

### Regras de catálogo

<!-- ACP2E-1579 -->

* As regras do catálogo agora são aplicadas conforme esperado em um ambiente de vários sites.

### Cupons

<!-- ACP2E-1551 -->

* Os compradores agora podem usar dois códigos de cupom gerados automaticamente separados que foram gerados pela mesma regra de preço do carrinho. A variável `Uses per Coupon` agora está ativado quando o tipo de cupom é selecionado para `Auto` (semelhante para tipo de cupom =`Specific Coupon`). Isso, por sua vez, permite que o comprador aplique vários códigos de cupom ao mesmo preço do carrinho se os códigos forem diferentes.

<!-- ACP2E-1496 -->

* O valor do cupom de uso único de um comprador agora é restaurado conforme esperado quando o pedido ao qual ele foi aplicado é cancelado.

<!-- ACP2E-1195 -->

* A variável `GET V1/coupons/<couponId>` O endpoint agora retorna a resposta completa esperada para cupons criados manualmente, assim como faz com os cupons gerados automaticamente.  Anteriormente, alguns campos eram omitidos (por exemplo, `usage_limit`, `usage_per_customer`, e `created_at`).

### cron

<!-- AC-7987 -->

* Os usuários administradores agora podem visualizar qual tarefa o `bin/magento cron:run` O processo está em execução no momento. O título do processo atualmente em execução agora lista os nomes do grupo e do trabalho. [GitHub-34321](https://github.com/magento/magento2/issues/34321)

### Cliente

<!-- AC-6748 -->

* Magento Open Source agora exibe o **[!UICONTROL Date of Birth]**, **[!UICONTROL Tax/VAT Number]**, **[!UICONTROL Gender]**, **[!UICONTROL Telephone]**, **[!UICONTROL Company]**, e **[!UICONTROL Fax]** campos na página editar cliente com base nas definições de configuração. [GitHub-36196](https://github.com/magento/magento2/issues/36196)

### E-mail

<!-- ACP2E-1529 -->

* Agora os detalhes do Administrador da empresa são salvos conforme esperado e os administradores são redirecionados corretamente, quando os emails de Atribuição de administrador da empresa contêm um `CMS Block URL` variável.

<!-- AC-2903 -->

* Os endereços de email do cliente agora podem incluir sinais diacríticos. Anteriormente, a validação de front-end proibia a criação de um usuário com sinais diacríticos em seu endereço de email. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1682 -->

* Os emails de alerta de estoque e preço agora são traduzidos de acordo com o idioma configurado para a exibição de loja padrão do site. Anteriormente, esses emails não eram traduzidos.

<!-- ACP2E-1571 -->

* `POST V1/order/notify-orders-are-ready-for-pickup` O agora envia um email alertando os clientes que um pedido está pronto para retirada somente quando o pedido está pronto. Agora, o email é acionado somente quando a solicitação é atendida sem uma exceção.

### Estruturas

<!-- ACP2E-1492 -->

* O mutex foi implementado para pedidos para evitar condições de corrida durante a atualização por solicitações simultâneas. Anteriormente, as solicitações simultâneas (condições de corrida) para cancelamentos de pedidos causavam entradas duplicadas no `inventory_reservation` tabela.

<!-- ACP2E-1381 -->

* A variável `populateWithArray` função agora transforma as propriedades do objeto em caso de cobra corretamente, tornando-o compatível com o `AbstractModel` getters e setters. Anteriormente, a formatação de caso de cobra estava incorreta quando o nome do atributo de dados continha várias letras maiúsculas em uma linha.

<!-- ACP2E-1522 -->

* O valor de incremento automático no `catalog_product_entity_varchar` A tabela agora é incrementada corretamente depois que um produto é salvo. Anteriormente, esse valor aumentava em dez.

<!-- ACP2E-1701 -->

* O Magento Open Source não lança mais esta exceção do sistema de arquivos quando você tenta liberar o cache de JavaScript/CSS:  `No such file or directory`.

<!-- ACP2E-1358 -->

* O valor de `value_id` in `customer_entity_int` agora é incrementado corretamente. Uma consulta de atualização é executada em vez de `insert on duplicate key update` ao atualizar uma entidade que incorpora esses atributos. Como resultado, as colunas de incremento automático usadas no modelo EAV agora crescem de forma linear. Anteriormente, o processo de incremento automático para colunas ignorava valores devido a consultas de inserção com falha. [GitHub-28387](https://github.com/magento/magento2/issues/28387)

<!-- AC-8462 -->

* Remoção de espaço em branco desnecessário de `id` atributos que não o exijam. (Este erro foi introduzido por uma alteração de código Magento Open Source 2.4.6.)

<!-- AC-7923 -->

* Os códigos de armazenamento não aparecem mais na URL de armazenamento quando o armazenamento está no modo de armazenamento único. [GitHub-36831](https://github.com/magento/magento2/issues/36831)

<!-- AC-7988 -->

* Foram feitas pequenas atualizações no `around` plugins. [GitHub-31443](https://github.com/magento/magento2/issues/31443)

<!-- AC-7989 -->

* As amostras `Helper` foi refatorado para remover aliases de importação enganosos. [GitHub-31373](https://github.com/magento/magento2/issues/31373)

<!-- AC-8708 -->

* Agora, usuários administradores podem excluir ou renomear um `sitemap.xml` conforme esperado. Anteriormente, um usuário administrador podia excluir o arquivo do Administrador, mas ele permanecia no sistema de arquivos.  [GitHub-37468](https://github.com/magento/magento2/issues/37468)


<!-- ACP2E-1747 -->

* Os cupons não são mais sinalizados como usados quando o pagamento falha para a ordem à qual foram aplicados. As mensagens em fila agora são processadas na ordem em que são publicadas quando o consumidor é iniciado. Anteriormente, a primeira mensagem era retirada da fila para simplesmente verificar se as mensagens estavam na fila, e era rejeitada posteriormente, o que fazia com que a primeira mensagem fosse processada por último.

<!-- ACP2E-1627 -->

* O Magento Open Source não lança mais uma exceção no arquivo de registro quando um usuário tenta imprimir um rótulo de remessa. Anteriormente, se uma extensão modificava cabeçalhos de resposta que continham um anexo, o sistema lançava uma exceção no arquivo de log.

<!-- AC-7986 -->

* O suporte para mais classes de HTML foi adicionado a `elements.xsd`. [GitHub-36891](https://github.com/magento/magento2/issues/36891)

### Correções gerais

<!-- ACP2E-1508 -->

* Os erros não ocorrem mais durante as solicitações de um feed RSS para categorias quando **[!UICONTROL RSS Feed Top Level Category]** está ativado. Anteriormente, a navegação na página de categoria do feed RSS resultava em Elasticsearch `CRITICAL` erros nos arquivos de log quando **[!UICONTROL RSS Feed Top Level Category]** foi ativado.

<!-- ACP2E-1490 -->

* O valor correto agora é salvo para `gws_store_groups` quando o escopo da função é alterado durante a criação da função do usuário. Anteriormente, quando o escopo da função era selecionado como `All`, o `gws_store_groups` o valor foi salvo como nulo durante a criação do usuário, mas não durante a edição da função. Além disso, se o escopo da função foi selecionado como `Custom`, depois o `gws_store_groups` sempre foi salvo como nulo.

<!-- ACP2E-1446 -->

* A página de redefinição de senha agora pode ser acessada clicando no link Admin reset password na página Admin login quando a variável **[!UICONTROL Add Store Code to Urls]** está ativada. O link Admin reset password abria anteriormente a página de logon ou a página 404.

<!-- ACP2E-1274 -->

* O intervalo de datas no painel Estatísticas do administrador agora é calculado com base no fuso horário definido nas configurações e, em seguida, convertido em UTC para buscar dados do banco de dados.

<!-- ACP2E-1665 -->

* O filtro de hierarquia do CMS funciona conforme esperado depois de filtrar uma exibição de armazenamento e clicar em **[!UICONTROL Save]** no administrador **[!UICONTROL Content]** > **[!UICONTROL Hierarchy]**. Anteriormente, ao clicar em **[!UICONTROL Save]** atualizou a página, mas o contexto foi perdido e a exibição da loja selecionada não foi mais exibida.

<!-- ACP2E-1631 -->

* Clicar no **[!UICONTROL Send invitation]** botão (Administrador **[!UICONTROL Marketing]** > **[!UICONTROL Private sales]**  > **[!UICONTROL Invitation]**) agora envia uma solicitação POST junto com a chave de formulário e envia o convite com êxito. Anteriormente, ao clicar nesse botão, nem o método HTTP POST nem a chave de formulário estavam presentes.

<!-- ACP2E-1608 -->

* Agora os arquivos de zero bytes podem ser copiados com êxito para o armazenamento remoto com o AWS S3.

<!-- AC-7402 -->

* Os usuários administradores agora podem adicionar um novo endereço de cliente do Administrador quando esse cliente for criado para outro site cuja ID da loja não corresponde à ID do site. Anteriormente, o Magento Open Source exibia esta mensagem pop-up: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- AC-8247 -->

* A página do editor de bloco do CMS agora exibe o widget correto `block_id` valor.  [GitHub-29644](https://github.com/magento/magento2/issues/29644)

### Cartões-presente e invólucro


<!-- ACP2E-1341 -->

* A emulação agora começa durante `send()` chama depois que a emulação é concluída durante o `getInfoBlockHtml()` e nenhum erro será registrado. Anteriormente, a variável `system.log` o arquivo foi inundado com este erro: `main.ERROR: Environment emulation nesting is not allowed`. [GitHub-35603](https://github.com/magento/magento2/issues/35603)

<!-- ACP2E-1612 -->

* Agora você pode usar o `updateCartItems` mutação para atualizar um cartão-presente em um carrinho de compras. Anteriormente, somente a quantidade do cartão podia ser atualizada no carrinho por essa mutação.

<!-- AC-7530 -->

* A variável `addProductsToCart` o query agora adiciona com êxito um cartão-presente a um carrinho. Anteriormente, essa consulta esperava o nome do recipient do cartão-presente, mas o nome do remetente foi retornado. Magento Open Source gerou este erro: `Please specify a recipient name`. [GitHub-36665](https://github.com/magento/magento2/issues/36665)

### Google ReCAPTCHA

<!-- ACP2E-1539 -->

* O Google reCAPTCHA no workflow de finalização agora funciona como esperado para cheques, ordens de pagamento e métodos de pagamento personalizados.

<!-- ACP2E-1311 -->

* Os formulários Magento Open Source não podem mais ser enviados antes que a caixa de seleção Google ReCAPTCHA seja carregada.

<!-- ACP2E-1338 -->

* O widget reCAPTCHA agora precede o **[!UICONTROL Place Order]** na página de pagamento. Anteriormente, o widget era exibido na parte superior da página.

### GraphQL

<!-- ACP2E-1584 -->

* Atributos de produto do tipo `DateTime` agora mapear para o `FilterRangeTypeInput` filtrar em consultas de produtos. Anteriormente, esses atributos eram mapeados para `FilterMatchTypeInput`. Como resultado dessa alteração, as consultas com filtragem em `DateTime` atributos exigem `from` e `to` em vez de corresponder aos valores.

<!-- ACP2E-1552 -->

* A variável `customer` o mutation agora retorna somente as análises do cliente relacionadas a uma visualização da loja específica, conforme esperado quando filtrado pela ID da loja.

<!-- AC-7544 -->

* A variável `categories` a consulta não retorna mais um erro quando a variável `items.redirect_code` o valor da resposta contém um valor nulo. [GitHub-36675](https://github.com/magento/magento2/issues/36675)

<!-- ACP2E-1486 -->

* A variável `changeCustomerPassword` A mutação agora aciona o email conforme esperado após redefinir uma senha com êxito.

<!-- ACP2E-1494 -->

* `urlResolver` e `route` as consultas agora retornam um resultado quando a variável `Target Path` de reescrita de URL é um URL absoluto. Anteriormente, a variável `urlResolver` a consulta retornou NULL quando você a usou para recuperar dados de redirecionamento.

<!-- AC-7979 -->

* A variável `products` a consulta agora retorna os rótulos corretos. [GitHub-29635](https://github.com/magento/magento2/issues/29635)


<!-- ACP2E-1315 -->

* A variável `categoryList` a consulta agora retorna um campo preenchido `product` seção do `options` bloco para produtos derivados de produtos de pacote, conforme esperado.  Anteriormente, nenhuma informação sobre pacotes de produtos derivados era retornada.

<!-- AC-7114 -->

* A variável `route` o query agora retorna rotas para categorias e produtos conforme esperado, sem um erro interno do servidor. [GitHub-36544](https://github.com/magento/magento2/issues/36544)

<!-- ACP2E-1652 -->

* A variável `products` a consulta agora busca `url_key` valores quando várias categorias são selecionadas.

<!-- LYNX-17 -->

* `product` as consultas agora retornam agregações somente para produtos atribuídos ao catálogo compartilhado especificado.

<!-- AC-7974 -->

* Os nomes das transações foram adicionados às transações do New Relic GraphQL. [GitHub-36874](https://github.com/magento/magento2/issues/36874)

<!-- AC-6680 -->

* A variável `OptionValueProvider` classe `get()` método agora retorna um valor de opção de atributo com base na `option_id` conforme esperado. Anteriormente, retornava um erro. [GitHub-35910](https://github.com/magento/magento2/issues/35910)

<!-- AC-6745 -->

* A variável `searchProducts` o query agora retorna todas as agregações (filtros) disponíveis e seus rótulos traduzidos corretamente. Anteriormente, os rótulos de agregação de categoria e preço não eram traduzidos conforme esperado. [GitHub-36140](https://github.com/magento/magento2/issues/36140)

<!-- AC-6666 -->

* Agora você pode usar um fragmento `ProductCard` ao consultar `related_products`, `upsell_products`, e  `crossell_products` em `ProductInterface`. [GitHub-29769](https://github.com/magento/magento2/issues/29769)

<!-- AC-7014 -->

* A variável `products` o query agora retorna produtos relacionados, de venda adicional e de venda cruzada na ordem em que foram salvos. [GitHub-36461](https://github.com/magento/magento2/issues/36461)

<!-- AC-8573 -->

* As consultas do GraphQL agora retornam dados de produtos relacionados classificados por posição. [GitHub-33010](https://github.com/magento/magento2/issues/33010)


<!-- AC-8542 -->

* `category_url_path` foi adicionado a `ProductAttributeFilterInput`, que permite a solicitação de todos os produtos para uma categoria em uma única consulta. [GitHub-32460](https://github.com/magento/magento2/issues/32460)

<!-- AC-821 -->

* Correção de um erro em que o método que define o armazenamento atual em uma mutação GraphQL executada antes do método que lida com a validação. [GitHub-31336](https://github.com/magento/magento2/issues/31336)

### Imagem

<!-- ACP2E-1353 -->

* O formulário de upload do ícone de favicon do administrador agora é compatível `.ico` tipos de arquivo. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

### Importar/exportar

<!-- ACP2E-1565 -->

* O processo de importação do produto não é mais interrompido quando as imagens do produto estão ausentes. Anteriormente, quando uma imagem de produto estava ausente durante a importação de um serviço de terceiros usando um arquivo CSV, o Magento Open Source exibia este erro: `Maximum error count has been reached or a system error is occurred!`.

<!-- ACP2E-1476 -->

* O desempenho da exportação do cliente a partir da grade do Cliente foi aprimorado em implantações em que o B2B está habilitado.

<!-- ACP2E-1391 -->

* O processo de importação de produto não lança mais um erro de validação quando um valor de atributo em `configurable_variations` contém uma vírgula.

<!-- ACP2E-1377 -->

* A decodificação foi excluída do processo de exportação. O texto do arquivo de exportação de arquivos CSV permanece inalterado após a importação. Como resultado, a descrição não é alterada após a reimportação. Anteriormente, as tags HTML eram removidas do editor do Page Builder após a exportação e importação do produto.

<!-- ACP2E-1451 -->

* As configurações não padrão (escopo de site ou loja) que são adicionadas como variáveis de ambiente não quebram mais o `app:config:import` processo com um erro de recursão.

<!-- ACP2E-1569 -->

* A pesquisa no catálogo e os indexadores de preço no modo Atualizar ao salvar não são mais invalidados após a importação. Anteriormente, a versão do documento do Indexador de Elasticsearch mudava quando produtos novos e existentes eram importados.

<!-- ACP2E-1482 -->

* Os relatórios do produto agora são exportados para o `var` diretório.  Anteriormente, esses relatórios eram exportados para o diretório raiz do documento, que é um diretório somente leitura em instâncias da nuvem.

<!-- ACP2E-1736 -->

* Campos vazios de endereço de vários clientes selecionados não interrompem ou interrompem o processo de exportação.

### Índice

<!-- ACP2E-1697 -->

* O desempenho do indexador do Produto de regra de catálogo em implantações em que as regras não são atribuídas a todos os sites foi aprimorado.

<!-- ACP2E-1401 -->

* Criação de um tipo de produto personalizado quando os indexadores estiverem definidos como **[!UICONTROL Update on schedule]** não causa mais a atualização do índice `cron` tarefa a falhar. [GitHub-36471](https://github.com/magento/magento2/issues/36471)

<!-- AC-6816 -->

* `bin/magento indexer:reindex customer_grid` O não falha mais com um erro MySQL quando a grade do cliente inclui atributos personalizados recém-criados do cliente. [GitHub-36233](https://github.com/magento/magento2/issues/36233)

<!-- AC-8076 -->

* A alteração do modo do indexador para vários indexadores (isto é, uma alteração do modo do indexador de ação em massa) agora altera o modo de um indexador somente quando o modo atual é diferente daquele que está sendo aplicado. Isso melhora o desempenho, evitando viagens desnecessárias ao banco de dados. [GitHub-36823](https://github.com/magento/magento2/issues/36823)

<!-- AC-6934 -->

* A indexação de produtos com muitas opções de atributo foi aprimorada. [GitHub-36386](https://github.com/magento/magento2/issues/36386)


### Infraestrutura

<!-- ACP2E-1462 -->

* O Magento Open Source não inclui mais o caminho completo para a raiz do servidor na mensagem de erro exibida quando uma solicitação HTTP malformada foi enviada ao servidor. Somente as cadeias de caracteres agora são passadas para o `explode` como um segundo argumento.

<!-- AC-8384 -->

* `restricted_classes.php` substituiu `Zend_Validate_File_Upload`. Anteriormente, o validador falhava durante o upload de um arquivo de importação maior do que o valor configurado em `php.ini `. [GitHub-37281](https://github.com/magento/magento2/issues/37281)

<!-- AC-7093 -->

* O mecanismo de template de email agora pode processar corretamente determinadas diretivas aninhadas (por exemplo, `{{if}}{{depend}}...{{/depend}}{{/if}}`). [GitHub-36438](https://github.com/magento/magento2/issues/36438)

<!-- AC-7920 -->

* `product` consultas com dados de agregação agora retornam os valores de rótulo corretos para atributos de produto do tipo booleano. [GitHub-29123](https://github.com/magento/magento2/issues/29123)

<!-- AC-2618 -->

* Adição de regiões ucranianas à `directory_country_region` tabela. [GitHub-35187](https://github.com/magento/magento2/issues/35187)

<!-- https://github.com/magento/magento2/pull/29173 -->

* Os arquivos CSS não são mais corrompidos quando mesclados quando `var/tmp` e `pub/static` estão em diferentes sistemas de arquivos e **[!UICONTROL CSS Merging Enabled]** está ativado. Foram criados arquivos temporários no mesmo diretório estático do arquivo de destino para garantir que ambos os arquivos estejam no mesmo sistema de arquivos. Como resultado, a chamada para renomeá-lo é atômica. [GitHub-29172](https://github.com/magento/magento2/issues/29172)

<!-- https://github.com/magento/magento2/pull/36769 -->

* Chamada para uma função membro `getId()` O não aciona mais uma exceção.

<!-- https://github.com/magento/magento2/pull/34092 -->

* As verificações de tipo agora são aplicadas para o tipo de matriz no processador de configuração do tema de design.  [GitHub-34440](https://github.com/magento/magento2/issues/34440)

### Logs

<!-- ACP2E-1385 -->

* Os usuários administradores agora podem ver os logs de ações em massa criadas por integrações na seção Log de ações em massa do Administrador.

### Logon

<!-- ACP2E-1521 -->

* Redefinir uma senha em um navegador e fazer logon posteriormente por um navegador diferente não resulta mais em uma exceção. [GitHub-36447](https://github.com/magento/magento2/issues/36447)

<!-- ACP2E-1332 -->

* Os clientes agora são redirecionados para a página de logon após ativar uma conta conforme esperado. Antes, os clientes eram conectados automaticamente.

### Pedidos

<!-- ACP2E-1514 -->

* Os compradores não podem mais solicitar um produto usando um preço personalizado quando um pedido é gerado pela primeira vez pelo administrador usando o preço personalizado único. Anteriormente, se um pedido continha um item com preços personalizados, esse preço personalizado era aplicado a outros pedidos feitos com a funcionalidade de novo pedido.

<!-- ACP2E-1421 -->

* Os compradores não podem mais salvar status de pedidos incorretos na página de pedidos. O status do pedido não é mais alterado de Concluído para Processamento quando um item é entregue. Anteriormente, o Magento Open Source não verificava o status atual do pedido antes de salvar o status do pedido depois que um comprador digitava um comentário. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1367 -->

* A grade da ordem de venda agora é sincronizada de forma assíncrona com todas as ordens, conforme esperado. [GitHub-36562](https://github.com/magento/magento2/issues/36562)

<!-- ACP2E-1197 -->

* A funcionalidade filtrar por data de compra na seção pedidos do cliente da página pedidos agora funciona conforme esperado. Anteriormente, um erro de JavaScript ocorria quando a lógica de conversão de fuso horário exibia um erro quando o mesmo fuso horário era fornecido ao método.

<!-- ACP2E-1294 -->

* O painel Magento Open Source agora exibe as estatísticas de pedidos corretas na primeira carga. Anteriormente, o painel exibia informações incorretas sobre a ordem, mas exibia as informações corretas depois que o período era atualizado.

<!-- ACP2E-1762 -->

* Os usuários administradores agora são redirecionados como esperado para a página de pedido depois de selecionar uma visualização de loja durante a criação de novo pedido pelo Administrador.

<!-- ACP2E-1418 -->

* A API REST de pedidos agora retorna informações sobre os produtos configuráveis e simples no pedido, independentemente do status do estoque dos produtos simples. Os usuários administradores agora só podem fazer pedidos se os itens selecionados (produtos) estiverem em estoque ou forem comercializáveis. Anteriormente, essa API retornava informações apenas sobre os produtos que estavam em estoque.

<!-- AC-7901 -->

* A página de aviso de crédito não trava mais quando o frete gratuito está habilitado quando o preço do frete inclui imposto e os cálculos de imposto são aplicados após os descontos. Anteriormente, o Magento Open Source lançou um `Division by zero` exceção. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

<!-- AC-1342 -->

* Usar o `rest/V1/orders/{id}/comments` ponto de acesso para postar um comentário sobre um pedido sem fornecer o status do pedido não afeta mais a exibição do pedido. Anteriormente, o status do pedido era registrado como NULL na variável `sales_order` e `sales_order_grid` e nem a página Meus pedidos nem a grade Ordem administrativa exibiram a ordem. [GitHub-34180](https://github.com/magento/magento2/issues/34180)

### Page Builder

<!-- ACP2E-1564 -->

* Adicionar um produto a um carrinho de compras do carrossel do Page Builder não duplica mais a quantidade de itens das páginas com dois widgets diferentes que exibem os mesmos produtos.

<!-- ACP2E-1542 -->

* O Page Builder não adiciona mais o `tabindex` Atributo HTML para tags de hiperlink `a` ao editar um hiperlink, salve um modelo.

<!-- ACP2E-1444 -->

* O widget Produtos e a pré-visualização do Page Builder agora lidam corretamente com caracteres especiais de HTML. Anteriormente, o widget do produto não exibia corretamente SKUs que continham a variável `&` caractere.

<!-- ACP2E-1441 -->

* O conteúdo do elemento de texto do Page Builder agora é atualizado conforme esperado ao selecionar e atualizar o bloco de conteúdo completo no modo de visualização.

<!-- ACP2E-1362 -->

* Copiar e colar texto de um editor de texto do Page Builder para outro agora funciona conforme esperado. Anteriormente, a página na qual você tentou colar o texto não podia ser salva, e o Magento Open Source exibia este erro de console: `[ERROR] Page Builder was rendering for 5 seconds without releasing locks.`.

<!-- ACP2E-1568 -->

* Page Builder `column-block` o tipo de conteúdo que foi criado em versões mais antigas do Page Builder agora é exibido corretamente.

<!-- ACP2E-1234 -->

* A filtragem da descrição de metadados do produto durante a criação do produto pelo administrador foi aprimorada. Anteriormente, se o Page Builder estivesse ativado, a descrição dos metadados do produto era gerada com base no padrão` {{name}} {{description}}` máscara. A máscara de metadescrição do produto padrão agora é composta de `{{name}}`. [GitHub-36107](https://github.com/magento/magento2/issues/36107)

<!-- ACP2E-1758 -->

* A adição de um bloco dinâmico sem conteúdo não aciona mais um erro.

<!-- AC-6645 -->

* Problemas com a exibição de colunas no conteúdo do Page Builder foram resolvidos. Anteriormente, `column-line` o conteúdo do tipo de conteúdo não foi renderizado. [GitHub-3949](https://github.com/magento/pwa-studio/issues/3949)

### Pagamento

<!-- ACP2E-1215 -->

* A opção de método de pagamento do Cofre não é mais exibida no fluxo de trabalho Checkout de administrador quando o comprador não tem um token de cofre. [GitHub-36273](https://github.com/magento/magento2/issues/36273)

<!-- ACP2E-1303 -->

* A variável **[!UICONTROL Venmo]** agora pode ser ocultado quando os botões PayPal estiverem ativados. Anteriormente, a variável **[!UICONTROL Venmo]** não foi possível remover o botão do carrinho, do minicarrinho, dos detalhes do produto ou das páginas de check-out.

<!-- AC-7105 -->

* Os compradores agora são redirecionados para a página de sucesso depois de concluir com êxito um pagamento de link de fluxo de pagamento Paypal. [GitHub-36520](https://github.com/magento/magento2/issues/36520)


#### Braintree


<!-- ACP2E-1229 -->

* A opção de método de pagamento do Cofre de Braintree não é mais desmarcada automaticamente no fluxo de trabalho de finalização quando um comprador atualiza seu endereço de faturamento. Anteriormente, o método de pagamento era desmarcado quando o comprador desmarcava a variável **[!UICONTROL My billing and shipping address are the same]** botão.

<!-- BUNDLE-3248 -->

* Solução de problemas ao fazer check-out do PayPal pelo Braintree após a atualização do Adobe Commerce 2.4.5-p2. [GitHub-37242](https://github.com/magento/magento2/issues/37242)

<!-- BUNDLE-3257 -->

* Os números de telefone agora são renderizados conforme esperado com endereços nos campos de endereço de envio pop-up modal do Google Pay. Anteriormente, os números de telefone estavam ausentes.

<!-- BUNDLE-3228 -->

* Os pedidos agora são feitos com sucesso com Braintree quando a resposta Braintree inclui um valor vazio para `threeDSecureInfo/eciFlag`. Anteriormente, um erro de PHP ocorria durante o check-out quando este valor estava vazio.

<!-- BUNDLE-3243 -->

* O Magento Open Source não lança mais um erro quando um comprador aplica um cupom na página de revisão do pedido ao fazer check-out com o Google Pay do minicarrinho. Anteriormente, os compradores eram redirecionados para uma página 404.

<!-- BUNDLE-3245 -->

* Os compradores agora podem concluir o checkout usando o Braintree Payments e o Magento Open Source 2.4.6 com o ReCAPTCHA v2 ou v3 invisível. [GitHub-37241](https://github.com/magento/magento2/issues/37241)

<!-- BUNDLE-3241 -->

* Os compradores não podem mais clicar no link **[!UICONTROL PayPal]** botão para comprar um produto configurável sem primeiro selecionar as opções necessárias. Anteriormente, os compradores podiam clicar no link **[!UICONTROL PayPal]** e foram redirecionados posteriormente para a página do produto com um erro:

<!-- BUNDLE-3148 -->

* A variável **[!UICONTROL PayPal]** agora é exibido conforme esperado nas páginas do carrinho e do minicarrinho. Anteriormente, esse botão não era exibido na página do carrinho e duplicado na página do mini carrinho.

<!-- BUNDLE-3244 -->

* Os pedidos parcialmente faturados agora são capturados conforme esperado na conta correta em implantações em que os comerciantes têm duas IDs de conta de comerciante diferentes para a mesma moeda em sua conta Braintree.

<!-- BUNDLE-3250 -->

* o Magento Open Source não lança mais um erro ao criar uma segunda fatura parcial para um pedido pago pelo Braintree quando o **[!UICONTROL Enable Vault for Card Payments]** está ativado. Anteriormente, quando um comerciante tentava criar uma segunda fatura, o Magento Open Source exibia este erro: `Your payment could not be taken. Please try again or use a different payment method. Payment method token is invalid`.

<!-- AC-2901 -->

* As informações de pagamento de Braintree agora são salvas por loja, e os compradores agora veem somente as informações de cartão que foram salvas na loja em que estão comprando. Anteriormente, os compradores podiam ver informações de cartões armazenadas de todas as lojas durante o check-out. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

### Promoção

<!-- ACP2E-1290 -->

* Os efeitos da **[!UICONTROL Fixed amount discount for whole cart]** regra de preço, quando aplicada com a variável **[!UICONTROL Apply to shipping amount]** agora é distribuído proporcionalmente conforme esperado entre produtos e valores de remessa. Anteriormente, os cálculos de desconto estavam incorretos.

<!-- ACP2E-1300 -->

* A variável **[!UICONTROL Discard Subsequent Rules]** agora é aplicada conforme esperado. Quando esta configuração está habilitada, outras regras com baixa prioridade podem ser aplicadas somente a um produto diferente. [GitHub-35707](https://github.com/magento/magento2/issues/35707)

### Relatórios

<!-- ACP2E-1541 -->

* O relatório Pedidos (**[!UICONTROL REPORTS]** > **[!UICONTROL Sales]** > **[!UICONTROL Orders]**) agora inclui valores de pedido corretos quando os pedidos são gerados por lojas que usam moedas não padrão. Anteriormente, esse relatório incluía valores incorretos. [GitHub-36742](https://github.com/magento/magento2/issues/36742)

<!-- ACP2E-1477 -->

* Informações enganosas no formulário de relatório de ordem de venda foram revisadas para maior clareza.

<!-- ACP2E-1435 -->

* Os usuários administradores agora podem pesquisar registros com emails que contêm  `+` (mais) na página Relatório de carrinhos abandonados. [GitHub-36560](https://github.com/magento/magento2/issues/36560)

### Pesquisar {#search-heading}

<!-- ACP2E-1499 -->

* Os resultados da pesquisa agora exibem resultados relevantes com base no peso da pesquisa dos atributos, conforme esperado.

<!-- AC-7505 -->

* Texto informativo sob o `Search Weight` do atributo `Storefront Properties` campo de entrada em Admin **[!UICONTROL Stores]** > **[!UICONTROL Attributes]** > **[!UICONTROL Product]** A agora descreve os valores possíveis. [GitHub-36646](https://github.com/magento/magento2/issues/36675)

### Envio

<!-- AC-7003 -->

* A variável **[!UICONTROL Shipping Policy]** A caixa de texto agora está visível no escopo de Exibição da loja do administrador quando  **[!UICONTROL Apply custom Shipping Policy]** está ativada e uma política de envio personalizada está disponível. [GitHub-36425](https://github.com/magento/magento2/issues/36425)

<!-- AC-7550 -->

* A variável `cart` a consulta agora retorna um `selected_shipping_method` que corresponde a um dos `available_shipping_methods` códigos de transportadora e método. Anteriormente, quando um dos métodos de envio selecionados continha um sublinhado, esses códigos de transportadora/método eram incompatíveis. [GitHub-36606](https://github.com/magento/magento2/issues/36606)

<!-- AC-2556 -->

* A variável `setShippingAddressesOnCart` A mutação não lança mais um erro quando o segundo valor na matriz de rua é nulo. Anteriormente, essa exceção era gerada: `The address failed to save. Verify the address and try again`. [GitHub-35160](https://github.com/magento/magento2/issues/35160)

### Imposto

<!-- ACP2E-1527 -->

* Agora é possível editar o valor do País e Região da Alíquota do Imposto na página de edição Regra de Imposto, conforme esperado. Anteriormente, as edições feitas nessa página não eram salvas.

<!-- ACP2E-1143 -->

* O valor do imposto na área de estimativa do carrinho agora é atualizado conforme esperado quando o método de envio é atualizado. Anteriormente, a taxa de imposto não era atualizada depois que um comprador mudava de país durante o check-out.

<!-- AC-8227 -->

* A variável `tax class` O valor de produtos simples recém-criados agora é definido como o valor do produto principal ao criar novas variações de um produto configurável existente no escopo Exibição de loja. Anteriormente, esse valor era definido como nenhum. Como resultado, nenhum imposto foi adicionado a esses produtos no carrinho, e os clientes estavam sujeitos a um imposto inferior. [GitHub-37180](https://github.com/magento/magento2/issues/37180)

### Teste

<!-- AC-7098 -->

* Problemas de desempenho com arrays grandes no `TableNameSniff` foram resolvidas.

<!-- ACP2E-1748 -->

* `CollectionTest::testGetDateRangeFirstPart()` agora é responsável pelo Horário de verão.


### IU

<!-- ACP2E-171 -->

* O formulário de registro do cliente agora é carregado conforme esperado quando inclui vários atributos selecionados do cliente. Anteriormente, o Magento Open Source gerava esta exceção: `[2023-03-05T05:57:40.032602+00:00] report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- ACP2E-1602 -->

* As mensagens de boas-vindas que contêm aspas simples agora são renderizadas corretamente na loja sem erros do console. Anteriormente, se uma mensagem de boas-vindas continha uma aspa simples, ela não era carregada durante a renderização da loja. O Magento Open Source também exibia erros de console.

<!-- ACP2E-1369 -->

* O Magento Open Source não gera mais um erro quando você tenta alterar rapidamente a exibição entre o histórico de comentários e Retornos na página de ordem do administrador. Anteriormente, o Magento Open Source exibia este erro genérico: `A technical problem with the server created an error`.

<!-- ACP2E-1374 -->

* Os usuários administradores com privilégios restritos a um site agora podem atualizar os atributos de produto específicos do site definidos como um `all stores view` âmbito de aplicação.

<!-- ACP2E-1648 -->

* O widget lente de aumento agora é carregado conforme esperado na página do produto.

<!-- ACP2E-1216 -->

* As opções personalizáveis de várias linhas agora são renderizadas adequadamente em documentos PDF de fatura, remessa e aviso de crédito. Anteriormente, o texto multilinha era precedido por uma quebra de página inesperada e, se o texto excedesse a página, o texto era truncado.

<!-- AC-7402 -->

* Os usuários administradores agora podem adicionar um novo endereço de cliente do Administrador quando esse cliente for criado para outro site cuja ID da loja não corresponde à ID do site. Anteriormente, o Magento Open Source exibia esta mensagem pop-up: `Something went wrong`. [GitHub-36582](https://github.com/magento/magento2/issues/36582)

<!-- ACP2E-1529 -->

* Agora os detalhes do Administrador da empresa são salvos conforme esperado e os administradores são redirecionados corretamente, quando os emails de Atribuição de administrador da empresa contêm um `CMS Block URL` variável.

<!-- ACP2E-1775 -->

* As mensagens de erro associadas ao envio de comentários na página de detalhes do pedido agora são mais informativas. Anteriormente, quando um comprador clicava em **[!UICONTROL Submit comment]** sem alterar o status do pedido ou inserir texto na área de comentário, o Magento Open Source exibia esta mensagem: `The comment is missing. Enter and try again`.

<!-- ACP2E-1659 -->

* O ícone de calendário agora é exibido conforme esperado nos campos de intervalo de datas no Administrador **[!UICONTROL Marketing]** > **[!UICONTROL Cart Price Rules]** após a seleção de uma data para um campo. Anteriormente, após selecionar uma data para um campo, o ícone de calendário não era mais exibido em outros campos e o Magento Open Source exibia o texto do espaço reservado. [GitHub-36499](https://github.com/magento/magento2/issues/36499)

<!-- ACP2E-1717 -->

* Os formulários de registro do cliente que incluem campos de seleção múltipla agora são carregados com êxito. Anteriormente, esse formulário não era carregado quando continha campos de seleção múltipla e o seguinte erro era acionado:  `report.CRITICAL: Exception: Deprecated Functionality: explode(): Passing null to parameter #2 ($string) of type string is deprecated in /magento2ee/app/code/Magento/CustomAttributeManagement/Block/Form/Renderer/Multiselect.php on line 53 in /lib/internal/Magento/Framework/App/ErrorHandler.php:62`. [GitHub-37189](https://github.com/magento/magento2/issues/37189)

<!-- AC-7092 -->

* Ao clicar em uma miniatura de vídeo no modo de tela cheia da galeria de produtos, o vídeo é exibido conforme esperado. Anteriormente, o vídeo não era exibido e o console do navegador exibia um erro de JavaScript. [GitHub-36456](https://github.com/magento/magento2/issues/36456)

<!-- AC-7806 -->

* Adição de uma variável à linha de direitos autorais que é atualizada automaticamente a cada ano. [GitHub-36776](https://github.com/magento/magento2/issues/36776)

<!-- AC-8441 -->

* O controle deslizante de imagem na página do produto agora funciona conforme esperado na exibição móvel. Anteriormente, somente a primeira imagem era exibida com sucesso. [GitHub-37232](https://github.com/magento/magento2/issues/37232)

### Substituições de URL

<!-- ACP2E-1737 -->

* As substituições de URL de categoria agora são geradas para todas as exibições de loja quando uma nova categoria é importada de um arquivo CSV.

<!-- ACP2E-1700 -->

* As configurações de sufixo de URL de produto e sufixo de URL de categoria agora correspondem aos sufixos na variável `url_rewrite` tabela. Anteriormente, ocorriam condições de corrida ao atualizar configurações de sufixo de URL, e os sufixos de URL configurados e o `url_rewrite` tabela não correspondente.

<!-- ACP2E-1703 -->

* O Magento Open Source agora renderiza a árvore de categorias em todos os níveis ao criar regravações de URL de categoria. Anteriormente, apenas os três primeiros níveis de categorias eram exibidos. [GitHub-36973](https://github.com/magento/magento2/issues/36973)

<!-- ACP2E-1737 -->

* As substituições de URL de categoria agora estão presentes no arquivo CSV durante a importação de uma nova categoria.

<!-- ACP2E-1668 -->

* Páginas CMS de várias lojas sem substituições de URL agora são encaminhadas conforme esperado. Anteriormente, as páginas do CMS de várias lojas solicitadas sem substituições de URL eram redirecionadas para a página inicial da loja, mas as páginas do CMS originais não eram direcionadas.

### Estrutura da API da Web

<!-- ACP2E-1543 -->

* Os clientes criados usando a API em massa agora recebem emails de registro do cliente no idioma configurado em seu site atribuído.  Anteriormente, todos os emails eram enviados ao local padrão, não ao local do site ao qual o cliente estava atribuído.

<!-- ACP2E-1339 AC-7577-->

* A variável `POST V1/guest-carts` a chamada não envia mais pedidos de convidados quando **[!UICONTROL Allow Guest Checkout]** está desativado.


<!-- ACP2E-1526 -->

* Magento Open Source agora retorna com êxito o `content` atributo (código de imagem base64) em `GET V1/products/sku/media` respostas da API de mídia do produto. A variável `content` atributo não aparecia anteriormente na resposta.

## Problemas conhecidos

Os seguintes problemas conhecidos serão corrigidos no Magento Open Source 2.4.7-beta2:

**Problema**: a API XML do UPS foi descontinuada pelo UPS em 5 de junho de 2023, afetando os comerciantes das seguintes maneiras:

* Os clientes atuais (ou seja, os comerciantes que já geraram suas chaves de acesso da UPS) não serão afetados até junho de 2024.

* Os comerciantes que desejam gerar novas chaves de acesso para usar a integração UPS pronta para uso do Adobe Commerce não podem gerar novas chaves no momento.

**Problema**: Ao clicar no botão **[!UICONTROL Show password]** O botão na página de logon da loja não exibe a senha conforme esperado.  <!-- AC-8823 -->

**Problema**: os preços dos produtos de pacotes fixos não incluem os preços especiais atribuídos, conforme esperado. <!-- ACP2E-2034 -->

## Requisitos do sistema

Nossa pilha de tecnologia é construída em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Instruções de instalação e atualização

Você pode instalar o Magento Open Source 2.4.7-beta1 usando [Compositor](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
