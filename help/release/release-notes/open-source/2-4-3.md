---
title: Notas de versão do Magento Open Source 2.4.3
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.3 do Magento Open Source.
recommendations: noCatalog
exl-id: fba0e147-1aa2-4c41-bc7d-51dd6755e014
source-git-commit: 95ea96a566b0579a22b2ba738bd4a4bceef8cd9c
workflow-type: tm+mt
source-wordcount: '12744'
ht-degree: 0%

---

# Notas de versão do Magento Open Source 2.4.3

O Magento Open Source 2.4.3 apresenta aprimoramentos no desempenho e na segurança, além de melhorias significativas na plataforma. Os aprimoramentos de segurança incluem a expansão da cobertura do reCAPTCHA e a inclusão da limitação de taxa integrada. As dependências do Core Composer e de bibliotecas de terceiros foram atualizadas para as versões mais recentes compatíveis com o PHP 8.x. O Page Builder agora está disponível como uma extensão fornecida no Magento Open Source. Agora, ela é a ferramenta de edição de conteúdo padrão do Adobe Commerce e do Magento Open Source.

Esta versão inclui mais de 370 novas correções para o código principal e 33 aprimoramentos de segurança. Ele inclui a resolução de quase 290 problemas do GitHub por membros da nossa comunidade. Essas contribuições da comunidade variam desde uma pequena limpeza do código principal até melhorias significativas no GraphQL.

Esta versão inclui mais de 370 novas correções para o código principal e 33 aprimoramentos de segurança. Todos os problemas conhecidos identificados nas notas de versão do Magento Open Source 2.4.2 foram corrigidos nesta versão.

{{bics}}

Consulte as [notas de versão do Adobe Commerce 2.4.2-p2](../security/2-4-2-patches.md) para obter informações sobre o Adobe Commerce 2.4.2-p2.

## Outras informações sobre a versão

Embora o código desses recursos esteja incluído nas versões trimestrais, vários desses projetos (por exemplo, Progressive Web Applications (PWA) Studio) também são lançados independentemente. As correções de erros para esses projetos estão documentadas nas informações de versão separadas e específicas do projeto, disponíveis na documentação de cada projeto.

## Aplique o `AC-3022.patch` para continuar oferecendo a DHL como transportadora

A DHL apresentou o schema versão 6.2 e descontinuará o schema versão 6.0 em breve. Adobe Commerce 2.4.4 e versões anteriores que suportam a integração DHL suportam apenas a versão 6.0. Os comerciantes que implantarem essas versões devem aplicar o `AC-3022.patch` o mais rápido possível para continuarem oferecendo a DHL como transportadora. Consulte o artigo da Base de conhecimento [Aplicar um patch para continuar oferecendo a DHL como transportadora](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) para obter informações sobre como baixar e instalar o patch.

## Aplique MC-43048_set_rate_limits_2.4.3.patch para resolver o problema de limitação da taxa de API

Essa correção fornece uma solução para o problema em que as APIs da Web não podem processar solicitações que contenham mais de 20 itens em uma matriz. Esse problema afeta as implantações que executam o Magento Open Source 2.4.3, Adobe Commerce 2.4.3 ou 2.3.7-p1. A limitação de taxa integrada foi adicionada a essas versões para evitar ataques de DoS (negação de serviço) e o máximo padrão foi definido como 20. Este patch reverte o limite padrão para um valor maior. Se você suspeitar que sua loja está enfrentando um ataque de DoS, a Adobe recomenda reduzir os limites de entrada padrão para um valor menor para restringir o número de recursos que podem ser solicitados. Consulte o artigo da Base de Dados de Conhecimento [Web API incapaz de processar solicitações com mais de 20 itens na matriz](https://support.magento.com/hc/en-us/articles/4406893342093).

## Aplique AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch para resolver o erro fatal do PHP na atualização

O seguinte erro fatal pode ocorrer durante a atualização para o Magento Open Source 2.4.3:

```
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

Este erro resulta do uso da função `str_contains`, que é uma função PHP 8.x. O aplicativo Open Source 2.4.3 não suporta o PHP 8.x. Esta correção substitui esta função por uma função suportada no PHP 7.x. Consulte o artigo da Base de Dados de Conhecimento [Adobe Commerce upgrade 2.4.3, 2.3.7-p1 PHP Fatal error Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix).

## Destaques

Procure os seguintes destaques nesta versão.

### Aprimoramentos substanciais de segurança

Esta versão inclui 33 correções de segurança e melhorias de segurança na plataforma. Muitas dessas correções de segurança tiveram suporte para 2.4.2-p2 e 2.3.7-p1.

#### 33 aprimoramentos de segurança que ajudam a fechar as vulnerabilidades de RCE (Remote Code Execution, execução remota de código) e XSS (Cross-Site Scripting, script entre sites)

Nenhum ataque confirmado relacionado a esses problemas ocorreu até o momento. No entanto, certas vulnerabilidades podem ser potencialmente exploradas para acessar informações do cliente ou assumir o controle de sessões de administrador. A maioria desses problemas exige que um invasor obtenha acesso ao Administrador primeiro. Como resultado, lembramos você de tomar todas as medidas necessárias para proteger seu Administrador, incluindo, mas não limitado a, esses esforços: incluir na lista de permissões de IP, [autenticação de dois fatores](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/), uso de uma VPN, uso de um local exclusivo em vez de `/admin` e boa higiene de senha. Consulte o [Boletim de Segurança do Adobe](https://helpx.adobe.com/security/products/magento/apsb21-64.html) para ver uma discussão sobre esses problemas corrigidos.

#### Aprimoramentos adicionais de segurança

Os aprimoramentos de segurança desta versão melhoram a conformidade com as práticas recomendadas de segurança mais recentes, incluindo:

* Um **novo plug-in do Composer** ajuda a evitar confusão de dependência e identifica pacotes mal-intencionados com os mesmos nomes que os pacotes internos no repositório de pacotes públicos. Consulte a publicação do blog [Adobe lança novo plug-in do Composer com versão 2.4.3](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release).

* **A limitação de taxa agora está incorporada às APIs** para impedir ataques de negação de serviço (DoS). Agora, as APIs da Web impõem restrições sobre o tamanho ou o número de recursos (o máximo padrão é definido como 20 e pode ser configurado para um valor diferente com base na necessidade comercial) que podem ser solicitados por um cliente. Consulte [Limitação de taxa](https://developer.adobe.com/commerce/webapi/get-started/api-security/) para obter informações sobre como configurar essas restrições. <!-- MC-35358-->

* **A cobertura do ReCAPTCHA foi estendida** para incluir:

   * As APIs da Web que têm páginas correspondentes do HTML são cobertas pelo ReCAPTCHA. (Isso exclui APIs da Web que são acessadas por integrações.) A cobertura do ReCAPTCHA protege os endpoints contra ataques de spam. Quando as APIs da Web são acessadas por um serviço de integração de terceiros que usa OAuth, o ReCAPTCHA é desabilitado.<!-- MC-34472-->

   * A página da loja Fazer pedido e as APIs da Web relacionadas a pagamento. A proteção do ReCAPTCHA para essas páginas está desativada por padrão e pode ser ativada no Admin. Essa cobertura adiciona um mecanismo de força anti-brutalidade para proteger as lojas contra ataques de cartas.

{{cve-notice}}

### Melhorias na infraestrutura

Esta versão inclui aprimoramentos que melhoram a qualidade da estrutura e as seguintes áreas funcionais:

* Conta do cliente

* Catálogo

* CMS

* OMS

* Importar/Exportar

* Promoções e direcionamento

* Carrinho e check-out

* B2B

* Preparo e Pré-visualização

**PayPal PayPal Mais Tarde agora é suportado** em implantações que incluem PayPal. Esse recurso permite que os compradores paguem um pedido em prestações quinzenais em vez de pagar o valor total no momento da compra. <!-- MC-40556-->

**Novo `use_application_lock` modo de indexação**. O modo `use_application_lock` permite habilitar a reindexação usando variáveis de ambiente ou configurando o arquivo `app/etc/env.php`. Não é mais necessário redefinir manualmente o indexador após uma falha com esse modo ativado.  Consulte [Usando o modo de bloqueio do aplicativo para processos de reindexação](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Aprimoramentos na plataforma

A versão 2.4.3 ainda não é compatível com o PHP 8.x, mas as atualizações de plataforma a seguir nos trazem uma compatibilidade futura com o PHP 8.x.

* As dependências do Core Composer e bibliotecas de terceiros foram atualizadas para as versões mais recentes compatíveis com o PHP 8.x. <!-- MC-39514-->

* A biblioteca KnockoutJS foi atualizada para v3.5.1 (a versão mais recente). <!-- MC-40694-->

* A biblioteca TinyMCE v3 obsoleta foi removida. O módulo `Magento_Tinymce3Banner` e os testes MFTF relacionados ao TinyMCE v3.x foram removidos do Adobe Commerce. <!-- MC-42199 42170 -->

* O Magento Open Source 2.4.3 foi testado e confirmado como compatível com o Redis 6.0.12. (a versão 2.4.x permanece compatível com o Redis 5.x.)

* As dependências da biblioteca Laminas foram atualizadas para versões compatíveis com o PHP 8.x. Algumas dependências redundantes foram removidas do arquivo `composer.json`. **O Magento Open Source 2.4.3 usa o Laminas 3.4.0**. <!-- MC-39513-->

### Aprimoramentos de desempenho

Esta versão inclui aprimoramentos que diminuem o tempo de indexação dos indexadores de Preço do produto e Regra de catálogo. Os comerciantes agora podem excluir um site de um grupo de clientes ou catálogo compartilhado, o que reduz o número de registros para indexação e melhora os tempos de indexação.

### Integração do Adobe Stock

Esta versão inclui a Integração do Adobe Stock v2.1.1.

### GraphQL

Esta versão adiciona a cobertura da GraphQL para rotas compartilhadas. A [consulta de rota](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/route/) e a [RoutableInterface](https://developer.adobe.com/commerce/webapi/graphql/schema/products/interfaces/routable/) oferecem suporte a solicitações de roteamento em páginas de produto, categoria e CMS. A consulta `urlResolver` foi substituída e sua funcionalidade foi substituída pela consulta `route`.

Consulte o [Guia do Desenvolvedor do GraphQL](https://developer.adobe.com/commerce/webapi/graphql/) para obter detalhes sobre esses aprimoramentos.

### Page Builder

O Page Builder agora está disponível como uma extensão fornecida no Magento Open Source. Agora, ela é a ferramenta de edição de conteúdo padrão para o Adobe Commerce 2.4.3 e o Magento Open Source 2.4.3. Ele pode substituir o editor WYSIWG por qualquer módulo de terceiros.

O Page Builder substitui o editor TinyMCE nas seguintes áreas de administração:

* Página do CMS
* Bloco do CMS
* Descrição da categoria
* Descrição do produto

Todo o conteúdo criado no TinyMCE foi migrado para o Page Builder como HTML.

### PWA Studio

Para obter informações sobre aprimoramentos e correções de erros, consulte [versões do PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [compatibilidade](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões compatíveis.

### Ferramenta de compatibilidade de atualização

O escopo da [Ferramenta de Compatibilidade de Atualização](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) foi expandido com base no feedback da comunidade. Participe do nosso canal do Slack [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) para obter suporte da equipe de produtos da Adobe e da comunidade, bem como para ajudar a orientar a direção futura da ferramenta.

### Extensões desenvolvidas pelo fornecedor

Consulte os seguintes artigos para obter atualizações sobre recursos e alterações desta versão:

* [Pagamento do Amazon](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/payments/braintree)

* [Dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [Vertex Cloud](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Análises de produto do Yotpo](../../../upgrade/modules/upgrade.md)

## Problemas corrigidos

Corrigimos centenas de problemas no código principal 2.4.3.

### Instalação, atualização, implantação

<!-- MC-41154-->

* O comando `bin/magento setup:db:status` agora retorna uma mensagem indicando que tudo está atualizado após uma atualização bem-sucedida. Anteriormente, o aplicativo exibia este erro: `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* Os valores de configuração agora são preservados no recarregamento de formulário quando a criação de um novo produto configurável falha. Anteriormente, os valores eram perdidos durante o recarregamento do formulário e o aplicativo exibia este erro: `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* O aplicativo não lança mais uma exceção quando você executa `bin/magento setup:upgrade` para atualizar de uma implantação do Magento Open Source com Redis para Adobe Commerce.

<!-- ENGCOM-8508 -->

* As implantações executadas no Cluster Galera agora oferecem suporte a mais clientes. [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* Agora os administradores podem fazer logon em uma implantação quando o aplicativo tiver sido instalado com a opção `—use-rewrites=0` ou com `web/seo/use_rewrites` definido como 0 em `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* Carregamento `sortOrder` atualizado para `AsyncCssPlugin`. O aplicativo agora carrega `AsyncCssPlugin` antes de `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` agora verifica o caminho de exibição para determinar se um elemento existe e, se ele tiver um caminho de configuração, usa o caminho `config.xml` para validação. [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* A compilação de menos arquivos com o Grunt ou por compilação do lado do servidor agora produz os mesmos resultados. Anteriormente. `.abs- styles`, que estende outros `.abs- styles` em `_extends.less`, não foram enviados corretamente quando compilados com Grunt. Isso resultou em diferenças entre implantações de produção e desenvolvimento. [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### Integração do Adobe Stock

<!-- MC-39754-->

* O aplicativo agora exibe uma mensagem informativa e um link para a página Admin **Lojas** > **Configuração** > **Avançado** > **Sistema** na página Procurar Adobe Stock quando a **Chave da API (ID do Cliente)** e o **Segredo do Cliente** não estão definidos. Anteriormente, o aplicativo exibia este erro: `We couldn't find any records` e nenhum link.

### Infraestrutura

<!-- MC-40389-->

* Os administradores com acesso restrito (por exemplo, aos quais é atribuído acesso somente a um site) não podem mais editar categorias definidas para o escopo Global.

<!-- MC-39037-->

* O relatório do Sistema gerado (**Sistema** > **Suporte** > **Relatório do Sistema**) agora está renderizado corretamente. Anteriormente, o conteúdo do relatório estava desalinhado.

<!-- MC-30152 ENGCOM-8625-->

* O aplicativo agora desativa a validação no campo **Preço**, conforme esperado, quando a configuração **Preço dinâmico** é habilitada durante a criação do pacote de produtos. Anteriormente, o aplicativo exibia um erro de validação quando você removia um valor do campo **Preço** quando a configuração **Preço dinâmico** era habilitada. [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* Redirecionamentos infinitos não ocorrem mais quando o URL do administrador difere do URL do site padrão em implantações em que o aplicativo é configurado para ser acessível a partir de dois URLs.

### Produtos do pacote

<!-- MC-41810-->

* Agora você pode usar a mutação `addProductsToCart` para adicionar um produto de pacote com mais de uma opção de caixa de seleção ao carrinho.

<!-- MC-41614-->

* A indexação de preços de produtos de pacote agora é executada usando tabelas temporárias, o que evita o bloqueio de tabelas de banco de dados. Anteriormente, o aplicativo usava tabelas físicas, o que resultava em tabelas bloqueadas.

<!-- MC-41177 magento/magento2#32594-->

* O preço de um item de pacote agora pode ser definido como 0,00. Anteriormente, ao retornar à página de edição após definir o preço como 0,00, o preço retornava ao valor padrão. [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* Os detalhes do pedido para pedidos que contêm produtos de pacote agora mostram o preço correto para os produtos de pacote se o preço foi alterado antes do pedido ser feito.

<!-- MC-40035-->

* O status do estoque de produtos do pacote agora é atualizado com base no status do estoque de seus produtos secundários. Anteriormente, os produtos de pacote eram mostrados como indisponíveis quando uma opção era removida do produto, e o produto de pacote tinha duas opções com o mesmo SKU.

<!-- MC-39276-->

* Um administrador agora pode alterar o valor do atributo `Shipment Type` de um produto agrupado depois que ele for movido para um grupo de atributos diferente. Anteriormente, esse atributo sempre era salvo com um valor `Together` se fosse movido para um grupo de atributos diferente do padrão no conjunto de atributos.

<!-- MC-38900-->

* A mutação `setGuestEmailOnCart` do GraphQL agora atualiza corretamente o email do convidado. Anteriormente, as tabelas de cotações e endereços de cotações não eram atualizadas.

<!-- MC-37719-->

* Adicionar, remover ou atualizar um produto filho em um produto combinado por meio de chamadas de API REST agora aciona a reindexação, conforme esperado. Anteriormente, essas ações não acionavam a reindexação e, como resultado, o produto do pacote não alterava seu status de estoque até que a reindexação manual fosse executada.

<!-- MC-35725 ENGCOM-8568-->

* O aplicativo agora exibe a faixa de preços correta para produtos de pacote com preços de nível. [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* O aplicativo agora exibe o mesmo preço total que o esperado na página do carrinho de compras e na etapa de envio do fluxo de trabalho de check-out após a alteração do preço de uma opção de pacote.

<!-- MC-32617-->

* Agora é possível configurar um produto agrupado com êxito acessando-o de um carrinho de compras do cliente. Anteriormente, a página Configurar produto nunca era completamente carregada e você não podia salvar suas configurações.

<!-- MC-30317 ENGCOM-7141-->

* Os comerciantes agora podem atribuir um preço exclusivo para um produto combinado em cada exibição de loja de uma implantação de várias lojas. Os preços específicos do site são salvos na tabela `catalog_product_bundle_selection_price`. Anteriormente, o aplicativo não baseava o preço de um produto de pacote no escopo do site, mesmo quando **Lojas** > **Configuração** > **Catálogo** > **Catálogo** > **Preço** > **Escopo do Preço de Catálogo** estava definido como `Website`. Nenhum preço específico de site foi salvo em `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* As faturas de produtos agrupados agora exibem a quantidade correta dos produtos simples associados quando a **Precificação Dinâmica** está desabilitada. Anteriormente, os produtos simples associados ao produto do pacote tinham a quantidade do produto principal, não o produto do pacote). [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* A mutação `updateProductsInWishlist` atualiza com êxito itens que pertencem a um produto de pacote em uma lista de desejos. Anteriormente, em vez de atualizar o item da lista de desejos, essa mutação excluía o item e criava um novo, que alterava a ID do item.

### Cache

<!-- ENGCOM-8554-->

* O arquivo `varnish6.vcl` foi atualizado para ignorar o armazenamento em cache da página do cliente.

### CAPTCHA

<!-- MC-41572-->

* Agora, o CAPTCHA valida corretamente os dados fornecidos por um comprador, e os campos CAPTCHA agora são exibidos como esperado após as várias tentativas malsucedidas de um comprador para fazer check-out com o PayPal Payflow Pro.

<!-- MC-41281-->

* A validação do CAPTCHA não falha mais aleatoriamente na página de pagamento do fluxo de trabalho de finalização.

<!-- MC-41001-->

* O aplicativo agora exibe campos CAPTCHA como esperado depois que você excede o número de tentativas de conclusão com falha. Anteriormente, embora o aplicativo tenha solicitado que você tentasse o desafio CAPTCHA novamente, ele não exibia os campos CAPTCHA.

<!-- MC-40359-->

* O CAPTCHA agora funciona conforme esperado na página de finalização. Anteriormente, depois que um comprador respondia corretamente a um desafio de CAPTCHA, o carregador na página de check-out nunca era concluído e o aplicativo exibia este erro: `captchaData[formId] is undefined`. (Esse erro ocorria somente quando o comprador usava o mesmo navegador do qual acessava anteriormente uma implantação que executava o 2.3.5-p1.)

<!-- ENGCOM-8630-->

* `_.isEmpty()` verificações no arquivo `defaultCaptcha.js` foram concluídas com êxito. Anteriormente, essas verificações não eram concluídas e, como resultado, a página de check-out não era carregada após a atualização. [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### Carrinho e check-out

<!-- MC-41911-->

* O aplicativo agora leva em conta os localizadores decimais específicos da localidade ao converter e atualizar a quantidade do produto no carrinho.

<!-- MC-40657-->

* O aplicativo agora exibe a mensagem de validação dos Termos e Condições no bloco relevante somente quando um comprador clica no botão **Fazer pedido**. Anteriormente, o aplicativo exibia esta mensagem no bloco Aplicar Código de Desconto sempre que um comprador alterava o método de pagamento no fluxo de trabalho de check-out: `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-39581-->

* O aplicativo agora descarta as alterações no formulário de endereço de cobrança na etapa de pagamento do check-out se o comprador não clicar no botão **Atualizar** e retornar à etapa de envio.

<!-- MC-37807 ENGCOM-8530-->

* Os produtos com uma opção personalizável `(File)` agora incluem links ativos conforme esperado durante todo o processo de finalização de várias remessas. Anteriormente, esse link estava ausente. [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* O carrinho de compras de Administrador agora exibe os preços do produto nas moedas corretas das lojas que oferecem suporte a várias moedas. Anteriormente, os preços eram convertidos para a moeda especificada mais de uma vez — primeiro, quando os produtos eram adicionados ao carrinho pela loja e depois novamente quando o pedido era renderizado posteriormente no Administrador.

<!-- MC-35640-->

* Os compradores agora podem adicionar um produto ao carrinho cujo preço mínimo anunciado (MAP) excede o preço normal do produto.

<!-- MC-35289-->

* Os compradores agora podem alterar com êxito seu endereço de cobrança do fluxo de trabalho de check-out ao fazer check-out com vários endereços.

<!-- MC-29335 magento/magento2#32251 -->

* Todas as transações de pagamento pagas criadas por convidados agora são salvas no banco de dados e ficam visíveis no Administrador conforme esperado. Anteriormente, apenas um pequeno subconjunto de pedidos simultâneos era salvo no banco de dados e a maioria dos pedidos era perdida devido a tempos limite resultantes de bloqueios do banco de dados. [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989-->

* O aplicativo agora exibe corretamente mensagens de boas-vindas em linha que contêm caracteres especiais quando um convidado coloca um produto no minicarrinho. Anteriormente, o aplicativo não adicionava o produto ao minicarrinho nem exibia a mensagem de boas-vindas. [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* A página de remessa do fluxo de trabalho de check-out agora é carregada com êxito quando o delivery na loja está ativado. Anteriormente, o aplicativo exibia um erro de JavaScript e a página de check-out de envio não era renderizada completamente.

<!-- ENGCOM-9006-->

* Adição do argumento `itemResolvers` ao arquivo de catálogo `di.xml`. Como resultado, o check-out não será mais interrompido se os módulos de produto configuráveis e agrupados estiverem desativados. [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* O aplicativo agora exibe os botões de opção na seção **Informações de Pagamento e Envio**, conforme esperado durante o fluxo de trabalho de reordenação do Administrador. [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* O aplicativo agora aplica corretamente as regras de preço do carrinho com um desconto fixo no nível do carrinho quando o carrinho contém um produto incluído com várias opções. Anteriormente, a regra de preço do carrinho não era completamente aplicada ao pedido. [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* O botão **Adicionar ao carrinho** na exibição de lista de categorias agora funciona conforme esperado. [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* Agora você pode usar o POST `/V1/carts/mine/items` para adicionar uma quantidade personalizada de produtos agrupados a um carrinho. [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* O aplicativo não preenche mais a área do endereço de cobrança do fluxo de trabalho de finalização com o endereço de entrega. Anteriormente, quando o campo **Estado/Província** do endereço de cobrança estava vazio e os endereços de remessa e cobrança eram diferentes, o aplicativo preenchia o campo endereço de cobrança **Estado/Província** com informações do endereço de remessa. [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### Catálogo

<!-- MC-36787-->

* A atualização em massa dos atributos **Habilitar incrementos de quantidade** e **incrementos de quantidade** agora funciona conforme esperado. [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41575-->

* O aplicativo não lança mais um erro do JavaScript depois que você habilita a sincronização de produtos recentes com o administrador. Anteriormente, o aplicativo exibia este erro do JavaScript: `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* As atualizações do layout de tema personalizado agora são aplicadas conforme esperado. Anteriormente, as atualizações do layout de tema personalizado eram ignoradas.

<!-- MC-41499-->

* O cache de categorias do produto agora é limpo como esperado por `cron` durante a execução de `indexer_update_all_views`. Anteriormente, as contagens de produtos na página Categoria após a reindexação estavam incorretas.

<!-- MC-41422-->

* Os valores de atributo agora permanecem inalterados quando um atributo não é especificado em uma solicitação da API REST de atualização de produto para uma exibição de loja. Anteriormente, se um atributo não fosse especificado, o aplicativo redefinia o valor do atributo para seu valor de escopo padrão.

<!-- MC-41284-->

* A grade de produtos do Administrador (Admin **Catálogo** > **Produtos**) agora exibe a contagem de produtos correta quando os produtos são filtrados pela SKU.

<!-- MC-40873-->

* O aplicativo agora exibe o status preciso do estoque quando um produto é adicionado a uma página do CMS, quando as Permissões de categoria são ativadas, e impede a exibição do preço para o grupo do cliente especificado. Anteriormente, todos os produtos eram mostrados como indisponíveis, independentemente do status real do estoque.

<!-- MC-40859-->

* O campo de entrada de preço de bloco de preço do Grupo de Clientes do Advanced Pricing agora tem uma largura mínima de cinco dígitos. Anteriormente, apenas dois símbolos estavam visíveis nesse campo em exibições de baixa resolução.

<!-- MC-40825-->

* O aplicativo agora exclui com êxito uma imagem de mídia do produto após excluir um produto. Anteriormente, a imagem de mídia do produto permanecia na pasta após a exclusão bem-sucedida do produto.

<!-- MC-40811 magento/magento2#32042-->

* O layout da página agora é atualizado conforme esperado quando você cria ou edita um produto no Administrador e, em seguida, cria uma Atualização de design de cronograma. [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* Um atributo de produto personalizado com valor zero agora pode ser salvo com êxito como em branco. Anteriormente, o aplicativo não atualizava esse valor para em branco.

<!-- MC-40736 ENGCOM-8789-->

* Os arquivos de atualização de layout de categoria personalizada agora se aplicam aos produtos conforme esperado. Anteriormente, o identificador de arquivo de atualização (`catalog_category_view_*`) não correspondia ao identificador de produto. [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* A classificação foi desabilitada para a coluna Imposto Fixo do Produto (FPT) da lista de produtos do Administrador. Anteriormente, a página Produtos não podia ser recarregada após a coluna FPT ter sido classificada.

<!-- MC-40443-->

* A visualização do widget Produtos do Page Builder agora funciona conforme esperado em uma implantação de vários sites quando os produtos correspondentes têm um preço diferente em cada site.

<!-- MC-40344 ENGCOM-8629-->

* A classificação por posição na pesquisa de produtos usando o GET `/rest/V1/products/?searchCriteria[filterGroups]` agora funciona conforme esperado. Anteriormente, a coleção de produtos não tinha um valor de campo `position` para classificação. [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* Os usuários administradores agora podem ver espaços duplos nos campos **Nome** e **SKU** na grade de produtos. Anteriormente, o aplicativo recolhia vários espaços em um único espaço.

<!-- MC-39869-->

* Agora os produtos são exibidos como indisponíveis na loja quando a quantidade comercializável no Administrador é 0. Anteriormente, esses produtos eram listados como em estoque na loja, e o aplicativo exibia um botão **Adicionar ao carrinho** ativo. [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* Os administradores agora podem adicionar produtos com opções personalizáveis `(File)` à grade Itens solicitados na seção Carrinho de compras (coluna Atividades do cliente) da página Cliente administrador. Anteriormente, o aplicativo não adicionava o item à lista porque o valor não estava formatado corretamente antes de ser inserido em `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* O aplicativo não solicita mais que os compradores selecionem uma opção de produto para um produto empacotado que tenha apenas uma opção.

<!-- MC-39617-->

* O aplicativo agora exibe todas as subcategorias em atualizações de layout (categorias âncora e não âncora) durante a criação de um novo widget.

<!-- MC-39481-->

* A consulta `product` não substitui mais os valores padrão de todas as exibições de loja em uma implantação de várias lojas quando um nome de produto é atualizado apenas para uma exibição de loja. [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* O Magento Open Source atualiza a contagem total de páginas conforme esperado ao alterar o valor por página da lista Produtos relacionados ao administrador, Vendas adicionais e Vendas cruzadas. [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* Agora os administradores podem adicionar produtos com duas ou mais opções personalizáveis `(File)` a um pedido por SKU.

<!-- MC-39140-->

* O aplicativo não lança mais um erro quando um administrador com permissões restritas adiciona um widget de Produto a uma página do CMS no Administrador. Anteriormente, o aplicativo exibia este erro quando o administrador clicava no botão **Salvar**: `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* As páginas de detalhes do produto agora abrem com a opção de data personalizável preenchida com a data do pedido anterior quando o **Usar calendário do JavaScript** está habilitado. O resolvedor de valor de opção de data personalizada agora retorna a um formato alternativo se o valor não for formatado com base na configuração atual. Anteriormente, o valor da opção de data personalizada estava vazio.

<!-- MC-39104-->

* O aplicativo agora exibe apenas um erro no carrinho quando o produto está indisponível. Anteriormente, o aplicativo exibia mensagens redundantes. [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-38575-->

* Agora você pode definir os atributos de pacote `required_options` e `has_options` conforme esperado ao criar ou atualizar um produto de pacote usando o ponto de extremidade `POST /V1/product/:sku`. Anteriormente, esses atributos personalizados eram definidos como 0 (zero), apesar dos esforços para defini-los como 1 (um).

<!-- MC-35717  magento/partners-magento2ee#427-->

* Os administradores agora podem adicionar um produto com uma opção personalizável `(File)` a um pedido por SKU. [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* Agora você pode salvar um produto e um preço sem especificar `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* Os produtos de grupo agora estão disponíveis na loja conforme esperado quando uma solicitação REST `PUT /V1/products/:sku/links` é usada para associar um novo produto filho a um novo produto de grupo. Anteriormente, os produtos não eram indexados corretamente após a execução de `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* Você não pode mais criar um produto com um valor de SKU `NULL`. Anteriormente, era possível criar um produto sem um valor de SKU por meio de um importador personalizado ou diretamente no banco de dados, mas quando você tentava editá-lo no Admin, o aplicativo exibia um erro. [GitHub-27411](https://github.com/magento/magento2/issues/27411), [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* Adicionar as opções personalizadas necessárias a um produto simples não o remove dos produtos compostos principais sem aviso prévio. O aplicativo agora exibe um aviso informativo e não salva o produto.  Anteriormente, o aplicativo salvava as alterações no produto e não exibia nenhum aviso. [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### Regra de catálogo

<!-- MC-39896-->

* A consulta `products` agora retorna os valores atuais quando uma regra de preço de catálogo se aplica a um item. [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* As tabelas temporárias que começam com `catalogrule_product__temp` agora são excluídas como esperado quando a reindexação falha após uma regra de carrinho ou catálogo expirar, estar desabilitada ou se tornar inativa. [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* Os fusos horários agora são aplicados da mesma forma em `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` e `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### Conteúdo do CMS

<!-- MC-41471-->

* Imagens grandes agora são redimensionadas conforme esperado durante o carregamento quando a configuração **Habilitar Redimensionamento de Front-end** está habilitada.

<!-- MC-40663 ENGCOM-8883-->

* Correção do tratamento de erros para o controlador de salvamento de página do CMS. Anteriormente, quando um objeto `Error` era lançado no evento `cms_page_prepare_save`, o aplicativo passava esse objeto para a função `addExceptionMessage`, interrompendo seu contrato porque essa função esperava um `Exception`. Isso foi resolvido adicionando uma mensagem de erro usando a função `addErrorMessage`. [GitHub-30149](https://github.com/magento/magento2/issues/30149)

### Produtos configuráveis

<!-- MC-40719-->

* O aplicativo não duplica mais as miniaturas de produtos na galeria de imagens de um produto ao clicar nas opções configuráveis de um produto.

<!-- MC-37418-->

* O pop-up de configuração que o aplicativo exibe ao editar um produto configurável de uma lista de desejos agora é fechado conforme esperado quando você clica no botão **OK**.

<!-- MC-39878  magento/magento2#31472-->

* O aplicativo agora gera faturas corretamente para pedidos que contêm apenas um produto configurável. [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* Os compradores agora podem adicionar produtos configuráveis ao carrinho a partir de uma visualização de loja não padrão. Anteriormente, quando o comprador em um modo de exibição de loja não padrão tentava adicionar um produto configurável, o aplicativo exibia este erro: `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### Política de segurança de conteúdo (CSP)

<!-- ENGCOM-8577-->

* A Política de Segurança de Conteúdo agora oferece suporte ao carregamento de imagens e fontes codificadas em base64 por meio de `data: scheme`.

### cron

<!-- MC-30804-->

* As consultas de limpeza do Cron foram refatoradas para reduzir ou eliminar os seguintes problemas de desempenho: `cron` trabalhos permanecem travados em um estado pendente, consultas MySQL cada vez mais lentas e um aumento no uso do CPU. [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` com o status `running` há mais de 24 horas agora são automaticamente alteradas para o status `error`.  Como resultado, uma nova instância desse trabalho pode ser executada novamente e você não precisa alterar manualmente o status do trabalho quando um trabalho permanecer incorretamente definido para o status `running`. Anteriormente, se um `cronjob` estivesse preso no status `running`, o aplicativo impedia que novas instâncias do mesmo trabalho fossem iniciadas e você tinha que alterar manualmente o status do trabalho. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` trabalhos foram concluídos como esperado e não geram mais este erro de serialização: `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views` trabalhos cron agora são executados como esperado após uma falha anterior. A execução com falha é marcada como uma falha no `cron_schedule schedule`, e a execução subsequente não falha automaticamente. Anteriormente, a tabela `cron_schedule` era preenchida com trabalhos pendentes e o trabalho `indexer_update_all_views` cron não era executado. [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` bloqueios não ocorrem mais como resultado de `cron` tentar definir um bloqueio em grandes implantações onde grupos se sobrepuseram. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` bloqueios não ocorrem mais na tabela `cron_schedule` após apenas alguns trabalhos `cron` serem executados. [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### Atributos personalizados do cliente

<!-- MC-41611-->

* O campo **Estado** no catálogo de endereços da Conta do cliente da loja agora é carregado como e permanece um elemento de página suspensa. O botão **Enviar** agora estará desabilitado até que todos os elementos da página tenham sido carregados completamente. Anteriormente, o aplicativo carregava esse campo como uma caixa de texto antes de renderizá-lo como um elemento suspenso, e os compradores podiam inserir e salvar valores no campo de texto, o que causou um erro posteriormente durante o check-out.

<!-- MC-40329-->

* O aplicativo não emite mais um erro quando você salva um atributo de endereço do cliente com um anexo de arquivo no campo Endereço do cliente do administrador ao fazer upload de arquivos. Isso ocorreu devido a uma instrução de retorno ausente na ação do controlador. Anteriormente, o aplicativo exibia este erro: `Something went wrong while saving the file`.

<!-- MC-39354-->

* As chamadas de API do carrinho de GET REST agora retornam valores de atributo personalizados corretos para endereços de faturamento e envio. Anteriormente, os atributos de endereço personalizados eram exibidos incorretamente na página de detalhes do pedido na página inicial da loja Minha conta e no Administrador.

<!-- MC-24495-->

* O aplicativo agora manipula com êxito arquivos que contêm atributos de endereço de cliente com tipo de entrada `file (attachment)`. Anteriormente, o aplicativo exibia este erro durante o carregamento do arquivo anexado: `Something went wrong while saving the file`.

### Cliente

<!-- MC-40579-->

* A filtragem por data de criação da conta agora produz resultados que estão em conformidade com as configurações de fuso horário definidas e que capturam todas as contas criadas relevantes.

<!-- MC-40502-->

* O filtro de grade do cliente agora usa uma opção de site correta para um usuário restrito se os dados tiverem sido armazenados em cache anteriormente. Anteriormente, o filtro de grade do cliente recuperava os parâmetros do site do cache e incluía dados incorretos para usuários restritos.

<!-- MC-39189-->

* O aplicativo não lança mais uma exceção na página Clientes administradores quando um site é excluído em uma implantação de vários sites. Anteriormente, quando um administrador tentou acessar a lista abrangente de clientes, o aplicativo não exibia todos os clientes e exibia este erro: `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* Os administradores com permissão agora podem reatribuir clientes a sites diferentes a partir da guia Informações da conta do cliente.

<!-- MC-39852-->

* Agora é possível carregar um arquivo com êxito ao criar um atributo de endereço do cliente com um tipo de entrada de `(File)`. Anteriormente, quando você tentava carregar e salvar um arquivo, o aplicativo exibia este erro: `Something went wrong while saving the file`.

### Diretório

<!-- MC-39520-->

* O aplicativo não lança mais uma exceção quando um comprador insere um CEP inválido durante a seção de envio do fluxo de trabalho de finalização. [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### Baixável

<!-- MC-35779-->

* O aplicativo agora exibe links para produtos baixáveis no email Novo pedido quando o pedido contém um produto baixável e um produto configurável com uma opção baixável. Anteriormente, o aplicativo exibia o link para o produto baixável independente, mas não o link para o produto configurável com uma opção baixável.

### EAV

<!-- MC-41756-->

* Os valores de data do atributo de endereço do cliente agora são salvos no formato de quatro dígitos, em vez do formato de dois dígitos.

### Email

<!-- MC-39757-->

* O link de redefinição de senha na página Redefinição de senha do administrador agora funciona conforme esperado. Anteriormente, quando um modelo personalizado era usado para a página de redefinição de senha de administrador, o aplicativo exibia esta mensagem quando um administrador clicava no link dentro do email: `Your password reset link has expired`. Isso ocorria porque o modelo de email personalizado continha a variável incorreta para a ID do usuário.

<!-- MC-41588-->

* Agora o envio de emails do cliente pelo Administrador funciona corretamente quando ativado no nível da visualização da loja. Anteriormente, o aplicativo não enviava emails de clientes quando as configurações de notificação por email eram ativadas no nível da visualização da loja, mas não no nível global.

<!-- MC-40950-->

* O aplicativo agora envia email conforme esperado em implantações de vários sites, em que nem todos os sites permitiram o envio assíncrono de email. Anteriormente, se pelo menos um site tivesse essa configuração desativada, o email não era enviado de nenhum site, mesmo quando ativado. Emails de NFF, Entrega e Aviso de Crédito tinham problemas semelhantes. No entanto, os e-mails Comentários da Ordem, Comentários da NFF, Comentários da Entrega e Comentários do Aviso de Crédito foram enviados com êxito. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-30127 magento/magento2#31455-->

* Faturas e PDFs de fatura agora incluem os mesmos preços de pacotes de produtos conforme esperado. Anteriormente, os PDFs de fatura incluíam o preço incorreto para pacotes de produtos. [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* A conversão de cadeia de caracteres foi adicionada ao método de filtro de modelo de email para garantir que o valor de retorno seja um `string`. Anteriormente, quando uma exceção era capturada enquanto não estava no modo de desenvolvedor, o aplicativo retornava um objeto `phrase`. Isso por sua vez disparou um fatal `Uncaught TypeError`. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* Os emails de confirmação de pedido agora são enviados conforme esperado quando o envio assíncrono está habilitado (**Lojas** > **Configuração** > **Vendas** > **Emails de Vendas** > **Configurações Gerais** > **Envio assíncrono**) em um site em uma implantação multissite. [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* O aplicativo agora registra um erro como esperado quando ocorre uma exceção quando um cliente tenta enviar um email do formulário Fale conosco. [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### Estruturas

<!-- MC-41712-->

* Agora, as classes pai no Administrador são verificadas em busca de anotação de docblock, juntamente com a classe original e interfaces herdadas. Anteriormente, como as classes principais não eram verificadas, executar ações relacionadas ao cliente no Administrador que acionavam um evento resultava em um erro. O aplicativo registrou este erro no log de exceções: `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* O aplicativo não lança mais um erro fatal quando o servidor Redis é interrompido em uma implantação na qual o cache de página Redis está habilitado.

<!-- MC-40739-->

* O aplicativo agora respeita a configuração **Excluir pasta de mídia do backup** quando o backup é habilitado com `bin/magento config:set system/backup/functionality_enabled 1`. Anteriormente, apesar dessa configuração, era feito backup da Pasta de Mídia porque o caminho para `/magento` era formado incorretamente com um // duplo.

<!-- MC-40654 ENGCOM-8881-->

* O aplicativo agora traduz todas as cadeias de caracteres traduzíveis conforme esperado para a página Carrinho de administração. Anteriormente, a carga de tradução ocorria muito tarde e ignorava todos os observadores que estavam inscritos no pré-despacho da ação do controlador. [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* A validação de formulário na página Criar nova conta de cliente agora funciona com êxito quando a configuração de habilitação da extensão **Fazer logon como cliente** está desabilitada. Anteriormente, o aplicativo exibia um erro de JavaScript.

<!-- MC-39193-->

* O tratamento de exceções para processos filhos bifurcados por `ProcessManager` foi aprimorado. Quando uma exceção ocorre agora, o processo principal é encerrado e uma mensagem de erro é exibida apenas uma vez. Anteriormente, várias falhas de indexador eram registradas e várias mensagens eram exibidas. [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* Os plug-ins globais do Magento Open Source (por exemplo, `webapi_rest` e `graphql` ) não são mais acionados para um novo tipo de área personalizada quando o `di.xml` desse arquivo de área não contém plug-ins registrados.

<!-- MC-38770-->

* As exceções que ocorrem durante a inicialização não são mais armazenadas em cache e agora acionam um código de resposta 500.

<!-- ENGCOM-8232-->

* O último manipulador mesclado em um arquivo `communication.xml` não substitui mais todos os manipuladores criados anteriormente. [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### Correções gerais

<!-- MC-41194-->

* O aplicativo agora exibe o número correto de estrelas na página Minhas análises do produto e nas revisões recentes na página Minha conta. Anteriormente, o aplicativo aplicava estrelas de revisão apenas à primeira revisão e deixava as outras revisões na página sem estrelas.

<!-- MC-40653-->

* Os links de conta nos cabeçalhos agora seguem os padrões da WCAG. Anteriormente, os links de conta nos cabeçalhos continham IDs duplicadas, o que causava a falha da validação da WCAG.

<!-- MC-39765-->

* O aplicativo não lança mais erros gerados pelo log do sistema quando um comprador convidado usa um endereço inválido. Anteriormente, o aplicativo exibia intermitentemente este erro em vez de renderizar a página: `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* O processo de redimensionamento de imagem não é mais interrompido para imagens em formato não compatível. Anteriormente, quando `catalog:images:resize` encontrou um formato de imagem sem suporte, o processo foi interrompido e o aplicativo exibiu este erro: `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* O suporte WEBP e AVIF para imagens de logotipo foi adicionado ao administrador. [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* Não é mais possível alterar o escopo do atributo `media_gallery`. Anteriormente, quando você alterava o escopo do atributo `media_gallery` de volta para `global`, o aplicativo gerou um erro.

<!-- MC-36818  magento/partners-magento2ee#470-->

* Os produtos relacionados que foram adicionados como uma atualização agendada não são mais exibidos em uma página de produto da loja após a data de término da atualização. [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-33499 magento/partners-magento2ee#446-->

* A filtragem agora funciona conforme esperado na lista de exportações agendadas quando o tipo de entidade é selecionado. Anteriormente, o filtro não funcionava e o aplicativo exibia um erro de JavaScript. [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* Imagens de categoria agora são copiadas como esperado do diretório `catalog/tmp/category` para o diretório `catalog/category` quando categorias são salvas usando o método de armazenamento do banco de dados. A linha de imagem na tabela `media_storage_file_storage` agora também tem a `directory_id` correta. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* Os comerciantes agora são notificados sobre caches invalidados, conforme esperado após enviar alterações à hierarquia do CMS. Anteriormente, o aplicativo não invalidava caches ao salvar a hierarquia do CMS.

<!-- MC-24725-->

* As solicitações redundantes do AJAX para a seção do carrinho de compras foram reduzidas. Anteriormente, o aplicativo não carregava corretamente o subtotal do carrinho, o que acionava o recarregamento do carrinho novamente.

<!-- MC-23740-->

* Validação adicionada para URLs para impedir que palavras reservadas sejam incluídas em chaves de URL. Consulte [Definindo URIs (Uniform Resource Identifiers)](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* Nas implantações que executam o PHP 7.4, o aplicativo agora retorna um erro 404 quando a configuração **Gerar regravações de URL de &quot;categoria/produto&quot;** está definida como **Não**, e um comprador tenta acessar um caminho de categoria não existente. Anteriormente, o aplicativo retornava um erro 500 informando: `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- ENGCOM-8901-->

* `nowdoc` substituiu `heredoc` no alternador de armazenamento `Magento_Backend`. [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8685-->

* Adicionadas as regiões da Argentina, Bolívia, Chile, Equador, Guiana, Paraguai, Peru, Suriname e Venezuela à tabela `directory_country_region`. [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* Adição das regiões Albânia, Dinamarca, Grécia, Islândia, Portugal e Suécia à tabela `directory_country_region`. [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* Agora as mensagens são sinalizadas como erros na fila de mensagens do MysqlMQ quando ocorrem exceções. [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* O aplicativo agora faz referência ao objeto de classe correto ao carregar informações de imposto para as páginas Aviso de crédito de administrador e Fatura. [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* A integração do Royal Mail Click &amp; Drop agora funciona conforme esperado. Anteriormente, o aplicativo exibia este erro quando você tentava ativar esta integração: `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* O aplicativo agora exibe uma mensagem de erro informativa quando uma entrega, aviso de crédito ou ID de NFF incorreta é passada em um URL. Anteriormente, o aplicativo exibia um erro fatal. [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* A recursão no local dos arquivos estáticos foi removida.  O aplicativo agora exibe uma página 404 em vez de um erro 500. Anteriormente, um bug na configuração padrão do NGINX levava a recursão infinita. [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* O nome do arquivo `cms_index_noroute.xml` foi corrigido para `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* O arquivo `.editorconfig` foi refatorado para corrigir a formatação automática de `db_schema_whitelist.json` arquivos. [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* O redimensionamento de uma janela do navegador não aciona mais eventos de lupa de vínculo duplicado. [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* O aplicativo não lança mais uma exceção SQL ao filtrar `Magento\Users\Model\ResourceModel\Users\Collection` por `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### Cartões-presente

<!-- MC-32651-->

* A lógica de validação do intervalo de preços foi adicionada à página de criação do cartão-presente. Anteriormente, um administrador podia criar um cartão com um valor mínimo que excedia o valor máximo. [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* A consulta `addRequisitionListItemsToCart` agora retorna a quantidade de um vale-presente personalizado conforme esperado quando a solicitação não contém um valor para `allow_open_amount`.

### Mensagem de presente

<!-- ENGCOM-8539-->

* Os administradores agora são redirecionados diretamente para a página de Admin solicitada após o logon.  Anteriormente, quando um administrador fazia logon, ele era redirecionado para o painel de Administração (ou qualquer página que estivesse configurada como a página de inicialização) e tinha que navegar manualmente para o destino. [GitHub-31042](https://github.com/magento/magento2/issues/31042)

### Gerenciador de tags da Google

<!-- MC-39072-->

* O componente de interface do usuário para o endereço de faturamento na página de pagamento do fluxo de trabalho de finalização agora usa o endereço de cotação corretamente quando o Google Tag Manager está ativado. Anteriormente, ocorria um erro de JavaScript na página de pagamento.

### GraphQL

<!-- MC-41885-->

* A consulta `products` do GraphQL agora retorna opções de atributo classificadas na mesma ordem de classificação usada na página de edição de atributos.

<!-- MC-41473-->

* A resposta à solicitação do GraphQL `{ category(id: 2){ children { name children { name } } } }` agora inclui uma árvore de categorias classificada corretamente.

<!-- MC-41030-->

* O objeto `CartItemPrices` agora contém o novo campo do GraphQL `fixed_product_taxes`, que retorna uma matriz dos impostos fixos do produto aplicados a um item do carrinho. Anteriormente, os impostos fixos do produto aplicados a um item do carrinho não eram incluídos na consulta do carrinho.

<!-- MC-40920-->

* Solicitações vazias para o GraphQL agora lançam o código de resposta 200 em vez de 500. Anteriormente, o analisador do GraphQL lançava uma exceção antes de o resultado da consulta ser gerado.

<!-- MC-40867 magento/partners-magento2ee#532 -->

* A mutação `applyRewardPointsToCart` agora atualiza o total geral de um carrinho para refletir com precisão o valor dos pontos de premiação deduzidos. [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* Os produtos com deficiência não são mais incluídos na resposta do GraphQL quando o GraphQL é usado para vincular produtos de venda adicional.

<!-- MC-40262-->

* Agora os comerciantes podem usar o método `setShippingAddressesOnCart` da GraphQL para definir endereços de cobrança e de envio para o carrinho do comprador quando o check-out do convidado está desabilitado.

<!-- MC-39508-->

* A consulta `categoryList` não lança mais uma exceção quando contém vários fragmentos no objeto `CategoryTree`. [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* A consulta `product` do GraphQL agora retorna os preços corretos do grupo de clientes.

<!-- MC-38822-->

* A resposta de consulta do GraphQL `products` agora classifica agregações de acordo com a posição de atributo do produto.

<!-- ENGCOM-8462-->

* O aplicativo não lança mais erros de tipo durante consultas do GraphQL quando os sufixos de URL do produto e da categoria contêm valores nulos. [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* O objeto `CustomizableDateValue` agora contém o atributo `type`. Seu valor é uma enumeração que pode ser definida como DATE, DATE_TIME ou TIME.

<!--  magento/partners-magento2ee#421-->

* A consulta [`dynamicBlocks`](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/dynamic-blocks/) retorna o conteúdo dos blocos dinâmicos que correspondem aos filtros especificados.

<!-- ENGCOM-8603-->

* A solicitação `V1/products/special-price-delete` do POST agora exclui somente o preço com um `store_id` especificado, conforme esperado. Anteriormente, a chamada removia de todas as lojas todos os preços especiais para o SKU especificado. [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* Correção de um erro com o atributo `country_code` na mutação `createGiftRegistry`.

<!-- magento/partners-magento2ee#280 -->

* Correção de problemas com o atributo `giftRegistryUid` da mutação `updateGiftRegistryItems`.

<!-- magento/partners-magento2ee#280 -->

* Adição de uma verificação adicional para impedir que a mutação `updateGiftRegistryRegistrants` seja usada para adicionar pessoas aleatórias como registrantes a um registro de presentes.

<!-- magento/magento2#31380 -->

* A mutação `addConfigurableProductsToCart` agora retorna a miniatura correta do produto especificado. Anteriormente, retornava a miniatura do produto principal.

<!-- ENGCOM-8477-->

* A consulta `products` não expõe mais o preço especial de um produto quando o período de preço especial é definido para uma data futura. [GitHub-30210](https://github.com/magento/magento2/issues/30210), [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* A resposta de consulta `customer` agora inclui o atributo `total_giftcard` como parte do objeto `OrderTotal`.

<!-- MC-41084 ENGCOM-9042 -->

* Correção de um problema que fazia com que a consulta `products` retornasse informações incorretas sobre camadas de preço em itens que não têm definição de preço de camada. [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### Imagem

<!-- MC-38951-->

* Agora é possível definir os atributos do pacote required_options e has_options conforme esperado ao criar ou atualizar um produto do pacote usando o ponto de extremidade POST `/V1/product/:sku`. Anteriormente, esses atributos personalizados eram definidos como 0 (zero), apesar dos esforços para defini-los como 1 (um).

### Importar/exportar

<!-- MC-41576-->

* O filtro IDs de categoria para entidades de produto na grade Atributos de entidade da página Exportar agora funciona conforme esperado.

<!-- MC-41439-->

* O status do estoque de produtos agrupados agora é atualizado conforme esperado para indisponível quando todos os produtos secundários estiverem indisponíveis. [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* O status do estoque de produtos configuráveis agora é atualizado automaticamente conforme esperado quando o status do estoque de produtos secundários é atualizado pela importação. Anteriormente, o status do estoque do produto não era atualizado automaticamente quando o status do estoque de produtos secundários era atualizado pela importação.

<!-- MC-41151-->

* Agora é possível salvar valores vazios em uma exportação agendada. Anteriormente, o aplicativo atualizava valores de filtro vazios após a criação ou o salvamento da exportação. Os valores `no` e `not specified` foram representados por zero no banco de dados, e um valor de `not selected` foi substituído por `no`.

<!-- MC-41092-->

* O processo de exportação agora leva em conta o escopo da função do usuário ao exportar produtos, fontes de estoque e entidades do cliente. Anteriormente, o processo de exportação ignorava o escopo da função do usuário, o que permitia a exportação de entidades de exportação de função de usuário privada.

<!-- MC-40943-->

* O aplicativo agora define a classe de imposto do produto como `None` se um produto for importado com `tax_class_name` valores `None` ou `0`. Anteriormente, se `product tax_class_name` fosse `None` no arquivo CSV, o aplicativo criava uma nova classe de imposto `None`, que duplicava a classe de imposto existente. Se `product tax_class_name` fosse `0` no arquivo CSV, o aplicativo ignoraria esse valor e a classe de imposto do produto não seria alterada após a importação.

<!-- MC-40898-->

* Os administradores agora podem alterar com êxito o `name` do `bundle_values` de um produto de pacote do Administrador. Anteriormente, o aplicativo exibia o produto como indisponível na loja depois que você alterava o nome de Administrador. Os produtos também foram mesclados com o mesmo SKU em uma única seção de opção de pacote.

<!-- MC-40333-->

* O aplicativo agora considera o escopo do usuário ao exportar dados do cliente. Anteriormente, ao tentar exportar clientes, o aplicativo exportava dados do cliente de todos os sites.

<!-- MC-40305-->

* O aplicativo agora remove os relacionamentos de produtos entre venda adicional, venda cruzada e produtos relacionados durante a importação do arquivo CSV, como esperado quando `__EMPTY__VALUE__` é especificado no arquivo CSV.

<!-- MC-40012-->

* A exportação de dados de endereço personalizados para muitos clientes (Admin **Sistema** > **Exportar**) não resulta mais em um erro de memória de rotina. Anteriormente, ao exportar dados de endereço personalizados, o aplicativo tentava carregar todos os dados do cliente, o que resultava na redução da memória, e o aplicativo exibia um erro de falha na alocação de memória.

<!-- MC-39977-->

* Os preços de camada duplicados não são mais importados durante o processo de importação de CSV padrão. Anteriormente, a validação estava ausente para impedir a importação de preços de níveis duplicados e, quando esses preços ocorreram, os comerciantes não podiam salvar os produtos. Os comerciantes também viram este erro ao tentar agendar uma alteração de produto: `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* Todas as imagens do produto agora são validadas durante a importação. Anteriormente, o aplicativo validava somente a primeira imagem quando um produto tinha várias imagens. [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* Agora é possível excluir uma região de um endereço de cliente, conforme esperado durante a importação. Anteriormente, a região atribuída não era alterada quando um endereço de cliente era importado com uma região vazia.

<!-- MC-38810-->

* Os produtos com conteúdo JSON ou HTML como atributos de produto adicionais agora são exportados corretamente para um arquivo CSV. Anteriormente, o arquivo CSV continha strings de dados sobrepostas em campos incorretos.

### Índice

<!-- MC-39718 ENGCOM-8567-->

* O Process Manager agora existe com um erro quando um processo secundário falha. Anteriormente, o Process Manager sempre saía com êxito se o número de funções passadas para ele (por exemplo, dimensões de indexador) fosse menor que o valor da variável de ambiente `MAGE_INDEXER_THREADS_COUNT`. [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* Os produtos agora estão disponíveis conforme esperado nos resultados de pesquisa da loja ao vincular produtos usando uma solicitação REST PUT `/V1/products/:sku/links` quando o modo indexador está definido como **Atualizar ao Salvar**.

<!-- MC-38310 magento/magento2#32693-->

* O indexador da regra de preço de catálogo agora funciona como esperado quando o modo do indexador está definido como **Atualizar ao Salvar**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* A exclusão de uma categoria desabilitada que não inclui um produto agora não afeta a pesquisa de catálogo e as tabelas de índice simples de categoria. Anteriormente, a exclusão de uma categoria inativa acionava uma reindexação completa. [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* Os indexadores personalizados agora podem usar diferentes nomes de colunas de entidade para assinaturas. Anteriormente, o gatilho de banco de dados usava o nome da coluna do último indexador definido como **Atualizar pelo Agendamento**, em vez do indexador designado. [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* O aplicativo não envia mais solicitações AJAX para recarregar seções de dados do cliente (`Magento_Customer/js/section-config`) que não são afetadas pela solicitação. [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* Os indexadores a seguir não são mais invalidados depois que você adicionar, remover ou reordenar produtos em uma categoria: `catalog_category_product` e `catalogsearch_fulltext` (e seus dependentes). Anteriormente, essas remoções involuntárias acionavam a reindexação completa dos sites. Uma reindexação completa agora é impedida sob essas condições quando o catálogo simples não está ativado.

### Infraestrutura

<!-- MC-41445-->

* A dependência `pelago/emogrifier` foi atualizada da versão 3.1.0 para 5.0.0. Esta atualização resultou na introdução de alterações incompatíveis com versões anteriores na classe `Magento\Email\Model\Template\Filter`. O código alterado é executado durante a renderização dos templates de email. Consulte [referência do BIC](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* Correção de um problema com `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` que impedia o salvamento de um novo produto.

<!-- MC-42199-->

* A biblioteca TinyMCE v3 obsoleta foi removida. O módulo `Magento_Tinymce3Banner` e os testes MFTF relacionados ao TinyMCE v3.x foram removidos do Adobe Commerce.

<!-- MC-41497-->

* O aplicativo não lança mais um erro `Invalid header value detected` no formulário Fale conosco quando um comprador insere um endereço de email que contém marcas diacríticas francesas (como &quot;é&quot;, &quot;è&quot;). O aplicativo agora converte letras UTF-8 no nome do usuário para codificação ASCII. Anteriormente, as letras UTF-8 não eram convertidas para a codificação ASCII na seção exclusiva do endereço de email.

<!-- MC-39947-->

* O aplicativo não lança mais um erro fatal do PHP quando um plug-in é adicionado a uma classe pai. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* Atualização dos arquivos README.md para estes módulos: `Magento_Msrp`, `Magento_MsrpConfigurableProduct`, `Magento_MsrpGroupedProduct`, `Magento_Multishipping`, `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` foi atualizado para v6.0.3 para compatibilidade com o PHP 8.

<!-- ENGCOM-9073-->

* `ramsey/uuid` foi atualizado para compatibilidade com o PHP 8.0. [GitHub-31777](https://github.com/magento/magento2/issues/31777), [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` foi atualizado para v1.4.4 para compatibilidade com o PHP 8. [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* Correção de uma combinação inválida de guias e espaços no arquivo `phpstan.neon`. [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* Remoção do uso da propriedade obsoleta `$_isScopePrivate` em toda a base de código. [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* Os layouts de página não são mais codificados permanentemente no  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  Como resultado, a função `getPageLayouts()` agora retorna a lista real de layouts de página declarados pelos diferentes módulos, conforme esperado. Anteriormente, retornava apenas layouts codificados. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* O arquivo `composer.lock` foi atualizado para a versão mais recente do Padrão de codificação. [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* Adicionada uma dependência ausente no pacote `web-token/jwt-framework` a `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* Os ouvintes passivos foram adicionados à biblioteca `fotorama.js` para melhorar a pontuação das métricas do farol. [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* O arquivo README.md para o módulo Google Analytics foi atualizado. [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* O Process Manager agora lida com exceções adequadamente em processos bifurcados. O processo principal agora existe, e o aplicativo agora exibe uma mensagem de erro apenas uma vez. Além disso, as exceções dos processos bifurcados agora são tratadas quando são lançadas no processo principal. Anteriormente, o aplicativo registrava várias falhas de indexador e exibia várias mensagens de erro.  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* O aplicativo não lança mais um erro quando um plug-in é adicionado a uma classe principal. (O parâmetro `optionsProvider` agora é declarado após `getContentIdentities` em `Assest.php`.) Anteriormente, o aplicativo exibia este erro: `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* A execução de `Magento\Framework\Filesystem\Io\Ftp::ls()` em uma pasta vazia agora retorna uma matriz vazia, conforme esperado. Anteriormente, o aplicativo gerou esta exceção: `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* O método `update` para Função e Regras foi marcado como obsoleto em `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* A concatenação dos parâmetros de cookie SameSite foi corrigida. Anteriormente, a concatenação incorreta anexou o sufixo `lex` a `value`, `domain` e outros parâmetros. [GitHub-26377](https://github.com/magento/magento2/issues/26377), [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` foi atualizado para v1.3.1 em toda a base de código. Anteriormente, o aplicativo exibia este erro: `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* O aplicativo agora exibe mais erros informativos quando ocorrem erros ao executar comandos `bin/magento` no modo de produção. Anteriormente, o aplicativo não exibia mensagens de erro ou exibia mensagens sem informações. [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* O objeto PHP `ArrayIterator` foi atualizado para funcionar conforme esperado com o PHP 7.4. [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* O aplicativo não emite mais um erro quando um cliente tenta concluir um pedido sem transportadoras disponíveis. Em vez disso, ele exibe a página de check-out e esta mensagem: `Sorry, no quotes are available for this order at this time`. Anteriormente, o aplicativo exibia uma página de check-out em branco e registrava esta mensagem no log de exceção: `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* O aplicativo não registra mais cada cookie como um contexto separado. A matriz `$_COOKIE` também foi convertida em uma cadeia de caracteres. Anteriormente, como cada cookie era registrado como um contexto separado, quando o número de cookies excedia 50, o aplicativo registrava esta mensagem: `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### Fatura

<!-- ENGCOM-8472 -->

* Ao criar novas faturas no Administrador, a caixa de seleção **Cópia de email de** agora funciona conforme esperado. Anteriormente, a caixa de seleção era ignorada se a configuração global para enviar emails de fatura estivesse habilitada em **Emails de vendas**. Agora ele é consistente e opera da mesma forma que as páginas de criação de memorando de crédito e remessa. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### Galeria de mídia

<!-- MC-41728-->

* `bin/magento media-gallery:sync` agora falha como esperado ao processar imagens PNG que não têm informações do XMP.

<!-- ENGCOM-8814-->

* As entradas na tabela `catalog_product_entity_media_gallery` são removidas conforme esperado quando os produtos relacionados são excluídos. [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* Os detalhes da imagem agora podem ser atualizados na Galeria de mídia quando a minificação do JavaScript está habilitada. Anteriormente, os detalhes da imagem não eram salvos e o aplicativo exibia este erro: `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

Os novos recursos e correções de bugs principais MFTF estão descritos no [Log de Alteração da Estrutura de Teste Funcional](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* Os comandos `magento indexer:reindex` e `cache:flush` e o grupo de ação `AdminReindexAndFlushCache` foram removidos dos testes para melhorar a execução dos seguintes módulos: `Bundle`, `Catalog`, `CatalogRule`, `CatalogRuleConfigurable`, `CatalogUrlRewrite`, `Downloadable`, `Indexer`, `Paypal` e `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` foi adicionado aos testes para evitar falha no teste. [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* Os testes foram refatorados com `StorefrontCheckQuickSearchStringActionGroup` e `StorefrontAssertProductNameOnProductMainPageActionGroup` (grupos de ação existentes). [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### Testes refatorados

Os testes a seguir foram refatorados para melhorar o tempo de execução:

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest` (substituição de `AdminMassOrdersHoldOnPendingAndProcessingTest` obsoleto) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### Grupos de ação

As ações repetitivas foram substituídas por grupos de ação nestes testes:

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### Novos grupos de ação

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup` (substitui filtrando a Grade de Produtos por SKU e clicando na primeira linha (para diminuir o tempo de execução de teste) <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### Grupos de ação excluídos

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* Removido `CliIndexerReindexActionGroup` (ou valor alterado) dos testes para melhorar o tempo de execução dos módulos `Backend`, `Bundle`, `BundleImportExport`, `Catalog`, `CatalogRule`, `CatalogSearch`, `Checkout`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Indexer`, `LayeredNavigation`, `LoginAsCustomer`, `Newsletter`, `Sales`, `SalesRule`, `Search`, `Store`, `Swatches`, `UrlRewrite`, `Weee` e `Wishlist`.

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* Removido `CliCacheFlushActionGroup` dos módulos `Catalog`, `CatalogUrlRewrite`, `Checkout`, `Config`, `ConfigurableProduct`,`Contact`, `Cookie`, `CurrencySymbol`, `Customer`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Fedex`, `Indexer`, `LayeredNavigation`,`LoginAsCustomer`, `Msrp`, `Multishipping`, `Sales`, `Swatches`, `Translation`, `UrlRewrite`, `Vault`, `Weee` e `Wishlist`.

### Informativo

<!-- ENGCOM-8948 MC-40885-->

* O aplicativo não envia mais o email do informativo a um cliente que cancelou a assinatura do informativo no período entre a criação da fila de informativos e o envio do informativo. [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* O aplicativo agora atende às configurações de habilitação do informativo (**Lojas** > **Configurações** > **Configuração** > **Clientes** > **Informativo** > **Opções Gerais**). Anteriormente, essas configurações eram sempre recuperadas do escopo padrão em implantações de várias lojas. [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* A chamada REST GET `/V1/customers/search` agora retorna as informações corretas para os clientes que assinaram vários boletins informativos. [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* O status da assinatura em cache foi removido do plug-in de boletim informativo. [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### Pedido

<!-- MC-40963-->

* O aplicativo agora calcula corretamente um saldo de cliente faturado ao retornar o crédito da loja para uma conta de cliente para uma ordem parcialmente faturada.

<!-- ENGCOM-8710-->

* O aplicativo agora salva uma ordem modificada conforme esperado quando salva um saldo de cliente reembolsado. [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### Métodos de pagamento

<!-- MC-41525-->

* O aplicativo agora renderiza blocos de pagamento em `frontend`, independentemente da área da qual o email foi enviado. (A área atual agora é emulada como `frontend` antes do bloco de pagamento ser renderizado.) Anteriormente, os blocos de pagamento eram renderizados na área da qual o email era enviado. Como resultado, independentemente de o email de vendas ter sido acionado pelo Administrador ou pela API REST, as URLs de ativos tentaram carregá-los da área errada (`webapi_rest` ou `adminhtml`).

<!-- MC-40810-->

* O aplicativo agora envia o link de um produto baixável para o endereço de email especificado durante o check-out. Anteriormente, quando um comprador convidado usava o Check-out do PayPal Express e inseria diferentes endereços de email para enviar o pedido e fazer o check-out, o aplicativo enviava o link do produto disponível para download para o primeiro endereço.

<!-- MC-38051-->

* O aplicativo agora exibe um valor preciso para o crédito de loja disponível na página Método de pagamento em implantações que oferecem suporte a várias moedas.

<!-- MC-37820-->

* A lista de métodos de pagamento agora é atualizada conforme esperado quando um comprador convidado altera o endereço de entrega de um pedido para um país diferente durante o checkout. Anteriormente, a alteração do endereço de faturamento não acionava uma atualização dos métodos de pagamento possíveis.

#### PayPal

<!-- MC-39895-->

* Os compradores agora podem fazer check-out com sucesso de um pedido PayPal Payflow Pro com um endereço de envio que contém caracteres especiais. Anteriormente, o aplicativo recusava o pagamento desses pedidos.

<!-- MC-39861-->

* Os compradores agora são redirecionados de volta para a página de sucesso do pedido após um pagamento bem-sucedido usando o PayPal. Anteriormente, os compradores eram redirecionados para uma página em branco porque os dados da sessão eram perdidos.

### Desempenho

<!-- MC-41647-->

* O desempenho da pesquisa do SKU do administrador em catálogos grandes melhorou. As dicas do otimizador de consultas agora forçam o uso do índice durante a execução da consulta.

<!-- MC-41440-->

* O desempenho do processo cron `catalog_product_alert` ao ser executado em tabelas grandes (vários milhões de linhas) foi aprimorado. Anteriormente, o `catalog_product_alert` carregava todos os alertas de produto, o que causava uma exceção de falta de memória.

<!-- ENGCOM-8752-->

* O aplicativo não carrega mais todas as páginas do CMS quando precisa de apenas uma página de edição para renderizar um formulário de Administrador.  Essas páginas agora carregam mais rápido. [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* Os valores numéricos em expressões `WHERE IN` agora são convertidos como número, não como sequência, o que melhora o desempenho da consulta em algumas versões de MariaDB. [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* O modo `use_application_lock` permite habilitar a reindexação usando variáveis de ambiente ou configurando o arquivo `app/etc/env.php`. Não é mais necessário redefinir manualmente o indexador após uma falha com esse modo ativado. Quando esse modo não estiver habilitado, você deverá redefinir manualmente o indexador após uma falha. Consulte [Usando o modo de bloqueio do aplicativo para processos de reindexação](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### Preços

<!-- MC-41767-->

* O aplicativo agora atualiza corretamente o preço de um produto com preços agrupados quando um comprador atualiza a quantidade do produto na loja. [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* Os produtos do pacote agora podem ser salvos quando os produtos tiverem um preço de camada atribuído e `Magento\Framework\Api\ExtensibleDataObjectConverter` for usado para converter dados do produto. Anteriormente, quando `Magento\Framework\Api\ExtensibleDataObjectConverter` era usado para converter dados do produto em uma matriz quando um produto era salvo, o aplicativo não salvava o produto e exibia este erro: `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* As atualizações de preço programadas agora são aplicadas aos produtos que já estão no carrinho do comprador. [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* O nível de preço agora é aplicado a um produto conforme esperado quando os incrementos de quantidade são ativados e o estoque decimal é menor que 1. Anteriormente, a quantidade mínima de preço de nível era definida como 1.

### Vídeo do produto

<!-- MC-39755-->

* Agora você pode usar o botão **Adicionar Vídeo** (Admin **Catálogo** > **Produtos**) para adicionar vários vídeos consecutivamente. Anteriormente, os campos de vídeo mantinham os detalhes do vídeo anterior.

<!-- MC-40817-->

* Entrar no modo de tela cheia de um vídeo de produto em uma página de produto agora funciona conforme esperado em dispositivos móveis. Anteriormente, entrar no modo de tela cheia fazia com que o vídeo pausasse antes de sair do modo de tela cheia.

<!-- MC-39759-->

* Os botões de seta de navegação (**Próximo** e **Anterior**) agora estão visíveis, conforme esperado, nos vídeos de produtos da loja.

<!-- MC-40463-->

* Os comerciantes agora podem adicionar vídeos do Vimeo usando o botão **Inserir vídeo** na página do produto, conforme esperado. Anteriormente, o aplicativo exibia um erro 404. [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### Aspas

<!-- MC-39531-->

* A chamada `/V1/guest-carts/examplecartid/items` agora retorna a exibição de loja solicitada. Anteriormente, retornava a primeira visualização de loja na loja, não a solicitada.

<!-- MC-33893 ENGCOM-8992-->

* O envio de fatura agora é configurável. Anteriormente, o envio de faturas não era configurável, e o aplicativo sempre enviava uma fatura após sua criação. Emails de fatura e pedido foram enviados no escopo de um observador. Observadores separados agora controlam o envio de email de pedido e email de fatura. [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### Relatórios

<!-- MC-39737-->

* A data da Última Revisão em **Relatórios** > **Avaliações** > **Por Produtos** do Administrador agora exibe a data de revisão correta. Anteriormente, o aplicativo exibia a data de criação do produto em vez da data de revisão.

### Resenhas

<!-- MC-40116-->

* As estrelas da classificação de análise do produto agora são calculadas corretamente na seção Revisar detalhes da página Minha conta.

<!-- MC-39763-->

* As seções Classificação média do produto e Classificações do produto da página Detalhes da revisão do produto agora são renderizadas corretamente. Anteriormente, a ID de revisão não era definida quando o aplicativo calculava a classificação da loja e o modelo de revisão do produto não era renderizado corretamente.

<!-- MC-36149-->

* O link **Seja o primeiro a analisar este produto** agora é alterado, conforme esperado, para uma contagem de revisão depois que um administrador aprova uma revisão.

<!-- ENGCOM-8501 MC-30270-->

* Agora, os administradores podem classificar as análises dos produtos na seção Análises do produto da página de edição do produto, conforme esperado. [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* As análises agora são salvas com a ID de loja correta depois que um administrador aprova e salva a análise de um domínio diferente da loja. [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### Recompensas

<!-- MC-39820-->

* O aplicativo agora atualiza a lista de métodos de pagamento quando um comprador que está fazendo check-out com vários endereços marca ou desmarca a opção **Armazenar Crédito (Pontos de Recompensa)**.

### Vendas

<!-- MC-39796-->

* Os usuários administradores agora podem fazer pedidos para itens esgotados quando a configuração **Pedidos pendentes** estiver habilitada (**Lojas** > **Configuração** > **Catálogo** > **Inventário** > **Opções do Estoque de Produtos**). Anteriormente, o aplicativo exibia um erro.

<!-- MC-42280-->

* Os compradores agora podem encontrar um pedido na página Pedidos e devoluções quando o sobrenome termina com um espaço em branco.

<!-- MC-41438-->

* Agora as faturas são criadas com o total geral correto quando uma regra de preço do carrinho que atribui um desconto de 100% é aplicada a um pedido que também está sujeito a impostos de produto de catálogo e de desconto e que se qualifica para remessa gratuita. Anteriormente, o pedido tinha o preço correto, mas a fatura não tinha. [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* Filtrar pedidos por data agora retorna resultados precisos. Anteriormente, o aplicativo não retornava um pedido que era feito depois de 00:00 UTC quando você filtrava pedidos por data do pedido.

<!-- MC-40030-->

* A grade do memorando de crédito agora exibe o símbolo de moeda correto quando o escopo do **Site** é usado para um atributo de **Preço** em uma implantação de várias lojas.

<!-- MC-40013-->

* Os botões de opção Métodos de pagamento não desaparecem mais na seção Informações de pagamento e envio do fluxo de trabalho de finalização depois que a página Criar novo pedido pelo administrador é recarregada. [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* O texto árabe agora é exibido corretamente nas faturas.

<!-- MC-39864-->

* O aplicativo agora calcula corretamente os totais de impostos parciais do aviso de crédito para avisos de crédito baseados em um pedido ou em uma fatura em lojas que implantam o PayPal Payment Pro como um gateway de pagamento. Anteriormente, para ordens com várias NFFs, a aplicação aplicava todo o imposto dessa ordem para o cancelamento parcial da NFF no aviso de crédito.

<!-- MC-39521 ENGCOM-8528-->

* O aplicativo não cria mais deadlocks aleatórios do banco de dados ao enviar novos emails de pedido aos clientes. Anteriormente, ocorriam bloqueios porque o aplicativo salvava o objeto inteiro e seus objetos relacionados, em vez de atualizar colunas SQL. O aplicativo exibiu este tipo de erro: `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* A página de detalhes do pedido da vitrine agora exibe a quantidade correta do produto entregue. Anteriormente, as quantidades de produto estavam incorretas porque o modelo da página Remessa de pedido renderizava **Qtd. Remetida** como `int`. Isto foi alterado para `float`.

<!-- MC-39026-->

* O aplicativo não envia mais cópias por email de uma fatura de pedido quando o botão **Cópia por email de fatura** está desmarcado. Anteriormente, o aplicativo enviou um email para **Cliente** e **Enviar cópia de email de fatura para**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* O aplicativo não cria mais entradas de endereço duplicadas para uma conta de cliente ao criar um novo pedido do Administrador para um cliente existente. A caixa de seleção **Salvar no Catálogo de Endereços** foi renomeada para **Adicionar ao Catálogo de Endereços** e agora está desmarcada por padrão no Administrador.

<!-- MC-38834-->

* O aplicativo agora usa o logotipo que foi carregado nas configurações de **Logotipo para Exibição de Impressão do HTML** quando os compradores imprimem um pedido de sua conta. Anteriormente, o aplicativo exibia o logotipo LUMA em vez do logotipo carregado.

<!-- MC-38625-->

* O pager de itens de pedido na loja agora funciona como esperado quando a contagem de itens excede 20. Anteriormente, o pager levava em conta os produtos secundários e a contagem total estava incorreta.

<!-- MC-23915 ENGCOM-8713-->

* O aplicativo agora exibe os símbolos de moeda corretos para o subtotal e os valores de remessa e manuseio nas grades da página Ordem e da página Aviso de Crédito. [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* Os administradores que usam o Safari agora podem adicionar um produto a um pedido do administrador com êxito. Anteriormente, quando o administrador clicou no botão **Adicionar produtos selecionados ao pedido**, o aplicativo exibia o ícone de carregamento giratório e a página travava.

### Regra de Vendas

<!-- MC-40671-->

* O aplicativo agora aplica as regras de preço do carrinho com as condições **Desconto de Quantidade Máxima Aplicado a** ou **Etapa de Quantidade do Desconto (Comprar X)** corretamente quando várias regras de preço do carrinho são aplicadas ao carrinho de compras. Anteriormente, se uma regra de preço do carrinho com **Desconto de Quantidade Máxima fosse Aplicada a** ou a **Etapa de Quantidade do Desconto (Comprar X)** fosse aplicada depois de outra regra de preço do carrinho, o desconto total era reduzido ao valor configurado para **Desconto de Quantidade Máxima Aplicado a** ou **Etapa de Quantidade do Desconto (Comprar X)** vezes o preço do produto.

<!-- MC-39827-->

* O relatório de Cupom agora reflete com precisão a atividade de cupom em implantações em que um banco de dados dividido é implementado.

<!-- MC-39477-->

* As regras de preço do carrinho que contêm a condição Categoria **NÃO É** agora são aplicadas como esperado a produtos filho/simples configuráveis que não estão atribuídos a uma categoria, mas cujos produtos pai estão atribuídos.

<!-- MC-39034-->

* A consulta `cart` do GraphQL agora retorna o total geral correto para a etapa de cobrança de um carrinho quando um cupom é aplicado ao pedido.

### Pesquisar {#search-heading}

<!-- MC-41138-->

* A página de categoria não contém mais estas IDs de elementos HTML duplicadas: `modes-label`, `mode-list`, `toolbar-amount`, `sorter`, `limiter`.

<!-- MC-40981-->

* Os resultados parciais da pesquisa de palavras não incluem mais correspondências inesperadas ou irrelevantes, e as pesquisas produzem resultados consistentes na loja e no administrador. O aplicativo agora usa um analisador diferente sem um lematizador para pesquisas parciais de palavras. Anteriormente, os resultados da pesquisa exibiam produtos que não incluíam palavras-chave de pesquisa. (O analisador padrão anteriormente incluía um lematizador e, como o mesmo analisador foi usado no tempo de pesquisa para pesquisa de palavra parcial, o resultado da pesquisa poderia produzir correspondências inesperadas ou irrelevantes.)

<!-- MC-40715-->

* A pesquisa rápida agora retorna resultados se a consulta de pesquisa tiver várias palavras e o nome do produto estiver configurado como não pesquisável. Anteriormente, se o nome do produto era configurado como não pesquisável, o aplicativo exibia uma exceção de consulta em consultas de pesquisa com várias palavras.

<!-- MC-40672-->

* Os resultados da pesquisa agora incluem o atributo `weight` conforme esperado quando configurado como pesquisável.

<!-- MC-40409-->

* O aplicativo não emite mais um erro ao visualizar uma página de categoria vazia com o Elasticsearch ativado. Em vez disso, ele renderiza a página conforme esperado e exibe uma mensagem informativa. Anteriormente, um índice de texto completo vazio acionava uma exceção em uma página de categoria.

<!-- MC-40376-->

* O recurso de preenchimento automático do campo de pesquisa agora funciona conforme esperado se um comprador clicar fora do campo de pesquisa depois de iniciar a pesquisa. As sugestões de preenchimento automático agora reaparecem quando o comprador retoma a digitação. Anteriormente, o aplicativo não exibia sugestões de preenchimento automático e clicar na caixa de pesquisa não tornava as sugestões de pesquisa visíveis novamente (embora digitar letras adicionais o fizesse).

<!-- MC-34217-->

* Pesquisar um produto com base em seu SKU total ou parcial na Pesquisa avançada agora retorna o produto esperado.

<!-- MC-31395-->

* Agora, os filtros de navegação em camadas exibem contagens precisas do produto. Anteriormente, os valores de contagem de produtos do Elasticsearch não eram filtrados por permissões de catálogo.

<!-- MC-23881 ENGCOM-8618-->

* O Elasticsearch não lança mais um erro quando o parâmetro de página do URL da categoria excede a paginação. [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* Agora você pode adicionar um mapeador de campo personalizado do Elasticsearch a `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`.

<!-- ENGCOM-9029 MC-24026-->

* Os desenvolvedores agora podem alterar os mapeamentos do Elasticsearch. Anteriormente, os modelos dinâmicos enviados ao servidor do Elasticsearch nos mapeamentos padrão eram codificados, o que impedia os desenvolvedores de indexar no Elasticsearch dados extras associados a um módulo personalizado.

<!-- ENGCOM-8464 -->

* Os campos de pesquisa (minipesquisa de formulário) agora funcionam como esperado quando as Sugestões de pesquisa estão desativadas.

### Envio

<!-- MC-41464-->

* O aplicativo agora atualiza o preço de envio conforme esperado quando um comprador navega de volta para a página do carrinho depois de excluir um produto durante o checkout com vários endereços.

<!-- MC-41343-->

* O aplicativo agora exibe o preço de envio ajustado correto quando alguns itens no carrinho se qualificam para frete gratuito. Anteriormente, quando um subconjunto de itens no carrinho se qualificava para envio gratuito, o aplicativo não ajusta o preço do envio e exibia o preço total do envio ao comprador.

<!-- MC-41186-->

* Os usuários administradores restritos a um site específico agora podem criar uma remessa para um pedido feito no mesmo site. Anteriormente, o aplicativo lançava esta exceção quando um usuário Administrador que não tinha permissão para a exibição de loja padrão tentava enviar um pedido que foi colocado em uma exibição de loja à qual o usuário Administrador tinha acesso: `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* O aplicativo agora leva em conta os descontos relevantes da regra de preço do carrinho ao determinar se um pedido atende às condições para frete gratuito da DHL.

<!-- MC-40702-->

* As etiquetas de remessa agora usam a moeda base como esperado em vez da moeda do pedido para lojas que suportam várias moedas quando um pedido é colocado em uma moeda não base. [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678-->

* O aplicativo agora exibe o subtotal correto do pedido quando um comprador retorna à página do carrinho durante o checkout após sair da página de vários envios. [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* A edição de informações de faturamento durante a criação do pedido de Admin não altera mais as informações de envio de clientes com endereços de envio e faturamento padrão diferentes. [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* O aplicativo não desmarca mais a caixa de seleção **Anexar comentários** quando um comprador clica em **Obter métodos e taxas de envio** e seleciona um método de envio ao criar um pedido com o Administrador.

<!-- MC-36425-->

* Os compradores agora podem usar o botão Voltar do navegador para retornar à página Selecionar método de envio ao fazer check-out de um pedido com vários endereços. Anteriormente, o aplicativo exibia a página Selecionar método de envio corrompida. [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* A quantidade do produto agora permanece inalterada conforme esperado depois que um comprador altera a quantidade na página Enviar para vários endereços e clica no botão Voltar do navegador.

<!-- ENGCOM-9096-->

* Os encargos do método de envio com taxa uniforme não se tornam mais zero quando uma regra de preço do carrinho é aplicada durante a finalização da compra. [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* O aplicativo não emite mais um erro quando um comerciante tenta enviar um pedido usando DHL quando a caixa de seleção **Criar rótulo de remessa** está habilitada e o nome do produto contém caracteres unicode. Anteriormente, o aplicativo exibia este erro ao solicitar a criação do rótulo: `The response is in wrong format`.

<!-- ENGCOM-8952 -->

* Você pode fazer um pedido com êxito do Administrador em uma implantação multissite na qual o `United States` está habilitado em um site e o `Disable all countries` está habilitado como escopo padrão no outro site. Anteriormente, o aplicativo não colocava o pedido e exibia este erro: `Please check the shipping address information. "regionId" is required. Enter and try again`.

### Loja

<!-- MC-40538-->

* O aplicativo não trata mais uma cadeia de caracteres de `0` como um valor vazio ao exibir uma home page de repositório. Anteriormente, o aplicativo tratava um valor inteiro no início de um caminho de solicitação como uma ID de loja, o que tinha efeitos não intencionais no SEO.

<!-- MC-40313-->

* Os plug-ins para `\Magento\Framework\App\ActionInterface` em `lib/internal/Magento/Framework/App/Action/Plugin` foram removidos para manter a diretriz de que os plug-ins devem ser usados para personalizar o comportamento de um módulo a partir de outro módulo. [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* O aplicativo agora exibe esta mensagem quando você tenta selecionar `Website` como padrão quando `Store View` é desabilitado durante a criação do site: `Please enable your Store View before using this Web Site as Default`. Anteriormente, o site travava e o aplicativo não exibia um alerta.

### Imposto

<!-- MC-39571-->

* O aplicativo agora leva em conta o imposto oculto durante a validação do valor mínimo do pedido.

<!-- MC-38025 ENGCOM-8612-->

* O aplicativo agora exibe Impostos de produto fixos (FPT) conforme esperado quando um comprador navega de volta para o carrinho de compras e prossegue para o checkout após adicionar produtos de pacote ao carrinho. [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* O aplicativo agora preenche os campos de entrada **Número IVA** para os endereços de faturamento e de envio da seção Informações de Endereço da página Novo pedido de administrador com números IVA salvos quando um administrador cria um pedido para um cliente existente. [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* O aplicativo agora exibe um campo **Número de IVA** na página de registro do cliente quando `customer/create_account/vat_frontend_visibility` está habilitado.

### Teste

<!-- MC-41393-->

* Os ambientes de teste foram atualizados para Redis 6.0.12.

<!-- ENGCOM-8529-->

* `CacheCleaner::cleanAll();` removido dos testes de integração.

<!-- ENGCOM-8898-->

* Adição de um teste para esse cenário: os usuários administradores podem editar uma conta de cliente quando o cliente é inscrito em um boletim informativo na fila.

<!-- ENGCOM-8484-->

* Removido o comando `cache:flush` dos testes para melhorar o tempo de execução dos módulos `Catalog`, `CatalogUrlRewrite` e `LoginAsCustomer`.

<!-- ENGCOM-8499-->

* Parâmetros redundantes foram removidos e o POST foi alterado para GET onde necessário em `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### Tema

<!-- MC-41474-->

* A página de logon do cliente não exibe mais esta mensagem quando a configuração **Mover código JS para a parte inferior da página** (**Armazenamento** > **Configurações** > **Avanço** > **Desenvolvedor** > **Configurações do JavaScript**) e os cookies estão habilitados: `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* Os links de conta nos cabeçalhos agora seguem os padrões da WCAG. Anteriormente, os links de conta nos cabeçalhos continham IDs duplicadas, o que causava a falha da validação da WCAG.

<!-- MC-40278-->

* O aplicativo agora prioriza a configuração da loja para uma imagem de logotipo da loja em relação à configuração de layout. Anteriormente, o tamanho das imagens de logotipo era fixo e não variava de acordo com o armazenamento.

<!-- MC-35227-->

* O aplicativo agora exibe elementos de página de forma consistente nas páginas da loja que usam temas padrão do Magento Open Source. Anteriormente, nem todos os estilos eram aplicados no tema em branco, portanto, nem todos os elementos da página eram exibidos nas páginas que usavam esse tema. (Por exemplo, nenhum ícone de lente de aumento estava presente no campo de pesquisa da página Meus pedidos.)

### Tradução e códigos de idiomas

<!-- MC-23553-->

* Os colchetes adicionados às cadeias de caracteres não são mais escapados quando a tradução em linha está configurada. Anteriormente, o método `escapeHtmlAttr` convertia os colchetes em códigos de entidade HTML.

<!-- ENGCOM-8694-->

* As frases intraduzíveis no Admin agora podem ser traduzidas. (Esta solicitação de pull contribui para esforços em andamento para tornar todas as cadeias de caracteres de Administrador localizáveis.) [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* As cadeias de texto no modelo usadas para gerenciar métodos de pagamento armazenados (**Minha Conta** > **Métodos de Pagamento Armazenados** ) agora podem ser traduzidas.

<!-- MC-30798 ENGCOM-8717-->

* Os emails de pedidos enviados pelo administrador agora usam o local da loja, não o local associado à conta do administrador.

### IU

<!-- MC-41784-->

* O rodapé do Administrador agora exibe a versão correta do produto.

<!-- MC-41067-->

* A paginação para origens agora está presente, conforme esperado, durante a criação da remessa do Administrador.

<!-- MC-40240-->

* O filtro de grade de produto agora funciona corretamente quando você usa atributos de data personalizados para filtrar produtos e a localidade do usuário Admin é `en_GB`.

<!-- MC-39279-->

* Os gestos de pinçar para zoom agora funcionam como esperado na lente de aumento da galeria de imagens da página do produto em dispositivos iOS.

<!-- MC-38787-->

* A paginação dos resultados de pesquisa da grade de produto do administrador agora começa na página um para cada pesquisa, conforme esperado.

<!-- MC-38423-->

* As anomalias com a exibição do carrinho de compras quando ampliadas foram resolvidas. Anteriormente, os elementos de exibição se sobrepunham quando esta página era ampliada.

<!-- MC-38226-->

* A página de revisão do pedido exibida durante o check-out com o Check-out expresso do PayPal agora é carregada com sucesso. Anteriormente, o modelo continha o botão **Atualizar método de entrega** não utilizado, que estava apenas parcialmente oculto pelo script durante a renderização da página.

<!-- MC-37941-->

* As estrelas de classificação e o texto de revisão na seção Revisões do cliente da página do produto agora ficam espaçados corretamente quando nomes de classificação longos estão presentes.

<!-- MC-37688-->

* As opções agora são exibidas conforme esperado na lista suspensa Ações nas páginas Arquivar NFFs, Entregas e Avisos de Crédito.

<!-- MC-23729  magento/magento2#31549-->

* O aplicativo agora exibe um valor de hora correto quando a opção `datetime` do componente `timeOnly` está definida como **sim**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* Agora você pode remover uma atualização de layout após criar um novo widget em Admin **Conteúdo** > **Widgets**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* O botão **Remover Atualização de Layout** agora funciona conforme esperado em qualquer layout adicionado do Administrador **Conteúdo** > **Widgets**. Anteriormente, esse botão não funcionava em nenhum layout diferente do primeiro selecionado ao adicionar vários layouts. [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* O aplicativo agora usa o título de página definido no arquivo de layout como o título da página do navegador para o arquivo de Edição de conta do cliente. Anteriormente, a ação do controlador `Magento\Customer\Controller\Account\Edit` impunha o valor do título da página para `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* As caixas de seleção que permitem aos comerciantes alternar entre mostrar e ocultar senhas foram adicionadas a estas páginas:
   * Logon do cliente
   * Registro do cliente
   * Edição de Cliente (seção Alterar Senha)
   * Nova senha definida pelo cliente [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* Removido um cabeçalho redundante nas células de grade que aparecia quando um administrador adicionava um produto a um conjunto de produtos agrupado após alterar o conjunto de atributos. [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* O aplicativo agora exibe um filtro `DateRange` na área Logon da página **Cliente** > **Logon**. Anteriormente, o aplicativo exibia um filtro `Text`. [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* O JavaScript foi removido dos arquivos de modelo e movido para arquivos separados para reduzir os problemas de renderização nas páginas de Administrador. Anteriormente, as páginas de Administração não eram renderizadas corretamente em implantações nas quais a minificação do HTML tinha sido habilitada. O aplicativo exibiu este erro: `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* O widget `dropdownDialog` agora carrega somente as `jquery-ui` partes arrastáveis e redimensionáveis de que necessita. Anteriormente, carregava grandes quantidades de código desnecessário, o que aumentava o tempo de carregamento e reduzia o desempenho. [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### Substituições de URL

<!-- MC-41550-->

* As substituições de URL de produto para um site específico em uma implantação multissite agora são geradas conforme esperado depois que os produtos são atribuídos a um site por atualização em massa.

<!-- MC-40780 magento/magento2#32598-->

* O aplicativo agora gera corretamente o caminho da URL para categorias secundárias quando a caixa de seleção **Usar valor padrão** da chave de URL está habilitada para a categoria principal. Anteriormente, mover uma categoria na hierarquia resultava em um valor `url_path` incorreto ao usar chaves de URL diferentes em uma implantação de exibição de vários armazenamentos. [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* O aplicativo agora atualiza o `url_path` da categoria atribuída a todo o escopo de armazenamento quando você move uma categoria na hierarquia de categorias. Anteriormente, mover uma categoria na hierarquia resultava em um `url_path` incorreto.

<!-- MC-39463-->

* Agora, os redirecionamentos de URL criados pelo Administrador usando um URL personalizado funcionam com sucesso. Anteriormente, o GraphQL armazenava a resposta em cache de uma consulta do GraphQL `urlResolver` e retornava o valor antigo após a atualização de regravação da URL.

<!-- MC-38931  magento/magento2#31106-->

* As substituições de URL de produto agora são removidas conforme esperado quando um produto é removido de um site. [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* Adicionada uma referência `main_table` a `store_id` na função `addStoreFilter` da coleção `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php`. Anteriormente, ocorriam problemas sempre que um `join` era adicionado à coleção em uma tabela que também continha uma coluna `store_id`. [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* O ponto de extremidade REST `PUT /V1/products/:sku` agora gera novamente as substituições de URL do produto, conforme esperado. Anteriormente, o ponto de extremidade gerou novamente os valores do produto `url_key`, mas não substituiu a URL. [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### Usuário

<!-- MC-40777-->

* Agora você pode salvar uma nova função de usuário efetiva (Admin **Sistema** > **Permissões** > **Funções de Usuário**) com toda a árvore `Catalog` selecionada, exceto `Edit Product Design` ( **Catálogo** > **Inventário** > **Produtos** > **Editar Design de Produto**). Anteriormente, o aplicativo não salvava alterações de produto feitas por um usuário nesta função e exibia este erro: `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* O aplicativo agora usa o modelo de email personalizado correto ao gerar emails para novos usuários administradores. Anteriormente, o aplicativo usava o antigo modelo padrão, que omitia o nome e o sobrenome do administrador.

<!-- MC-38122-->

* O aplicativo agora usa o modelo de email correto ao enviar emails para novos usuários. Anteriormente, o aplicativo usava o modelo padrão mesmo quando um modelo personalizado era selecionado.

### VersionCMS

<!-- MC-39953-->

* O aplicativo agora aplica o tema correto a uma página do CMS depois que você altera seu layout. Anteriormente, o aplicativo alterava o tema atribuído ao Luma após salvar as alterações de layout, independentemente do tema atribuído à página.

### Vídeo

<!-- MC-42059 ENGCOM-9039-->

* Os vídeos agora estão disponíveis na galeria de produtos, conforme esperado, quando o agrupamento avançado do JavaScript é ativado e usado. [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* Os vídeos do YouTube para produtos simples que pertencem a um produto configurável agora funcionam conforme esperado. Anteriormente, as imagens eram ordenadas por ID em vez da posição. Consequentemente, alguns vídeos foram tratados como imagens. [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Estrutura da API da Web

<!-- MC-41758-->

* A API do catálogo agora atualiza corretamente os valores de opção personalizados de um produto adicionando novos valores e removendo valores antigos. Anteriormente, a API não excluía os valores antigos.

<!-- MC-34431-->

* O POST `/V1/guest-carts/:cartId/billing-address` agora retorna a ID do endereço como um inteiro, não como uma cadeia de caracteres.

### Widget

<!-- MC-39128-->

* Agora, um administrador pode excluir todas as atualizações de layout de um widget. Anteriormente, quando um widget tinha várias atualizações de layout, um administrador podia excluir apenas o primeiro.

<!-- MC-39107-->

* Clicar no botão **Adicionar ao carrinho** no widget do produto não resulta mais em um recarregamento de página. Anteriormente, clicar no botão **Adicionar ao carrinho** em um widget de produto fazia com que a página atual fosse recarregada antes de o produto ser adicionado ao carrinho.

### Lista de desejos

<!-- MC-40651-->

* O aplicativo não redefine mais as configurações de um produto definível quando você clica no botão **Editar item** para o produto de uma lista de desejos. [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* O aplicativo agora exibe o preço correto do produto ao atualizar um produto com uma opção de arquivo personalizável na lista de desejos. Anteriormente, o aplicativo exibia o preço incorreto do produto e não exibia um link para o arquivo carregado.

<!-- MC-39060-->

* A contagem total de produtos em uma lista de desejos para um cliente com várias listas de desejos agora corresponde ao número de itens na lista de desejos. Anteriormente, os produtos indisponíveis eram incluídos na contagem total de produtos.

<!-- MC-36779 magento/magento2#31110-->

* O aplicativo agora remove um produto de uma lista de desejos depois de adicioná-lo a um pedido. [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* Os compradores agora podem adicionar produtos relacionados ao carrinho de compras de uma lista de desejos. Anteriormente, o aplicativo adicionava somente o produto configurável, não o produto configurável e seus produtos relacionados, quando um comprador clicava no link **Selecionar tudo** da seção Produtos Relacionados. [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## Problemas conhecidos

**Problema**: _erro do JavaScript quando o reCAPTCHA está desabilitado_. Se o reCAPTCHA estiver desativado para check-out, o check-out continuará, mas o aplicativo exibirá um erro `Uncaught TypeError` no log do console.  Esse problema será corrigido em uma versão posterior. <!-- MC-42589 42649-->

**Problema**: _Erro na Política de Segurança de Conteúdo_. A loja exibe o seguinte erro no log de console: `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. O desempenho da vitrine não é afetado. <!-- MC-42613-->

**Problema**: _Anomalias na exibição de valores de cartão-presente do PayPal Credit_. Quando o Crédito do PayPal é ativado e vários valores de cartão-presente são configurados, se um comprador alterar o valor de um cartão-presente, a loja não atualizará o valor dos pagamentos parcelados. Uma correção para esse problema será incluída no Adobe Commerce 2.4.4 e no Magento Open Source 2.4.4.<!-- MC-42499 AC-344-->

**Problema**: _O botão **Adicionar ao pedido**não funciona para produtos adicionados ao carrinho pelo SKU_.  o aplicativo exibe esta mensagem de erro quando você clica no botão **Adicionar ao pedido** depois de adicionar produtos ao pedido por SKU: `An error has happened during application run`. Os produtos não são adicionados ao carrinho. **Solução alternativa**: usar o recurso Adicionar Produtos. <!-- AC-345-->

## Contribuições da Comunidade

Agradecemos à comunidade mais ampla da Magento Open Source e gostaríamos de reconhecer suas contribuições para esta versão.

A equipe de Engenharia da Comunidade [Magento Contributors](https://magento.biterg.io/app/kibana) mantém uma lista dos principais colaboradores individuais e parceiros por mês, trimestre e ano. Nessa página de Contribuidores, você pode seguir os links para as PRs mescladas no GitHub.

### Contribuições do parceiro

A tabela a seguir destaca as contribuições feitas pelos Parceiros. Esta tabela lista o Parceiro que contribuiu com a solicitação de pull, a solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### Contribuições individuais do contribuinte

A tabela a seguir identifica as contribuições dos membros da comunidade. Esta tabela lista as solicitações de pull externas, o número do problema do GitHub associado a ela (se disponível) e o membro da comunidade que contribuiu com a solicitação de pull.

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### Requisitos do sistema

Nossa pilha de tecnologia é construída em PHP e MySQL. Para obter mais informações, consulte [Requisitos do Sistema](../../../installation/system-requirements.md).

### Instruções de instalação e atualização

Você pode instalar o Magento Open Source 2.4.3 usando o [Composer](../../../installation/composer.md).

## Kits de ferramentas de migração

A Ferramenta de migração de dados ajuda a transferir dados existentes do armazenamento do Magento 1.x para o Magento 2.x. Essa interface de linha de comando inclui funções de verificação, rastreamento de progresso, registro e teste. Para obter instruções de instalação, consulte [Instalar a Ferramenta de Migração de Dados](../../../tools/data-migration-tool/install.md). Considere explorar ou contribuir para o [repositório de Migração de Dados](https://github.com/magento/data-migration-tool).

O [Kit de Ferramentas de Migração de Código](https://github.com/magento-commerce/code-migration) ajuda a transferir as extensões de armazenamento e personalizações existentes do Magento 1.x para o Magento 2.x. A interface de linha de comando inclui scripts para converter módulos e layouts do Magento 1.x.
