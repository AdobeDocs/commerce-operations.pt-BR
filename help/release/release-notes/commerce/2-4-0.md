---
title: Notas de versão do Adobe Commerce 2.4.0
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.0 do Adobe Commerce.
exl-id: 8dc18855-b040-4bc3-8c99-dd7e1407b1fa
source-git-commit: 95ea96a566b0579a22b2ba738bd4a4bceef8cd9c
workflow-type: tm+mt
source-wordcount: '18873'
ht-degree: 0%

---

# Notas de versão do Adobe Commerce 2.4.0

O Adobe Commerce 2.4.0 apresenta suporte para PHP 7.4, Elasticsearch 7.6.x e MySQL 8.0. Alterações substanciais de segurança incluem a ativação da autenticação de dois fatores no Admin por padrão. As melhorias B2B incluem o novo workflow Aprovação de Ordem.

**Com esta versão, as integrações dos métodos de pagamento Authorize.Net, eWay, CyberSource e Worldpay foram removidas do código principal. Os comerciantes devem migrar para as extensões oficiais disponíveis no Commerce Marketplace**.

>[!NOTE]
>
>**integração de pagamento Braintree**: antes da versão 2.4.0, era recomendável que os comerciantes instalassem e configurassem a extensão de integração de pagamento Braintree oficial do Commerce Marketplace para substituir a integração principal. Com esta versão (2.4.0), a extensão agora está incluída na versão. Os comerciantes devem seguir etapas adicionais para garantir que o Braintree funcione corretamente em uma implantação 2.4.0. Consulte [Braintree](https://experienceleague.adobe.com/en/docs/commerce-admin/stores-sales/payments/braintree) para obter mais informações sobre como migrar para 2.4.0.

Esta versão inclui todas as melhorias na qualidade principal incluídas na versão 2.3.5-p1, mais de 100 novas correções para o código principal e 30 aprimoramentos de segurança. Ele inclui a resolução de 226 problemas do GitHub por membros da nossa comunidade. Essas contribuições da comunidade variam desde uma pequena limpeza do código principal até melhorias significativas no Inventory management e no GraphQL.

>[!NOTE]
>
>Versões secundárias trazem melhorias substanciais de código. Antes de atualizar para a versão 2.4.0, confirme se seu ambiente atende aos [requisitos mínimos de pilha técnica](../../../installation/system-requirements.md).

{{bics}}

>[!NOTE]
>
>Os nomes dos pacotes de versões de segurança normalmente são anexados com -p1. No entanto, não foi possível evitar o desvio dessas convenções de nomenclatura com a versão 2.3.5, que, por sua vez, teve um efeito de cascata temporário nos nomes subsequentes do pacote de segurança. Especificamente, o recurso completo versão 2.3.5 é 2.3.5-p1. A versão de segurança que lançaremos quando a versão 2.4.0 do GA for 2.3.5-p2. Esperamos retornar às convenções de nomenclatura habituais em versões futuras.

## Aplique o `AC-3022.patch` para continuar oferecendo a DHL como transportadora

A DHL apresentou o schema versão 6.2 e substituirá o schema versão 6.0 em setembro de 2022. Adobe Commerce 2.4.4 e versões anteriores que suportam a integração DHL suportam apenas a versão 6.0. Os comerciantes que implantarem essas versões devem aplicar o `AC-3022.patch` o mais rápido possível para continuarem oferecendo a DHL como transportadora. Consulte o artigo da Base de conhecimento [Aplicar um patch para continuar oferecendo a DHL como transportadora](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) para obter informações sobre como baixar e instalar o patch.

## Patch de segurança disponível

Os comerciantes agora podem instalar correções de segurança sensíveis ao tempo sem aplicar as centenas de correções e aprimoramentos funcionais que uma versão trimestral completa (por exemplo, 2.3.5-p2) fornece. O Patch 2.3.5.2 (Pacote do Composer 2.3.5-p2) é um patch de segurança que fornece correções para vulnerabilidades que foram identificadas na versão trimestral anterior, 2.3.5-p1. Todos os hot fixes aplicados à versão 2.3.5 estão incluídos neste patch de segurança. (Um *hot fix* fornece uma correção para uma versão lançada que aborda um problema ou erro específico.)

Para obter informações gerais sobre patches de segurança, consulte [Introdução à Nova Versão de Patch de Segurança](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287).Para obter instruções sobre como baixar e aplicar patches de segurança (incluindo o patch 2.3.5-p2), consulte [Instalação rápida no local](../../../installation/composer.md). Os patches de segurança incluem apenas correções de bugs de segurança, não as melhorias de segurança adicionais incluídas no patch completo.

## Outras informações sobre a versão

Embora o código para esses recursos esteja incluído nas versões trimestrais , vários desses projetos (por exemplo, B2B, Page Builder, Inventory management e Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros para esses projetos estão documentadas nas informações de versão separadas e específicas do projeto, disponíveis na documentação de cada projeto.

## Destaques

Procure os seguintes destaques nesta versão:

### Aprimoramentos substanciais de segurança

Esta versão inclui mais de 30 correções de segurança e melhorias na segurança da plataforma.

#### Mais de 30 aprimoramentos de segurança que ajudam a fechar as vulnerabilidades de execução remota de código (RCE) e criação de script entre sites (XSS)

Nenhum ataque confirmado relacionado a esses problemas ocorreu até o momento. No entanto, certas vulnerabilidades podem ser potencialmente exploradas para acessar informações do cliente ou assumir o controle de sessões de administrador. A maioria desses problemas exige que um invasor obtenha acesso ao Administrador primeiro. Como resultado, lembramos você de tomar todas as medidas necessárias para proteger seu Administrador, incluindo, mas não limitado a, esses esforços: incluir na lista de permissões de IP, [autenticação de dois fatores](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/), uso de uma VPN, uso de um local exclusivo em vez de `/admin` e boa higiene de senha. Consulte [Atualizações de segurança disponíveis para o Magento](https://helpx.adobe.com/security/products/magento/apsb20-47.html) para ver uma discussão sobre esses problemas corrigidos.

#### Aprimoramentos adicionais de segurança

* **Implementação de 2FA para contas de administrador, contas de usuário magento.com e acesso SSH à nuvem**

   * **Protegendo sua conta de Administrador**. A autenticação de dois fatores (2FA) agora é necessária para o administrador. Os usuários administradores devem primeiro configurar seus 2FAs antes de fazer logon no Administrador por meio da interface do usuário ou de uma API da Web. 2FA é ativado por padrão. Recomendamos não desabilitar o módulo 2FA.  Essa etapa extra de autenticação dificulta que usuários mal-intencionados façam logon no Administrador sem autorização. Consulte [Autenticação de dois fatores (2FA)](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/). <!-- MC-22631-->

   * **Protegendo sua conta**. A autenticação de dois fatores (2FA) fornece uma camada adicional e opcional de segurança para proteger melhor sua conta magento.com contra usuários não autorizados que talvez queiram usar sua conta da maneira que você não deseja. Consulte [Protegendo Sua Conta](https://experienceleague.adobe.com/en/docs/commerce-admin/start/commerce-account/commerce-account-secure).

   * **Protegendo o acesso SSH à nuvem**. O Adobe na infraestrutura em nuvem fornece imposição de autenticação de vários fatores (MFA) para gerenciar requisitos de autenticação para acesso SSH a ambientes em nuvem. A autenticação multifator para 2FA não é habilitada por padrão em um projeto.  A Adobe recomenda ativar esse recurso. Entre em contato com o Suporte para obter assistência. Consulte [Habilitar autenticação multifator para acesso SSH](https://experienceleague.adobe.com/en/docs/commerce-cloud-service/user-guide/project/multi-factor-authentication).

* **O modo estrito do filtro de modelo agora está habilitado por padrão**. Os componentes (incluindo páginas e blocos do CMS) que usam o filtro de modelo no modo herdado podem ser vulneráveis à execução remota de código (RCE). Habilitar o modo estrito por padrão garante que os ataques de RCE não possam ser habilitados deliberadamente. <!-- MC-22982-->

* **A renderização de dados para provedores de dados de interface do usuário agora está desabilitada por padrão**. Isso remove a oportunidade de usuários mal-intencionados executarem JavaScript arbitrários. <!-- MC-17356-->

* **Nova classe `\Magento\Framework\Escaper`**. Esta classe é fornecida para modelos `.phtml` e as classes PHP responsáveis pela geração do HTML. Esta classe contém métodos de limpeza de HTML relevantes para vários contextos. A variável local `$escaper` está disponível dentro de `.phtml` modelos e deve ser usada em vez da `$block->escape{method}` obsoleta. Use `$escaper` em vez de `$block`, pois o uso de `$block->escape{method}` foi descontinuado.

* **Suporte para o arquivo security.txt**. Este arquivo é padrão do setor no servidor e ajuda pesquisadores de segurança a relatar possíveis problemas de segurança aos administradores do site.

* **Aprimoramentos no suporte à Política de Segurança de Conteúdo (CSP)**. `SecureHtmlRenderer` foi adicionado à Estrutura e está disponível nos modelos `.phtml` para adicionar à lista de permissões as marcas `style` e `script` embutidas. Scripts e estilos embutidos não são permitidos com a configuração padrão da CSP, que pode ser substituída por arquivos XML. <!-- MC-34433-->

{{cve-notice}}

### Atualizações da plataforma

As seguintes atualizações de plataforma ajudam a aprimorar a segurança e o desempenho do site. Versões compatíveis do PHP e PHPUnit, Elasticsearch, MySQL e outras dependências estão listadas em [requisitos de pilha de tecnologia](../../../installation/system-requirements.md).

* **Introdução ao suporte para o PHP 7.4 e descontinuação do PHP 7.1 e 7.2**. 2.4.0 apresenta suporte para o PHP 7.4.

* **Suporte para PHPUnit 9.x e substituição do PHPUnit 6.5**. O PHP 7.4 requer o uso da estrutura de teste PHPUnit mais recente, que é a PHPUnit 9.x. Os fornecedores de extensão do Commerce Marketplace devem confirmar que todas as novas versões de extensão são compatíveis com o PHP 7.4 e que todos os testes de unidade e integração foram configurados para serem executados com o PHPUnit 9.

* **suporte para Elasticsearch 7.6.x**. O Elasticsearch 7.6.x agora é o mecanismo de pesquisa de catálogo padrão para o Adobe Commerce e o Adobe Commerce. Não é possível instalar ou atualizar para a versão 2.4.0 sem instalar também o Elasticsearch 7.6.x. O código do Elasticsearch versão 2.x foi removido. As versões 5.x e 6.x do Elasticsearch foram descontinuadas e não são mais suportadas. Consulte [pré-requisitos do mecanismo de pesquisa](../../../installation/prerequisites/search-engine/overview.md).

* **Suporte ao MySQL 8.0**. A versão 2.4.x é compatível com o MySQL 8.x. (A 2.4.0 foi testada com o MySQL 8.0.20.) Os comerciantes são incentivados a migrar suas implantações para o MySQL 8.x para aproveitar seu desempenho, segurança e confiabilidade aprimorados. Embora o MySQL 5.7 ainda seja suportado para o Magento 2.4.x, o MySQL 5.6 não é mais suportado. Você não pode hospedar 2.4.x com um banco de dados MySQL 5.6. Consulte [MySQL](../../../installation/prerequisites/database/mysql.md).

* **Suporte ao MariaDB 10.4**. O suporte para MySQL 8.0 oferece a oportunidade para os comerciantes implantarem o MariaDB 10.4 com o Adobe Commerce. Embora os comerciantes ainda possam usar o MariaDB 10.2 com 2.4.0, recomendamos a atualização para o MariaDB 10.4 para melhorar o desempenho e a confiabilidade. Não há mais suporte para MariaDB 10.0 e 10.1 (como resultado da remoção do suporte para MySQL 5.6 nesta versão).
* **Remoção do mecanismo de pesquisa do catálogo MySQL**. O mecanismo de pesquisa MySQL foi removido da versão 2.4.0 e substituído como mecanismo de pesquisa padrão pelo Elasticsearch. O Elasticsearch oferece recursos de pesquisa superiores, bem como otimizações de desempenho de catálogos.  Todos os comerciantes devem ter o Elasticsearch para instalar e implantar a versão 2.4.0. Consulte [Verificar se o Elasticsearch está instalado](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/prepare/prerequisites.html).

* **Migração de dependências no Zend Framework para o [projeto Laminas](https://getlaminas.org/about/foundation)** para refletir a transição do Zend Framework para o Projeto Laminas da Fundação Linux. O Zend Framework foi descontinuado. Consulte a [Migração do Zend Framework para a publicação do DevBlog do Projeto Laminas](https://community.magento.com/t5/Magento-DevBlog/Migration-of-Zend-Framework-to-the-Laminas-Project/ba-p/443251).

* **Decomposição de Controladores** permite que desenvolvedores de extensão implementem ActionInterface diretamente sem classes de &quot;supertipo de camada&quot;. Consulte a publicação [Decomposição de Controladores](https://community.magento.com/t5/Magento-DevBlog/Decomposition-of-Magento-Controllers/ba-p/430883) do DevBlog. _Aprimoramento iniciado por Vinai Kopp na solicitação de pull [16268](https://github.com/magento/magento2/pull/16268) e finalizado por Lukasz Bajsarowicz na solicitação de pull [26778](https://github.com/magento/magento2/pull/26778)_. [GitHub-9582](https://github.com/magento/magento2/issues/9582)

* **Remoção da integração principal do código de proteção contra fraude Signifyd**. Este recurso principal não é mais suportado. Os comerciantes devem migrar para a [extensão de Proteção contra fraudes e chargeback da Signifyd](https://marketplace.magento.com/signifyd-module-connect.html), disponível no Commerce Marketplace.

* O módulo de Braintree **núcleo foi removido da base de código**. O módulo Pagamentos em Braintree agora fornece o mesmo conjunto de recursos. Consulte [Pagamentos de Braintree](https://marketplace.magento.com/paypal-module-braintree.html).

* O navegador Internet Explorer 11.x não é mais suportado.

### Melhorias na infraestrutura

Esta versão inclui aprimoramentos na qualidade principal, que melhoram a qualidade da Estrutura e estes módulos: Conta do cliente, Catálogo, CMS, Importação, Carrinho e Check-out, e B2B.

* **Remoção da integração principal de métodos de pagamento de terceiros**. Com esta versão, a integração do método de pagamento Authorize.Net foi removida do código principal. Os comerciantes devem migrar para a extensão oficial disponível no Commerce Marketplace. Consulte a [descontinuação de integrações de pagamento](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Magento-core-payment-integrations/ba-p/426445) da publicação do devblog. <!-- MC-29029-->

* **Suporte para pesquisa de palavra parcial por Elasticsearch (novo mecanismo de pesquisa padrão)**. O Elasticsearch agora oferece suporte ao uso de palavras parciais em termos de pesquisa para nomes de produtos e SKUs ao usar a pesquisa rápida. Esse recurso era compatível com o mecanismo de pesquisa MySQL, que foi descontinuado e substituído por Elasticsearch nesta versão.

* **Atualização do SDK do PayPal JavaScript**. Migramos a integração do Check-out expresso do PayPal para o SDK mais recente do JavaScript do PayPal, um SDK que coleta e transmite automaticamente os parâmetros de risco necessários para o PayPal. O comportamento do método de pagamento Check-out expresso do PayPal permanece inalterado. No entanto, atualizar esse SDK para a versão mais recente permite que os comerciantes acessem os recursos e aprimoramentos de segurança mais recentes. <!-- MC-30962-->

* **Substituição e remoção do Assistente para Configuração da Web**. Você deve usar a linha de comando para instalar ou atualizar a versão 2.4.0. Consulte [Magento de instalação](../../../installation/advanced.md).

* **Plug-in de atualização do compositor**. O plug-in Composer simplifica o processo de atualização resolvendo as alterações que devem ser feitas no arquivo `composer.json` do projeto raiz antes de atualizar para uma nova versão. Esse plug-in protege contra a substituição de personalizações. Consulte [Atualizar usando o plug-in de raiz do compositor](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).

* **Compras assistidas por vendedor**. Esse recurso permite que os comerciantes visualizem a loja em nome de seus clientes. Os clientes optam por permitir o acesso da loja às suas contas. Este recurso desenvolvido pela comunidade inclui uma extensão original desenvolvida pela [MAGEFAN](https://magefan.com/). Consulte [Compras assistidas pelo vendedor](https://experienceleague.adobe.com/en/docs/commerce-admin/config/customers/login-as-customer). Os recursos incluem:

   * A ACL para controlar quais administradores podem fazer logon em contas de clientes pode ser configurada por site
   * Compatibilidade com vários sites e escopos de conta de cliente
   * Os pedidos feitos em nome dos clientes são registrados na loja e no Administrador
   * Todas as sessões são destruídas após o logout do administrador e os administradores não podem acessar as senhas do cliente.

### Melhorias de desempenho

* **Melhorias na lógica de invalidação da seção de dados do cliente**. Esta versão apresenta uma nova maneira de invalidar todos os dados de seções de clientes, evitando um problema conhecido com o armazenamento local quando as invalidações personalizadas `sections.xml` estão ativas.  (Anteriormente, o conteúdo privado (armazenamento local) não era preenchido corretamente quando você tinha um *etc/frontend/sections.xml* personalizado com invalidações de ação.) Consulte [Conteúdo privado](https://developer.adobe.com/commerce/php/development/cache/page/private-content/).

* **Várias otimizações para o desempenho Redis**. As melhorias minimizam o número de consultas a Redis que são executadas em cada solicitação. Essas otimizações incluem:

   * Diminuição no tamanho das transferências de dados de rede entre Redis e Magento

   * Redução no consumo de ciclos de CPU do Redis, melhorando a capacidade do adaptador de determinar automaticamente o que precisa ser carregado

   * Redução das condições de corrida nas operações de gravação do Redis

  Consulte [Usar Redis para a página e o cache padrão](../../../configuration/cache/redis-pg-cache.md) e [Configurar o cache](../../../configuration/cache/caching-overview.md).

* **Cache aprimorado de resultados de consultas SQL para tabelas de inventário**. Esses aprimoramentos incluem:

   * Armazenamento em cache de consultas SQL na tabela `inventory_stock_sales_channel` (1 consulta em vez de 16)

   * Armazenamento em cache do resultado de consultas na tabela `inventory_stock` (1 consulta em vez de 16)

* **Melhoria de até 25-30% no desempenho do carrinho de complemento do Pedido rápido**.

* Os comerciantes agora podem usar [carregamento lento](https://en.wikipedia.org/wiki/Lazy_loading) para carregar imagens.

### Integração do Adobe Stock v2.0

**Capacidade de licenciar visualizações de imagens de estoque da Galeria de Mídia**. Os comerciantes agora podem encontrar qualquer imagem de visualização do Adobe Stock na Galeria de mídia, o que reduz o número de etapas necessárias para licenciar a imagem de visualização de estoque.

### Nova Galeria de Mídia

Essa substituição da antiga Galeria de mídia oferece uma interface nova e pesquisável para ativos de mídia. Agora, os administradores podem pesquisar, filtrar e classificar imagens até 30 vezes mais rápido do que na versão anterior desse recurso. Os comerciantes podem usar esta ferramenta para avaliar o uso da imagem da loja. Os desenvolvedores de extensão devem estar cientes de que as extensões que foram desenvolvidas para a Galeria de mídia não funcionarão como esperado com a nova Galeria de mídia.

### Page Builder

O Page Builder agora suporta o PHP 7.4.

### Inventory management

As melhorias da Inventory management para esta versão incluem suporte para coleta na loja e suporte ao produto do pacote. Consulte as [notas de versão do Inventory management](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html) para obter uma discussão mais detalhada sobre as correções de erros recentes do Inventory management.

### GraphQL

Os aprimoramentos do GraphQL incluem:

* A consulta `pickupLocations` dá suporte ao recurso de coleta na loja do Inventário
* A consulta `categories` retorna uma lista de categorias que correspondem a um filtro especificado. Esta consulta difere da consulta `categoryList` na medida em que suporta paginação.
* A mutação `reorderItems` permite que um usuário conectado adicione todos os produtos de um pedido anterior ao carrinho.

Consulte o [Guia do Desenvolvedor do GraphQL](https://developer.adobe.com/commerce/webapi/graphql/) para obter detalhes sobre este e outros aprimoramentos. Consulte as [Notas de versão](https://developer.adobe.com/commerce/webapi/graphql/release-notes/) para obter uma discussão detalhada sobre correções de erros recentes do GraphQL.

### PWA Studio

Consulte [compatibilidade](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões compatíveis. Para obter informações sobre aprimoramentos e correções de erros, consulte [versões de PWA Studio](https://github.com/magento/pwa-studio/releases).

### B2B

**Recurso de Fluxo de Trabalho de Aprovação de Pedido para B2B**. As Aprovações de Ordens permitem que os gerentes das organizações compradoras configurem regras de aprovação para seus compradores. Consulte [Regras de Aprovação](https://experienceleague.adobe.com/en/docs/commerce-admin/b2b/purchase-orders/account-dashboard-approval-rules). Os recursos incluem:

* Configuração de autoatendimento de regras de aprovação exclusivas para cada conta da Empresa
* Critérios da regra que podem ser baseados na quantia da ordem, número de itens de linha ou custo de entrega com limites configuráveis
* Permissões personalizáveis para todos os aspectos do recurso
* Exibição rápida de vitrine de Ordens de Compra que exigem aprovação
* Log de histórico completo das ações que foram executadas em cada Ordem de Compra
* Notificação por email para partes relevantes durante todas as etapas do processo de aprovação.

Esta versão também inclui várias correções de erros. Consulte [Notas de versão B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Quadro de testes funcionais (MFTF)

MFTF v3.0.0 inclui estes novos recursos e inclui suporte para PHP 7.4 e PHPUnit 9:

* MFTF, que podem criar ações personalizadas fora do quadro de testes
* atualizações de esquema para entidades de teste
* subpastas em módulos de teste
* sintaxe de asserção aninhada
* verificação estática que verifica e relata referências a entidades de teste obsoletas

Esta versão também remove ações obsoletas e scripts de atualizações que foram adicionados aos testes de atualização para os principais requisitos de versão do MFTF.

### Aprimoramentos de extensão desenvolvidos pelo fornecedor

Esta versão inclui extensões desenvolvidas por fornecedores terceirizados. Introduz melhorias de qualidade e UX nessas extensões e uma expansão da cobertura dos FMTF.

Os fornecedores de extensões do Commerce Marketplace devem confirmar se suas extensões são compatíveis com o PHP 7.4 ao publicar uma nova versão de sua extensão para 2.4.0.

#### dotdigital

Esta versão inclui estes aprimoramentos:

* Os valores de atributos do cliente capturados por qualquer tipo de entrada (por exemplo, lista suspensa, seleção múltipla) agora são sincronizados corretamente como campos de dados.
* Os dados de insight do carrinho agora são enviados para todas as cotações ativas, mesmo que não contenham itens. Isso permite que os comerciantes saiam dos contatos de um programa se esvaziarem o carrinho.
* Os comerciantes agora podem sincronizar o nome do site, o nome da loja e o nome da exibição da loja por campos de dados individuais.
* As sincronizações de Lista de desejos, Revisão e Pedido agora procuram o limite de sincronização de dados transacionais apenas uma vez.
* O registro de saída da classe Client foi aprimorado e agora é consistente em todos os métodos no invólucro da API.
* Os produtos configuráveis agora têm um valor de estoque que é a soma de seus produtos secundários.
* Um novo plug-in detecta atualizações de estoque executadas por código de terceiros (fora do Administrador).
* As informações de mapeamento de dados e configuração de email transacional foram atualizadas.

#### Amazon Pay

Esta versão inclui:

* Atualizações nas listas de permissões CSP
* Capacidade de fazer várias autorizações para um pedido de vários itens
* Suporte para endereços japoneses

#### Pagamentos Braintree

Essa extensão agrupada substitui nossa integração de Braintree principal, que foi removida nesta versão. Consulte [Pagamentos de Braintree](https://marketplace.magento.com/paypal-module-braintree.html).

#### Klarna

Esta versão inclui novas opções de mensagens no site para ajudar os compradores a entender as opções de crédito e financiamento disponíveis. Também inclui melhorias para:

* reembolsos
* Eficiência da API
* cookies e testes de unidade
* descontos
* as configurações agora contêm a seção Mensagens no local para controlar a exibição de vitrine das mensagens promocionais do Klarna

#### Vértice

Esta versão do Vertex inclui os seguintes novos recursos e melhorias:

* Melhorias na experiência do usuário da Configuração de administrador
* Substituição de scripts de instalação e atualização por arquivos e patches do esquema XML
* Remoção de código obsoleto (`ApiClient` e `ClientInterface`)

#### Yotpo

As Classificações e Análises do Yotpo são integradas ao Page Builder.

## Problemas corrigidos

Corrigimos centenas de problemas no código principal 2.4.0.

### Instalação, atualização, implantação

<!-- MC-23940-->

* Agora você pode remover um site com êxito, juntamente com as definições de configuração específicas do escopo do site em `app/etc/config.php`, conforme esperado. Anteriormente, ao tentar remover o site, a operação falhava e o aplicativo exibia este erro: `The website with code xxx that was requested wasn't found. Verify the website and try again`. Além disso, o aplicativo exibiu este erro na loja: `Config files have changed. Run app:config:import or setup:upgrade command to synchronize configuration`. [GitHub-24061](https://github.com/magento/magento2/issues/24061)

<!-- MC-30140-->

* As configurações desabilitadas em `index.php` não podem mais ser editadas pelo Administrador.

<!-- MC-32405-->

* A instalação do Adobe Commerce agora é concluída com êxito, e os armazenamentos são criados conforme esperado, quando a configuração de armazenamento é predefinida em `config.php`.

<!-- MC-33151-->

* `\Magento\Store\App\Config\Source\RuntimeConfigSource::getEntities` foi refatorado para diminuir o número de `SHOW TABLE STATUS` consultas feitas. (Essa alteração reverte para o comportamento que essa função exibiu na 2.3.3.)

<!-- MC-23890-->

* Os scripts de dados não serão mais executados novamente sempre que você tentar atualizar o banco de dados executando `bin/magento setup:upgrade`. Anteriormente, os scripts de atualização eram executados novamente desnecessariamente, o que afetava o desempenho. [GitHub-19469](https://github.com/magento/magento2/issues/19469)

<!-- MC-30397-->

* O aplicativo agora exibe os seguintes comportamentos quando a conexão com o Redis é interrompida. Anteriormente, o aplicativo não recarregava a página atual e exibia este erro: `An error has happened during application run. See exception log for details`.

   * Sessões de administrador e de vitrine eletrônica expiram
   * Os usuários administradores e da loja devem fazer logon novamente
   * Os dados da sessão foram salvos em `var/session/`
   * Nenhum erro ou exceção registrado.

<!-- ENGCOM-6686-->

* O comando `bin/magento setup:di:compile` não falha mais com classes anônimas. _Correção enviada por Yevhen Sentiabov na solicitação pull [26533](https://github.com/magento/magento2/pull/26533)_. [GitHub-26532](https://github.com/magento/magento2/issues/26532), [GitHub-21555](https://github.com/magento/magento2/issues/21555)

<!-- ENGCOM-5546-->

* Problemas com menos compilação no tema LUMA do Magento ao usar um compilador LESS alternativo do que o fornecido com o aplicativo por padrão foram resolvidos. _Correção enviada por Pieter Hoste na solicitação pull [24003](https://github.com/magento/magento2/pull/24003)_. [GitHub-23619](https://github.com/magento/magento2/issues/23619)

<!-- ENGCOM-6367-->

* Você não precisa mais ter um arquivo `env.php` gravável ao alternar para o modo de manutenção. Em vez disso, o aplicativo define os cabeçalhos `no-cache` para todas as solicitações de front-end no modo de manutenção (`Cache-Control`). Anteriormente, você não podia habilitar o modo de manutenção quando `env.php` era somente leitura e o aplicativo tentou desabilitar o FPC ao alternar para o modo de manutenção. _Correção enviada por Marco K̦pcke na solicitação pull [25790](https://github.com/magento/magento2/pull/25790)_. [GitHub-24229](https://github.com/magento/magento2/issues/24229)

<!-- ENGCOM-7236-->

* `db-ssl-verify` não resulta mais em um erro de índice indefinido durante uma configuração de `ddev`. _Correção enviada por Daniel Ruf na solicitação pull [26763](https://github.com/magento/magento2/pull/26763)_. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-6247-->

* As dependências do Composer foram atualizadas para implementar a expiração da chave Redis, o que melhorou o desempenho do Redis. _Correção enviada por toxix na solicitação pull [25488](https://github.com/magento/magento2/pull/25488)_. [GitHub-25487](https://github.com/magento/magento2/issues/25487)

### AdminGWS

<!-- MC-33031-->

* Os administradores com escopo de função limitado agora podem modificar o texto alternativo, e o aplicativo salva esses valores. Se um administrador não tiver permissão para modificar o texto alternativo, a caixa de texto alternativo ficará esmaecida.

### Integração do Adobe Stock

<!-- ENGCOM-6507-->

* Os estilos CSS foram adicionados à exibição de imagem do Adobe Stock para oferecer suporte ao realce da imagem selecionada.  _Correção enviada por Serhiy Zhovnir na solicitação pull [25864](https://github.com/magento/magento2/pull/25864)_. [GitHub-761](https://github.com/magento/adobe-stock-integration/issues/761)

<!-- ENGCOM-7021-->

* A navegação pelas imagens de visualização do Adobe Stock não é mais acionada ao mover o cursor do campo de entrada usando teclas de seta.  _Correção enviada por Adarsh Manickam na solicitação pull [27138](https://github.com/magento/magento2/pull/27138)_. [GitHub-973](https://github.com/magento/adobe-stock-integration/issues/973)

<!-- ENGCOM-6840-->

* O aplicativo agora armazena em cache mensagens para erros que ocorrem quando um cliente tenta aplicar um filtro às imagens do Adobe Stock. _Correção enviada por Shankar Konar na solicitação pull [26502](https://github.com/magento/magento2/pull/26502)_. [GitHub-863](https://github.com/magento/adobe-stock-integration/issues/863)

<!-- ENGCOM-7195-->

* O aplicativo não salva mais uma visualização de uma imagem Adobe Stock quando você move o cursor para a barra de rolagem vertical esquerda da janela depois de clicar em **Salvar visualização**, mas não confirma a operação de salvamento. _Correção enviada por Serhiy Zhovnir na solicitação pull [27399](https://github.com/magento/magento2/pull/27399)_. [GitHub-1002](https://github.com/magento/adobe-stock-integration/issues/1002)

### Analytics

<!-- MC-32086-->

* O relatório de análise de uma loja agora está disponível, conforme esperado, depois de alterar a URL da loja. Anteriormente, ao tentar acessar o relatório após a alteração do URL, o aplicativo exibia um erro 404.

<!-- MC-32085-->

* A sincronização de dados para relatórios de análise agora está habilitada, conforme esperado, quando as assinaturas de AR estão habilitadas.

### Infraestrutura

<!-- MC-25036-->

* Os modelos de email (**Admin** > **Marketing** > **Comunicações** > **Modelos de email**) agora podem ser visualizados no Admin quando a minificação do JavaScript está habilitada. Anteriormente, ao tentar visualizar um modelo de email, a janela pop-up Visualização de email estava vazia. [GitHub-25068](https://github.com/magento/magento2/issues/25068)

<!-- ENGCOM-6433-->

* Agora, os administradores podem fazer logon no Admin como esperado depois que uma conta de administrador com privilégios limitados for criada. Anteriormente, o Administrador não estava acessível. Em vez disso, os usuários com essas permissões foram redirecionados para a loja com um erro 404. _Correção enviada por Eden Duong na solicitação pull [25909](https://github.com/magento/magento2/pull/25909)_. [GitHub-25881](https://github.com/magento/magento2/issues/25881)

<!-- ENGCOM-6785-->

* O aplicativo não duplica mais dados de SEO, como chave de URL, metatítulo, metapalavras-chave e metadescrição, quando você duplica um produto.  _Correção enviada pelo padrão Dasharth na solicitação pull [26659](https://github.com/magento/magento2/pull/26659)_. [GitHub-26054](https://github.com/magento/magento2/issues/26054)

<!-- ENGCOM-6442-->

* O aplicativo não lança mais um erro quando você exclui uma imagem de uma página ao criá-la de **Administrador** > **Conteúdo** > **Páginas** >  **Adicionar nova página**. Anteriormente, o aplicativo exibia este erro no console do desenvolvedor: `500 (Internal Server Error)`. _Correção enviada por Eden Duong na solicitação pull [25924](https://github.com/magento/magento2/pull/25924)_. [GitHub-25893](https://github.com/magento/magento2/issues/25893)

### Produtos do pacote

<!-- MC-25251-->

* O desempenho da operação de reindexação `catalog_product_price` para produtos de pacote foi aprimorado.

<!-- MC-29633-->

* Os administradores não podem mais inserir manualmente uma classe de imposto no Administrador de um produto de pacote quando as configurações de **Classe de Imposto** e **Preço Dinâmico** do produto de pacote estão desabilitadas para a exibição de loja padrão. Anteriormente, quando um administrador desmarcava a opção **Usar Valor Padrão** ao lado de **Classe de Imposto**, o aplicativo habilitava essa opção, permitindo que um administrador inserisse outro valor e salvasse o produto.

<!-- MC-30257-->

* Agora os preços do pacote são calculados corretamente nas páginas de produtos.

<!-- MC-29745-->

* Agora você pode adicionar qualquer quantidade de produtos de pacote ao carrinho de compras sem erros. Anteriormente, ao adicionar um produto agrupado ao carrinho e, em seguida, navegar até o carrinho, o aplicativo exibia este erro: `Please correct the quantity for some products`.

### Cache

<!-- ENGCOM-7114-->

* O esquema `cache.xsd` de `Magento\Framework\Cache` foi refatorado para que um tipo de cache sem um atributo `instance` não cause mais exceções quando você desabilitar um módulo por meio do gerenciamento de cache de Administrador. Anteriormente, quando você criava um tipo de cache usando `cache.xml` sem o argumento `instance`, o aplicativo exibia uma exceção quando você tentava desabilitá-lo.  _Correção enviada por Andrii Beziazychnyi na solicitação pull [27307](https://github.com/magento/magento2/pull/27307)_. [GitHub-26224](https://github.com/magento/magento2/issues/26224)

<!-- ENGCOM-6834-->

* `health_check.php` não falhará mais se um mecanismo de cache de banco de dados estiver configurado em sua implantação. _Correção enviada por Andrii Beziazychnyi na solicitação pull [25722](https://github.com/magento/magento2/pull/25722)_. [GitHub-25669](https://github.com/magento/magento2/issues/25669)

### Carrinho e check-out

<!-- MC-23870-->

* O aplicativo não gera mais um erro durante o check-out quando a configuração **Sincronizar com o Back-end** está habilitada. [GitHub-23833](https://github.com/magento/magento2/issues/23833)

<!-- MC-29786-->

* Os botões de opção para métodos de envio agora estão ativados conforme esperado no fluxo de trabalho de finalização.

<!-- MC-30258-->

* A página de revisão do pedido no fluxo de trabalho de check-out agora é carregada com êxito para um pedido enviado para vários endereços quando a configuração Termos e condições com a configuração **Aplicado manualmente** está habilitada. Anteriormente, a página Revisar não passava na validação e o aplicativo exibia um erro 404.

<!-- MC-32330-->

* O aplicativo agora exibe o ícone giratório enquanto os preços são atualizados no carrinho.

<!-- MC-33230-->

* O aplicativo agora exibe uma mensagem informativa quando um produto no minicarrinho fica indisponível antes do check-out. Depois de remover o item esgotado, o aplicativo exibe o botão **Prosseguir para o check-out**. Anteriormente, o aplicativo não exibia esse botão.

<!-- MC-31391-->

* O aplicativo agora exibe uma mensagem de erro informativa quando você tenta adicionar um produto clicando em **Solicitar por SKU** quando o arquivo para carregamento estiver corrompido. Anteriormente, o aplicativo exibia uma página em branco.

<!-- MC-32962-->

* O aplicativo agora aplica as regras de preço do carrinho somente aos produtos secundários do produto do pacote que correspondem aos critérios da regra. Anteriormente, o aplicativo aplicava a regra de preço do carrinho a todos os produtos secundários que pertenciam ao produto do pacote.

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection` foi substituído por `StorefrontMinicartSection` em testes MFTF.   _Correção enviada por Andrii Kalinich na solicitação pull [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-6389-->

* As referências codificadas para o componente seletor de país no formulário de endereço de entrega foram removidas.  _Correção enviada por Mateusz Krzeszowiak na solicitação pull [25541](https://github.com/magento/magento2/pull/25541)_. [GitHub-22416](https://github.com/magento/magento2/issues/22416)

<!-- ENGCOM-6522-->

* O aplicativo não sublinha mais o ícone Excluir no carrinho de compras quando o cursor passa o mouse sobre o ícone ao visualizar a loja no Internet Explorer.  _Correção enviada por divyajyothi5321 na solicitação pull [26173](https://github.com/magento/magento2/pull/26173)_. [GitHub-26164](https://github.com/magento/magento2/issues/26164)

<!-- ENGCOM-6615-->

* Alterar a rua de faturamento não altera mais o endereço de entrega de um cliente quando um único endereço foi selecionado para o endereço de faturamento e de entrega. _Correção enviada por Yurii Tvardyi na solicitação pull [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

<!-- ENGCOM-6251-->

* A região de promoção do minicarrinho agora é renderizada conforme esperado. _Correção enviada por Matti Vapa na solicitação pull [25375](https://github.com/magento/magento2/pull/25375)_. [GitHub-25373](https://github.com/magento/magento2/issues/25373)

### Regra de preço do carrinho

<!-- MC-23986-->

* As regras de preço do carrinho baseadas em métodos de pagamento agora são aplicadas durante o fluxo de trabalho de finalização. [GitHub-24206](https://github.com/magento/magento2/issues/24206)

<!-- ENGCOM-6550-->

* Corrigido o comportamento do elemento de página do Datepicker em **Admin** > **Marketing** > **Promoções** > **Regra de preço de catálogo**. _Correção enviada pelo Hitesh na solicitação de pull [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection` foi substituído por `StorefrontMinicartSection` em testes MFTF.   _Correção enviada por Andrii Kalinich na solicitação pull [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-5822-->

* A grade de cupom não usada no fluxo de trabalho criar nova regra de preço do carrinho foi desabilitada. _Correção enviada por Eden Duong na solicitação pull [24471](https://github.com/magento/magento2/pull/24471)_. [GitHub-24468](https://github.com/magento/magento2/issues/24468)

<!-- ENGCOM-6615-->

* Alterar a rua de faturamento não altera mais o endereço de entrega de um cliente quando um único endereço foi selecionado para os endereços de faturamento e de entrega. _Correção enviada por Yurii Tvardyi na solicitação pull [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

### Catálogo

<!-- MC-23633-->

* O aplicativo agora desativa a capacidade de um administrador restrito de alterar o atributo de quantidade de um produto e desativa o inventário avançado conforme esperado. Anteriormente, somente a exibição visual do atributo quantity era afetada, e o aplicativo alterava o valor quantity no banco de dados após salvar o produto.

<!-- MC-25235-->

* O aplicativo não emite mais um erro quando você altera o nome de um produto em camadas que está incluído em uma atualização programada. Anteriormente, ao tentar salvar o produto com um novo nome, o aplicativo exibia este erro: `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-0-0-2.0000-0' for key 'UNQ_EBC6A54F44DFA66FA9024CAD97FED6C7', query was: INSERT INTO catalog_product_entity_tier_price (all_groups, customer_group_id, qty, value, website_id, percentage_value, row_id) VALUES (?, ?, ?, ?, ?, ?, ?)`

<!-- MC-29023-->

* Os valores de atributos personalizados agora podem ser salvos conforme esperado do Administrador.

<!-- MC-29775-->

* O recurso Exibir Produtos Recentemente agora mostra produtos que estão associados apenas ao modo de exibição de loja atual em implantações de várias lojas quando **Lojas** > **Configurações** > **Catálogo** > **Produtos Visualizados/Comparados Recentemente** > **Mostrar para Atual** está definido como **modo de exibição de loja**. Anteriormente, o aplicativo exibia produtos visualizados recentemente de todos os sites, independentemente do site ao qual o produto estava atribuído.

<!-- MC-29896-->

* O aplicativo agora exibe imagens do produto no minicarrinho sem distorção. Anteriormente, o aplicativo esticava a imagem no minicarrinho para preencher toda a largura e a altura do contêiner de imagem.

<!-- MC-29866-->

* A função `getBasePrice` agora retorna um valor flutuante como esperado em vez de uma cadeia de caracteres.

<!-- MC-30229-->

* O recurso de comparação de produto agora funciona conforme esperado. Agora, ela exibe somente os produtos da lista de comparação do usuário atual.

<!-- MC-30234-->

* Agora é possível atribuir uma marca d&#39;água padrão a um tema. Anteriormente, após atribuir a marca d&#39;água, o aplicativo exibia um erro fatal.

<!-- MC-30540-->

* Agora é possível editar com êxito um produto configurável com muitas variantes (aproximadamente 5.000) do Administrador. Anteriormente, ao tentar editar um produto configurável com muitos subprodutos, o aplicativo exibia este erro: `Warning: DOMDocumentFragment::appendXML(): Entity: line 1: parser error : CData section too big found in /vendor/magento/framework/View/TemplateEngine/Xhtml/Template.php on line 60`

<!-- MC-30734-->

* A classificação nos conjuntos de atributos em **Admin** > **Catálogo** > **Produtos** agora se baseia na ordem alfabética, conforme esperado.

<!-- MC-30794-->

* O recurso Produtos visualizados recentemente agora funciona conforme esperado em implantações de várias lojas.

<!-- MC-31837-->

* Os administradores com permissões restritas ao Catálogo agora podem criar um produto para download. Anteriormente, os administradores não podiam criar um produto para download e o aplicativo exibia um erro.

<!-- MC-31838-->

* A caixa de seleção **Produto em Sites** da nova página de produto agora está habilitada por padrão para administradores restritos em implantações de vários sites. Anteriormente, a caixa de seleção do site não padrão não era pré-selecionada e, se o administrador deixasse a caixa de seleção desmarcada, o aplicativo exibia uma mensagem de erro.

<!-- MC-32772-->

* `addToCart` eventos agora são rastreados conforme esperado na camada de dados. Anteriormente, após alterar as opções configuráveis de um produto e clicar em **Adicionar ao carrinho**, o novo evento `addToCart` não era adicionado à camada de dados.

<!-- MC-29449-->

* O minicarrinho e o carrinho de compras do Administrador (**Admin** > **Clientes** > **Gerenciar carrinho de compras**) agora exibem os preços corretos do produto quando uma Regra de Preço de Catálogo é aplicada. Anteriormente, o carrinho de compras da vitrine exibia o preço correto do produto, mas o mini carrinho e o carrinho de compras do Administrador exibiam o preço original do produto.

<!-- MC-30777-->

* A filtragem na coluna do site da grade de produto do administrador agora funciona conforme esperado. Anteriormente, os resultados do filtro não exibiam o número correto de produtos, mas exibiam consistentemente o número total de produtos como 1.

<!-- MC-31432-->

* A condição de preço usa `catalog_product_entity_decimal` para filtrar por preço. No entanto, essa tabela não contém registros para produtos configuráveis, dinâmicos de pacote e agrupados porque esses produtos não têm preço fixo. A tabela correta a ser usada para filtrar por preço é `catalog_product_index_price`.

<!-- ENGCOM-7104-->

* O catálogo de Administrador e as listas de produtos agora exibem símbolos de moeda nas colunas MSRP, Custo e Preço Especial. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27261](https://github.com/magento/magento2/pull/27261)_. [GitHub-21910](https://github.com/magento/magento2/issues/21910), [GitHub-20906](https://github.com/magento/magento2/issues/20906), [GitHub-20472](https://github.com/magento/magento2/issues/20472)

<!-- ENGCOM-6375-->

* A janela pop-up Adicionar para Preço de Grupo de Clientes (**Admin** > **Catálogo** > **Produtos** > **Novo Produto** > **Preços avançados**) agora é fechada conforme esperado quando você clica no ícone fechar. _Correção enviada por Ashna-Jahan na solicitação pull [25759](https://github.com/magento/magento2/pull/25759)_. [GitHub-25433](https://github.com/magento/magento2/issues/25433)

<!-- ENGCOM-6300-->

* A descrição de amostra fornecida para a descrição e o título de um novo produto não contém mais aspas duplas.  _Correção enviada por Nathan Morgan na solicitação pull [25655](https://github.com/magento/magento2/pull/25655)_. [GitHub-25654](https://github.com/magento/magento2/issues/25654)

<!-- ENGCOM-6424-->

* O aplicativo não emite mais um erro quando você tenta filtrar produtos na página Categoria usando um preço inválido. Anteriormente, o aplicativo registrava esse erro no log do sistema. _Correção enviada por Ihor Sviziev na solicitação pull [25912](https://github.com/magento/magento2/pull/25912)_. [GitHub-25911](https://github.com/magento/magento2/issues/25911)

<!-- ENGCOM-6455-->

* Agora você pode navegar pelos resultados da pesquisa de categoria com várias páginas. Anteriormente, o aplicativo criava páginas duplicadas dos resultados da pesquisa quando você tentava usar o botão Voltar para retornar à primeira página de resultados. _Correção enviada por Douglas Radburn na solicitação pull [25337](https://github.com/magento/magento2/pull/25337)_. [GitHub-14971](https://github.com/magento/magento2/issues/14971)

<!-- ENGCOM-6194-->

* Corrigido o tipo de retorno para `string|null` para o método `getSourceModel` na classe `Eav\Attribute.php`. _Correção enviada por Mychailo na solicitação pull [25333](https://github.com/magento/magento2/pull/25333)_. [GitHub-25278](https://github.com/magento/magento2/issues/25278)

<!-- ENGCOM-6625-->

* Salvar um novo produto (duplicado) não resulta mais na duplicação das imagens do produto centenas de vezes. _Correção enviada por Jeroen na solicitação pull [25875](https://github.com/magento/magento2/pull/25875)_. [GitHub-9466](https://github.com/magento/magento2/issues/9466)

<!-- ENGCOM-6818-->

* O aplicativo não lança mais um erro de JavaScript ao excluir um produto com uma opção personalizada do tipo `file` durante a criação de um pedido do Administrador.  _Correção enviada por adrian-martinez-interactiv4 na solicitação pull [24843](https://github.com/magento/magento2/pull/24843)_. [GitHub-24842](https://github.com/magento/magento2/issues/24842)

<!-- ENGCOM-6959-->

* Criar um produto sem imagem usando `product_page_image_large` no layout resulta na exibição de uma imagem de espaço reservado como esperado. Anteriormente, o aplicativo exibia este erro: `Fatal error: PHP Fatal error: Uncaught TypeError: Argument 1 passed to Magento\Catalog\Block\Product\ImageFactory::getRatio() must be of the type integer, null given`. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26974](https://github.com/magento/magento2/pull/26974)_. [GitHub-26973](https://github.com/magento/magento2/issues/26973)

<!-- ENGCOM-6983-->

* Você pode usar o ponto de extremidade `POST /V1/:sku/links` para definir links de produtos com uma matriz vazia de produtos quando o produto tiver links existentes. Anteriormente, o aplicativo exibia um erro. _Correção enviada por Sathish Subramanian na solicitação pull [26979](https://github.com/magento/magento2/pull/26979)_. [GitHub-26800](https://github.com/magento/magento2/issues/26800)

<!-- ENGCOM-7151-->

* Agora é possível usar o menu suspenso Ações na grade Produtos para especificar se um produto tem peso ao atualizar os atributos de vários produtos por meio do Administrador.  _Correção enviada por Bartomiej Szubert na solicitação pull [26075](https://github.com/magento/magento2/pull/26075)_. [GitHub-6310](https://github.com/magento/magento2/issues/6310)

<!-- ENGCOM-7453-->

* A lógica de validação foi adicionada aos campos **Produtos por Página em Valores Permitidos de Grade** e **Produtos por Página em Valor Padrão de Grade** da página de configuração de armazenamento. Anteriormente, os administradores de armazenamento podiam inserir valores indisponíveis nesses campos.  _Correção enviada por Lukasz Bajsarowicz na solicitação pull [27093](https://github.com/magento/magento2/pull/27093)_. [GitHub-27089](https://github.com/magento/magento2/issues/27089)_

### Regra de catálogo

<!-- ENGCOM-6550-->

* Corrigido o comportamento do elemento de página do Datepicker em **Admin** > **Marketing** > **Promoções** > **Regra de preço de catálogo**. _Correção enviada pelo Hitesh na solicitação de pull [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-5122-->

* As regras de preço de catálogo agora funcionam com opções personalizadas, conforme esperado nas páginas de detalhes do produto. _Correção enviada por Pavel Bystritsky na solicitação pull [22917](https://github.com/magento/magento2/pull/22917)_. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

### Widget de catálogo

<!-- MC-29167-->

* A lista de produtos do `CatalogWidget` agora funciona conforme esperado com categorias de âncora, e os produtos das categorias de âncora agora são correspondidos e exibidos. Anteriormente, ao selecionar uma categoria principal que era uma âncora, mas que não continha produtos atribuídos, os produtos não estavam visíveis no widget.

<!-- MC-30260-->

* O aplicativo agora exibe todos os filhos de uma categoria principal selecionada, conforme esperado. Anteriormente, se você selecionava uma categoria principal que era uma âncora, mas que não continha produtos atribuídos, o aplicativo não exibia todos os produtos aninhados.

<!-- MC-31171-->

* O widget Produtos Visualizados Recentemente agora funciona corretamente quando **Lojas** > **Configuração** > **Catálogo** > **Catálogo** > **Visualizados/Comparados Recentemente** > **Sincronizar produtos do widget com armazenamento back-end** está definido como **Sim**.

### Conteúdo do CMS

<!-- MC-29619-->

* Agora é possível salvar e duplicar todas as páginas do CMS. Anteriormente, o aplicativo gerava essa exceção quando você tentava duplicar determinadas páginas: `Unique constraint violation found`.

<!-- MC-30963-->

* O aplicativo agora permite criar blocos do CMS com nomes idênticos se os blocos forem atribuídos a diferentes visualizações de loja.

<!-- MC-30103-->

* As miniaturas de imagem Selecionar na Galeria agora são armazenadas em cache conforme esperado. Antes, essas imagens eram redimensionadas dinamicamente.

<!-- MC-32275-->

* O aplicativo não emite mais um erro quando você salva uma página do CMS que foi atribuída a vários armazenamentos. Anteriormente, ao criar ou editar uma página do CMS, o aplicativo salvava a página, mas também exibia este erro: `Item (Magento\VersionsCms\Model\Hierarchy\Node) with the same ID "PAGE_ID" already exists`.

<!-- MC-32452-->

* As novas páginas do CMS agora são adicionadas, conforme esperado, à hierarquia de páginas de loja de um site.

<!-- ENGCOM-7033-->

* A lógica de atualização do layout personalizado da página do CMS foi aprimorada. O aplicativo agora aplica alterações específicas de layout de `cms_page_view_selectable_home_somechanges.xml`. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27131](https://github.com/magento/magento2/pull/27131)_. [GitHub-26758](https://github.com/magento/magento2/issues/26758)

### Cleanup

<!-- ENGCOM-6573-->

* Uma tag de fechamento extra foi removida do módulo XML. _Correção enviada por Tejash Kumbhare na solicitação pull [26339](https://github.com/magento/magento2/pull/26339)_. [GitHub-26338](https://github.com/magento/magento2/issues/26338)

<!-- ENGCOM-6521-->

* O desalinhamento corrigido do **Meu endereço de cobrança e de entrega é o mesmo** na caixa de seleção da seção Revisar e Pagamentos do fluxo de trabalho de finalização.  _Correção enviada por divyajyothi5321 na solicitação pull [26169](https://github.com/magento/magento2/pull/26169)_. [GitHub-26168](https://github.com/magento/magento2/issues/26168)

<!-- ENGCOM-6581-->

* Remoção de espaço em branco desnecessário entre os rótulos de campo e asteriscos na seção Endereço de remessa do fluxo de trabalho de finalização da compra.  _Correção enviada por Daniel Ruf na solicitação pull [26285](https://github.com/magento/magento2/pull/26285)_. [GitHub-26275](https://github.com/magento/magento2/issues/26275)

<!-- ENGCOM-6480-->

* Corrigido o desalinhamento dos botões de opção na seção Métodos de envio do fluxo de trabalho de finalização da compra.  _Correção enviada pelo Hitesh na solicitação de pull [25966](https://github.com/magento/magento2/pull/25966)_. [GitHub-25962](https://github.com/magento/magento2/issues/25962)

<!-- ENGCOM-6579-->

* Espaçamento de menu inconsistente corrigido na exibição móvel. _Correção enviada pelo Hitesh na solicitação de pull [26238](https://github.com/magento/magento2/pull/26238)_. [GitHub-26235](https://github.com/magento/magento2/issues/26235)

<!-- ENGCOM-7225-->

* Corrigido o desalinhamento dos ícones Editar e Remover do mini carrinho na exibição móvel.  _Correção enviada por Vasilii Burlacu na solicitação pull [27493](https://github.com/magento/magento2/pull/27493)_. [GitHub-26652](https://github.com/magento/magento2/issues/26652)

<!-- ENGCOM-6967-->

* Corrigido o desalinhamento do intervalo de CEP/código postal da alíquota de imposto e da caixa de seleção na página Adicionar nova alíquota de imposto/CEP (**Administrador** > **Armazenamento** > **Impostos** > **Zonas e Taxas de Imposto**). _Correção enviada por Sathish Subramanian na solicitação pull [26932](https://github.com/magento/magento2/pull/26932)_. [GitHub-26917](https://github.com/magento/magento2/issues/26917)

<!-- ENGCOM-7237-->

* O link entre o Assistente de configuração e o Administrador agora funciona conforme esperado. _Correção enviada por Oleh Usik na solicitação pull [26100](https://github.com/magento/magento2/pull/26100)_. [GitHub-24990](https://github.com/magento/magento2/issues/24990)

<!-- ENGCOM-6531-->

* A classificação foi desabilitada na coluna de status da grade Gerenciamento de cache no Administrador. _Correção enviada por Sathish Subramanian na solicitação pull [26215](https://github.com/magento/magento2/pull/26215)_. [GitHub-26208](https://github.com/magento/magento2/issues/26208)

<!-- ENGCOM-7015-->

* Corrigido o desalinhamento dos elementos da página na caixa de diálogo **Admin** > **Lojas** > **Atributos** > **Classificações** > **Adicionar novas classificações**. _Correção enviada por Sathish Subramanian na solicitação pull [27014](https://github.com/magento/magento2/pull/27014)_. [GitHub-26992](https://github.com/magento/magento2/issues/26992)

<!-- ENGCOM-6485-->

* Corrigido o desalinhamento do ícone de calendário na página Adicionar alteração de design. _Correção enviada por Eduard Chitoraga na solicitação pull [26063](https://github.com/magento/magento2/pull/26063)_. [GitHub-20379](https://github.com/magento/magento2/issues/20379)

<!-- ENGCOM-6447-->

* Remoção de espaço desnecessário na exibição de submenu no menu de flutuação da página inicial. _Correção enviada pelo Hitesh na solicitação de pull [25973](https://github.com/magento/magento2/pull/25973)_. [GitHub-25972](https://github.com/magento/magento2/issues/25972)

<!-- ENGCOM-6534-->

* Corrigido o desalinhamento das etiquetas de preço na página de detalhes do produto da loja. _Correção enviada por divyajyothi5321 na solicitação pull [26237](https://github.com/magento/magento2/pull/26237)_. [GitHub-25936](https://github.com/magento/magento2/issues/25936)

<!-- ENGCOM-6536-->

* Corrigido o desalinhamento do texto indisponível em relação ao botão **Adicionar ao carrinho** na página da lista de produtos na exibição móvel.  _Correção enviada por divyajyothi5321 na solicitação pull [26183](https://github.com/magento/magento2/pull/26183)_. [GitHub-26181](https://github.com/magento/magento2/issues/26181)

<!-- ENGCOM-6458-->

* A mensagem de êxito da integração exibida em **Admin** > **Sistema** > **Extensões** > **Integrações** agora é exibida corretamente. _Correção enviada por divyajyothi5321 na solicitação pull [26011](https://github.com/magento/magento2/pull/26011)_. [GitHub-25930](https://github.com/magento/magento2/issues/25930)

### Produtos configuráveis

<!-- MC-23546-->

* Os produtos secundários de um produto configurável agora podem ser desativados com êxito por meio da API.

<!-- MC-30391-->

* As regras de preço do carrinho com uma condição **definida como Categoria (somente Pai)** agora funcionam consistentemente conforme esperado.

<!-- MC-30989-->

* Agora você pode adicionar um produto configurável ao carrinho na guia Cross-Sells. Ao selecionar um produto e clicar em **Adicionar ao carrinho** nesta guia, você será direcionado para a página de detalhes do produto, onde é possível selecionar opções específicas do produto. Anteriormente, o aplicativo o redirecionava para uma página de erro 404.

<!-- MC-32411-->

* O aplicativo não vincula mais um produto simples a um produto configurável quando a chamada da API para vincular esses produtos falha.

<!-- ENGCOM-6483-->

* Correção da renderização de SKUs na lista de Variações atuais de um produto configurável. _Correção enviada por KaushikChavda na solicitação pull [26007](https://github.com/magento/magento2/pull/26007)_. [GitHub-25591](https://github.com/magento/magento2/issues/25591)

<!-- ENGCOM-6460-->

* Agora é possível salvar as informações de configuração de `system.xml` inserindo valores em **Admin** > **Sistema** > **Configuração** em campos que não têm rótulos associados. _Correção enviada por Andrii Chorniy na solicitação pull [25985](https://github.com/magento/magento2/pull/25985)_. [GitHub-23899](https://github.com/magento/magento2/issues/23899)

<!-- ENGCOM-6689-->

* O desempenho de `\Magento\ConfigurableProduct\Model\Product\Type\Configurable::isSalable` foi otimizado.  _Correção enviada por Stanislav Ilnytskyi na solicitação pull [26071](https://github.com/magento/magento2/pull/26071)_. [GitHub-26065](https://github.com/magento/magento2/issues/26065)

<!-- ENGCOM-6992-->

* A lógica responsável pela atualização das imagens configuráveis do produto foi aprimorada. Anteriormente, os produtos simples associados a um produto configurável exibiam apenas a imagem padrão associada ao produto configurável, e o aplicativo às vezes exibia a imagem principal errada para o produto. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [26560](https://github.com/magento/magento2/pull/26560)_. [GitHub-26473](https://github.com/magento/magento2/issues/26473), [GitHub-26856](https://github.com/magento/magento2/issues/26856), [GitHub-26858](https://github.com/magento/magento2/issues/26858)

<!-- ENGCOM-6520-->

* O aplicativo agora exibe o preço especial de um produto, conforme esperado, quando você seleciona uma opção com desconto de um produto configurável. Anteriormente, `class="normal-price"` não era alterado para `class="special-price"` quando uma opção com desconto era selecionada. _Correção enviada por Ravi Chandra na solicitação de pull [26170](https://github.com/magento/magento2/pull/26170)_. [GitHub-24972](https://github.com/magento/magento2/issues/24972)

### Cookies

<!-- MC-24182-->

* As funções `setRedirectCookie` e `clearRedirectCookie` agora funcionam conforme esperado. Anteriormente, essas funções enviavam cookies para o navegador, mas todos os parâmetros de cookie estavam ausentes. [GitHub-24547](https://github.com/magento/magento2/issues/24547)

<!-- MC-30789-->

* As tags do Google Tag Manager não são mais acionadas quando um cliente navega para uma nova loja sem aceitar o cookie do Google Tag Manager.

<!-- ENGCOM-6891-->

* Os metadados foram adicionados às funções `setRedirectCookie` e `clearRedirectCookie`.  _Correção enviada por Alexander Lukyanov na solicitação pull [24612](https://github.com/magento/magento2/pull/24612)_. [GitHub-24547](https://github.com/magento/magento2/issues/24547)

### Atributos personalizados do cliente

<!-- MC-30739-->

* O aplicativo agora exibe valores de atributo de endereço do cliente personalizados, conforme esperado na seção de endereço do fluxo de trabalho de finalização. Anteriormente, o aplicativo exibia o código de atributo do endereço do cliente personalizado em vez do valor, e um erro de JavaScript era acionado.

<!-- MC-32301-->

* O aplicativo não lança mais um erro ao incluir um campo de atributo de cliente vazio no campo **Forms para uso em** ao criar uma conta de Empresa na loja. Anteriormente, o aplicativo exibia este erro: `PHP Fatal error: Uncaught TypeError: Argument 2 passed to Magento\Eav\Model\Attribute\Data\Text::validateLength() must be of the type string, null given`.

<!-- MC-33361-->

* O aplicativo agora salva atributos personalizados de endereço do cliente e os implementa em formulários de registro, conforme esperado. Anteriormente, ao criar um novo atributo de endereço personalizado do cliente ao criar uma conta do carrinho, o aplicativo não salvava as informações do atributo.

### Cliente

<!-- MC-29102-->

* Os clientes que assinaram boletins informativos como convidado não cancelam mais a assinatura após se registrarem em uma nova conta.

<!-- MC-29841-->

* O aplicativo agora usa um novo `PHPSession` para cada alteração de senha.

<!-- MC-30650-->

* Agora você pode criar com êxito um cliente e associá-lo a um site específico usando o menu suspenso Associar a Site em **Clientes** > **Todos os Clientes** > **Adicionar novo Cliente**. Anteriormente, ao tentar associar um novo cliente ao site não padrão em uma implantação multissite, o aplicativo exibia este erro: `The store view is not in the associated website`.

<!-- MC-29946-->

* O aplicativo agora salva as informações que um cliente insere nos campos de faturamento e envio padrão durante a finalização da compra, quando a transação é inicialmente recusada devido a um cartão de crédito inválido, mas posteriormente concluída com sucesso. Anteriormente, embora o aplicativo criasse o pedido quando o cliente inseria informações de pagamento válidas, ele não atualizava os endereços padrão de faturamento ou de envio na seção Minha conta do fluxo de trabalho de finalização da compra.

<!-- MC-32325-->

* O aplicativo agora atende às configurações de grupo de clientes ao criar um novo cliente a partir do Administrador em uma implantação multissite.

<!-- MC-31481-->

* O aplicativo agora importa com êxito os dados do cliente usando a opção **Cliente e Endereços (arquivo único)** quando `cron` está habilitado e o indexador de Grade de Clientes está definido como **Atualizar por Agendamento**. Depois que `cron` for executado, as informações importadas do cliente estarão disponíveis no Administrador, conforme esperado. Anteriormente, o aplicativo importava os dados do cliente, mas não atualizava a grade do cliente com os registros do cliente recém-importados.

<!-- MC-31117-->

* Agora você pode criar um novo cliente na loja quando a data de nascimento for necessária. Anteriormente, não era possível criar um novo cliente quando esse campo era obrigatório, mesmo quando você inseria valores DOB válidos. [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* A criação de clientes pelo Administrador agora respeita a configuração padrão do grupo de clientes, conforme esperado.

<!-- MC-31435-->

* O `PHPSessionId` agora é alterado conforme esperado depois que um cliente faz logoff e, em seguida, faz logon novamente.

<!-- MC-32152-->

* A visualização de administrador de um carrinho de cliente agora exibe todos os produtos que foram adicionados ao carrinho de vários sites em uma implantação de vários sites. Anteriormente, quando um cliente adicionava um produto ao carrinho a partir de um site não padrão, o produto não era exibido no Administrador mesmo quando a **Conta de cliente de compartilhamento** estava definida como **Global**.

<!-- ENGCOM-7036-->

* A validação agora funciona conforme esperado para o campo **Data de nascimento** ao editar um cliente do Administrador. Anteriormente, o aplicativo não fatorava a localidade do usuário e, para algumas datas de nascimento, exibia este erro: `The Date of Birth should not be greater than today`.   _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27149](https://github.com/magento/magento2/pull/27149)_. [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* O campo de email não é mais necessário ao fazer um pedido do administrador.  _Correção enviada por solwininfotech na solicitação pull [24479](https://github.com/magento/magento2/pull/24479)_. [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6667-->

* O aplicativo agora exibe somente os produtos que o cliente colocou em seu carrinho quando o carrinho é visualizado pelo administrador. Anteriormente, o carrinho de compras de um cliente exibia todos os produtos no catálogo quando visualizados pelo administrador. _Correção enviada pelo Ravinder na solicitação de pull [26489](https://github.com/magento/magento2/pull/26489)_. [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-6423-->

* O painel Minha conta agora exibe os valores do endereço de email corretamente na visualização móvel. _Correção enviada por Eden Duong na solicitação pull [25942](https://github.com/magento/magento2/pull/25942)_. [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* Clicar no botão **Criar uma Conta** no formulário de registro do cliente várias vezes não envia mais uma solicitação de registro. _Correção enviada pelo PrinceCB na solicitação de pull [26642](https://github.com/magento/magento2/pull/26642)_. [GitHub-26590](https://github.com/magento/magento2/issues/26590)

### Segmento do cliente

<!-- MC-29471-->

* O aplicativo não remove mais a conta do cliente de um segmento do cliente quando você faz logon como um usuário atribuído ao segmento do cliente quando o segmento inclui uma condição para ordens passadas. Anteriormente, você tinha que clicar em **Atualizar dados do segmento** depois de fazer logon, antes que o aplicativo exibisse sua conta na lista Clientes correspondentes.

<!-- MC-30466-->

* Os segmentos de clientes agora funcionam conforme esperado quando as condições do segmento incluem o número total de pedidos.

<!-- MC-32409-->

* As regras de segmento do cliente agora são aplicadas conforme esperado quando as contas do cliente são configuradas para serem compartilhadas globalmente.

<!-- MC-33081-->

* Melhoramos o desempenho da edição e do salvamento de segmentos de clientes que contêm um grande número de clientes (mais de três milhões). Anteriormente, ao criar ou editar um segmento de cliente que continha muitos clientes, o aplicativo exibia um erro 500.

### Diretório

<!-- MC-33168-->

* O menu suspenso Estado padrão agora é preenchido com dados baseados nos países permitidos que foram atribuídos ao site selecionado quando você configura um valor para o campo **Cálculo de Destino de Imposto Padrão**. Anteriormente, essa lista suspensa listava os países que foram atribuídos ao site padrão.

### Baixável

<!-- MC-32306-->

* Agora você pode usar um arquivo de importação para atualizar produtos baixáveis em massa pelo SKU e pela descrição. Anteriormente, ocorriam erros de validação e a importação falhava.

### Bloco dinâmico (antigo banner)

<!-- MC-23852 31632-->

* Os blocos dinâmicos agora funcionam com segmentos de clientes conforme esperado. O aplicativo não exibe mais um bloco dinâmico quando a condição que deve acioná-lo não é atendida. Anteriormente, o aplicativo exibia um bloco dinâmico para usuários conectados como convidados quando o carrinho de compras estava vazio.

<!-- MC-32652-->

* Os blocos dinâmicos agora são renderizados na loja com base no segmento do cliente e na visualização da loja.

### EAV

<!-- MC-29999-->

* O aplicativo agora respeita as configurações específicas da loja que determinam se o campo de número de telefone do fluxo de trabalho de check-out é necessário em uma implantação de vários sites. Anteriormente, nas implantações em que um armazenamento exigia esse campo no fluxo de trabalho de check-out e outro armazenamento não, os clientes que não concluíram esse campo ao fazer check-out no armazenamento que não exigia o campo encontravam este erro: `Please check the shipping address information. "telephone" is required. Enter and try again`.

<!-- ENGCOM-6489-->

* A ordem de classificação de EAV por `attribute option_id` agora funciona conforme esperado. _Correção enviada por Tan Sezer na solicitação pull [24360](https://github.com/magento/magento2/pull/24360)_. [GitHub-24357](https://github.com/magento/magento2/issues/24357)

<!-- ENGCOM-7082-->

* Agora você pode criar um novo produto após adicionar um novo atributo por meio de REST e atribuí-lo a um conjunto de atributos do Administrador. Anteriormente, o aplicativo exibia um erro 500.  _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27191](https://github.com/magento/magento2/pull/27191)_. [GitHub-26827](https://github.com/magento/magento2/issues/26827)

### Email

<!-- MC-32842-->

* Os emails de autorização enviados a um cliente quando solicitam uma devolução agora contêm o status da RMA conforme esperado. Anteriormente, esse email exibia uma string vazia em vez do status de retorno esperado.

<!-- MC-32864-->

* Os clientes não são mais redirecionados para fora do site atual quando relatam uma senha esquecida em implantações de vários sites em que as contas do cliente são compartilhadas globalmente. Anteriormente, os clientes eram redirecionados para o site em que a conta era criada.

<!-- MC-31544-->

* Os emails de confirmação de pedido enviados aos clientes agora incluem a lista de itens solicitados conforme esperado. Anteriormente, ao criar um modelo de email no Administrador carregando e salvando o modelo padrão, os emails gerados a partir desse modelo não incluíam a lista de itens ordenados. [GitHub-26882](https://github.com/magento/magento2/issues/26882)

### Estruturas

* As dependências no Zend Framework foram migradas para o [projeto Laminas](https://getlaminas.org/about/foundation) para refletir a transição do Zend Framework para o projeto Laminas da Fundação Linux. O Zend Framework foi descontinuado. _Correção enviada por Ihor Sviziev na solicitação pull [26436](https://github.com/magento/magento2/pull/26436)_. [GitHub-26335](https://github.com/magento/magento2/issues/26335)

<!-- MC-25257-->

* As configurações de faixa de preços especiais (datas de/até) agora funcionam corretamente para contas do administrador usando um local holandês.

<!-- MC-29388-->

* `php bin/magento cron:run` não processa mais itens da tabela de log de alterações várias vezes. Anteriormente, quando você tinha mais de 100.000 novas versões na tabela de log de alterações, as ações podiam ser chamadas várias vezes para o mesmo `entity id`.

* O comando `php bin/magento setup:cron:run` foi removido. Além disso, remova as referências a este arquivo nos crontabs ao atualizar.

* O arquivo `update/cron.php` foi removido na versão 2.4.0. Se ele existir na sua instalação, poderá ser removido com segurança. Além disso, remova as referências a este arquivo nos crontabs ao atualizar.

<!-- MC-30544-->

* A ação Atualizar atributo agora atualiza corretamente o carimbo de data e hora de um produto `updated_at column` de `catalog_product_entity` quando você atualiza o produto na página Editar produto de administrador.

<!-- MC-30834-->

* A configuração `'persistent' => '1'` em `env.php` não gera mais um erro quando você executa `setup:upgrade`.

<!-- MC-32243-->

* A Chave De Formulário **Inválida. Atualize a cadeia de texto da página** na página de logon, que agora é traduzida conforme esperado.

<!-- MC-33278-->

* Melhoramos o desempenho da função `Magento\Framework\App\DeploymentConfig\Reader::load`. Anteriormente, quando uma solicitação era feita para o Magento, essa função era chamada repetitivamente, o que resultava em `config.php` e `env.php config` arquivos sendo carregados sempre que o método era chamado.

<!-- MC-31728-->

* O aplicativo não baixa mais a página `blank.html` quando um administrador clica em um produto ao criar um pedido do administrador.

<!-- MC-31729-->

* Os blocos não armazenáveis em cache adicionados ao layout padrão nas instruções de referência para componentes não existentes (não declarados) na página não afetam mais o armazenamento em cache da página. Adicionar blocos não armazenáveis em cache aos manipuladores de layout padrão torna todas as páginas não armazenáveis em cache. Isso resulta do processo de geração de layout: durante a geração do layout, o aplicativo coleta todos os identificadores de layout disponíveis para uma página específica e mescla as instruções deles com a estrutura de layout final da página. O identificador de layout padrão é usado como um identificador básico para cada página. Como resultado, as atualizações de layout declaradas para o manipulador padrão são exibidas em cada página. [GitHub-9041](https://github.com/magento/magento2/issues/9041)

<!-- MC-31920-->

* O gerenciador de bloqueios MySQL agora é o gerenciador de bloqueios primário. Como resultado, a versão mínima exigida do MySQL é a 5.7.9.

<!-- ENGCOM-6431-->

* `queue_consumer.xml` agora permite números na classe `handler`. Anteriormente, quando um manipulador continha um número em seu caminho, a validação de XSD falhava. _Correção enviada por Eden Duong na solicitação pull [25952](https://github.com/magento/magento2/pull/25952)_. [GitHub-25731](https://github.com/magento/magento2/issues/25731)

<!-- ENGCOM-6902-->

* Uma referência de `@var` incorreta no bloco `doc` da variável de membro de classe `$queueIterator` na classe `\Magento\Framework\MessageQueue\Topology\Config` foi corrigida. _Correção enviada por Artem Voloznov na solicitação pull [24976](https://github.com/magento/magento2/pull/24976)_. [GitHub-24971](https://github.com/magento/magento2/issues/24971)

<!-- ENGCOM-5305 6684-->

* Os ouvintes de carregamento de página do JavaScript agora são acionados para serem disparados quando um documento não é mais `loading`, em vez de esperar até que seja marcado como `complete`, pois esperar até que o documento seja marcado como `complete` pode resultar em atrasos graves na renderização do conteúdo do JavaScript. _Correção enviada por John Hughes na solicitação pull [23313](https://github.com/magento/magento2/pull/23313) e na solicitação pull [50](https://github.com/magento/partners-magento2ee/pull/50)_. [GitHub-22909](https://github.com/magento/magento2/issues/22909)

<!-- ENGCOM-6305-->

* O aplicativo agora exibe a seguinte mensagem informativa quando você tenta adicionar um produto à lista de desejos com uma quantidade de 0 ou número negativo: `Please enter a valid number in this field`. Anteriormente, o aplicativo exibia este erro: `We can't update your Wish List right now`. _Correção enviada por Pawe Tylek na solicitação pull [25641](https://github.com/magento/magento2/pull/25641)_. [GitHub-25032](https://github.com/magento/magento2/issues/25032)

<!-- ENGCOM-7071-->

* O aplicativo não oferece mais suporte à herança de classes DTO da classe `Magento\Framework\Api\AbstractExtensibleObject`. Anotação PHP ausente `@api`  foi adicionado a `AbstractExtensibleModel`, e o `@deprecated` ausente  a anotação foi adicionada a `AbstractExtensibleObject`.  _Correção enviada por Alexander Taranovsky na solicitação pull [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

<!-- ENGCOM-6552-->

* Agora você pode salvar produtos conforme esperado após alterar uma data relacionada ao produto (por exemplo, `news_from_date`, `news_to_date`, `special_price_from_date`, `special_price_to_date`) nas lojas que implementam localidades em outros idiomas. Anteriormente, o aplicativo emitia um erro semelhante a este: `Invalid input datetime format of value '22/5/2019`.

### Correções gerais

<!-- MC-21347-->

* O módulo Cliente não tem mais uma dependência no módulo Revisão. Anteriormente, não era possível desativar o módulo de revisão devido a essa dependência.

<!-- MC-25250-->

* A página de edição do produto agora é carregada com sucesso quando o conjunto de atributos padrão da página contém um atributo suspenso com o rótulo selecionado.

<!-- MC-25260-->

* O gráfico de pedidos acessível na guia Pedidos do Administrador agora reflete com precisão a quantidade do pedido.

<!-- MC-29273-->

* O URL do administrador de uma loja não redireciona mais para o URL da vitrine quando esses dois URLs são diferentes.

<!-- MC-29658-->

* A geração de regravação de URL para subcategorias agora funciona corretamente ao usar o perfil do kit de ferramentas de desempenho com mais de um site.

<!-- MC-30224-->

* Agora é possível excluir um modelo de usuário vazio sem excluir a função de Administradores à qual ele está atribuído.

<!-- MC-30636-->

* O editor TinyMCE4 agora é compatível com todas as tags HTML.

<!-- MC-31128-->

* Clicar no botão **Reembolso offline** no fluxo de trabalho criar um aviso de crédito agora gera um aviso de crédito conforme esperado. Anteriormente, um erro do JavaScript desativava esse botão e o aplicativo não criava um aviso de crédito.

<!-- MC-31832-->

* Os comerciantes agora podem criar um atributo de produto do tipo `Decimal`. Anteriormente, devido a uma correção de erro anterior, o aplicativo não exibia o tipo de atributo de produto `Price`. [GitHub-26949](https://github.com/magento/magento2/issues/26949)

<!-- MC-32175-->

* O aplicativo não retorna mais um erro 500 quando você tenta abrir uma página de Categoria na loja quando o **Layout = Produto - Largura total** foi definido na guia Design da página de Categoria.

<!-- MC-32697-->

* Correção de um erro em `AbstractSimpleObjectBuilder.php`.

<!-- MC-33427-->

* O MAP (preço mínimo anunciado) agora funciona conforme esperado para produtos do grupo.

<!-- MC-29998-->

* O aplicativo agora o redireciona para a página inicial da visualização de loja apropriada ao alterar o idioma nas páginas do CMS em uma implantação de várias lojas. Anteriormente, o aplicativo exibia uma página 404 quando você alterava o idioma em determinadas páginas do CMS.

<!-- MC-30162-->

* Consultas de ordem (`SalesOrderIndexGridAsyncInsertCron`) foram refatoradas para reduzir o tamanho do conjunto de dados retornado e a frequência das consultas.

<!-- MC-32371-->

* Agora é possível criar com êxito uma página do CMS e atribuí-la à categoria raiz do site na hierarquia do CMS.

<!-- MC-32783-->

* Os convidados agora podem exibir um preço de produto ou adicionar um produto ao carrinho quando as permissões de categoria estão habilitadas (por exemplo, quando o grupo de clientes **Não conectado** recebeu esses privilégios).

<!-- MC-32815-->

* As regras de produto agora se aplicam aos produtos indisponíveis, conforme esperado. Anteriormente, o aplicativo não exibia produtos indisponíveis na lista de produtos relacionados, mesmo quando a regra estava configurada para exibir produtos indisponíveis.

<!-- MC-33222-->

* Clicar no botão **Rastrear remessa** para um pedido do Administrador agora resulta na exibição das informações de rastreamento em uma janela pop-up, conforme esperado. Anteriormente, esse link levava o administrador para a página de Logon.

<!-- MC-31305-->

* O aplicativo agora exibe uma mensagem de erro informativa e continua exibindo o formulário de registro como esperado se ocorrer um erro quando um cliente tentar preencher um formulário de registro que contém um atributo de cliente de seleção múltipla. Anteriormente, o aplicativo exibia um erro 500.

<!-- MC-32224-->

* O aplicativo agora exibe o botão **Aviso de crédito** após o reembolso parcial de um pedido. Anteriormente, o aplicativo não exibia esse botão depois que você criava uma restituição parcial e não era possível criar um aviso de crédito para o restante da ordem.

<!-- MC-31878-->

* As atualizações de pedidos em massa por meio do REST agora modificam o status do pedido conforme esperado. Anteriormente, o aplicativo exibia este erro: `report.ERROR: Property "AdditionalInformation" does not have accessor method "setAdditionalInformation" in class "Magento\Sales\Api\Data\OrderPaymentInterface".`

<!-- MC-30398-->

* Os filtros de atributo agora são exibidos conforme esperado no bloco Opções de compra da página Categoria.

<!-- MC-25138-->

* Agora você pode alterar o limite do produto na página Categoria de 24 para 36 em implantações em que o B2B está instalado. Anteriormente, o aplicativo gerava um erro fatal quando esse limite de produto era aumentado para 36.

<!-- ENGCOM-7175-->

* Os endereços de entrega e cobrança do cliente agora são exibidos conforme esperado na guia Endereços da página Admin Customer Edit quando exibidos no Internet Explorer. _Correção enviada por Vasilii Burlacu na solicitação pull [27383](https://github.com/magento/magento2/pull/27383)_. [GitHub-27370](https://github.com/magento/magento2/issues/27370)

<!-- ENGCOM-6546-->

* Agora, todas as exibições de marcadores permanecem editáveis ao excluir uma. Anteriormente, todas as visualizações de marcadores ficavam sem edição depois que a primeira visualização era excluída para contas com várias visualizações de marcadores. _Correção enviada por Bartomiej Szubert na solicitação pull [26263](https://github.com/magento/magento2/pull/26263)_. [GitHub-14913](https://github.com/magento/magento2/issues/14913)

<!-- ENGCOM-7042-->

* A navegação em camadas não interrompe mais a validação HTML5 do módulo de amostra. Anteriormente, erros de validação de HTML ocorriam para atributos que não estavam definidos no [serviço de validação de marcação do W3C](https://validator.w3.org/), mas esses atributos foram alterados para atributos de dados. _Correção enviada pelo Nirav Patel na solicitação pull [26055](https://github.com/magento/magento2/pull/26055)_. [GitHub-22363](https://github.com/magento/magento2/issues/22363)

<!-- ENGCOM-7065-->

* Alias `require.JS` não usado (`critical-css-loader``) has been removed from app/code/Magento/Theme/view/frontend/requirejs-config.js`. _Correção enviada por Tu Nguyen na solicitação de pull [26987](https://github.com/magento/magento2/pull/26987)_. [GitHub-26963](https://github.com/magento/magento2/issues/26963)

<!-- ENGCOM-6242-->

* O aplicativo agora implementa a [interface descartável](https://www.php.net/manual/en/class.throwable.php) do PHP7.x para habilitar a captura de todos os erros que podem potencialmente expor informações confidenciais, como senhas. _Correção enviada por miszyman na solicitação pull [25250](https://github.com/magento/magento2/pull/25250)_. [GitHub-23350](https://github.com/magento/magento2/issues/23350)

<!-- ENGCOM-6284-->

* Pressionar a tecla ESC ao inserir o nome de uma nova pasta na janela pop-up Criar uma nova pasta agora fecha o pop-up conforme esperado sem criar a pasta.  _Correção enviada por Shankar Konar na solicitação pull [25349](https://github.com/magento/magento2/pull/25349)_. [GitHub-572](https://github.com/magento/magento2/issues/572)

<!-- ENGCOM-7464-->

* Uma estrutura de HTML aninhada incorretamente foi corrigida. Anteriormente, essa estrutura resultava em um layout inválido para a lista de produtos relacionados, de venda adicional ou de venda cruzada. _Correção enviada por Pieter Hoste na solicitação pull [27926](https://github.com/magento/magento2/pull/27926)_. [GitHub-27920](https://github.com/magento/magento2/issues/27920)

<!-- ENGCOM-7144-->

* Chamada duplicada removida para `addToolbarBlock`, que resultou em duas condições semelhantes em `ORDER BY`.  _Correção enviada por Vasilii Burlacu na solicitação pull [27263](https://github.com/magento/magento2/pull/27263)_. [GitHub-26708](https://github.com/magento/magento2/issues/26708)

<!-- ENGCOM-6014-->

* Os comerciantes agora podem definir uma data de expiração nas contas de usuário Admin. _Correção enviada por Laura Folco na solicitação de pull [22837](https://github.com/magento/magento2/pull/22837)_. [GitHub-22833](https://github.com/magento/magento2/issues/22833)

<!-- ENGCOM-7071-->

* Adicionamos a anotação PHP `@api` a `AbstractExtensibleModel`, a anotação PHP `@deprecated` a `AbstractExtensibleObject` e `@see` a `AbstractExtensibleModel`.  _Correção enviada por Alexander Taranovsky na solicitação pull [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

### Cartões-presente

<!-- MC-31041-->

* A chamada `V1/orders/:orderId` do GET retorna códigos de cartão-presente conforme esperado.

### Invólucro do presente

<!-- MC-29893-->

* O invólucro do presente agora pode ser adicionado ao carrinho quando estiver ativado no nível do produto. Anteriormente, você podia adicionar invólucro do presente a um produto na loja, mas o aplicativo não incluía invólucro do presente no resumo do pedido.

<!-- MC-30543-->

* Um cartão-presente expirado se torna ativo conforme esperado quando você altera sua data de expiração para uma data futura. Anteriormente, o vale-presente permanecia expirado.

<!-- MC-32551-->

* A página Criar pedido do administrador agora é carregada corretamente quando a configuração **Permitir mensagens de presente no nível de pedido** e a minificação do modelo estão habilitadas. Anteriormente, quando você tentava abrir esta página quando essas configurações eram habilitadas, o aplicativo exibia este erro: `Warning: require(content.phtml): failed to open stream: No such file or directory`.

<!-- MC-31427-->

* O aplicativo agora calcula corretamente o custo do invólucro do presente com base no número de produtos para os quais você solicitou o invólucro do presente. Anteriormente, o aplicativo incluía o custo do invólucro de presente para um produto apenas no pedido.

### Gerenciador de tags da Google

<!-- MC-29878-->

* Os comerciantes agora podem adiar o envio de dados para Google Analytics até que as condições especificadas sejam atendidas.

<!-- MC-30673-->

* O modelo `Magento_GoogleTagManager::checkout/set_checkout_option.phtml` ausente foi restaurado.

### GraphQL

<!-- ENGCOM-7074-->

* O aplicativo agora retorna a mensagem `The cart isn't active` do GraphQL em vez de `Current user does not have an active cart` em determinadas circunstâncias quando um carrinho se torna inativo e uma nova ID do carrinho é criada. _Correção enviada por Vadim Malesh na solicitação pull [27187](https://github.com/magento/magento2/pull/27187)_. [GitHub-26117](https://github.com/magento/magento2/issues/26117)

<!-- ENGCOM-7105-->

* Remoção do código que causava um erro ao usar o GraphQL para adicionar produtos a um carrinho quando um produto adicionado anteriormente ficava indisponível. _Correção enviada por AleksLi na solicitação pull [27015](https://github.com/magento/magento2/pull/27015)_. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

<!-- ENGCOM-6535-->

* Correção de um problema no GraphQL em que o aplicativo não retornava todas as informações necessárias ao usar fragmentos na consulta de produtos. _Correção enviada por Riccardo Tempesta na solicitação pull [26218](https://github.com/magento/magento2/pull/26218)_. [GitHub-26217](https://github.com/magento/magento2/issues/26217)

* A mutação do GraphQL `setShippingMethodsOnCart` não recupera mais os dados errados no atributo `available_shipping_methods`. _Correção enviada por Vadim Malesh na solicitação pull [27004](https://github.com/magento/magento2/pull/27004)_. [GitHub-26742](https://github.com/magento/magento2/issues/26742)

### Produtos agrupados

<!-- ENGCOM-6115-->

* Agora é possível adicionar um produto simples que pertence a um produto de grupo ao carrinho de compras quando outro produto simples que pertence a esse mesmo grupo está esgotado.  _Correção enviada por Gihovani Filipp Pereira Dem̩trio na solicitação pull [24955](https://github.com/magento/magento2/pull/24955)_. [GitHub-22304](https://github.com/magento/magento2/issues/22304)

<!-- ENGCOM-6768-->

* O aplicativo agora envia um email aos clientes sobre produtos reembolsados do grupo, conforme esperado.  _Correção enviada por Alexander Taranovsky na solicitação pull [26246](https://github.com/magento/magento2/pull/26246)_. [GitHub-26245](https://github.com/magento/magento2/issues/26245)

<!-- MC-30313-->

* Agora é possível adicionar um produto secundário de um produto agrupado ao carrinho quando um dos outros produtos secundários do produto agrupado estiver indisponível. Anteriormente, quando um produto secundário estava indisponível, não era possível adicionar outros produtos secundários ao carrinho.

### Imagens

<!-- MC-29523-->

* As imagens agora são salvas em `pub/media/catalog/category` como esperado quando você salva as imagens da categoria. Anteriormente, o aplicativo salvava essas imagens em `pub/media/catalog/tmp/category`.

<!-- MC-30320-->

* As imagens de marca d&#39;água não ocultam mais a imagem do produto sobreposta. Anteriormente, quando a imagem da marca d&#39;água era maior do que a imagem do produto ao qual foi aplicada, a imagem do produto não estava visível.

<!-- MC-32273-->

* Agora é possível salvar com êxito uma imagem em uma categoria do Administrador. Anteriormente, após salvar a imagem, parte do URL estava ausente e você não podia reabrir a imagem.

<!-- MC-31727-->

* O aplicativo agora exibe `.png` imagens conforme esperado após o upload.

<!-- MC-29483-->

* As imagens que foram carregadas em um bloco do CMS usando o Page Builder agora são exibidas na visualização, conforme esperado, quando carregadas de um administrador que tem um URL base diferente do URL da loja.

<!-- ENGCOM-7063-->

* Usar REST para adicionar ou atualizar uma imagem agora cria uma miniatura da imagem conforme esperado. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27170](https://github.com/magento/magento2/pull/27170)_. [GitHub-26825](https://github.com/magento/magento2/issues/26825)

<!-- ENGCOM-6962-->

* Os atributos personalizados de imagens geradas por `Block\Product\ImageFactory` agora são renderizados corretamente. Anteriormente, não era possível adicionar seus próprios atributos personalizados à marcação de atributo devido ao escape incorreto da saída de HTML. _Correção enviada por alexander-aleman na solicitação pull [26959](https://github.com/magento/magento2/pull/26959)_. [GitHub-25219](https://github.com/magento/magento2/issues/25219)

<!-- ENGCOM-5980-->

* As imagens não ficam mais desfocadas quando uma vitrine é visualizada de uma iPhone.  _Correção enviada por Dmitriy na solicitação pull [24743](https://github.com/magento/magento2/pull/24743)_. [GitHub-24735](https://github.com/magento/magento2/issues/24735)

<!-- ENGCOM-6999-->

* As imagens na loja agora são responsivas. Anteriormente, a altura da imagem era distorcida.  _Correção enviada por Sean van Zuidam na solicitação pull [27041](https://github.com/magento/magento2/pull/27041)_. [GitHub-27040](https://github.com/magento/magento2/issues/27040)

<!-- ENGCOM-7253-->

* O logotipo padrão da loja agora está visível na loja quando o tema `Magento_blank` é usado. _Correção enviada por Vasilii Burlacu na solicitação pull [27497](https://github.com/magento/magento2/pull/27497)_. [GitHub-27496](https://github.com/magento/magento2/issues/27496)

### Importar/exportar

<!-- MC-25206-->

* O aplicativo não gera mais um erro durante a importação quando os dados importados incluem uma chave de exibição de repositório `swatch_image` com o valor `no_selection`. Anteriormente, o aplicativo exibia este erro: `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s): 1`. [GitHub-25026](https://github.com/magento/magento2/issues/25026)

<!-- MC-29417-->

* O aplicativo agora atualiza imagens conforme esperado ao usar a configuração `hide_from_product_page` ao importar produtos em implantações com várias exibições de loja.

<!-- MC-29677-->

* As opções personalizáveis agora são importadas conforme esperado quando `row_id` não é igual ao `entity_id` de um produto. Anteriormente, o aplicativo não importava opções personalizáveis quando `row_id` não era igual ao `entity_id` de um produto, o que resultou na não importação de determinados produtos.

<!-- MC-29916-->

* As imagens associadas a produtos configuráveis agora são carregadas corretamente durante a importação e ficam disponíveis para visualização conforme esperado na página de edição do produto.

<!-- MC-30304-->

* Os arquivos `.csv` exportados agora refletem as configurações de filtro para incluir produtos em estoque ou indisponíveis. Anteriormente, o aplicativo exportava todos os produtos, independentemente da configuração de estoque selecionada.

<!-- MC-30323-->

* Agora é possível importar ou atualizar clientes com êxito usando a opção Customer and addresses single file do workflow de importação. Anteriormente, ao selecionar essa opção, o aplicativo não importava os dados do cliente e exibia este erro: `Invalid data for insert`.

<!-- MC-30357-->

* O Indexador de estoque agora é acionado conforme esperado após a importação e atualiza o status do produto. Anteriormente, o Indexador de estoque não indexava os dados alterados do inventário de produtos.

<!-- MC-30528-->

* O aplicativo agora importa com êxito todas as opções personalizadas dos produtos derivados de um produto configurável quando `store_view_code` é especificado. Isso funciona se você optar por importar produtos configuráveis individual ou coletivamente. Anteriormente, o aplicativo não importava com êxito todas as opções personalizadas quando o arquivo de importação continha mais de um item e `store_view_code` era especificado.

<!-- MC-30672-->

* O aplicativo agora fornece uma mensagem durante a importação do produto que identifica quais produtos no arquivo `.csv` importado têm chaves duplicadas. Os comerciantes podem usar essas informações para resolver conflitos. Anteriormente, o aplicativo exibia este erro: `Notice: Undefined index: name in /var/www/html/ee233dev/app/code/Magento/CatalogImportExport/Model/Import/Product.php on line 2524`

<!-- MC-29960-->

* O aplicativo agora exibe uma mensagem de erro mais informativa e não exibe um link de download quando você tenta excluir um diretório da lista **Sistema** > **Exportar**. Anteriormente, quando você tentava excluir um diretório dessa lista, o aplicativo continuava a exibir um link de download para os arquivos que não podiam ser baixados e exibia uma mensagem de erro não informativa.

<!-- MC-29959-->

* O arquivo `.csv` usado durante a importação agora contém os links corretos para produtos baixáveis e está formatado corretamente para oferecer suporte à importação e atualização de produtos baixáveis.

<!-- MC-30189-->

* O aplicativo agora exporta com êxito um arquivo `.csv` quando você define o comportamento de importação para Substituir, seleciona um arquivo `.csv` exportado anteriormente e clica em **Verificar dados**. Anteriormente, o aplicativo exibia este erro: `Data validation failed. Please fix the following errors and upload the file again` e `Following Error(s) has been occurred during importing process`.

<!-- MC-30141-->

* O Indexador de estoque agora é acionado conforme esperado após a importação e atualiza o status do produto. Anteriormente, o Indexador de estoque não indexava os dados alterados do inventário de produtos.

<!-- MC-31198-->

* `.csv` arquivos gerados durante a importação do produto agora contêm títulos de grupo para produtos baixáveis, conforme esperado. Anteriormente, a validação desnecessária do `group_title` durante a importação impedia a exibição de títulos de grupos para produtos baixáveis.

<!-- MC-32153-->

* Quando `cron` está habilitado e você executa uma importação de cliente usando a opção **(Cliente e Endereços (arquivo único))**, o aplicativo preenche os dados na grade do cliente do Administrador, conforme esperado. A grade do cliente exibe os clientes assim que a reindexação manual é concluída para `customer_grid indexer`. Anteriormente, o aplicativo não atualizava a grade do cliente com endereços de clientes recém-importados.

<!-- MC-32154-->

* O aplicativo agora exibe a lista de clientes conforme esperado após a reindexação automática. Anteriormente, embora a execução manual do `bin/magento index:reindex` funcionasse, a grade do cliente não exibia as informações do cliente após a reindexação automática.

<!-- MC-30148-->

* O aplicativo agora exclui arquivos temporários de `<Magento_home>/var`, como esperado após a conclusão da importação do produto.

<!-- MC-31879-->

* O aplicativo não cria mais SKUs duplicadas no Administrador quando os produtos são importados pelo arquivo `.csv`.

<!-- ENGCOM-6141-->

* A importação não falhará mais quando o atributo configurável importado incluir um sinal de igual (=) em seu valor. _Correção enviada por dhoang89 na solicitação pull [25194](https://github.com/magento/magento2/pull/25194)_. [GitHub-25188](https://github.com/magento/magento2/issues/25188)

<!-- ENGCOM-6901-->

* Todos os dados de grade exportados (Adobe Commerce e dados personalizados) agora têm rótulos de opção em vez de valores de opção para todas as colunas com tipo `Select` ou `Multiselect`. Anteriormente, ao exportar esses dados, a planilha exportada continha Colunas com ID em vez dos valores exibidos na grade. _Correção enviada por Maksym Novik na solicitação pull [26523](https://github.com/magento/magento2/pull/26523)_. [GitHub-25963](https://github.com/magento/magento2/issues/25963)

<!-- ENGCOM-7145-->

* O aplicativo agora exibe pacotes de produtos na loja, conforme esperado após a atualização de um produto, importando um arquivo `.csv`. _Correção enviada por Pavel Bystritsky na solicitação pull [25664](https://github.com/magento/magento2/pull/25664)_. [GitHub-25540](https://github.com/magento/magento2/issues/25540)

### Índice

<!-- MC-25236 30779-->

* Melhoramos o desempenho do `indexer_update_all_views`. A indexação agora é mais rápida, as regras inativas não são mais processadas e os caches são removidos das entradas somente para os produtos alterados.

<!-- MC-29917-->

* Os preços dos produtos na loja agora refletem com precisão a aplicação de uma atualização programada da Regra de preço do catálogo. Anteriormente, os preços não refletiam a regra de preço do carrinho agendado até que você reindexasse manualmente (`php bin/magento indexer:reindex catalogrule_rule`).

<!-- MC-30588-->

* Agora, você pode reindexar com êxito o banco de dados de produtos depois de adicionar um atributo que não pode ser pesquisado (ou seja, os atributos `is_searchable`, `is_filterable`, `is_visible_in_advanced_search` estão desabilitados).

<!-- ENGCOM-6533-->

* O aplicativo agora exibe uma mensagem que identifica o indexador e o tempo que a operação de indexação levou quando uma operação de reindexação falhou. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26207](https://github.com/magento/magento2/pull/26207)_. [GitHub-26206](https://github.com/magento/magento2/issues/26206)

<!-- ENGCOM-7179-->

* Os produtos salvos nas lojas onde o indexador `onthefly` e as tabelas simples estão habilitados agora respeitam as atribuições do site. Anteriormente, se você removesse todas as atribuições de site de um produto e depois o salvasse, todas as tabelas simples incluíam o produto, apesar das atribuições de site especificadas.  _Correção enviada por Abel Truong na solicitação pull [27365](https://github.com/magento/magento2/pull/27365)_. [GitHub-16315](https://github.com/magento/magento2/issues/16315)

### Infraestrutura

* O navegador Internet Explorer 11.x não é mais suportado.

<!-- MC-32223-->

* A lógica de validação associada ao campo **Data de Nascimento** do formulário de Registro do Cliente não aciona mais um erro de JavaScript.

<!-- ENGCOM-7000-->

* Adição de um teste de integração para abranger `$storeId` para o método de Repositório de Categoria `get()`. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [27048](https://github.com/magento/magento2/pull/27048)_. [GitHub-27044](https://github.com/magento/magento2/issues/27044)

<!-- ENGCOM-6378-->

* Habilitar a configuração **Bloquear todos os cookies** no Safari não resulta mais em erros de JavaScript, e o aplicativo exibe a mensagem `cookies disabled` conforme esperado. Anteriormente, o aplicativo exibia vários erros `SecurityError (DOM Exception 18): The operation is insecure` no console. _Correção enviada por Ra̼l Verdugo Lorenzo na solicitação pull [25324](https://github.com/magento/magento2/pull/25324)_. [GitHub-13865](https://github.com/magento/magento2/issues/13865)

<!-- ENGCOM-6674-->

* O aplicativo não lança mais este erro ao executar testes de integração: `Error: Call to a member function findFile() on array (/var/www/html/lib/internal/Magento/Framework/Code/Generator/DefinedClasses.php:59)`. Anteriormente, um problema com o `AutoloaderRegistry::getAutoloader` causava a falha aleatória de testes de integração. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26480](https://github.com/magento/magento2/pull/26480)_. [GitHub-26479](https://github.com/magento/magento2/issues/26479)

<!-- ENGCOM-6958-->

* A marca `date` em `/module-sales/view/frontend/templates/order/order_date.phtml` foi corrigida para `span`. Anteriormente, o aplicativo registrava um erro no arquivo `exception.log` quando você clicava em **Exibir pedido** na página **Minha conta** > **Meus pedidos** da vitrine. _Correção enviada por Andrii Chorniy na solicitação pull [25895](https://github.com/magento/magento2/pull/25895)_. [GitHub-13269](https://github.com/magento/magento2/issues/13269), [GitHub-25738](https://github.com/magento/magento2/issues/25738)

<!-- ENGCOM-6316-->

* O módulo de mixin do JavaScript foi refatorado para melhorar o carregamento e a aplicação de mixins para módulos empacotados avançados. Anteriormente, o aplicativo não carregava ou aplicava mixins para módulos agrupados avançados.  _Correção enviada por Mateusz Krzeszowiak na solicitação pull [25587](https://github.com/magento/magento2/pull/25587)_. [GitHub-25586](https://github.com/magento/magento2/issues/25586)

<!-- ENGCOM-6344-->

* O comando `grunt clean` agora limpa as pastas de código e metadados geradas conforme esperado. _Correção enviada por Andrii Beziazychnyi na solicitação pull [25765](https://github.com/magento/magento2/pull/25765)_. [GitHub-25739](https://github.com/magento/magento2/issues/25739)

<!-- ENGCOM-6463-->

* `getVersion` resultado (`ProductMetadata::getVersion`) agora está em cache, o que melhora o desempenho do método `ProductMetadata::getVersion`.  _Correção enviada por Lukasz Lewandowski na solicitação pull [26001](https://github.com/magento/magento2/pull/26001)_. [GitHub-24025](https://github.com/magento/magento2/issues/24025)

<!-- ENGCOM-7037-->

* Um setter ausente para `additional_information` foi adicionado a `OrderPaymentInterface`, o que resolve uma inconsistência entre sua declaração de esquema e propriedades aceitas. _Correção enviada por Antonino Bonumore na solicitação pull [26748](https://github.com/magento/magento2/pull/26748)_. [GitHub-26745](https://github.com/magento/magento2/issues/26745), [GitHub-13222](https://github.com/magento/magento2/issues/13222)

### Navegação em camadas

<!-- MC-31763-->

* O aplicativo agora renderiza o atributo **Sim/Não** na página Categoria quando **Usar na Navegação em Camadas: Filtrável (com resultados)** para propriedades da loja está habilitado.

<!-- ENGCOM-6807-->

* O `\Magento\Sales\Model\Order\Email\Sender\ShipmentSender` redundante foi substituído em favor do `\Magento\Sales\Model\Order\Shipment\Sender\EmailSender`. _Correção enviada por Adarsh Manickam na solicitação pull [26714](https://github.com/magento/magento2/pull/26714)_. [GitHub-14885](https://github.com/magento/magento2/issues/14885)

### Logs

<!-- MC-29636-->

* As alterações no status do pedido agora são registradas conforme esperado em **Sistema** > **Logs de Ação** > **Relatório**.

<!-- MC-29637-->

* O aplicativo agora registra as ações de remessa de vendas no log de Ação administrativa conforme esperado.

<!-- MC-29892-->

* As ações de salvamento de página do CMS agora estão registradas em Logs de ação de administrador. Anteriormente, somente as ações de exibição eram registradas.

<!-- MC-30618-->

* As ações de salvamento nas páginas do CMS agora são registradas como esperado nos logs de ação do administrador quando **Selecionar todas as ações a serem registradas** está habilitado na guia Log de Ações do Administrador (**Admin** > **Lojas** > **Configuração** > **Avançado**).

<!-- ENGCOM-7274-->

* As modificações de página do CMS agora são registradas conforme esperado no Log de ações. A MFTF abrange agora este recurso.  _Correção enviada por Lukasz Bajsarowicz na solicitação pull [27597](https://github.com/magento/magento2/pull/27597)_. [GitHub-171](https://github.com/magento/magento2/issues/171)

### Galeria de mídia

<!-- ENGCOM-6993-->

* Clicar em **Inserir** depois de nomear uma nova pasta na Galeria de Mídia agora salva todas as alterações que você fez. Anteriormente, clicar em **Enter** em vez de usar o mouse para selecionar **OK** resultava na perda de todas as alterações.  _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27029](https://github.com/magento/magento2/pull/27029)_. [GitHub-26847](https://github.com/magento/magento2/issues/26847)

<!-- ENGCOM-7490-->

* Agora é possível criar uma subpasta na Galeria de mídia que tem o mesmo nome da pasta primária. Anteriormente, não era possível salvar a subpasta com o mesmo nome. _Correção enviada por Vadim Malesh na solicitação pull [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/adobe-stock-integration/issues/1270)

### Armazenamento de mídia

<!-- MC-32593-->

* `var/resource_config.json` não é mais regenerado sempre que uma imagem é solicitada por `get.php`. Anteriormente, esse arquivo era regravado em cada chamada para `get.php`.

### New Relic

<!-- ENGCOM-6461-->

* Os nomes de trabalho `cron` do Adobe Commerce agora são incluídos conforme esperado em Rastreamentos de transação no NewRelic APM Monitoring - Transactions. Isso inclui `cron` trabalhos executados a partir da linha de comando, bem como trabalhos executados pelo agendador padrão.  _Correção enviada por Lukasz Bajsarowicz na solicitação pull [25957](https://github.com/magento/magento2/pull/25957)_. [GitHub-22047](https://github.com/magento/magento2/issues/22047)

### Informativo

<!-- MC-31768-->

* Os clientes agora podem assinar boletins informativos conforme esperado. Anteriormente, quando um cliente tentava confirmar sua assinatura, o aplicativo exibia este erro: `This is an invalid subscription confirmation code`.

<!-- ENGCOM-6525-->

* O campo de entrada do informativo do rodapé da loja agora é renderizado de forma idêntica por qualquer navegador compatível.  _Correção enviada por divyajyothi5321 na solicitação pull [26182](https://github.com/magento/magento2/pull/26182)_. [GitHub-26176](https://github.com/magento/magento2/issues/26176)

<!-- ENGCOM-6691-->

* As mensagens da loja sobre assinaturas de boletim informativo agora são renderizadas conforme esperado no HTML. _Correção enviada por Oleh Usik na solicitação pull [26455](https://github.com/magento/magento2/pull/26455)_. [GitHub-25162](https://github.com/magento/magento2/issues/25162)

### Pedidos

<!-- MC-33456-->

* Os subtotais do resumo de pedidos não exibem mais os impostos excluídos quando as configurações de exibição do site especificam que os impostos devem ser excluídos. Anteriormente, quando vários sites eram definidos com configurações de exibição diferentes, a configuração definida na variável de servidor era usada para o armazenamento, apesar das configurações no nível do armazenamento.

### Métodos de pagamento

<!-- MC -->

* A integração de métodos de pagamento de terceiros Authorize.Net, eWay, CyberSource, Braintree e Worldpay no código principal foi removida. Os comerciantes devem migrar para as extensões oficiais disponíveis no Commerce Marketplace.

<!-- MC -->

* A implementação principal da proteção contra fraude Signifyd não é mais suportada. Os comerciantes devem migrar para a [extensão de Proteção contra fraudes e chargeback da Signifyd](https://marketplace.magento.com/signifyd-module-connect.html), disponível no Commerce Marketplace.

<!-- MC-32546-->

* Agora você pode concluir um pedido com êxito e retornar à home page do comerciante quando a **Solução Hospedada Pro de Pagamentos de Sites** estiver configurada. Anteriormente, ao clicar em **Retornar ao comerciante**, o aplicativo exibia este erro: `Invalid Form Key. Please refresh the page`.

<!-- ENGCOM-6606-->

* Alternar o endereço de cobrança não faz mais com que o texto da função JavaScript seja renderizado na seção de pagamento do fluxo de trabalho de finalização da loja. _Correção enviada por Chris Pook na solicitação pull [26378](https://github.com/magento/magento2/pull/26378)_. [GitHub-26375](https://github.com/magento/magento2/issues/26375)

<!-- ENGCOM-7223-->

* Os avisos de crédito agora exibem a quantia correta no campo **Restituição de Ajuste** da visão geral Aviso de Crédito.  _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27343](https://github.com/magento/magento2/pull/27343)_. [GitHub-13851](https://github.com/magento/magento2/issues/13851)

<!-- ENGCOM-6524-->

* Agora você pode remover informações adicionais da tabela `quote_payment column additional_information` depois de salvar uma cotação. Anteriormente, essas informações não podiam ser removidas depois de salvar a cotação porque o método `unsAdditionalInformation` em `\Magento\Payment\Model\Info` não inicializava os dados corretamente.  _Correção enviada por Marco Oliveira na solicitação pull [26084](https://github.com/magento/magento2/pull/26084)_. [GitHub-26083](https://github.com/magento/magento2/issues/26083)

<!-- ENGCOM-6609-->

* As instruções de pagamento agora são derivadas da visualização da loja da qual um pedido foi feito. Anteriormente, as instruções de pagamento eram usadas no modo de exibição de loja padrão porque o método `BeforeOrderPaymentSaveObserver` buscava instruções de pagamento no modo de exibição de loja padrão. _Correção enviada por Karyna Tsymbal na solicitação pull [26399](https://github.com/magento/magento2/pull/26399)_. [GitHub-26332](https://github.com/magento/magento2/issues/26332)

<!-- ENGCOM-6953-->

* O aplicativo agora coleta as informações de pagamento exibidas nas faturas Admin e de fatura e remessa da loja em que o pedido foi feito em implantações com várias lojas. Anteriormente, o aplicativo derivava informações de pagamento da loja padrão.  _Correção enviada por Bartomiej Szubert na solicitação pull [26765](https://github.com/magento/magento2/pull/26765)_. [GitHub-17933](https://github.com/magento/magento2/issues/17933)

#### PayPal

<!-- MC-30498-->

* O aplicativo agora exibe uma mensagem de erro informativa sempre que um cliente clica em **Pagar com PayPal** após inserir um endereço de envio inválido no fluxo de trabalho de check-out. Anteriormente, o aplicativo exibia uma mensagem de erro somente quando o cliente clicava no botão pela primeira vez, não para cliques subsequentes.

<!-- MC-30639-->

* O aplicativo não altera mais o status de um pedido para `Processing` na seção Análise de Pagamento do fluxo de trabalho de check-out quando um pagamento com PayPal falha.

<!-- MC-30864-->

* Agora é possível concluir um pedido com êxito usando o método de pagamento Link do Fluxo de Pagamento. Anteriormente, o método de pagamento Link de Fluxo de Pagamento sempre rejeitava o pagamento porque o status do pedido permanecia no estado de pagamento `Pending`, mesmo que o status do pedido nos logs do método de pagamento fosse `Approved`.

<!-- MC-32494-->

* Os pedidos feitos usando o PayPal Payflow Pro agora estão definidos com o status `Suspected Fraud` quando os filtros de fraude são acionados.

<!-- MC-33110-->

* Agora você pode usar o Check-out do PayPal Express com qualquer cartão de crédito compatível. Anteriormente, quando você clicava em um botão de cartão de crédito ao usar o Check-out do PayPal Express para concluir um pedido, o aplicativo travava e não era possível inserir informações de cartão de crédito.

<!-- MC-33117-->

* Os pedidos feitos no PayPal Payflow Pro agora estão definidos com o status `Suspected Fraud` quando os filtros de fraude são acionados. Anteriormente, o status da transação de pagamento no PayPal não era validado antes da aprovação do pagamento ocorrer no lado do aplicativo.

<!-- MC-33294-->

* O Payflow Pro agora funciona conforme esperado quando as Restrições de site estão ativadas.

<!-- MC-31196-->

* O aplicativo agora processa com êxito os pedidos feitos com o Check-out do PayPal Express, onde o endereço de envio do pedido especifica uma região do país que o cliente inseriu manualmente no campo de texto, em vez de selecionar no menu suspenso na página Envio. Anteriormente, o aplicativo exibia esse erro na página de revisão do pedido: `Error 500: NOTICE: PHP message: PHP Fatal error: Uncaught Error: Call to a member function getId() on null in httpdocs/vendor/magento/module-paypal/Model/Api/Nvp.php:1527`. [GitHub-26698](https://github.com/magento/magento2/issues/26698)

<!-- MC-31573-->

* O método de pagamento PayPal Pro agora funciona conforme esperado no navegador Chrome 80. Esse método de pagamento invocou anteriormente um endpoint de retorno de chamada que precisava de acesso à sessão do cliente — acesso que a nova funcionalidade de cookie SameSite padrão do Chrome não permite. [GitHub-26840](https://github.com/magento/magento2/issues/26840)

<!-- MC-31292-->

* Agora você pode usar com êxito o PayPal Express para pagar um pedido quando o carrinho de check-out persistente tiver sido habilitado e a configuração **Limpar Persistência na Saída** estiver definida como **não**. Anteriormente, o aplicativo o redirecionava para a página de Logon.

<!-- ENGCOM-6383-->

* Os pagamentos do Paypal Express e do Web Payments Pro agora são movidos para o estado `Processing` como esperado depois que o processamento começar. Anteriormente, os pagamentos do Paypal Web Payments Pro permaneciam no estado de pagamento `Pending` mesmo quando as informações de pagamento estavam no estado `Processing`. _Correção enviada pelo azambon na solicitação pull [25876](https://github.com/magento/magento2/pull/25876)_. [GitHub-25659](https://github.com/magento/magento2/issues/25659)

### Desempenho

<!-- MC-31499-->

* A lógica de invalidação da seção de dados do cliente foi aprimorada. Esta versão apresenta uma nova maneira de invalidar todos os dados de seções de clientes, evitando um problema conhecido com o armazenamento local quando as invalidações personalizadas `sections.xml` estão ativas. (Anteriormente, o conteúdo privado (armazenamento local) não era preenchido corretamente quando você tinha um *etc/frontend/sections.xml* personalizado com invalidações de ação.) Consulte [Conteúdo privado](https://developer.adobe.com/commerce/php/development/cache/page/private-content/#invalidate-private-content).

<!-- MC-31449-->

* A importação de contas de clientes foi refatorada para melhorar a velocidade de importação.

<!-- MC-23383 ENGCOM-7006-->

* Os comerciantes agora podem usar [carregamento lento](https://en.wikipedia.org/wiki/Lazy_loading) para carregar imagens. _Correção enviada por Timon de Groot na solicitação pull [27033](https://github.com/magento/magento2/pull/27033)_. [GitHub-27032](https://github.com/magento/magento2/issues/27032)

<!-- ENGCOM-6988-->

* Os gráficos de painel foram migrados para a biblioteca `chart.js`.  _Correção enviada por Bartomiej Szubert na solicitação pull [26923](https://github.com/magento/magento2/pull/26923). [GitHub-186](https://github.com/magento/community-features/issues/186)_

<!-- ENGCOM-6232-->

* O desempenho das operações executadas em grandes catálogos que contêm muitos atributos de produto (na escala de 3.000 a 2.3000 opções) foi aprimorado pela refatoração de como os arrays de opção de atributo são criados. _Correção enviada por Behnam Shayani na solicitação pull [25452](https://github.com/magento/magento2/pull/25452)_. [GitHub-20966](https://github.com/magento/magento2/issues/20966)

### Preços

<!-- ENGCOM-6647-->

* O aplicativo agora salva e exibe o preço correto para produtos hierárquicos mesmo depois de ter editado produtos várias vezes. Anteriormente, o aplicativo não salvava as últimas edições feitas no preço do produto. _Correção enviada por Ravi Chandra na solicitação de pull [26162](https://github.com/magento/magento2/pull/26162)_. [GitHub-25195](https://github.com/magento/magento2/issues/25195)

<!-- ENGCOM-6914-->

* As porcentagens de salvamento com desconto e fixo agora são aplicadas corretamente ao preço final de um pedido. Anteriormente, o aplicativo exibia uma porcentagem de economia de preço de camada incorreta (fixa e com desconto) na página de detalhes do produto. _Correção enviada por Sathish Subramanian na solicitação pull [26584](https://github.com/magento/magento2/pull/26584)_. [GitHub-26583](https://github.com/magento/magento2/issues/26583)

### Alerta de produto

<!-- MC-30255-->

* O email de alerta de estoque enviado aos clientes sobre o reabastecimento de um produto configurável agora contém o preço correto do produto. Anteriormente, esse email continha um preço de produto de 0.

<!-- MC-32873-->

* Agora o alerta de estoque de produtos para cancelar inscrição funciona quando a sessão de um usuário expira. Anteriormente, ao clicar no link **Clique aqui para parar os alertas deste produto**, o aplicativo exibia um erro 404.

<!-- MC-31979-->

* As ações de cancelamento de inscrição para alertas de produtos agora funcionam conforme esperado. Anteriormente, quando um cliente clicava no link **Clique aqui para parar os alertas deste produto**, o aplicativo exibia um erro 404.

### Vídeo do produto

<!-- MC-23743-->

* Agora você pode usar REST para atualizar vídeos do YouTube (PUT `rest/V1/products/{SKU}`). Anteriormente, o aplicativo exibia uma miniatura do vídeo, mas o player de vídeo não carregava quando você clicava no botão **Reproduzir**. [GitHub-23194](https://github.com/magento/magento2/issues/23194)

### Relatórios

<!-- ENGCOM-6635-->

* As listas de produtos agora solicitam produtos configuráveis por SKU, que agrupa produtos configuráveis por variações. Anteriormente, o relatório agrupava produtos por `product_id`. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [25858](https://github.com/magento/magento2/pull/25858)_. [GitHub-25856](https://github.com/magento/magento2/issues/25856)

<!-- ENGCOM-6427-->

* A tabela **Administrador** > **Relatórios** > **Atualizar Estatísticas** agora exibe o status **Atualizado em = Nulo** como **Nunca** na coluna **Atualizado** em vez de **indefinido**. _Correção enviada por Eden Duong na solicitação pull [25932](https://github.com/magento/magento2/pull/25932)_. [GitHub-25931](https://github.com/magento/magento2/issues/25931)

<!-- ENGCOM-6925-->

* O relatório de Baixo estoque não inclui mais produtos desativados. _Correção enviada por Mohamed-Asar na solicitação pull [26862](https://github.com/magento/magento2/pull/26862)_. [GitHub-26838](https://github.com/magento/magento2/issues/26838)

<!-- ENGCOM-7110-->

* O aplicativo agora exibe um valor preciso para o campo **Inícios do Acumulado no Ano** em **Admin** > **Lojas** > **Configuração** > **Geral** > **Relatórios**. _Correção enviada por Priya-V-Panchal na solicitação pull [27088](https://github.com/magento/magento2/pull/27088)_. [GitHub-27086](https://github.com/magento/magento2/issues/27086)

### Autorizações de devolução de produto (RMA)

<!-- MC-24906-->

* O aplicativo não exibe mais um erro quando você cria com êxito um pedido e o RMA na loja. Anteriormente, o aplicativo criava o RMA conforme esperado, mas também exibia este erro: `We can't create a return right now. Please try again later`.

<!-- MC-30181-->

* Os links de rastreamento incluídos nas devoluções de pedidos de vitrine agora funcionam como esperado. Anteriormente, quando um cliente clicava no link de rastreamento da remessa na página de devolução do pedido, o aplicativo exibia este erro: `PHP Fatal error: Uncaught Error: Call to a member function getTitle() on null in /app/z7kvt3uys6daq/var/view_preprocessed/pub/static/vendor/magento/module-shipping/view/frontend/templates/tracking/details.phtml:1`.

<!-- MC-30237-->

* A guia Devoluções agora está presente, conforme esperado, depois de criar um retorno de pedido do Administrador.

<!-- MC-34150-->

* Uma cadeia de caracteres desnecessária foi removida do modelo de email RMA (`app/code/Magento/Rma/view/frontend/email/new.html`).

### Resenhas

<!-- MC-29578-->

* O aplicativo agora desabilita o botão **Enviar Revisão** depois que o usuário clica no botão uma vez. Anteriormente, o aplicativo não desabilitava este botão após o primeiro clique e criava várias revisões quando o usuário clicava no botão **Enviar Revisão** várias vezes.

<!-- MC-31293-->

* A lista de filtros **Administrador** > **Relatórios** > **Avaliações** > **Por Produtos** agora exibe os resultados conforme esperado. Anteriormente, ao tentar filtrar essa lista, o aplicativo não exibia resultados.

<!-- ENGCOM-6938-->

* O item de menu Revisões Pendentes agora está ativado conforme esperado em **Admin** > **Marketing** > **Conteúdo de Usuário** > **Revisões Pendentes**.  _Correção enviada pelo Ravinder na solicitação de pull [26230](https://github.com/magento/magento2/pull/26230)_. [GitHub-26229](https://github.com/magento/magento2/issues/26229)

### Recompensas

<!-- MC-31459-->

* O aplicativo agora reembolsa pontos de premiação conforme esperado quando um pedido é devolvido a uma loja em execução em um ambiente de várias lojas em que diferentes taxas de ponto de premiação são definidas para cada loja. Anteriormente, o aplicativo não reembolsava pontos conforme o esperado para um pedido devolvido que era comprado usando pontos de recompensa.

### Vendas

<!-- MC-29426-->

* Os pedidos concluídos agora aparecem no sistema de pagamento e no Adobe Commerce. Anteriormente, os pedidos apareciam no sistema de pagamento, mas não no Adobe Commerce. [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-30000-->

* O aplicativo agora atende ao endereço de entrega padrão de um cliente. Anteriormente, o aplicativo não respeitava os endereços padrão de cobrança e envio, de acordo com as configurações, e a configuração **Igual ao endereço de cobrança** não era habilitada automaticamente.

<!-- MC-30299-->

* O aplicativo agora calcula corretamente os reembolsos para pedidos que incluem descontos. Anteriormente, o aplicativo calculava incorretamente o imposto e o desconto de envio, e o total reembolsado não correspondia ao total pago.

<!-- MC-33165-->

* O aplicativo agora atribui a ID de grupo correta quando um novo cliente cria um pedido em implantações de vários sites. Anteriormente, o aplicativo aplicava as configurações do grupo de clientes padrão.

<!-- MC-31786-->

* Os administradores com permissões restritas que incluem permissão de exibição para avisos de crédito, faturas e remessas agora podem exibir faturas e remessas na página Pedidos, conforme esperado. Anteriormente, quando um administrador restrito tentava exibir um pedido, o aplicativo exibia este erro: `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- MC-24023-->

* O aplicativo não exibe mais um erro quando um cliente adiciona uma quantidade de um produto ao carrinho que excede a metade do estoque de produtos existente, mas não excede o estoque total. Anteriormente, sob estas circunstâncias, o aplicativo exibia este erro: `The requested qty is not available`. [Github-24365](https://github.com/magento/magento2/issues/24365)

<!-- ENGCOM-6910-->

* Agora é possível adicionar um produto ao carrinho por meio do Administrador quando a quantidade em estoque é 1. Anteriormente, o aplicativo não adicionava o produto ao carrinho e exibia esta mensagem: `The requested qty is not available`. _Correção enviada por Serhii Petrychenko na solicitação de pull [26650](https://github.com/magento/magento2/pull/26650)._ [GitHub-25675](https://github.com/magento/magento2/issues/25675)

<!-- ENGCOM-7090-->

* O aplicativo agora exibe uma mensagem de erro informativa quando um administrador da loja tenta reordenar um produto cuja opção personalizada tenha um nome que excede o número máximo de caracteres. Anteriormente, nessas condições, o aplicativo exibia a página Relatório, não uma mensagem. _Correção enviada por Mudit Shukla na solicitação de pull [26348](https://github.com/magento/magento2/pull/26348)_. [GitHub-26345](https://github.com/magento/magento2/issues/26345)

<!-- ENGCOM-6328-->

* O layout do formulário de edição de informações de endereço da ordem de venda foi refatorado para corresponder às convenções da biblioteca de formulários de Administração. _Correção enviada por Alexey Rakitin na solicitação pull [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6007-->

* As caixas de seleção na seção Produtos da página **Catálogo** > **Categorias** agora funcionam conforme esperado.  _Correção enviada por Denis Kopylov na solicitação pull [22990](https://github.com/magento/magento2/pull/22990)_. [GitHub-22988](https://github.com/magento/magento2/issues/22988)

<!-- ENGCOM-6809-->

* O método `getCustomer` agora retorna o objeto do cliente conforme definido no bloco `phpdoc`. Anteriormente, esse método retornava `NULL`, e o bloco `phpdoc` não destacava que esse método poderia retornar `NULL`. _Correção enviada por Fanis Strezos na solicitação pull [26423](https://github.com/magento/magento2/pull/26423)_. [GitHub-25268](https://github.com/magento/magento2/issues/25268)

<!-- ENGCOM-6492-->

* Os repedidos agora estão desabilitados conforme esperado quando um comerciante desabilita o **Administrador** > **Loja** > **Configuração** > **Vendas** > **Reordenar** > **Permitir Pedido**.  _Correção enviada por Eden Duong na solicitação pull [26051](https://github.com/magento/magento2/pull/26051)_. [GitHub-25130](https://github.com/magento/magento2/issues/25130)

<!-- ENGCOM-6627-->

* O método `getPrice()` agora retorna um flutuante ou nulo em vez de uma cadeia de caracteres ao definir um preço personalizado para um pedido no Administrador.  _Correção enviada por Andrii Chorniy na solicitação pull [26313](https://github.com/magento/magento2/pull/26313)_. [GitHub-25968](https://github.com/magento/magento2/issues/25968)

<!-- ENGCOM-6786-->

* A coluna **Código de Estado e Título** de **Administrador** > **Lojas** > Configurações > **Status do Pedido** agora exibe o estado em vez do status conforme esperado.  _Correção enviada por Oleh Usik na solicitação pull [26569](https://github.com/magento/magento2/pull/26569)_. [GitHub-17847](https://github.com/magento/magento2/issues/17847)

<!-- ENGCOM-6936-->

* As faturas PDF agora capturam a data de compra correta quando criadas em um local GB. _Correção enviada por Eden Duong na solicitação pull [26701](https://github.com/magento/magento2/pull/26701)_. [GitHub-26675](https://github.com/magento/magento2/issues/26675)

### Regra de Vendas

<!-- MC-30155-->

* `quote_item.applied_rule_ids` foi atualizado conforme esperado depois que uma regra de preço de carrinho foi desabilitada. [GitHub-24526](https://github.com/magento/magento2/issues/24526)

<!-- MC-32229-->

* O aplicativo agora exibe árvores de categoria conforme esperado quando você tenta criar ou editar uma regra de preço de carrinho. Anteriormente, selecionar uma categoria na seção Condição ao criar ou editar uma regra resultava em erros de JavaScript.

<!-- ENGCOM-6824-->

* O aplicativo agora calcula corretamente os descontos fixos no nível do carrinho usando as regras de preço do carrinho quando um produto configurável é adicionado ao carrinho pela primeira vez. _Correção enviada por Lachlan Turner na solicitação pull [26623](https://github.com/magento/magento2/pull/26623)_. [GitHub-26622](https://github.com/magento/magento2/issues/26622)

### Pesquisar {#search-heading}

* O Elasticsearch 7.6.x agora é o mecanismo de pesquisa de catálogo padrão para o Adobe Commerce e o Adobe Commerce. Não é possível instalar ou atualizar para a versão 2.4.0 sem instalar também o Elasticsearch 7.6.x. O código do Elasticsearch versão 2.x foi removido. As versões 5.x e 6.x do Elasticsearch foram descontinuadas e não são mais suportadas. Consulte [pré-requisitos do mecanismo de pesquisa](../../../installation/prerequisites/search-engine/overview.md).

<!-- MC-23753-->

* O aplicativo agora renderiza os símbolos **&lt;** e **>** corretamente nas cadeias de caracteres de pesquisa do catálogo da loja.

<!-- MC-25010-->

* Os produtos agora são exibidos conforme esperado em categorias após a execução de `cron:run` em implantações que implementam o Elasticsearch.

<!-- MC-25254-->

* O aplicativo não requer mais uma reindexação de pesquisa completa para que um novo atributo de produto possa ser pesquisado na loja.

<!-- MC-29545-->

* O Elasticsearch agora funciona conforme esperado ao classificar uma lista de produtos que contém produtos agrupados por nomes de produtos em ordem alfabética.

<!-- MC-29951-->

* Os resultados da filtragem não incluem mais opções indisponíveis ao filtrar produtos configuráveis em uma categoria.

<!-- MC-30131-->

* A seleção de todos os produtos na página Lista de produtos usando o Elasticsearch agora exibe todos os produtos nos resultados da pesquisa, conforme esperado. Anteriormente, o aplicativo não exibia resultados de pesquisa.

<!-- MC-30201-->

* O Elasticsearch agora exibe corretamente os resultados das páginas de categoria quando você altera o número de resultados de pesquisa visualizados por página. Anteriormente, quando você alterava quantos resultados de pesquisa deveriam ser exibidos na página de resultados da pesquisa, o aplicativo exibia uma página em branco e este erro: `"0":"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'`

<!-- MC-32430-->

* A classificação de preços agora funciona corretamente para produtos configuráveis indisponíveis.

<!-- MC-25176-->

* O aplicativo não lança mais uma exceção quando um cliente usa a pesquisa rápida da loja em implantações de vários sites.

<!-- ENGCOM-6842-->

* O aplicativo não exibe mais um aviso quando um comerciante abre a página de termos de pesquisa clicando na opção Termos de pesquisa no rodapé do **Marketing** > **SEO e Pesquisa** > **Termos de Pesquisa**.  _Correção enviada por vishal-webkul na solicitação pull [25246](https://github.com/magento/magento2/pull/25246)_. [GitHub-25245](https://github.com/magento/magento2/issues/25245)

<!-- ENGCOM-7289-->

* O aplicativo não redimensiona mais o visor ao clicar na caixa de entrada de pesquisa ao executar o Safari na visualização móvel.  _Correção enviada por Pawe Tylek na solicitação pull [27603](https://github.com/magento/magento2/pull/27603). [GitHub-27506](https://github.com/magento/magento2/issues/27506)_

<!-- ENGCOM-6364-->

* As versões do Elasticsearch agora são identificadas pela notação X.x em vez da notação X.0+ no Admin (**Lojas** > Configurações > **Configuração** > **Catálogo** > **Catálogo** > **Pesquisa de Catálogo**). _Correção enviada pelo Andreas Mautz na solicitação pull [25838](https://github.com/magento/magento2/pull/25838)_. [GitHub-25674](https://github.com/magento/magento2/issues/25674)

### Envio

<!-- MC-32782-->

* Agora você pode enviar um pedido para vários endereços se um dos produtos pedidos for um produto virtual. Anteriormente, o aplicativo colocava com êxito o pedido dos produtos físicos, mas o pedido do produto virtual estava vazio.

<!-- MC-29276-->

* O aplicativo agora aplica descontos de valor fixo em todo o carrinho corretamente para pedidos enviados a vários endereços. Anteriormente, esse tipo de desconto era aplicado várias vezes quando um cliente realizava o check-out de um pedido usando Check-out com vários endereços. [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- MC-29444-->

* A lista suspensa que está disponível para selecionar métodos de envio durante o processo de criação de uma regra de preço de carrinho agora contém apenas valores válidos. Anteriormente, essa lista suspensa continha valores vazios ou extras.

<!-- MC-30186-->

* O aplicativo agora imprime as etiquetas de remessa como um arquivo `.pdf`, conforme esperado, quando você seleciona **Imprimir Etiqueta de Remessa** na lista suspensa Ação de um pedido na lista de arquivamento de pedido. Anteriormente, o aplicativo exibia um erro 404.

<!-- MC-31396-->

* As regras de Preço de envio gratuito agora afetam apenas os produtos relevantes quando um carrinho de compras contém produtos de categorias incluídas pela regra de Preço de envio gratuito, bem como produtos de categorias não incluídas na regra. Anteriormente, quando um carrinho de compras incluía produtos das categorias de frete gratuito e de outras categorias não incluídas na regra de preço, o frete gratuito não era aplicado a nenhum produto.

<!-- ENGCOM-6436-->

* O aplicativo não exibe mais uma página em branco em vez de exibir todas as transportadoras na caixa suspensa/de seleção múltipla. Anteriormente, ocorreu um erro na função `toOptionArray` em `vendor/magento/module-shipping/Model/Config/Source/Allmethods.php`. _Correção enviada por Marc Rodriguez na solicitação de pull [25315](https://github.com/magento/magento2/pull/25315)_. [GitHub-13136](https://github.com/magento/magento2/issues/13136)

* O aplicativo não aplica mais um desconto de quantia fixa várias vezes quando um cliente cria um pedido que será enviado a vários endereços.  _Correção enviada por Mahesh Singh na solicitação pull [26419](https://github.com/magento/magento2/pull/26419)_. [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- ENGCOM-6523-->

* Os plug-ins para `Magento\Ups\Model\Carrier` que implementam o `di.xml` personalizado agora funcionam corretamente no modo de desenvolvedor. Anteriormente, o aplicativo exibia este erro: `1 exception(s): Exception #0 (BadMethodCallException): Missing required argument $data of Magento\Ups\Model\Carrier`. _Correção enviada por Bartomiej Szubert na solicitação pull [26130](https://github.com/magento/magento2/pull/26130)_. [GitHub-25390](https://github.com/magento/magento2/issues/25390)

### Mapa do site

<!-- MC-29362-->

* O aplicativo agora usa o URL base do projeto conforme esperado ao gerar um mapa de site.

<!-- ENGCOM-6670-->

* Os mapas de site gerados agora incluem o URL da página inicial. _Correção enviada pela deepaksnair na solicitação pull [26445](https://github.com/magento/magento2/pull/26445)_. [GitHub-25761](https://github.com/magento/magento2/issues/25761)

### Estágios

<!-- MC-32342-->

* Os administradores com acesso restrito a apenas um site em uma implantação multissite agora podem visualizar uma Atualização programada para esse site. Anteriormente, a pré-visualização do preparo usava o armazenamento padrão por padrão e, se o usuário não tivesse acesso ao armazenamento padrão, o aplicativo lançava uma exceção.

<!-- MC-32736-->

* A edição de um agendamento existente não resulta mais em um agendamento duplicado. Anteriormente, quando você editava um agendamento existente, o aplicativo o duplicava e, quando você tentava abrir o agendamento duplicado, o aplicativo exibia um erro.

<!-- MC-32432-->

* Os produtos de venda cruzada agora são exibidos conforme esperado nas páginas Exibir e Editar carrinho após criar uma Atualização de programação para um ou mais desses produtos.

### Loja

<!-- MC-25187-->

* As sessões do cliente agora persistem conforme esperado quando um cliente faz logon em uma loja, adiciona produtos ao carrinho de compras e, em seguida, muda para uma nova loja em uma implantação de várias lojas. Anteriormente, quando o cliente navegava para a segunda loja, o aplicativo fazia logoff do cliente e esvaziava o carrinho de compras.

<!-- ENGCOM-4781-->

* O aplicativo agora exclui registros relacionados a uma exibição de repositório excluída das tabelas `sale_sequence_meta` e `sales_sequence_profile` conforme esperado. _Correção enviada por Bartomiej Szubert na solicitação pull [22296](https://github.com/magento/magento2/pull/22296)_. [GitHub-14958](https://github.com/magento/magento2/issues/14958)

<!-- ENGCOM-6869-->

* O alternador de loja agora funciona conforme esperado ao alternar entre lojas com URLs de base diferentes. Anteriormente, quando um cliente usava o alternador de armazenamento para alternar entre armazenamentos, a solicitação falhava se o armazenamento de destino tivesse um URL de base diferente do armazenamento atual. _Correção enviada por Tobias Nilsson na solicitação pull [26548](https://github.com/magento/magento2/pull/26548)_. [GitHub-23755](https://github.com/magento/magento2/issues/23755), [GitHub-26384](https://github.com/magento/magento2/issues/26384)

### Amostras

<!-- MC-30294-->

* Agora os comerciantes podem adicionar atributos de amostra de cor com êxito aos produtos usando a opção **Amostra Visual** em **Lojas** > **Atributos** > **Produto** > **Novo Atributo**. Anteriormente, um erro de JavaScript era disparado quando você tentava abrir o atributo de amostra recém-criado.

<!-- ENGCOM-6750-->

* O Preço mínimo anunciado agora muda conforme esperado quando um cliente seleciona uma nova opção de amostra para um produto configurável. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [26241](https://github.com/magento/magento2/pull/26241)_. [GitHub-26240](https://github.com/magento/magento2/issues/26240)

<!-- ENGCOM-6685-->

* O aplicativo não duplica mais o Preço mínimo anunciado de um produto configurável quando você seleciona uma nova opção de amostra. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [26317](https://github.com/magento/magento2/pull/26317)_. [GitHub-26314](https://github.com/magento/magento2/issues/26314)

<!-- ENGCOM-6966-->

* Correção de problemas com o comportamento do menu suspenso na área Gerenciar amostra (valores do seu atributo) da página Novo atributo do produto.  _Correção enviada por Oleh Usik na solicitação pull [26090](https://github.com/magento/magento2/pull/26090)_. [GitHub-25910](https://github.com/magento/magento2/issues/25910)

### RegraDeDestino

<!-- MC-31546-->

* O bloco de produtos relacionado exibido para um produto na loja agora exibe os produtos que atenderam aos critérios definidos na Regra de produto relacionado. Anteriormente, o aplicativo não exibia nenhum produto relacionado.

### Imposto

<!-- MC-29579-->

* O aplicativo agora atualiza as taxas e os preços de envio conforme esperado quando um cliente altera o país de destino para um pedido durante a finalização da compra.

<!-- MC-30546-->

* O frete gratuito agora é aplicado conforme esperado com base na regra de preço do carrinho aplicável. Anteriormente, as regras de preço do carrinho não levavam em conta os impostos ao calcular se um pedido atendia aos critérios de frete gratuito.

<!-- MC-32402-->

* O aplicativo não lança mais um erro quando você edita e salva o grupo de clientes `NOT LOGGED IN` quando B2B é instalado.

### Teste

>[!NOTE]
>
>**O MFTF agora usa o Google Authenticator para executar testes com 2FA habilitado. O MFTF não funcionará com 2.4.0 sem etapas de configuração adicionais para habilitar o Google Authenticator**. Consulte [Configurando MFTF para Autenticação de Dois Fatores (2FA)](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/#magento-functional-testing-framework).

<!-- ENGCOM-6585-->

* URLs codificados em testes e Grupos de ação foram substituídos por referências de página. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull 117 no repositório privado partners-magento2ee_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-7273-->

* Os testes agora abrangem a tarefa de registrar Ações de administrador relacionadas às páginas do CMS. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull 172 no repositório privado partners-magento2ee_. [GitHub-171](https://github.com/magento/magento2/issues/171)

<!-- ENGCOM-7040 7051-->

* Nomes de testes funcionais inválidos foram revisados para seguir as práticas recomendadas. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull [27118](https://github.com/magento/magento2/pull/27118) e na solicitação de pull 151 no repositório privado partners-magento2ee. [GitHub-27117](https://github.com/magento/magento2/issues/27117)_

<!-- ENGCOM-7026-->

* O Adobe Commerce `cron` agora é usado para reindexação após a criação de dados de teste, e onde aplicável, `cache:flush config` substitui `cache:flush`. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26990](https://github.com/magento/magento2/pull/26990)_. [GitHub-26989](https://github.com/magento/magento2/issues/26989)

<!-- ENGCOM-7421-->

* Os testes de aceitação agora seguem convenções de nomenclatura para `Magento/Indexer` e `Magento/Backup` módulos.  _Correção enviada por Shankar Konar na solicitação pull [27515](https://github.com/magento/magento2/pull/27515)_. [GitHub-27503](https://github.com/magento/magento2/issues/27503)

<!-- ENGCOM-6791 6825-->

* O teste `AdminReorderWithCatalogPrice` foi refatorado e não falha mais durante o processo de validação de CI. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull 135 no repositório privado partners-magento2ee_. [GitHub-26607](https://github.com/magento/magento2/issues/26607)

<!-- ENGCOM-6780 6795-->

* Os testes `AdminAddingNewOptionsWithImagesAndPricesToConfigurableProduct` e `StorefrontApplyPromoCodeDuringCheckout` foram refatorados e não falham mais durante o processo de validação de CI. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26611](https://github.com/magento/magento2/pull/26611) e na solicitação pull [26614](https://github.com/magento/magento2/pull/26614)_. [GitHub-26612](https://github.com/magento/magento2/issues/26612), [GitHub-26610](https://github.com/magento/magento2/issues/26610)

<!-- ENGCOM-6621-->

* Os testes `DeleteProduct and DeleteCustomer Action Groups` foram refatorados e não falham mais durante o processo de validação de CI. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26407](https://github.com/magento/magento2/pull/26407)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

<!-- ENGCOM-6608-->

* Os testes `AdminMoveAnchoredCategoryTest.xml` foram refatorados e não falham mais durante o processo de validação de CI. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26395](https://github.com/magento/magento2/pull/26395)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

#### Testes de integração

<!-- ENGCOM-7143-->

* Solicitações consecutivas em testes de integração não falham mais. Anteriormente, os testes falhavam porque os objetos de solicitação eram compartilhados entre os despachos. O método `resetRequest` agora esvazia o estado de `request`. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [27300](https://github.com/magento/magento2/pull/27300)_. [GitHub-27299](https://github.com/magento/magento2/issues/27299)

<!-- ENGCOM-7262-->

* Testes de integração adicionais foram adicionados para cobrir recursos de email do `Magento_Customer`. _Correção enviada por Lukasz Bajsarowicz na solicitação pull [27606](https://github.com/magento/magento2/pull/27606)_. [GitHub-27607](https://github.com/magento/magento2/issues/27607)

#### Testes de unidade do PHP

<!-- ENGCOM-7435 7306-->

* Testes de unidade PHP não lançam mais este erro fatal: `Fatal error: Class Mock_CartExtensionInterface_0ba80a0b contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (Magento\Quote\Api\Data\CartExtensionInterface::getAmazonOrderReferenceId, Magento\Quote\Api\Data\CartExtensionInterface::setAmazonOrderReferenceId) in /var/www/html/vendor/phpunit/phpunit-mock-objects/src/Generator.php(264) : eval()'d code on line 1`. _Correção enviada por Lukasz Bajsarowicz em solicitações pull 178 no repositório privado partners-magento2ee e [27701](https://github.com/magento/magento2/pull/27701)_. [GitHub-27638](https://github.com/magento/magento2/issues/27638)

<!-- ENGCOM-7271-->

* Os testes para `Offline_Payments` agora são compatíveis com PHPUnit 8.  _Correção enviada por Cristiano Pacheco na solicitação pull [27627](https://github.com/magento/magento2/pull/27627)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-7243 7284 7291-->

* Testes de unidade para `Framework`, `AdminAnalytics`, `AdminNotification`, e `AMPQ` foram atualizados para PHPUnit 8. _Correção enviada por Ihor Sviziev nas solicitações pull [27522](https://github.com/magento/magento2/pull/27522), [27521](https://github.com/magento/magento2/pull/27521), [27519](https://github.com/magento/magento2/pull/27519), [27522](https://github.com/magento/magento2/pull/27522)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-6542-->

* Agora você pode executar o teste de unidade `\Magento\Downloadable\Test\Unit\Helper\DownloadTest` sem estar conectado à Internet.  _Correção enviada pelo aleromano89 na solicitação pull [26264](https://github.com/magento/magento2/pull/26264)_. [GitHub-23521](https://github.com/magento/magento2/issues/23521)

<!-- ENGCOM-6695-->

* Adição do teste de unidade para `app/code/Magento/Fedex/Model/Source/Generic.php`. _Correção enviada por Sathish Subramanian na solicitação pull [26549](https://github.com/magento/magento2/pull/26549)_.

<!-- ENGCOM-7251 7283 7472-->

* `<magentoCron>` foi adicionado a vários testes, o que aciona uma reindexação parcial. Essas alterações abordam problemas que criaram falsos negativos em testes funcionais que cobriam `Magento_Bundle`, `CatalogImportExport`, `CatalogInventory`, `CatalogRule`, `Backend`, `Braintree` e `Captcha`. _Correção enviada por Lukasz Bajsarowicz em solicitações pull [27322](https://github.com/magento/magento2/pull/27322), [27323](https://github.com/magento/magento2/pull/27323), [27321](https://github.com/magento/magento2/pull/27321)_. [GitHub-27320](https://github.com/magento/magento2/issues/27320)

<!-- ENGCOM-6844-->

* Todos os usos incorretos de `<amOnPage>` foram substituídos por um `<actionGroup>` apropriado para logout de Administrador, onde aplicável em testes. _Correção enviada por Lukasz Bajsarowicz na solicitação de pull 116 no repositório privado partners-magento2ee_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-6352-->

* Cada grupo de ação em um teste foi movido para um arquivo separado para seguir as práticas recomendadas do MFTF e nomes de arquivo inconsistentes foram revisados. Os testes dos seguintes módulos foram afetados:

   * module-catalog-permissions
   * catálogo compartilhado de módulo
   * module-catalog-event
   * module- banner
   * module- admin- gws
   * module- advanced- checkout
   * envio de módulo
   * module- ui
   * envio de módulo
   * module- checkout- address- search
   * module-sales
   * catálogo de módulos
   * module-catalog-rule-staging
   * module-visual-merchandiser
   * module-customer

  _Correção enviada por Lukasz Bajsarowicz em solicitações pull [25800](https://github.com/magento/magento2/pull/25800), [26323](https://github.com/magento/magento2/pull/26323), [26321](https://github.com/magento/magento2/pull/26321), [26320](https://github.com/magento/magento2/pull/26320), [26319](https://github.com/magento/magento2/pull/26319), [26322](https://github.com/magento/magento2/pull/26322), [25828](https://github.com/magento/magento2/pull/25828)}, [26329](https://github.com/magento/magento2/pull/26329) (e pull requests 104, 105, 106, 107, 108, 109, 111, 119, 120, 121 em private repository partners-magento2ee)_. [GitHub-22853](https://github.com/magento/magento2/issues/22853)

### Tema

<!-- MC-29804-->

* Resolvemos um erro em `JsFooterPlugin.php` que afetou a exibição de blocos dinâmicos. Anteriormente, o aplicativo exibia este erro quando você acessava diretamente `/banner/ajax/load/url`: `Uncaught TypeError: strpos() expects parameter 1 to be string, null given in`.

<!-- ENGCOM-6708-->

* O método `i18n` fornece a capacidade de adicionar uma cadeia de caracteres para sublinhar modelos.  _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [26435](https://github.com/magento/magento2/pull/26435)_. [GitHub-18012](https://github.com/magento/magento2/issues/18012)

<!-- ENGCOM-6666-->

* O módulo `section-config` foi refatorado. Esta refatoração reduziu erros causados por módulos de terceiros que fazem solicitações de POST ou solicitam dados do cliente diretamente antes do módulo ser inicializado por `data-mage-init`. _Correção enviada por Mateusz Krzeszowiak na solicitação pull [25764](https://github.com/magento/magento2/pull/25764)_. [GitHub-17125](https://github.com/magento/magento2/issues/17125)

<!-- ENGCOM-6924-->

* `LoadCssAsync` erros de formato de HTML foram corrigidos. _Correção enviada por Sathish Subramanian na solicitação pull [26764](https://github.com/magento/magento2/pull/26764)_. [GitHub-26760](https://github.com/magento/magento2/issues/26760)

<!-- ENGCOM-7052-->

* Quando você cria arquivos do `default.xml` e do `catalog_product_view.xml` como parte da criação de um novo tema, o aplicativo cria essas páginas ou registra erros nos arquivos de log conforme esperado. Anteriormente, o aplicativo registrava erros no arquivo `vendor/magento/framework/View/Page/Config/Renderer.php`. _Correção enviada por Vinh Le na solicitação de pull [27026](https://github.com/magento/magento2/pull/27026)_. [GitHub-27009](https://github.com/magento/magento2/issues/27009)

### Tradução e códigos de idiomas

<!-- MC-24186-->

* A tradução embutida agora funciona como esperado na loja quando **Admin** > **Lojas** > **Configuração** > **Avançado** > **Desenvolvedor** > **Traduzir Inline** > **Habilitado para a Loja** está definida.

<!-- MC-31663-->

* A tradução em linha agora funciona conforme esperado quando ativada para uma loja.

<!-- ENGCOM-7064-->

* As chaves de URL do produto agora são transliteradas conforme esperado. _Correção enviada por DanieliMi na solicitação pull [26506](https://github.com/magento/magento2/pull/26506)_. [GitHub-26499](https://github.com/magento/magento2/issues/26499)

<!-- ENGCOM-6899-->

* A localidade `es_US Spanish (United States)` agora tem suporte. _Correção enviada por Vinh Le na solicitação de pull [26857](https://github.com/magento/magento2/pull/26857)_. [GitHub-26843](https://github.com/magento/magento2/issues/26843)

<!-- ENGCOM-6996-->

* A contagem numérica de espaços reservados e a contagem de espaços reservados do código JavaScript agora são a mesma. Anteriormente, o código JavaScript assumia 0%, enquanto a contagem numérica de espaços reservados começava com %1.  _Correção enviada por korostii na solicitação pull [25359](https://github.com/magento/magento2/pull/25359)_. [GitHub-25243](https://github.com/magento/magento2/issues/25243)

<!-- ENGCOM-6557-->

* Agora é possível desabilitar a tradução do título da página da página Detalhes do produto (`page.main.title`), que é habilitada por padrão. _Correção enviada por Bartomiej Szubert na solicitação pull [26269](https://github.com/magento/magento2/pull/26269)_. [GitHub-7065](https://github.com/magento/magento2/issues/7065)

<!-- ENGCOM-7465-->

* Problemas com a renderização de árabe e hebraico em PDF de fatura foram resolvidos. _Correção enviada por Ihor Sviziev na solicitação pull [27887](https://github.com/magento/magento2/pull/27887)_. [GitHub-25769](https://github.com/magento/magento2/issues/25769)

<!-- ENGCOM-6646-->

* A ordem de herança do pacote de idiomas agora é aplicada em uma base listada pela primeira vez, conforme esperado e descrito na documentação.  _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [26420](https://github.com/magento/magento2/pull/26420)_. [GitHub-8691](https://github.com/magento/magento2/issues/8691)

<!-- ENGCOM-6443-->

* O aplicativo agora exibe esta mensagem de erro quando você insere um caractere não-latino para um nome de pasta em localidades onde há suporte apenas para letras latinas: `Please rename the folder using only Latin letters, numbers, underscores and dashes`. _Correção enviada por Eden Duong na solicitação pull [25904](https://github.com/magento/magento2/pull/25904). [GitHub-25896](https://github.com/magento/magento2/issues/25896)_

<!-- ENGCOM-6539-->

* O comprimento da coluna `locale` para `directory_country_region_name` foi aumentado de 8 para 16 para dar suporte a localidades como `zh_Hans_CN`. _Correção enviada por Bartomiej Szubert na solicitação pull [26268](https://github.com/magento/magento2/pull/26268)_. [GitHub-14001](https://github.com/magento/magento2/issues/14001)

### IU

<!-- MC-32547-->

* Agora você pode usar o Page Builder para adicionar um produto como um link de botão (**Editar conteúdo** > **Link de botão**). Anteriormente, o aplicativo exibia este erro quando você tentava selecionar o produto: `Product with ID: XXXX doesn't exist`.

<!-- ENGCOM-7490-->

* O botão Voltar agora funciona como esperado de **Admin** > **Lojas** > **Status do Pedido** > **Editar Status do Pedido**. _Correção enviada por Vadim Malesh na solicitação pull [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/magento2/issues/1270)

<!-- ENGCOM-6692-->

* As imagens de visualização não são mais alteradas inesperadamente quando você usa as teclas de seta para mover o cursor no campo **Nome do arquivo** da lista do Adobe Stock. _Correção enviada por Adarsh Manickam na solicitação pull [25991](https://github.com/magento/magento2/pull/25991)_. [GitHub-847](https://github.com/magento/magento2/issues/847)

<!-- ENGCOM-6414-->

* O campo **Sua Senha** na seção Verificação de Identidade do Usuário Atual da página **Administrador** > **Sistema** > **Integrações** agora herda estilos conforme esperado. _Correção enviada por Eduard Chitoraga na solicitação pull [25918](https://github.com/magento/magento2/pull/25918)_. [GitHub-25917](https://github.com/magento/magento2/issues/25917)

<!-- ENGCOM-6482-->

* A entrada validada pelo validador do JavaScript na loja também passará na validação pelo Administrador. Anteriormente, o validador JavaScript contava novas linhas como um único caractere na loja, mas no lado do servidor, `\Magento\Catalog\Model\Product\Option\Type\maxCharacters` contava novas linhas como dois caracteres. _Correção enviada por Grzegorz Bogusz na solicitação pull [26033](https://github.com/magento/magento2/pull/26033)_. [GitHub-25974](https://github.com/magento/magento2/issues/25974)

<!-- ENGCOM-6517-->

* A marca `subTitle` não é mais apagada quando você altera um título modal usando a chamada `setTitle()`. Anteriormente, ao tentar criar um pop-up ou modal personalizado com um título e subtítulo e, em seguida, alterar o título com o método `setTitle()`, o `subTitle` era apagado. _Correção enviada por Andrea Parmeggiani na solicitação pull [26142](https://github.com/magento/magento2/pull/26142)_. [GitHub-26141](https://github.com/magento/magento2/issues/26141)

<!-- ENGCOM-6464-->

* O submenu na guia Marketing de administrador agora se ajusta automaticamente ao comprimento dos itens de menu, conforme esperado.  Agora, também é possível rolar horizontalmente.  _Correção enviada por Paweł Tylek na solicitação pull [26034](https://github.com/magento/magento2/pull/26034)_. [GitHub-18687](https://github.com/magento/magento2/issues/18687)

<!-- ENGCOM-6519-->

* A tabela `quote` coluna `customer_note` agora usa o tipo `text` conforme esperado. Anteriormente, ele usava o tipo `varchar(255)`. _Correção enviada por Ravi Chandra na solicitação de pull [26160](https://github.com/magento/magento2/pull/26160)_. [GitHub-26155](https://github.com/magento/magento2/issues/26155)

<!-- ENGCOM-7153-->

* Problemas de exibição corrigidos com o cabeçalho da tabela na tabela **Minha Conta** > **Catálogo de Endereços** Entradas de Endereços.  _Correção enviada por Abrar Pathan na solicitação pull [27336](https://github.com/magento/magento2/pull/27336)_. [GitHub-27335](https://github.com/magento/magento2/issues/27335)

<!-- ENGCOM-5986-->

* O símbolo de moeda usado na Etapa de preço da navegação em camadas agora se baseia nas configurações padrão, conforme esperado.  _Correção enviada por Bartomiej Szubert na solicitação pull [24815](https://github.com/magento/magento2/pull/24815)_. [GitHub-21684](https://github.com/magento/magento2/issues/21684)

<!-- ENGCOM-6324-->

* O símbolo da moeda bielorrussa (BYR) foi atualizado para BYN. _Correção enviada por Bartomiej Szubert na solicitação pull [25723](https://github.com/magento/magento2/pull/25723)_. [GitHub-24713](https://github.com/magento/magento2/issues/24713)

<!-- ENGCOM-6622-->

* A seção Comparar produtos da página Catálogo agora é exibida, conforme esperado, na exibição móvel em exibições com resoluções inferiores a 767px. _Correção enviada pelo Hitesh na solicitação de pull [26418](https://github.com/magento/magento2/pull/26418)_. [GitHub-26416](https://github.com/magento/magento2/issues/26416)

<!-- ENGCOM-6376-->

* A rolagem de páginas de produtos agora funciona conforme esperado na exibição móvel.  _Correção enviada por Mateusz Krzeszowiak na solicitação pull [25385](https://github.com/magento/magento2/pull/25385)_. [GitHub-10518](https://github.com/magento/magento2/issues/10518), [GitHub-21717](https://github.com/magento/magento2/issues/21717)

<!-- ENGCOM-6368-->

* Agora você pode rolar pelas imagens em miniatura da galeria na página do produto na exibição móvel, conforme esperado. _Correção enviada por iGerchak na solicitação pull [25839](https://github.com/magento/magento2/pull/25839)_. [GitHub-21014](https://github.com/magento/magento2/issues/21014)

<!-- ENGCOM-6425-->

* Clicar no Título do Tema em **Admin** > **Conteúdo** > **Temas** não resulta mais em registros duplicados. _Correção enviada por Eden Duong na solicitação pull [25926](https://github.com/magento/magento2/pull/25926)_. [GitHub-25925](https://github.com/magento/magento2/issues/25925)

<!-- ENGCOM-6328-->

* O layout da página Endereço de cobrança do administrador/Endereço de entrega foi refatorado para atender às convenções de exibição do formulário do administrador. _Correção enviada por Alexey Rakitin na solicitação pull [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-23481](https://github.com/magento/magento2/issues/23481), [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6628 6593-->

* O link Adicionar para comparar na página de detalhes do produto agora é renderizado corretamente na exibição móvel em exibições com resolução inferior a 640px. _Correção enviada por Pawe Tylek na solicitação pull [26424](https://github.com/magento/magento2/pull/26424) e Tejash Kumbhare na solicitação pull [26365](https://github.com/magento/magento2/pull/26365)_. [GitHub-26364](https://github.com/magento/magento2/issues/26364)

<!-- ENGCOM-6607-->

* O rótulo **Classificar por** não se sobrepõe mais ao botão **Comprar por** na página de categoria do modo de exibição móvel. _Correção enviada por Andrii Kartavtsev na solicitação pull [26381](https://github.com/magento/magento2/pull/26381)_. [GitHub-25300](https://github.com/magento/magento2/issues/25300)

<!-- ENGCOM-7137-->

* Agora é possível atualizar o valor da amostra e do título do link de um produto baixável habilitando a caixa de seleção **Usar padrão**. _Correção enviada por Abel Truong na solicitação pull [27295](https://github.com/magento/magento2/pull/27295)_. [GitHub-27169](https://github.com/magento/magento2/issues/27169)

<!-- ENGCOM-6532-->

* Espaçamento corrigido entre o botão **Atualizar** e o campo **Quantidade** no minicarrinho.  _Correção enviada pelo Hitesh na solicitação de pull [26234](https://github.com/magento/magento2/pull/26234)_. [GitHub-26227](https://github.com/magento/magento2/issues/26227)

<!-- ENGCOM-7032-->

* A cor da borda inferior da tabela Entradas Adicionais de Endereço na página Catálogo de Endereços agora corresponde à cor da borda `thead` e `tbody`. _Correção enviada por Tejash Kumbhare na solicitação pull [26649](https://github.com/magento/magento2/pull/26649)_. [GitHub-26648](https://github.com/magento/magento2/issues/26648)

<!-- ENGCOM-7195-->

* Os modais de prompt não executam mais uma ação de confirmação quando um usuário clica na sobreposição modal. _Correção enviada por Serhiy Zhovnir na solicitação pull [27399](https://github.com/magento/magento2/pull/27399)_.

### URL

<!-- ENGCOM-7112-->

* O repositório de categorias (método salvar) foi refatorado, o que anteriormente impedia a criação de caminhos exclusivos ao alterar uma chave de URL de categoria. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27304](https://github.com/magento/magento2/pull/27304)_. [GitHub-14080](https://github.com/magento/magento2/issues/14080)

<!-- ENGCOM-7208-->

* A validação da lógica de chave de URL da categoria foi aprimorada. _Correção enviada por Sergiy Vasiutynskyi na solicitação pull [27412](https://github.com/magento/magento2/pull/27412)_. [GitHub-13689](https://github.com/magento/magento2/issues/13689)

### Substituições de URL

<!-- MC-31147-->

* Os clientes que alteram o idioma em uma página do CMS agora podem navegar com êxito para a exibição de loja selecionada. Anteriormente, o aplicativo exibia um erro 404.

<!-- ENGCOM-6997-->

* A geração de regravação de URL para URLs de produtos para os quais você ativou a inclusão do caminho de categoria agora funciona conforme esperado. Anteriormente, em implantações com várias exibições de loja, o aplicativo às vezes gerava regravações de URL incorretas usando o valor padrão do caminho de URL da categoria em vez do caminho de URL específico da loja. _Correção enviada por Pieter Hoste na solicitação pull [26784](https://github.com/magento/magento2/pull/26784)_. [GitHub-25124](https://github.com/magento/magento2/issues/25124), [GitHub-11616](https://github.com/magento/magento2/issues/11616)

<!-- ENGCOM-6995-->

* Adicionamos uma verificação para impedir redirecionamentos de URL se o caminho da solicitação for o mesmo que o caminho de destino. _Correção enviada por Bartomiej Szubert na solicitação pull [26902](https://github.com/magento/magento2/pull/26902)_. [GitHub-20309](https://github.com/magento/magento2/issues/20309)

<!-- ENGCOM-6303-->

* As operações de reescrita de URL não removem mais uma string de consulta de um URL quando o URL tem uma barra à direita.  _Correção enviada por Alexey Arendarenko na solicitação pull [25603](https://github.com/magento/magento2/pull/25603)_. [GitHub-18717](https://github.com/magento/magento2/issues/18717)

### IVA

<!-- ENGCOM-7458-->

* Corrigido o URL de Validação de IVA para [números de IVA da UE](https://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl).  _Correção enviada por Shikha Mishra na solicitação pull [27886](https://github.com/magento/magento2/pull/27886)_. [GitHub-27874](https://github.com/magento/magento2/issues/27874)

### Visual Merchandiser

<!-- MC-31136-->

* A página Editar categoria agora se comporta conforme esperado quando você arrasta e solta produtos em uma nova posição. Anteriormente, arrastar e soltar produtos em qualquer página de categoria reposicionava a janela de exibição na parte superior da página.

### Estrutura da API da Web

<!-- MC-29891-->

* Correção de problemas com chamadas POST `/rest/default/async/bulk/V1/orders`.

<!-- MC-30675-->

* Correção de problemas com chamadas POST `/rest/default/async/bulk/V1/products`.

<!-- ENGCOM-6945-->

* O método `getList` foi refatorado para recuperar o atributo de extensão `is_subscribed`. Anteriormente, não era possível recuperar esse atributo ao buscar uma entidade do cliente por meio da API. _Correção enviada por enriquei4 na solicitação de pull [25311](https://github.com/magento/magento2/pull/25311)_. [GitHub-13252](https://github.com/magento/magento2/issues/13252)

<!-- ENGCOM-6500-->

* A atualização de informações do cliente por meio do `/V1/customers/:id` não redefine desnecessariamente o `group_id`. Anteriormente, ao atualizar um cliente por meio do REST, o grupo de clientes era alterado para 1 se o corpo não contivesse um grupo de clientes. _Correção enviada por MaxRomanov4669 na solicitação pull [25958](https://github.com/magento/magento2/pull/25958)_. [GitHub-14663](https://github.com/magento/magento2/issues/14663)

<!-- ENGCOM-6920-->

* Os getters anuláveis em contratos de serviço não lançam erros de reflexão quando usados na API da Web. Métodos que podem retornar nulo e um tipo válido agora funcionam corretamente independentemente da ordem também.  _Correção enviada por Marco K̦pcke na solicitação pull [25806](https://github.com/magento/magento2/pull/25806)_. [GitHub-25656](https://github.com/magento/magento2/issues/25656)

<!-- ENGCOM-7075-->

* Agora você pode usar o POST `/V1/guest-carts/:cartId/items` para adicionar produtos a um carrinho específico. Anteriormente, quando você usou esta chamada, o aplicativo ignorou o valor de `cartId`. _Correção enviada por Vadim Malesh na solicitação pull [27172](https://github.com/magento/magento2/pull/27172)_. [GitHub-14086](https://github.com/magento/magento2/issues/14086)

<!-- ENGCOM-7102-->

* Agora você pode usar o ponto de extremidade `PUT /V1/cmsPage/:id` para salvar um título de página do CMS sem alterar os valores de outros campos. _Correção enviada por Vadim Malesh na solicitação pull [27237](https://github.com/magento/magento2/pull/27237)_. [GitHub-24704](https://github.com/magento/magento2/issues/24704)

<!-- ENGCOM-7011-->

* A paginação dos resultados de solicitações REST agora é precisa. Anteriormente, ao solicitar resultados de uma página específica (por exemplo, `page_size` = 1 e um valor `current_page` que estava fora do escopo), a chamada retornada repetia a última página de resultados em vez de uma mensagem informativa.  _Correção enviada por Lukasz Bajsarowicz na solicitação pull [26988](https://github.com/magento/magento2/pull/26988)_. [GitHub-26986](https://github.com/magento/magento2/issues/26986), [GitHub-8099](https://github.com/magento/magento2/issues/8099)

<!-- ENGCOM-6540-->

* O resultado de GET `/V1/orders/items/{id}` agora inclui um elemento de atributo de extensão que inclui dados de mensagem de presente. _Correção enviada por Laura Folco na solicitação de pull [25946](https://github.com/magento/magento2/pull/25946)_. [GitHub-19093](https://github.com/magento/magento2/issues/19093)

### Lista de desejos

<!-- MC-29988-->

* Uma lista de desejos agora funciona conforme esperado quando é ativada no nível da visualização da loja e desativada no nível global. Anteriormente, quando essas configurações estavam em vigor, adicionar um produto a uma lista de desejos resultava em um erro 404.

<!-- MC-30196-->

* Agora o aplicativo salva e exibe corretamente um novo nome para uma lista de desejos ao renomear uma lista de desejos em implantações que contêm várias listas de desejos. Anteriormente, o aplicativo continuava a exibir o antigo nome da lista de desejos.

<!-- MC-31948-->

* Agora você pode navegar e modificar listas de desejos do carrinho em implantações que executam o Internet Explorer 11.x. Anteriormente, não era possível criar, editar ou mover uma lista de desejos neste ambiente.

<!-- ENGCOM-6518-->

* Melhoramos a mensagem de erro que é exibida quando um cliente tenta compartilhar sua lista de desejos com mais endereços de email do que o permitido.  _Correção enviada por divyajyothi5321 na solicitação pull [26066](https://github.com/magento/magento2/pull/26066)_. [GitHub-26064](https://github.com/magento/magento2/issues/26064)

<!-- ENGCOM-6723-->

* O aplicativo agora exibe a página Minha lista de desejos como esperado em exibições com resolução superior a 768px e inferior a 1023px. _Correção enviada pelo Hitesh na solicitação de pull [26546](https://github.com/magento/magento2/pull/26546)_. [GitHub-26543](https://github.com/magento/magento2/issues/26543)

<!-- ENGCOM-7062-->

* O email gerado ao clicar em **Compartilhar lista de desejos** agora exibe as mesmas imagens de produto que a página Lista de desejos. _Correção enviada por Michael Bottens na solicitação de pull [27125](https://github.com/magento/magento2/pull/27125). [GitHub-27124](https://github.com/magento/magento2/issues/27124)_

<!-- ENGCOM-6602-->

* Agora, os clientes podem adicionar a uma lista de desejos um produto simples que faça parte de um produto agrupado e o mesmo produto simples com uma quantidade diferente.  _Correção enviada por MaxRomanov4669 na solicitação pull [26258](https://github.com/magento/magento2/pull/26258)_. [GitHub-11209](https://github.com/magento/magento2/issues/11209)

### WYSIWYG

<!-- ENGCOM-6275-->

* O carregador de imagens do WYSIWYG agora usa `pub/media/wysiwyg` como raiz de armazenamento. Anteriormente, o carregado usava o `pub/media` como sua raiz de armazenamento, o que tornava as imagens carregadas inacessíveis após alterações recentes no código do carregador de imagem. _Correção enviada por Pieter Hoste na solicitação pull [24878](https://github.com/magento/magento2/pull/24878)_. [GitHub-22609](https://github.com/magento/magento2/issues/22609)

<!-- ENGCOM-7045-->

* O TinyMCE4 no navegador Chrome agora lida com caracteres de byte duplo conforme esperado. Anteriormente, o TinyMCE4 não podia manipular corretamente caracteres de bytes duplos (como os usados em chinês) no Chrome. _Correção enviada por Hirokazu Nishi na solicitação pull [25454](https://github.com/magento/magento2/pull/25454)_. [GitHub-24637](https://github.com/magento/magento2/issues/24637)

## Problemas conhecidos — geral

**Problema**: as anomalias nas mensagens de erro da loja ocorrem em implantações onde o PHP 7.4.2 está instalado. Quando 2.4.0 é implantado com o PHP 7.4.2, os símbolos de espaço nas mensagens de erro da loja são substituídos por caracteres de adição (+). Este bug é nativo do PHP 7.4.2 e não pode ser corrigido pelo Adobe Commerce. **Solução alternativa**: recomendamos usar outras versões do PHP 7.4.x. Consulte o artigo da Base de Dados de Conhecimento [Raw message data display on store](https://support.magento.com/hc/en-us/articles/360045804332). <!-- MC-34170-->

**Problema**: os comerciantes não podem adicionar produtos encomendados a um pacote da página Criar Pacote do Administrador e salvar o pacote. Consulte o artigo da Base de conhecimento [Criação de rótulos de remessa](https://support.magento.com/hc/en-us/articles/360046750171). O hotfix **MC-35514-2.4.0-CE-composer.patch** para este problema está disponível em [Versões](https://magento.com/tech-resources/download). <!-- MC-35514-->

**Problema**: o aplicativo exibe esta mensagem de erro durante a instalação com extensões de terceiros que têm dependências em APIs para o módulo `Store` em comandos CLI: `The default website isn't defined. Set the website and try again`. **Solução alternativa**: remova as dependências de extensões de terceiros do Composer, instale o Magento e instale extensões de terceiros.

**Problema**: o botão **Adicionar seleções ao meu carrinho**, na parte inferior do carrinho de compras, não funciona. **Solução alternativa**: use o botão **Adicionar seleções ao meu carrinho** na parte superior da página. Consulte o artigo [Adicionar seleções ao meu botão de carrinho não funciona](https://support.magento.com/hc/en-us/articles/360045838312) da knowledge base. <!-- MC-35313-->

**Problema**: os comerciantes não podem interagir com nenhum elemento da página Devoluções após criar um rótulo de remessa para uma Autorização para Devolução de Mercadoria (RMA). Consulte o artigo [A página Editar devoluções para de funcionar ao criar o rótulo de remessa](https://support.magento.com/hc/en-us/articles/360046441312) da Base de Dados de Conhecimento. O hotfix **MC-35984-2.4.0-composer.patch** para este problema agora está disponível em [Versões](https://magento.com/tech-resources/download). <!-- MC-35984-->

**Problema**: os administradores não podem adicionar um produto configurável por SKU a uma cotação. Quando um administrador clica no botão **Adicionar à Cotação**, a página Editar Cotação permanece em estado de carregamento e o administrador não pode salvar as alterações. **Solução alternativa**: não há solução alternativa para edição da Cotação B2B.  No entanto, você ainda pode solicitar produtos selecionando os produtos na lista de produtos em vez de adicioná-los por SKU. Consulte o artigo da Base de Dados de Conhecimento [B2B Admin não pode adicionar um produto configurável a uma cotação](https://support.magento.com/hc/en-us/articles/360046801971). <!-- MC-35513-->

**Problema**: os comerciantes não podem criar um novo pedido com o Administrador porque **Adicionar Produtos por SKU** e **Adicionar Produtos**  Os botões estão ausentes na página de criação de pedido quando o agrupamento JavaScript está ativado.  **Solução alternativa**: desative o agrupamento JavaScript para sua implantação. <!-- MC-36044-->

**Problema**: o aplicativo exibe um erro `404 not found` quando um cliente tenta remover pontos de premiação ao verificar um pedido enviado para vários endereços. <!-- MC-35955-->

**Problema**: editar um produto configurável da lista de desejos de um cliente resulta no seguinte comportamento inesperado: Um campo inesperado aparece na página Configurar Produto e a página Configurar Produto não desaparece depois que você clica em **OK**. O aplicativo também exibe esta mensagem: `Please load Wish List item`. **Solução alternativa**: recarregar a página Configurar Produto. <!-- MC-35617-->

**Problema**: os clientes não podem alterar o número de pedidos exibidos por página quando a lista Pedidos abrange várias páginas. Atualmente, o aplicativo exibe esta mensagem quando você navega até a última página de pedidos e tenta alterar o número de pedidos exibidos por página: `You have placed no orders`. Consulte o artigo da Base de conhecimento [Erro de exibição de pedidos](https://support.magento.com/hc/en-us/articles/360046802271).  **Solução alternativa**: reabrir a página Meus Pedidos resultará na exibição da lista Pedidos. <!-- MC-34153-->

**Problema**: clicar diretamente no botão **Exportar Taxas de Imposto** da página Adicionar Nova Regra de Imposto ( **Lojas** > **Regras de Imposto**) não baixará o arquivo `tax_rates.csv` conforme esperado. **Solução alternativa**: clique na borda do botão **Exportar Taxas de Imposto**.  Consulte o artigo [Taxas de Imposto sobre Exportação não funcionam](https://support.magento.com/hc/en-us/articles/360045850032) da Base de Dados de Conhecimento. <!-- MC-35345-->

**Problema**: os botões **Atualizar** nas seções Últimos itens solicitados, Produtos na Lista de Comparação e Produtos Comparados Recentemente da página Administração de Atividades do Cliente não funcionam como esperado. Atualmente, o aplicativo rola a página sempre que o botão **Atualizar** é clicado e não exibe o nome do produto. Consulte o artigo [Atualizar atividades do cliente não funciona](https://magento.zendesk.com/hc/en-us/articles/360046091332) da Base de conhecimento. <!-- MC-35296-->

### B2B

**Problema**: se um código de desconto expira antes da aprovação de uma Ordem de Compra (OC), a OC continua a exibir o valor descontado, mas uma vez aprovada a OC, a ordem é colocada no total não descontado. **Solução alternativa**: instale o hotfix **B2B-709 Purchase Order Discount** para esse problema, que agora está disponível na seção **Minha Conta** > **Downloads** de `magento.com`.

**Problema**: o aplicativo criou uma exceção durante a atualização para B2B 1.2.0 em uma implantação de vários sites. Quando `setup:upgrade` é executado, este erro ocorre no módulo `PurchaseOrder`: `Module Magento_PurchaseOrder: Unable to apply data patch Magento\PurchaseOrder\Setup\Patch\Data\InitPurchaseOrderSalesSequence for moduleMagento_PurchaseOrder`. **Solução alternativa**: instale a **interface B2B-716 Add NonTransactionableInterface para o hotfix InitPurchaseOrderSalesSequence**, que agora está disponível na seção **Minha Conta** > **Downloads** de `magento.com`.

## Problemas conhecidos — VBE

### Amazon Pay

* **Problema**: os métodos de pagamento estão ausentes no fluxo de trabalho de check-out quando um cliente clica em **Retornar ao check-out padrão** durante o check-out com o Amazon Pay.  **Solução alternativa**: atualize a página de check-out para exibir os métodos ausentes.  <!-- BUNDLE-2661-->

* **Problema**: o aplicativo exibe dois métodos de Pagamento Amazon idênticos na lista suspensa Método de Pagamento que está disponível ao criar uma nova regra de preço de carrinho.  <!-- BUNDLE-2685-->

### Braintree

* **Problema**: o aplicativo exibe um erro quando um administrador tenta acessar a página Relatório de Liquidação de Braintree (**Administrador** > **Relatórios** ). No momento, o aplicativo exibe esta mensagem: `An error has happened during application run. See exception log for details`. Consulte o artigo [Falha ao carregar o Relatório de liquidação de Braintree](https://support.magento.com/hc/en-us/articles/360046798251) da knowledge base. O hotfix **BUNDLE-2683_SettlementReport.patch** para este problema está disponível em [Versões](https://magento.com/tech-resources/download). <!-- BUNDLE-2683-->

* **Problema**: os comerciantes não podem criar faturas parciais para pedidos em implantações em que Venmo está habilitado e a configuração **Habilitar Cofre para Pagamentos de Cartão** está desabilitada. Atualmente, o aplicativo exibe este erro: `The "vault_capture" command doesn't exist. Verify the command and try again`. <!-- BUNDLE-2647-->

* **Problema**: o aplicativo exibe dois métodos PayPal idênticos na lista suspensa Método de Pagamento que está disponível ao criar uma nova regra de preço de carrinho.   <!-- BUNDLE-2686-->

* **Problema**: o aplicativo encontrou um erro ao abrir o **Vendas** > **Terminal Virtual Braintree**. Embora o formulário contenha elementos corrompidos da interface do usuário, ele ainda aceita pagamentos. **Solução alternativa**: salve as credenciais de Braintree corretas, que corrigirão os campos de entrada recolhidos. Consulte [A página Terminal Virtual do Braintree está corrompida](https://support.magento.com/hc/en-us/articles/360046800071) artigo da Base de Dados de Conhecimento. O hotfix **BUNDLE-2670_VirtualTerminal.patch** para este problema está disponível agora em [Versões](https://magento.com/tech-resources/download). <!-- BUNDLE-2670-->

* **Problema**: o aplicativo exibe uma mensagem de erro nos seguintes países quando um cliente seleciona um método de pagamento local durante o check-out: Bélgica, Holanda, Itália, Espanha e Polônia.  **Solução alternativa**: ignore a mensagem de erro e continue o pagamento.

### dotdigital

* **Problema**: falha nos testes de integração com este erro: `PHP Fatal error: Declaration of Dotdigitalgroup\Email\Test\Integration\Model\Sync\Importer\ImporterFailedTest::setUp() must be compatible with PHPUnit\Framework\TestCase::setUp(): void in /var/www/vendor/dotmailer/dotmailer-magento2-extension/Test/Integration/Model/Sync/Importer/ImporterFailedTest.php on line 36`. **Solução alternativa**: o **hotfix de Testes de Integração Dotdigital BUNDLE-2684** para esse problema está disponível agora em [Versões](https://magento.com/tech-resources/download). <!-- BUNDLE-2684-->

### Klarna

* **Problema**: Deixar o campo **Tema de Design** em branco em Mensagens no Site do Klarna (**Administrador** > **Lojas** > **Configuração** > **Configurações do Klarna**) resulta em uma página em branco.  **Solução alternativa**: selecione um tema de design e salve.  <!-- BUNDLE-2623-->

### Vértice

* **Problema**: o aplicativo exibe um botão **Verificação de endereço** na seção de envio do fluxo de trabalho de check-out, mesmo quando a validação de endereço está desabilitada. O validador de endereço não verifica novamente o endereço atualizado e continua a exibir uma mensagem que indica que o endereço é inválido quando um cliente insere um endereço correto depois de inserir um endereço incorreto, mesmo quando a validação de endereço está habilitada. **Solução alternativa**: desabilitar validação de endereço Vertex. <!-- BUNDLE-2604-->

## Contribuições da Comunidade

Estamos gratos à comunidade Magento Open Source mais ampla e gostaríamos de reconhecer suas contribuições para esta versão. Confira as seguintes maneiras de saber mais sobre as contribuições da comunidade para nossas versões atuais:

* Se um membro da comunidade tiver fornecido uma correção para esta versão, identificaremos a correção na seção Problema Corrigido dessas notas com a frase &quot;*Correção fornecida pelo membro da comunidade*&quot;.

* A equipe de Engenharia da Comunidade [Magento Contributors](https://magento.biterg.io/app/kibana) mantém uma lista dos principais colaboradores individuais e parceiros por mês, trimestre e ano. Nessa página de Contribuidores, você pode seguir os links para as PRs mescladas no GitHub.

### Contribuições do parceiro

A tabela a seguir destaca as contribuições feitas pelos Parceiros. Esta tabela lista o Parceiro que contribuiu com a solicitação de pull, a solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-0-partner.md}}

### Contribuições individuais do contribuinte

A tabela a seguir identifica as contribuições dos membros da comunidade. Esta tabela lista as solicitações de pull externas, o número do problema do GitHub associado a ela (se disponível) e o membro da comunidade que contribuiu com a solicitação de pull.

{{$include /help/_includes/release-notes/engcomm-2-4-0-issues.md}}

### Requisitos do sistema

Nossa pilha de tecnologia é construída em PHP e MySQL. Para obter mais informações, consulte [Requisitos do Sistema](../../../installation/system-requirements.md).

### Instruções de instalação e atualização

Você pode instalar o Adobe Commerce 2.4.0 usando o Composer.

## Kits de ferramenta de migração

A Ferramenta de migração de dados ajuda a transferir os dados de armazenamento existentes do Magento 1.x para o Magento 2.x. Essa interface de linha de comando inclui funções de verificação, rastreamento de progresso, registro e teste. Para obter instruções de instalação, consulte [Instalar a Ferramenta de Migração de Dados](https://experienceleague.adobe.com/docs/commerce-operations/tools/data-migration/basics/install.html). Considere explorar ou contribuir para o [repositório de Migração de Dados](https://github.com/magento/data-migration-tool).

O [Kit de Ferramentas de Migração de Código](https://github.com/magento/code-migration) ajuda a transferir as extensões e personalizações do armazenamento do Magento 1.x existente para o Magento 2.x. A interface de linha de comando inclui scripts para converter módulos e layouts do Magento 1.x.
