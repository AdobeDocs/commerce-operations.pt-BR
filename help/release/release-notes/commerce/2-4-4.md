---
title: Notas de versão do Adobe Commerce 2.4.4
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.4 do Adobe Commerce.
source-git-commit: 065c56f20ba5b1eef8c331c5c2f5649902f1442b
workflow-type: tm+mt
source-wordcount: '12453'
ht-degree: 0%

---


# Notas de versão do Adobe Commerce 2.4.4

O Adobe Commerce 2.4.4 é compatível com o PHP 8.1. Todas as bibliotecas e dependências de projetos foram atualizadas para compatibilidade com o PHP 8.1. As dependências do Composer principal e bibliotecas de terceiros também foram atualizadas para as versões mais recentes compatíveis com o PHP 8.1. Esta versão também oferece suporte para o OpenSearch 1.2.

Esta versão inclui quase 250 correções e melhorias de qualidade.

>[!NOTE]
>
>Obrigado ao nosso parceiro [Atwix](https://www.atwix.com/) por suas contribuições substanciais para tornar o nosso quadro 2.4.4 compatível com o PHP 8.1.

{{bics}}

## Aplicar `AC-3022.patch` continuar a oferecer à DHL como transportadora

A DHL introduziu o schema versão 6.2 e descontinuará o schema versão 6.0 em breve. Adobe Commerce 2.4.4 e versões anteriores que oferecem suporte à integração com a DHL somente a versão 6.0. Os comerciantes que implantam essas versões devem se aplicar `AC-3022.patch` logo que possível, continuar a oferecer à DHL como transportadora marítima. Consulte a [Aplicar um patch para continuar oferecendo a DHL como transportadora](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Artigo da Base de conhecimento para obter informações sobre como baixar e instalar o patch.

## Outras informações de versão

Embora o código para esses recursos seja fornecido com versões trimestrais do código principal do Adobe Commerce, vários desses projetos (por exemplo, B2B, Page Builder e Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros desses projetos estão documentadas nas informações separadas da versão específica do projeto, disponíveis na documentação de cada projeto.

>[!NOTE]
>
>Todas as extensões fornecidas pelo fornecedor, com exceção do Braintree, foram removidas do Adobe Commerce 2.4.4.

>[!NOTE]
>
>O Composer 2.2 introduziu um recurso de segurança que requer que os comerciantes identifiquem plug-ins confiáveis em seus `composer.json` antes da execução dos plug-ins. Atualmente, os plug-ins incluídos na variável `composer.json` mas não marcado como confiável são instalados automaticamente. No entanto, a partir de julho de 2022, o Composer não carregará plug-ins, a menos que eles tenham sido explicitamente permitidos. Consulte a [Problemas de plug-ins do Composer ao atualizar para o Adobe Commerce 2.4.4](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4) Artigo da Base de conhecimento para obter instruções sobre como modificar o `composer.json` para permitir explicitamente o carregamento de plug-in.

### Hotfixes incluídos nesta versão

O Adobe Commerce 2.4.4 inclui a resolução de todos os problemas que foram resolvidos pelos seguintes hotfixes, que foram fornecidos para o Adobe Commerce e o Magento Open Source 2.4.3, 2.4.3-p1 e 2.3.7-p2:

* A vulnerabilidade solucionada por `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch` e `MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch` foi resolvido nesta versão.

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`. Este patch resolve um erro PHP fatal que ocorreu durante a atualização. Consulte a [Adobe Commerce upgrade 2.4.3, 2.3.7-p1 Hotfix do erro fatal PHP](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) Artigo da Base de conhecimento.

### Aplique este hotfix após instalar o 2.4.4

Recomendamos que você aplique o seguinte patch após instalar o Adobe Commerce 2.4.4:

* `braintree-disabled-partial-capture-for-applepay-googlepay.patch`.  Os comerciantes não podem submeter reembolsos parciais para pedidos pagos com o Apple Pay through Braintree. Quando um comerciante tenta criar um aviso de crédito para uma restituição parcial da fatura da ordem, a **Quantidade para reembolso** não é editável. Esse hotfix aborda esse problema. Consulte a [Adobe Commerce 2.4.4: Não é possível criar faturas parciais](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) Artigo da Base de conhecimento.  <!-- BUNDLE-3088-->

## Destaques do Adobe Commerce 2.4.4

Procure os seguintes destaques nesta versão.

### Melhorias de segurança

Esta versão inclui uma correção de segurança e melhorias na segurança da plataforma. Esta correção de segurança foi transferida para o Adobe Commerce 2.4.3-p2 e para o Adobe Commerce 2.3.7-p3.

Até à data, não ocorreram ataques confirmados relacionados com estas questões. No entanto, certas vulnerabilidades podem ser exploradas para acessar informações do cliente ou tomar as sessões do administrador. A maioria desses problemas exige que um invasor obtenha acesso primeiro ao Administrador. Como resultado, lembramos que você deve tomar todas as medidas necessárias para proteger seu administrador, incluindo, entre outras, esses esforços:

*  de incluir na lista de permissões IP
* [autenticação de dois fatores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* uso de uma VPN
* uso de um local exclusivo em vez de `/admin`
* boa higiene de senhas

Consulte [Aviso de segurança do Adobe](https://helpx.adobe.com/security/products/magento/apsb22-13.html) para a última discussão sobre esses problemas corrigidos.

#### Melhorias adicionais na segurança

As melhorias de segurança desta versão melhoram a conformidade com as práticas recomendadas de segurança mais recentes, incluindo:

* O uso da variável de email foi retornado no 2.3.4 como parte de uma redução do risco de segurança em favor de uma sintaxe de variável mais estrita. Este comportamento herdado foi totalmente removido nesta versão como uma continuação dessa redução do risco de segurança.

   Como resultado, os modelos de email ou de boletim informativo que funcionavam em versões anteriores do Adobe Commerce podem não funcionar corretamente após a atualização para o Adobe Commerce 2.4.4 ou Magento Open Source 2.4.4. Os modelos afetados incluem substituições de administrador, temas, temas filhos e modelos de módulos personalizados ou extensões de terceiros. Sua implantação ainda poderá ser afetada mesmo após usar a variável [Ferramenta de compatibilidade de atualização](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=en) para corrigir usos obsoletos. Consulte [Migração de modelos de email personalizados](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/) para obter informações sobre possíveis efeitos e diretrizes para migrar modelos afetados.

* Os tokens de integração não podem mais ser usados para autenticação de token do portador de API. Anteriormente, um token de integração podia ser usado como uma chave independente para a autenticação baseada em token. No entanto, esse comportamento foi desativado por padrão devido às implicações de segurança de um token de acesso que nunca expira. O comportamento anterior pode ser ativado por meio da linha de comando ou do Administrador. Consulte [Autenticação por token](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/). <!-- AC-1619 -->

* As IDs de sessão não são mais armazenadas no banco de dados. <!-- AC-522-->

* Os tokens de acesso OAuth e os tokens de redefinição de senha agora são criptografados quando armazenados no banco de dados. <!-- AC-520 1323-->

* A validação foi reforçada para impedir o upload de extensões de arquivo não alfanuméricas. <!-- AC-479-->

* Adição do suporte reCAPTCHA aos códigos de cupom. <!-- AC-461-->

* O Swagger agora é desativado por padrão quando o Adobe Commerce está em modo de produção. <!-- AC-1450-->

* O HTTPS agora está habilitado por padrão para a loja da Adobe Commerce. O **Usar URLs seguros na vitrine** e **Usar URLs seguros em Admin** são ativadas por padrão e todos os cookies incorporados agora são definidos como seguros.  <!-- AC-1173-->

* O plug-in de confusão de dependência agora é necessário para todas as instalações do Adobe Commerce. Anteriormente, esse plug-in era necessário apenas para instalações baseadas no Composer. Agora permite versões confiáveis. Os comerciantes podem ignorar as restrições definidas neste plug-in que proíbem determinadas combinações de instalações do Composer. As restrições podem ser ignoradas para versões confiáveis, e o Adobe Commerce agora exibe um aviso antes de continuar com a instalação.  <!-- AC-501 970-->

* Os desenvolvedores agora podem configurar o limite de tamanho de arrays aceitos por endpoints RESTful do Adobe Commerce de acordo com cada endpoint. Consulte [Segurança de API](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-465-->

* Foram adicionados mecanismos para limitar o tamanho e o número de recursos que um usuário pode solicitar por meio de uma API da Web em todo o sistema e para substituir os padrões em módulos individuais. Isso resolve o problema resolvido por `MC-43048__set_rate_limits__2.4.3.patch`. Consulte [Segurança de API](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-1120-->

### Aprimoramentos da plataforma

O Adobe Commerce 2.4.4 agora é compatível com PHP 8.1. Todas as bibliotecas e dependências de projetos foram atualizadas para compatibilidade com PHP 8.1. As melhorias adicionais da plataforma incluem:

* O Adobe Commerce 2.4.4 oferece suporte para o Elasticsearch 7.16 e o OpenSearch 1.2. Os comerciantes Adobe Commerce com implantações hospedadas no local podem usar qualquer uma das soluções. No entanto, o OpenSearch agora é o mecanismo de pesquisa padrão para implantações do Adobe Commerce 2.4.4 hospedadas na nuvem. Todos os clientes com implantações em nuvem que atualizam para a versão 2.4.4 devem usar o OpenSearch. Consulte [Alternando para o OpenSearch for Adobe Commerce no Cloud 2.4.4](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)

* O `JQuery` A biblioteca foi atualizada para a versão 3.6. A variável `jquery-ui` A biblioteca foi atualizada para a versão 1.13.0. Várias outras bibliotecas do JavaScript foram atualizadas para as versões mais recentes.

* O TinyMCE 5.8.1 agora é compatível. O TinyMCE 4 foi removido da base de código. <!-- AC-41-->

* O `RequireJS` A biblioteca foi atualizada para a versão mais recente (v2.3.6). [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* O PHPUnit foi atualizado para a versão mais recente (9.5.x). Os frameworks de testes e testes foram atualizados para serem compatíveis com a nova versão. <!-- AC-404-->

* A maioria das dependências Laminas foi atualizada para as versões mais recentes compatíveis com o PHP 8.1. Três dependências Laminas foram removidas da base de código para reduzir o número de dependências.

#### Atualização da interface do usuário do jQuery

A interface do usuário do jQuery foi atualizada para a versão mais recente (v1.13.0). Os seguintes componentes v1.10.0 jQuery foram removidos:

* `ajaxOptions` e `cache` opções para guias. Consulte [Guias](https://jqueryui.com/changelog/1.10.0/#tabs).

* `.zIndex()`. A interface do usuário do jQuery v1.12.1 inclui `jquery/z-index.js`, que apoia a utilização de `.zIndex()`. Consulte [Núcleo da interface do usuário](https://jqueryui.com/changelog/1.12.0/#ui-core).

* Falhas de dados para nomes de widget. Você deve usar o nome completo da variável `.data()` chave.

* Codificação rígida de classes como `ui-corner-all` em widgets.

### Aprimoramentos de desempenho e escalabilidade

Os aprimoramentos no desempenho do Adobe Commerce aumentam o processamento de pedidos de alta taxa de transferência e a otimização da fila de mensagens. O recurso de pedidos assíncronos introduzido nesta versão suporta a criação de aproximadamente 60.000 pedidos/hora. As versões anteriores do Adobe Commerce ofereciam suporte ao processamento de aproximadamente 10.000 pedidos/hora, o que apresentava um possível gargalo para vendas flash. O novo recurso de vários consumidores oferece suporte ao dimensionamento do número de consumidores da fila de mensagens em uma única instância do Cloud e aumenta o número de pedidos processados por hora.

Melhorias de desempenho nesta versão:

* O recurso AsyncOrder oferece suporte a posicionamento de pedidos mais rápido do que a execução síncrona oferece. Quando AsyncOrder está ativado, o posicionamento do pedido é executado em segundo plano enquanto os compradores concluem outras tarefas na loja.

* O novo **Ativar Verificação de Inventário No Carregamento Do Carrinho** a opção de configuração fornece uma verificação de inventário que pode ser alternada ao carregar um produto no carrinho. Está ativada por padrão. Quando você desativa essa opção, a Adobe Commerce ignora a verificação de inventário à medida que a cotação é carregada, o que acelera a finalização da compra, especialmente para carrinhos contendo muitos itens.

* O novo `multiple_processes` a opção de configuração suporta a execução de consumidores paralelos em vários processos. Anteriormente, `cron` executou um único consumidor quando necessário. Iniciar vários consumidores para executar processos simultaneamente pode melhorar a velocidade de execução da tarefa. Para ativar este recurso, adicione `multiple_processes` para `app/etc/env.php` arquivo.

* As operações de carrinho de carrinhos contendo mais de 750 produtos configuráveis foram aprimoradas com o aumento do limite de memória definido por `max_input_vars` no `php.ini` para suportar o volume de variáveis de entrada.

* Otimização do processamento de regras de vendas durante o check-out, diferindo o cálculo total. Normalmente, o processamento de regras de vendas ocorre sempre que um comprador adiciona um produto ao carrinho, atualiza a quantidade do produto ou clica no  **Colocar pedido** botão. Os comerciantes podem permitir este adiamento definindo a variável `checkout/deferred_total_calculating` na variável `env.php` arquivo. Como alternativa, você pode executar `bin/magento setup:config:set --deferred-total-calculating 1|0`.  <!-- MCP-573-->

* Melhorias no processo de validação para pedidos afetados por uma regra de preço do carrinho durante a colocação assíncrona do pedido. <!-- MCP-304-->

Consulte [Processamento de pedidos de alta taxa de transferência](../../../performance/high-throughput-order-processing.md).

### GraphQL

Esta versão inclui os seguintes aprimoramentos da GraphQL:

* **Cobertura completa do GraphQL para cotações negociáveis**.  Usuários da empresa B2B agora podem concluir todas as tarefas relacionadas a cotas negociáveis usando o GraphQL. As versões anteriores desta API suportavam fluxos de negociação, mas não o check-out. <!-- PWA-2101-->

#### Novas mutações

* [`assignCustomerToGuestCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-customer-to-guest-cart.html) mutação

* [`placeNegotiableQuoteOrder`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/place-negotiable-quote-order.html) mutação

* [`setNegotiableQuoteBillingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-billing-address.html) mutação

* [`setNegotiableQuotePaymentMethod`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-payment-method.html) mutação<!-- PWA-2114-->

* [`setNegotiableQuoteShippingMethods`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-methods.html) mutação

* [`setNegotiableQuoteShippingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html) mutação

* **Melhorias de desempenho**:

   * O desempenho das operações do carrinho de GraphQL foi aprimorado. O `collectQuoteTotals()` agora é chamado somente uma vez durante uma solicitação do GraphQL, o que reduz o tempo de resposta. <!-- PWA-2110-->

   * O desempenho da vitrine foi aprimorado pelas alterações em como as solicitações do GraphQL são armazenadas em cache. Agora, as solicitações de GraphQL de Fasto e Varnish armazenam em cache com `auth` tokens. <!-- PWA-1817-->

* **Novas configurações de configuração de administrador relacionadas à vitrine**. O `storeConfig` agora retorna as configurações para os métodos de pagamento Check-out de Subtotal Zero e Check/Money Order. <!-- PWA-1576-->

* **Biblioteca principal do GraphQL atualizada**. O `webonyx` A biblioteca, que permite o funcionamento do GraphQL principal, foi atualizada para a versão ^14.9. <!-- PWA-2137 2184 -->

* **Correção de problemas de tradução no GraphQL com lojas de vários sites e vários idiomas**. O resolvedor do GraphQL agora retorna cadeias de caracteres traduzidas com base no escopo da loja, conforme esperado. <!-- PWA-1946-->

* O GraphQL agora fornece à New Relic nomes descritivos de transação, que podem ser úteis para depuração. [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

Consulte a [Guia do desenvolvedor do GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) para obter detalhes sobre essas melhorias.

### B2B

Esta versão inclui várias correções de erros. Consulte [Notas de versão B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Extensões embutidas pelo fornecedor

Com exceção de [Braintree](https://docs.magento.com/user-guide/payment/braintree.html), todas as extensões fornecidas pelo fornecedor foram removidas da base de código do Adobe Commerce 2.4.4. Os comerciantes devem migrar para as extensões oficiais, que estão disponíveis no [Commerce Marketplace](https://marketplace.magento.com/extensions.html). <!-- AC-1165-->

[Amazon Pay](https://docs.magento.com/user-guide/payment/payments.html)

[dotdigital](https://docs.magento.com/user-guide/marketing/communications.html)

[Klarna](https://docs.magento.com/user-guide/payment/payments.html)

[Vertex](https://docs.magento.com/user-guide/tax/taxes.html)

[YotPo](https://docs.magento.com/user-guide/marketing/product-reviews.html)

### PWA Studio

O PWA Studio v.12.3.0 é compatível com o Adobe Commerce 2.4.4. Ele inclui suporte para reCaptcha, otimização de conteúdo do Page Builder e conteúdo personalizado. Para obter informações sobre aprimoramentos e correções de erros, consulte [Versões de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [Compatibilidade da versão](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões principais compatíveis do Adobe Commerce.

### Melhorias no Pagamento do PayPal

* A opção de pagamento Venmo agora é compatível.  <!-- AC-1229-->

* Pagar mais tarde foi adicionado como opção para compradores com base na localização do comprador, não na localização do comerciante.

* Os comerciantes podem agora definir o país comprador quando testam a experiência do comprador no seu país de escolha. Anteriormente, os testes limitavam - se a testes apenas para o país em que o comerciante estava localizado. Essa alteração é válida somente no modo sandbox.

* As mensagens na página de checkout agora exibem mensagens precisas sobre quanto e em quantos incrementos o comprador deverá pagar ao usar o Pay Later.

### Live Search

O Live Search agora é compatível com PHP 8.1.

O novo `Magento_ElasticsearchCatalogPermissionsGraphQl` O módulo está desabilitado durante o Live Search atualizado [instalação](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/onboard/install.html). As instalações existentes do Live Search devem ser atualizadas para o Live Search 2.0.0 para aproveitar esses recursos. Para obter mais informações, consulte o Live Search [Notas de versão](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html).

### Atualizações de acessibilidade

Esta versão oferece maior conformidade com as diretrizes de acessibilidade padrão. Esses aprimoramentos melhoram a experiência dos usuários com visão limitada ou com capacidades limitadas de linguagem, cognitiva e aprendizagem.  O desempenho das ferramentas de Reader de tela também melhorou.

As melhorias de acessibilidade incluem:

* Dica de ferramenta vincula o texto e rótulos visíveis precisos, focados em tarefas, para entradas
* Agora, os botões Editar têm texto exclusivo.
* Os botões de administração agora têm um propósito exclusivo, acessível e descritivo em conformidade com os padrões AA
* Imagens de ícones que transmitem significado agora fornecem uma alternativa textual.
* Contraste aprimorado em botões Admin e campos de formulário para uma relação de contraste de pelo menos 3:1 com cores adjacentes.

### Page Builder

* Os comerciantes agora podem adicionar texto alternativo (`alt_text`) para imagens (Imagem, Banner, Slide) para aprimorar a acessibilidade do conteúdo. [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## Problemas corrigidos

Estamos corrigindo centenas de problemas no código principal do Adobe Commerce 2.4.4. Um subconjunto desses problemas corrigidos é descrito abaixo.

### Instalação, atualização, implantação

<!-- MC-42026-->

* O Adobe Commerce agora registra erros de implantação de conteúdo estático em arquivos de log de compilação conforme esperado.

<!-- MC-43094-->

* Os patches de dados não podem mais ignorar as restrições exclusivas de uma tabela e inserir valores duplicados em uma tabela de banco de dados MySQL. Anteriormente, os patches podiam inserir valores duplicados, o que corrompia o banco de dados.

<!-- AC-1480-->

* Os comerciantes agora podem atualizar com êxito de uma implantação do Adobe Commerce 2.4.2 com o Klarna para o Adobe Commerce 2.4.3. [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* A configuração do gerador de mapa do site agora pode ser alterada com êxito a partir da linha de comando. Anteriormente, o Adobe Commerce exibia esse erro ao tentar alterar a configuração do mapa do site fora do Administrador: `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`.  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* O `bin/magento app:config:import` agora é executado sem erro ao atualizar `time` valores em `config.php`. Anteriormente, alterar a configuração de alerta do produto por edição manual (ou seja, não usar o Administrador) resultava em um erro.

### Acessibilidade

<!-- AC-1589-->

* Os erros de acessibilidade com a navegação no carrinho e as páginas de check-out foram resolvidos. [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* Agora, os leitores de tela podem ler todos os elementos de formulário relevantes nas páginas do produto.

<!-- AC-1277-->

* O contraste foi aprimorado para excluir imagens e mover botões de ícones na loja para melhorar a legibilidade de usuários com pouca visão.

<!-- AC-1272-->

* O ícone de lupa usado para executar pesquisas na interface do produto recebeu um nome acessível e uma alternativa textual.

<!-- AC-1275-->

* A barra de ferramentas do editor de rich text agora pode ser acessada usando a tecla Tab.

<!-- AC-1283-->

* O **Este item tem peso** selecione a entrada no **Catálogo** > **Produto** a página de detalhes agora tem rótulos visíveis e um nome acessível.

<!-- AC-1284-->

* O nome acessível do controle agora inclui o texto de seu rótulo visível para o número de itens por lista suspensa de página.

<!-- AC-1287-->

* A tabela controla os **Catálogo** > **Produto** a página de detalhes agora tem rótulos visíveis e um nome acessível quando a tabela é recolhida.

<!-- AC-1288-->

* Os links de edição na tabela de Produtos agora têm um texto de link exclusivo e significativo.

<!-- AC-1276-->

* Os acionadores que expandem dicas de ferramentas agora fornecem nomes textuais.

<!-- AC-1285-->

* Agora, os botões em toda a loja têm nomes acessíveis exclusivos e descritivos. Anteriormente, os botões divididos com um botão de texto e um botão de seta para baixo adjacente tinham o mesmo nome acessível.

<!-- AC-1277-->

* O contraste foi aprimorado para excluir imagens e mover botões de ícones na loja para melhorar a legibilidade de usuários com pouca visão.

<!-- AC-1279-->

* Alternativas textuais foram adicionadas ao ícone de lápis que aparece quando um comerciante edita a entrada da opção Otimização do mecanismo de pesquisa.

<!-- AC-1272-->

* O ícone de lupa usado para executar pesquisas na interface do produto recebeu um nome acessível e uma alternativa textual.

<!-- AC-1286-->

* A página do produto **Nova exibição** o campo de entrada de texto agora tem um nome acessível.

<!-- AC-1283-->

* O **Este item tem peso** selecione a entrada no **Catálogo** > **Produto** a página de detalhes agora tem rótulos visíveis e um nome acessível.

### AdminGWS

<!-- MC-42239-->

* Os administradores com permissões restritas agora podem criar um retorno conforme esperado.

### Back-end

<!-- MC-43161-->

* Agora os administradores podem fazer logon no Administrador em uma implantação para a qual um caminho de Admin personalizado está configurado e a chave secreta está habilitada. Anteriormente, o Adobe Commerce exibia esse erro: `Invalid security or form key. Please refresh the page`.

<!-- MC-41949-->

* O Adobe Commerce não redireciona mais para o escopo Visualização de todas as lojas quando a hierarquia de várias lojas é alterada. Anteriormente, depois que a hierarquia era salva, os compradores eram redirecionados para um URL de loja incorreto e o escopo Todas as visualizações da loja era selecionado em uma implantação de várias lojas.

### Produtos do pacote

<!-- MC-42885-->

* Os compradores agora podem adicionar um produto de pacote com Imposto fixo do produto e duas opções ao carrinho de compras. Anteriormente, a Adobe Commerce não adicionava o produto e exibia o seguinte erro: `We can't add this item to your shopping cart right now`.

<!-- MC-42249-->

* Validação do formulário no formulário do `data-validate` e `min` atributos foi adicionado ao campo quantidade do carrinho para evitar valores negativos de produtos do pacote.

<!-- MC-41794-->

* O `products` agora filtra corretamente os produtos do pacote quando os produtos filhos estão desativados no nível de visualização da loja. Anteriormente, a consulta retornava produtos secundários que estavam desativados no nível de visualização da loja.

<!-- MC-42811-->

* `cron` agora limpa o cache de categoria do produto conforme esperado durante `indexer_update_all_views` execução. Anteriormente, o Adobe Commerce exibia uma contagem de produtos incorreta na página de categoria depois da atualização em massa de muitos produtos na categoria.

<!-- MC-42811-->

* O Adobe Commerce agora atualiza o cache de produto da categoria conforme esperado quando um produto de pacote reaparece em estoque.

<!-- MC-42811-->

* O algoritmo de limpeza de cache executado durante a reindexação foi otimizado. Os produtos do pacote agora são exibidos como esperado quando uma categoria é armazenada em cache durante a reindexação. Anteriormente, os produtos do pacote não eram exibidos por horas depois que as categorias do produto eram armazenadas em cache durante a reindexação.

<!-- AC-715-->

* A conversão de moeda agora ocorre conforme esperado em confirmações por email para compras de produtos de pacote em implantações de várias lojas que usam moedas diferentes. [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* Os descontos de preço especiais de preço avançados agora são exibidos corretamente para produtos de pacote com um prefixo % na grade do produto. Anteriormente, um % de desconto era exibido incorretamente com $ prefixo em vez de % na grade do produto.

<!-- ACP2E-262-->

* O status do produto do pacote no Administrador agora é atualizado automaticamente quando um produto relacionado altera seu status.

<!-- ACP2E-326-->

* O resolvedor do GraphQL para produtos de pacote agora verifica se os produtos de pacote filho foram desativados. Anteriormente, essa verificação não ocorria e consultas semelhantes `categoryList` produtos secundários devolvidos que não eram veníveis.

<!-- MC-43223-->

* `cart` as respostas da query agora retornam descontos precisos para produtos de pacote com preços dinâmicos. Anteriormente, as respostas da query incluíam descontos aplicados a cada produto de pacote individualmente.

### Cache

<!-- AC-328-->

* O cache de página não cresce mais rapidamente sob o uso típico. [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* Colocar um pedido não resulta mais na remoção de todas as tags de cache relacionadas aos produtos solicitados do cache Varnish. [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* O cache de página de site completo não é mais eliminado quando você atualiza um produto das categorias principais ou executa um índice para atualizar atributos do produto ou status do estoque. Anteriormente, o cache Varnish adicionava as IDs de categoria do menu superior a todas as tags de cache de página. [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### Carrinho e check-out

<!-- MC-41494-->

* O preço mínimo anunciado **O que é isso?** Agora é possível clicar no link na página do carrinho e abrir o pop-up de informações conforme esperado. Anteriormente, clicar neste link não tinha efeito.

<!-- MC-42639-->

* Os compradores agora podem colocar pedidos sem erros depois de um tempo limite de sessão em implantações nas quais o carrinho de compras persistente está ativado. Anteriormente, o Adobe Commerce exibia um erro de pagamento após o tempo limite da sessão.

<!-- MC-42638-->

* Atribuir um valor de pedido de classificação alta a um atributo de endereço do cliente não causa mais degradação do desempenho na página de checkout.

<!-- MC-42813-->

* O Adobe Commerce agora reverte a quantidade de produto do carrinho de compras para o valor anterior se a quantidade atualizada for inválida.

<!-- MC-42347-->

* Clicar no **Adicionar ao carrinho** Na seção Visualizados recentemente, o botão agora é redirecionado conforme esperado para a página de detalhes do produto. Anteriormente, os compradores eram redirecionados para a página de listagem de produtos.

<!-- MC-33705-->

* Os compradores convidados agora podem fazer check-out com êxito com um endereço de cliente que contém vários tipos de atributos personalizados de endereço de cliente. Anteriormente, os valores para atributos personalizados não eram formatados corretamente quando eram exibidos durante o check-out. [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* A Adobe Commerce agora aplica corretamente o limite de entrega livre a pedidos quando as taxas de tabela estão ativadas. [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* Agora você pode usar `POST /V1/guest-carts/:cartId/items` para adicionar produtos simples com diferentes opções ao carrinho. Anteriormente, essa chamada alterava a quantidade do primeiro produto simples adicionado, em vez de adicionar um segundo produto simples com as opções especificadas. [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* A seção Resumo do pedido da página de finalização agora exibe a moeda e a quantia corretas quando uma implantação é configurada para `Poland` país e `PLN` moeda. Anteriormente, o carrinho de compras e a página de check-out exibiam o valor **0 PLN**.

<!-- MC-32805-->

* O Adobe Commerce não gera mais um erro quando um comprador clica **Atualizar carrinho** depois de alterar uma quantidade de produto no minicarrinho. Anteriormente, o Adobe Commerce exibia esse erro:  `The quote item isn't found. Verify the item and try again`.

<!-- MC-43176-->

* GraphQL `products` consultas de produtos configuráveis em uma loja específica agora retornam os intervalos de preço de produtos somente na loja especificada. Anteriormente, as solicitações retornavam intervalos de preço para produtos simples em lojas não especificadas.

<!-- AC-691-->

* O Adobe Commerce não gera mais este erro quando um comprador adiciona um endereço de cobrança que está faltando em um campo de rua: `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* O Adobe Commerce não gera mais um erro de console durante o check-out em lojas das quais o minicarrinho foi removido. [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* O check-out não falha mais no estágio de pagamento quando o endereço de faturamento está sem valores de campo de rua ou o valor do campo de rua não é uma matriz. Anteriormente, o check-out falhava com este erro: `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-22-->

* O total de vendas agora é calculado corretamente na grade do relatório de cupom. Anteriormente, o total de vendas não incluía o valor de envio.

<!-- ACP2E-44-->

* Os descontos do carrinho inteiro agora são calculados corretamente quando o comprador alterna entre os métodos de envio.

<!-- ACP2E-159-->

* A lista suspensa da **Estado** na página Admin criar ordem agora é preenchida pelos valores predefinidos do país selecionado. Anteriormente, esse campo era um campo de texto de entrada em vez de um menu suspenso.

<!-- ACP2E-172-->

* O Adobe Commerce não gera mais um erro depois que você usa a variável `addConfigurableProductsToCart` mutação para adicionar um produto configurável a um carrinho diretamente após alterar a visualização da loja.

<!-- ACP2E-176-->

* O Adobe Commerce não gera mais um erro quando você usa a variável `addConfigurableProductsToCart` mutação para adicionar um filho desativado de um produto configurável ao carrinho. Anteriormente, o Adobe Commerce exibia um erro de violação de restrição de integridade.

<!-- ACP2E-206-->

* Os produtos de venda cruzada não estão mais visíveis na página do carrinho quando a variável **Mostrar itens de venda cruzada no carrinho de compras** a configuração está desativada.

<!-- ACP2E-157-->

* O valor de uso do cupom não é mais alterado se a ordem em que o cupom foi aplicado falhar.  Anteriormente, os cupons gerados automaticamente para uso único eram marcados como inválidos depois que o cupom era aplicado no carrinho, mas o pedido não era feito.

<!-- ACP2E-137-->

* A validação foi adicionada ao fluxo de trabalho de finalização para comparar o endereço do cliente com o valor padrão. Se o processo de validação identificar alterações, ele definirá `customer_address_id` para `null` para tratá-lo como um novo endereço do cliente. Anteriormente, se o cliente salvava o endereço sem validação na finalização e o mesmo cliente tentava fazer um pedido usando o mesmo endereço depois que a validação era aplicada ao campo de finalização , a Adobe Commerce não aceitava o endereço editado e lançava uma exceção.

### Regras de preço do carrinho

<!-- MC-42288-->

* A geração do cupom agora é bloqueada até que a regra de preço do carrinho relacionada seja salva com o `auto` opção habilitada. Se você tentar salvar essa regra sem habilitar o `auto` , o Adobe Commerce exibe esta mensagem: `Rule is not saved with auto generate option enabled. Please save the rule and try again`.

<!-- MC-42743-->

* Adição de um teste para confirmar a aplicação correta de um desconto de regra de preço do carrinho.

<!-- ACP2E-213-->

* Regras de preço do carrinho que usam uma condição de SKU com **Se um item for ENCONTRADO/NÃO ENCONTRADO no carrinho com Todas/Qualquer uma dessas condições verdadeiras** agora funcionam como esperado com produtos configuráveis.

<!-- ACP2E-225-->

* As regras de preço do carrinho agora são aplicadas corretamente para produtos de pacote de preço fixo. Anteriormente, as regras de preço do carrinho não se aplicavam a esses produtos quando pelo menos um produto filho tinha o mesmo conjunto de atributos especificado na condição da regra.

<!-- ACP2E-285-->

* Um produto com o preço de 0 agora pode ser adicionado com êxito ao carrinho quando o Adobe Commerce é configurado com o **Desconto de valor fixo para o carrinho inteiro** regra de preço do carrinho. Anteriormente, o Adobe Commerce exibia esse erro: `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`.

<!-- ACP2E-306-->

* Correção de uma condição em que a função `cart` O query retornava um valor de desconto impreciso quando as regras do carrinho de compras com descontos de quantidade fixa eram ativadas.

### Catálogo

<!-- MC-41796-->

* A Adobe Commerce não lança mais uma exceção ao executar uma ação de atualização de atributo em massa na grade do produto quando um produto tem uma `datetime` atributo.

<!-- MC-42571-->

* As consultas do GraphQL agora retornam resultados para produtos filhos de um produto configurável de acordo com as configurações de filtro de visibilidade do(s) produto(s) filho(s).

<!-- MC-41853-->

* O Adobe Commerce não modifica mais os preços de produto relacionados quando os atributos de produto configuráveis são alterados. Anteriormente, o Preço Mínimo Anunciado (MAP) de um produto configurável sobrepunha o preço de produtos relacionados na loja.

<!-- MC-42659-->

* Agora, os administradores podem atribuir novamente o último produto que permanece em uma categoria e salvar a categoria vazia.

<!-- MC-42132-->

* Valores de atributo suspensos/de seleção múltipla para a grade de produto Administrador e os filtros agora são derivados conforme esperado das configurações de Administração. Anteriormente, os valores de atributo eram derivados das configurações de armazenamento padrão.

<!-- MC-43010-->

* As consultas de categoria do GraphQL retornam informações sobre alterações em categorias preparadas, conforme esperado.

<!-- AC-711-->

* As listas de produtos agora são renderizadas com precisão no Administrador em implantações com produtos atribuídos a uma categoria principal e suas subcategorias, mas em posições diferentes dentro de cada categoria. Anteriormente, a renderização da lista de produtos falhava com este erro: `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1148-->

* Atributos de seleção múltipla com muitas opções (mais de 150) agora podem ser atribuídos a novos produtos. Anteriormente, as opções de atributo eram salvas no `catalog_product_entity_varchar` e nem todas as opções estavam presentes quando você reabriu o produto no Administrador. [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* Adicionada validação para o caso em que um roteador não pode instanciar uma classe de ação coletada de um URL. O Adobe Commerce agora exibe a mensagem de erro padrão. Anteriormente, o Adobe Commerce exibia esse erro:  `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`.

<!-- ACP2E-10-->

* A Adobe Commerce agora calcula corretamente os descontos quando duas regras do carrinho são aplicadas a um pedido que atende a estas condições: uma regra de carrinho é aplicada com um código de cupom e uma **Preço fixo no carrinho inteiro**  e a segunda regra de preço do carrinho não tem cupom e um **Porcentagem de desconto de preço do produto** condição. Anteriormente, o algoritmo relevante não podia dividir apropriadamente o desconto proporcionalmente entre produtos de carrinho quando uma regra anterior já tinha aplicado um desconto em alguns produtos.

<!-- ACP2E-115-->

* A atribuição de muitos produtos (aproximadamente 10.000) a uma categoria não causa mais falha no navegador.

<!-- ACP2E-122-->

* Agora, os atributos de imagem são salvos no banco de dados de forma consistente, seja salvando do Administrador ou importando. Anteriormente, os valores de texto ALT da imagem eram salvos de forma inconsistente. Se a imagem existia e o rótulo estava definido como nulo, o valor do rótulo não era redefinido no banco de dados.

<!-- ACP2E-155-->

* A consulta SQL do Widget de catálogo foi otimizada. Anteriormente, grandes consultas do MySQL atrasavam o carregamento da página e resultavam em paralisações do MySQL.

<!-- ACP2E-165-->

* Agora, os filtros de preço funcionam corretamente com produtos configuráveis indisponíveis. Anteriormente, os produtos configuráveis fora do estoque não eram mostrados no intervalo de preço correto.

<!-- ACP2E-330-->

* Atualizar um produto filho não remove mais o desconto da regra de catálogo herdado de seu produto pai configurável durante o processo de indexação parcial. Anteriormente, quando atribuímos um produto configurável a uma categoria, mas não seus produtos simples associados, e usamos essa categoria para criar uma regra de catálogo, o Adobe Commerce removia a regra de catálogo atribuída ao produto simples durante o processo de indexação parcial.

<!-- ACP2E-216-->

* A lista de exibição em grade de produtos agrupados e configuráveis agora contém apenas produtos simples e virtuais ao adicionar opções de produto. Anteriormente, o aplicativo incluía produtos simples com opções.

### Regra de catálogo

<!-- MC-41807-->

* Atualizações diárias de regras de catálogo não resultam mais em degradação do desempenho. Anteriormente, a indexação parcial do preço do produto do catálogo não removia os preços ou datas antigos.

<!-- MC-38263-->

* O Adobe Commerce não remove mais as regras de preço do catálogo em produtos configuráveis durante a reindexação parcial. Anteriormente, apenas os subprodutos eram reindexados quando os produtos configuráveis eram reindexados.

<!-- ACP2E-331-->

* Regras de preço do catálogo com o **category não é category_id** agora se aplicam a produtos que não pertencem a nenhuma categoria.

### Produtos configuráveis

<!-- MC-42188-->

* O nome do rótulo da opção de produto configurável agora se baseia na exibição de loja selecionada durante a criação da ordem de administração. Anteriormente, o Adobe Commerce usava o nome do rótulo na exibição de loja padrão.

<!-- MC-42187-->

* As listas de produtos agora incluem corretamente produtos secundários de um produto indisponível quando o sinalizador global para exibição de produtos indisponíveis estiver ativado. Anteriormente, a lista de produtos não incluía o produto filho se uma das várias opções de produto filho estivesse esgotada quando esse sinalizador era ativado.

<!-- MC-42340-->

* Agora você pode usar o `addConfigurableProductsToCart` mutação para adicionar um produto configurável ao carrinho em uma visualização de loja não padrão. Anteriormente, não era possível adicionar um produto configurável a um carrinho quando a ID do site e a ID da loja eram diferentes. [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products` As consultas não retornam mais dados sobre os produtos secundários desativados de produtos configuráveis.

<!-- ACP2E-101-->

* Criar novas configurações para um produto configurável não substitui mais as alterações nas configurações existentes. Anteriormente, o status das variações existentes era substituído pelo status padrão `enabled` após a geração de novas variações.

<!-- ACP2E-175-->

* O Adobe Commerce não gera mais um erro interno quando você tenta adicionar um filho desativado de um produto configurável ao carrinho.

### Cliente

<!-- MC-24204-->

* O Adobe Commerce agora considera o escopo do site para as localidades do Administrador durante a criação do pedido. Anteriormente, os detalhes do pedido, como atributos de endereço do cliente, funcionavam corretamente em um site somente em uma implantação multisite. [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### Segmento do cliente

<!-- MC-42241-->

* Os Clientes correspondentes contam para um novo segmento de cliente e agora são atualizados automaticamente quando você cria uma conta de empresa. Anteriormente, você tinha que atualizar os dados do segmento para obter uma contagem precisa.

### Email

<!-- MC-42592-->

* Erros de validação de campo de email no pop-up de logon de finalização agora correspondem a erros de validação de email na página de logon do cliente quando um cliente tenta fazer logon usando uma conta de email inválida.

<!-- MC-42764-->

* A Adobe Commerce não inclui mais uma mensagem de erro no email de detalhes da remessa quando um comentário da remessa é adicionado de Administração e a variável **Notificar Cliente** A caixa de seleção está ativada. Anteriormente, os emails de confirmação de envio incluíam esta mensagem: `We're sorry, an error has occurred while generating this content`.

<!-- MC-42486-->

* Os valores de ID de região e país agora são convertidos corretamente em modelos de email. Anteriormente, ao clicar em **Link de visualização** no modelo de email Admin, o país e o nome da região não eram exibidos corretamente.

<!-- MC-36262-->

* Os emails de atualização de vendas enviados do Administrador para exibições de loja não padrão agora contêm rótulos de status de pedido corretos. Anteriormente, esses emails sempre exibiam o status do armazenamento padrão. [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* O Adobe Commerce agora inclui `Content-Disposition: inline` cabeçalhos no email conforme esperado. [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* Os emails de notificação de pedido e remessa agora funcionam conforme esperado em implantações que usam o Microsoft Outlook e o MS Exchange Server. Anteriormente, o corpo do email estava vazio, mas continha um anexo rotulado como ATT*. [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* Os emails do pedido agora contêm dados localizados usando a localidade do comprador, conforme esperado. Anteriormente, os emails de pedido usavam a localidade de Administração.

<!-- ACP2E-107-->

* Clicar na pré-visualização de qualquer template de email agora abre a pré-visualização do modelo em uma janela separada, como esperado.  Anteriormente, o Adobe Commerce abria a visualização do modelo simultaneamente a partir da grade Modelos de email e em uma janela pop-up.

<!-- ACP2E-127-->

* Os emails de pedido assíncronos enviados de um site não padrão agora incluem URLs de logotipo do site apropriado. Anteriormente, esses emails sempre incluíam logotipos do site padrão ou principal. (Uma chave padrão com uma `storeCode` foi atribuído ao segundo argumento de matriz que é transmitido para a `UrlInterface` `getUrl` . Esse valor diferencia URLs em relação a diferentes lojas/sites e gera um valor correto `baseUrl` para o conteúdo do email enviado ao cliente.)

### Estruturas

<!-- AC-515-->

* Agora, as comparações não restritas entre números e strings não numéricas funcionam ao converter o número em string e comparar as strings. As comparações entre números e sequências numéricas continuam a funcionar como antes. Isso significa que `0 == "not-a-number"` agora é considerado falso. [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* O ajudante `Magento\Payment\Helper\Data` O não cria mais novos layouts nos construtores. Anteriormente, quando esse auxiliar era usado em comandos personalizados sem especificar um código de área, o Adobe Commerce exibia um erro. [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* Atualização do `allure-framework/allure-php-api` Dependência do compositor.

<!-- MC-42091-->

* O Adobe Commerce agora retorna um código de resposta 500 quando ocorre uma exceção no arquivo de inicialização. Anteriormente, o Adobe Commerce retornava um código de status 200 OK. [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* O símbolo de moeda agora é carregado conforme esperado nas páginas de detalhes do produto da loja. Anteriormente, esse símbolo às vezes desaparecia após o recarregamento da página do JavaScript.

<!-- AC-719-->

* Atualização `symfony/console` não causa mais falha ao executar `bin/magento setup:di:compile`. [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* Novas opções necessárias foram adicionadas à `.htaccess` e `nginx.conf` arquivos que são distribuídos com o Adobe Commerce para suporte a PHP 8.x. As opções desatualizadas também foram removidas. [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* Os comerciantes agora podem fazer upload de um vídeo para vários produtos. O processo de geração de arquivos agora anexa uma extensão ao nome do arquivo somente se o nome do arquivo carregado incluir uma extensão. Anteriormente, quando um comerciante tentava fazer upload e depois salvava o mesmo vídeo para dois produtos diferentes, a Adobe Commerce exibia o seguinte erro: `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`. Isso ocorria porque a Adobe Commerce tentava anexar uma extensão de arquivo ao nome independentemente do nome do arquivo carregado ter uma extensão.

<!-- magento/magento2/pull/34106-->

* Problemas corrigidos com `sprintf(__())` e `sprintf(Magento\Framework\Phrase())` construção para compatibilidade com PHP 8.x em toda a base de código. Anteriormente, o Adobe Commerce exibia esse tipo de erro: `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`. [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* Aprimorada a validação dos parâmetros de consulta de pesquisa avançada. [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* Em execução `bin/magento support:backup:code` O agora cria um backup conforme esperado. Anteriormente, a Adobe Commerce criava um backup, mas gerava um erro.

<!-- ACP2E-82-->

* Executado com êxito `cron` agora é atribuído um status de `success`. Anteriormente, o mesmo `cron` processo pode ser executado duas vezes porque bem-sucedido `cron` os processos foram atribuídos a `pending` status.

<!-- ACP2E-170-->

* O `staging_synchronize_entities_period` `cron` agora funciona como esperado. Anteriormente, a primeira atualização de preparo era aplicada com êxito, mas o Adobe Commerce exibia esse erro com as atualizações subsequentes: `report.ERROR: Cron Job staging_synchronize_entities_period has an error: The active update can't be deleted`.

<!-- ACP2E-102-->

* O `Magento_Logging` O módulo agora é compatível com IPv6.

### Correções gerais

<!-- MC-42506-->

* O Adobe Commerce agora copia todos os campos do produto de acordo com seus escopos definidos ao duplicar um produto. Anteriormente, o **name** e **descrição** foram redefinidos para `global` escopo.

<!-- MC-42612-->

* A Adobe Commerce não aplica mais o arredondamento delta para um desconto quando o preço do produto é 0. Anteriormente, a Adobe Commerce calculava um valor de desconto negativo.

<!-- MC-42215-->

* Produtos com uma **Definir como Novo** atributo ao qual é atribuída uma data de início vazia e uma data de término expirada agora pode ser salvo com êxito. Anteriormente, o Adobe Commerce exibia esse erro quando um produto era salvo com essas configurações: `Make sure the To Date is later than or the same as the From Date`.

<!-- MC-41803-->

* O Adobe Commerce não duplica mais uma página CMS existente na hierarquia do CMS ao alterar seu identificador de URL de SEO. Anteriormente, o Adobe Commerce criava um novo nó na hierarquia do CMS, duplicando um existente.

<!-- MC-42775-->

* Agora, os administradores podem tentar novamente as operações que foram executadas durante o tempo máximo de processamento. O limite padrão é de 12 horas.

<!-- MC-42514-->

* Erros de pipe quebrados não ocorrem mais durante o processamento da ação em massa devido a mensagens não confirmadas para o consumidor. Uma propriedade prefetch count agora limita essas mensagens para o consumidor e evita erros. Anteriormente, em execução `bin/magento queue:consumers:start async.operations.all` gerou este erro:  `Broken pipe or closed connection`.

<!-- MC-42075-->

* Os compradores agora são redirecionados de volta à página de logon, como esperado, após uma segunda tentativa de logon com falha. Anteriormente, os compradores eram redirecionados para uma página 404 após uma segunda tentativa de logon malsucedida. [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* A validade do token de redefinição de senha foi estendida para evitar a ocorrência de uma condição de corrida durante o envio da página de alteração de senha. [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* As permissões atribuídas a novas integrações agora são respeitadas. [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* Correção de um problema de regressão que afetava as mensagens deixadas nos logs de exceção para o formulário Entrar em contato conosco. [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* Solução de vários problemas com o carregamento de dados do cliente em JavaScript. [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* Usando `QuoteIdToMaskedQuoteId` em uma extensão do não aumenta mais significativamente o tempo de resposta. [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* A classe `BundleDiscountPrice` em `magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php` agora é declarado conforme esperado. Anteriormente, o Adobe Commerce exibia este erro: `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`. [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* Os valores de campo CSV extraídos pelo adaptador AWS S3 agora correspondem aos dados gravados por outros adaptadores de sistema de arquivos.

<!-- MC-43046-->

* O armazenamento compatível com S3 agora é compatível. [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* Fazer logoff de um dispositivo não faz mais logoff automaticamente do comprador de outros dispositivos.

<!-- ACP2E-168-->

* O Adobe Commerce agora salva uma página CMS com êxito ao editá-la em linha na grade no nível de visualização da loja quando a variável **Usar a hierarquia do nó pai** a configuração está desativada. Anteriormente, o Adobe Commerce exibia esse erro e não salvava as edições de página do CMS: `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`.

<!-- ACP2E-171-->

* As navegações estruturais agora são exibidas corretamente para nós que contêm a mesma página. Anteriormente, o Adobe Commerce exibia o mesmo nome de nó para páginas que pertenciam a vários nós. O Adobe Commerce recuperou apenas o primeiro nó de uma página, mesmo quando existia mais de um nó para cada página.

<!-- ACP2E-202-->

* A reescrita do URL em eventos de edição em linha agora está conectada aos relatórios.

<!-- ACP2E-290-->

* O `mage-messages` não será redefinido se não houver novas mensagens.

### Cartões de presente

<!-- MC-42327-->

* Adição de uma mensagem de erro mais informativa quando um comprador insere um cartão-presente inválido.

### GraphQL

<!-- PWA-1938-->

* O `generateCustomerToken` e `revokeCustomerToken` agora fornecem a ID de cache correta para o estado do usuário. Anteriormente, essas mutações usavam um valor inválido `x-magento-cache-id`, que degradaram o desempenho.

<!-- PWA-1506-->

* O `setBillingAddressToCart` agora usa corretamente a variável `same_as_shipping` para definir o endereço de faturamento para corresponder ao endereço de entrega conforme esperado. Anteriormente, o Adobe Commerce exibia esse erro: `The shipping method is missing. Select the shipping method and try again`. [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* As operações de carrinho do GraphQL agora calculam os totais gerais do carrinho somente quando o query o solicita. Anteriormente, as operações do carrinho sempre calculavam o total geral, que é uma operação que consome muitos recursos.

<!-- MC-42781-->

* O `addProductsToCart` agora a mutação adiciona ao carrinho somente produtos atribuídos à loja que é definida no cabeçalho.

<!-- MC-42783-->

* `products` consultas usando filtros de navegação em camadas agora retornam listas de categorias secundárias corretas. [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* Queries e mutações que retornam a variável `ConfigurableCartItem` contém informações sobre as variantes configuradas conforme esperado.

<!-- MC-42082-->

* O `products` query agora retorna valores de opções de produto de configuração e valores de atributos de variante. Anteriormente, esses valores estavam vazios nas respostas da query.

<!-- MC-41794-->

* O `products` agora filtra corretamente os produtos do pacote quando os produtos filhos estão desativados no nível de visualização da loja. Anteriormente, a consulta retornava produtos secundários que estavam desativados no nível de visualização da loja.

<!-- PWA-1311-->

* O GraphQL agora fornece à New Relic nomes descritivos de transação, que podem ser úteis para depuração. [GitHub-30915](https://github.com/magento/magento2/issues/30915)

<!-- MC-42903-->

* O `setShippingAddressesOnCart` agora suporta a configuração de endereços de envio em um carrinho de compras com um valor de número de telefone vazio quando a função **Mostrar Telefone** A configuração do administrador é definida como opcional. Anteriormente, o Adobe Commerce exibia este erro: `Field CartAddressInput.telephone of required type String! was not provided`.

<!-- MC-42970-->

* Correção de um problema em que a função `addSimpleProductsToCart` A mutação permitiu adicionar produtos simples a um carrinho que não estão atribuídos ao site de destino.

<!-- MC-42600-->

* As consultas do MySQL foram otimizadas para o GraphQL `products` consultas que usam parâmetros de pesquisa para refinar resultados de pesquisa.

<!-- MC-43189-->

* O `addConfigurableProductToCart` A mutação não oferece mais suporte à adição de um produto ao carrinho se o produto não estiver incluído no escopo solicitado.

<!-- MC-42666-->

* O `products` agora retorna somente as variantes configuráveis atribuídas à visualização de armazenamento solicitada. Anteriormente, todas as variantes do produto configurável solicitado eram retornadas.

<!-- MC-42652-->

* `addSimpleProductsToCart` As solicitações agora podem ser executadas com êxito em paralelo. Anteriormente, várias solicitações para o mesmo SKU criavam itens de linha duplicados para a mesma ID do carrinho, em vez de aumentar a quantidade do produto conforme esperado.

<!-- AC-856-->

* O `addProductsToCompareList` agora pode ser usada para comparar variantes de produtos configuráveis.

<!-- MC-42443-->

* Quando o preço de um produto de camada é atualizado do back-end, o novo preço é atualizado corretamente no carrinho do cliente. Anteriormente, embora o subtotal na seção de resumo do carrinho fosse atualizado corretamente, o subtotal da linha não era atualizado.

<!-- AC-697-->

* O `addProductsToCart` agora, a mutação adiciona todas as opções selecionadas ao carrinho quando usadas para adicionar produtos de pacote com várias opções de seleção. Anteriormente, a mutação adicionava somente a última seleção. [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* Agora, as consultas do GraphQL retornam o endereço de faturamento conforme esperado quando o valor de um campo de telefone opcional é definido como uma string vazia. Anteriormente, as consultas retornavam um valor de endereço nulo. [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* O `products` a resposta da consulta agora lista produtos de acordo com a ordem de classificação especificada, quando vários produtos têm a mesma relevância ou valor de preço.

<!-- ACP2E-75-->

* Concorrente `addSimpleProductsToCart` e `addProductsToCart` As solicitações não resultam mais em itens de cotação duplicados.

<!-- ACP2E-76-->

* `products` os filtros de navegação em camadas de consulta agora retornam listas de categorias filhas corretas. Agora, apenas subcategorias diretas são incluídas quando a variável `includeDirectChildrenOnly` é fornecido na solicitação. Anteriormente, todas as categorias eram incluídas na resposta na seção de agregação quando um produto era atribuído a várias categorias.

<!-- ACP2E-132-->

* Adição da funcionalidade de sugestão de pesquisa para consultas de pesquisa do GraphQL.

<!-- ACP2E-288-->

* O `OrderAddress.telephone` agora é opcional na variável `customer` consulta ou outras consultas e mutações que retornam ou modificam endereços de ordem do cliente.

<!-- ACP2E-278-->

* Os preços agora são atualizados corretamente para clientes em um grupo especificado na loja e no Administrador quando uma ID de grupo é alterada por meio da API. Anteriormente, esses preços não eram atualizados corretamente quando uma ID de grupo era alterada por meio da API.

### Imagem

<!-- MC-42080-->

* Imagens de marca d&#39;água com planos de fundo transparentes não têm mais um fundo branco na imagem transparente do produto que sobrepõe. Anteriormente, quando a imagem da marca d&#39;água e a imagem do produto tinham um plano de fundo transparente, a marca d&#39;água era exibida com um plano de fundo branco.

<!-- AC-1240-->

* Logotipos para faturas e recebimentos de remessa agora são carregados e exibidos conforme esperado quando o AWS S3 é ativado.

<!-- MC-42160-->

* A tag de mídia associada a uma imagem adicionada a uma página CMS em uma implantação na qual o Administrador é definido como um domínio diferente do URL da loja agora contém URLs de loja, conforme esperado. Anteriormente, as tags de mídia continham URLs de administrador estáticos em vez dos URLs de armazenamento esperados. [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* O Adobe Commerce não gera mais um erro ao liberar o cache de imagens enquanto carrega simultaneamente imagens na loja.

### Importar/exportar

<!-- AC-1486-->

* `bin/magento remote-storage:sync` O não falha mais quando os nomes de arquivo são semelhantes, mas diferem por apenas um ou dois caracteres. Anteriormente, a primeira imagem era armazenada corretamente, mas a segunda, com nomes semelhantes, acionava uma falha de sincronização e este erro: `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`. [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672-->

* O Adobe Commerce agora converte o carimbo de data e hora no nome do arquivo de exportação para o fuso horário do usuário após uma exportação programada. Anteriormente, esses valores não eram convertidos e o Adobe Commerce exibia o carimbo de data e hora UTC.

<!-- MC-42330-->

* O Adobe Commerce não cria mais imagens duplicadas em armazenamento remoto quando o mesmo arquivo CSV é importado mais de uma vez.

<!-- AC-1045-->

* A importação não falha mais com esta mensagem: `Import failed: Area code not set: Area code must be set before starting a session`. [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* Agora é possível importar com êxito após a execução `bin/magento app:config:dump` e edição manual `config.php`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672 23734-->

* Agora, separadores de vários valores não padrão podem ser usados em atributos personalizados de seleção múltipla. Anteriormente, a validação falhava durante a importação. [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* A posição do produto em categorias agora é atribuída corretamente durante a importação do CSV.

### Índice

<!-- MC-42791-->

* O Adobe Commerce agora exibe os produtos conforme o esperado na loja após a reindexação. Anteriormente, quando os primeiros 500 produtos reindexados estavam em estoque e os 500 produtos seguintes estavam esgotados, a loja não exibia nenhum produto adicional.

<!-- magento/magento2/pull/27212-->

* Solução de problemas de consistência na mesclagem `indexer.xml` arquivos. Os valores permitidos em `classType` são agora iguais em unmesclado e mesclado `indexer.xml` arquivos. [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* Um mecanismo de sincronização foi implementado em indexadores de categoria para impedir que indexadores completos e parciais sejam executados em paralelo. Anteriormente, quando esses indexadores eram executados em paralelo, os produtos podiam ser temporariamente omitidos das páginas de categoria da loja ou as páginas de categoria podiam estar temporariamente vazias de produtos.

### Infraestrutura

<!-- AC-1172-->

* Não suportado `str_contains` foi substituído por uma função suportada. Esse era um problema conhecido do Adobe Commerce 2.4.3. [GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* Refatoração da base de código para corrigir o uso da palavra-chave `match`, que é uma palavra-chave reservada no PHP 8.x. [GitHub-33626](https://github.com/magento/magento2/issues/33626)

* As tags HTML agora são aninhadas e fechadas corretamente para atender aos padrões no JQuery 3.5.x para elementos não nulos, incluindo elementos personalizados. <!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* Fixo `abs()` e `round()` funções para compatibilidade com PHP7.x e PHP8.x.  [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* Atualização `symfony/console` não causa mais falha ao executar `bin/magento setup:di:compile`. [GitHub-33595 ](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* Correção da restrição para o `colinmollenhour/cache-backend-redis` Dependência do compositor. [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* A base de código foi refatorada para remover chamadas para métodos obsoletos de `phpunit/phpunit`. [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* O Adobe Commerce agora exibe um erro informativo quando um administrador com um somente leitura `pubs/media` O tenta acessar a página de detalhes do produto para um produto que inclui imagens. Anteriormente, o Adobe Commerce exibia um erro PHP. [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* Todos os membros `@api` as anotações foram movidas para a classe em toda a base de código.

<!-- AC-1977-->

* `gift-card Cms` os dados do widget foram movidos de `Magento/WidgetSampleData` (Magento Open Source) para `Magento/GiftCardSampleData` (Adobe Commerce). Isso solucionou problemas ao instalar o (Magento Open Source) com dados de amostra no PHP8.1.

<!-- AC-1001-->

* Interfaces marcadas em toda a base de código de Integração da Adobe Stock com `@api` conforme necessário. [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* Inteiros e flutuantes em conjuntos de resultados agora são retornados usando tipos PHP nativos em vez de strings ao usar instruções preparadas emuladas. [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* A criação automática de matrizes a partir de valores falsos foi desativada para garantir a compatibilidade com o PHP 8.1.

<!-- AC-1338-->

* O ajudante `Magento\Payment\Helper\Data` O não cria mais novos layouts nos construtores. Anteriormente, quando esse auxiliar era usado em comandos personalizados sem especificar um código de área, o Adobe Commerce exibia um erro. [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* Agora você pode passar uma `data` argumento para um construtor de instância de bloco por `di.xml`.

<!-- MC-43096-->

* Otimizado `Generator.php` para facilitar a leitura. [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* A verificação JWK na função `JwsManager` classe para lidar com situações em que o algoritmo é definido diretamente no cabeçalho. Anteriormente, essa verificação ignorava esse cenário válido. [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### Atualizações para compatibilidade PHP 8.1

<!-- AC-1605-->

* As funções que foram descontinuadas no PHP 8.1 foram removidas da base de código. [GitHub-34497](https://github.com/magento/magento2/issues/34497)

* Adição de declarações do tipo retorno a métodos internos com tipos de retorno incompletos para compatibilidade com PHP 8.1. [GitHub-34498](https://github.com/magento/magento2/issues/34498) <!-- AC-1606-->

<!-- AC-1147-->

* Atualização da raiz `composer.json` metapackage e  `composer.json` para cada módulo no PHP 8.1. [GitHub-34009](https://github.com/magento/magento2/issues/34009)

* Terceiros `jquery.tabs` biblioteca (versão mais recente)

* Pacotes NPM (versão mais recente) [GitHub-33512](https://github.com/magento/magento2/issues/33512), [GitHub-33972](https://github.com/magento/magento2/issues/33972) <!-- magento/magento2/pull/33515 33998-->

* `jquery.cookie` biblioteca de terceiros (versão mais recente) [GitHub-34427](https://github.com/magento/magento2/issues/34427) <!-- AC-101-->

#### Atualizações de dependência do compositor

* Todas as dependências do Composer foram atualizadas para as versões compatíveis com o PHP 8.1.

* O PHPUnit foi atualizado para a versão mais recente (9.5.x). Os frameworks de testes e testes foram atualizados para serem compatíveis com a nova versão. <!-- AC-404-->

#### Atualizações de dependência do JavaScript

<!-- magento/magento2/pull/33871-->

* `jquery-validate` biblioteca de terceiros  [GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### Remoções e descontinuações da biblioteca

* As seguintes bibliotecas foram removidas porque todos os navegadores compatíveis com o Adobe Commerce 2.4.x têm suporte integrado para esta funcionalidade:

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* Remoção do não usado `jquery.hoverIntent` Biblioteca de JavaScript. [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php` foi substituída. Ele contém a variável `money_format()` , que foi removida em PHP 8.x. [GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* Remoção do obsoleto, não suportado `grunt-autoprefixer` pacote. [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### Atualizações de biblioteca

* As seguintes bibliotecas foram atualizadas para versões mais recentes:

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### Fatura

<!-- AC-1564-->

* Casting para `int` O foi removido para IDs de fatura incrementadas automaticamente quando prefixado com uma string. Como resultado, as faturas agora exibem um 0 para números que recebem o prefixo de uma string. [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### Registro

<!-- MC-42360-->

* O Adobe Commerce não cria mais entradas de log para chamadas de API com falha que executam ações em massa em **Sistema** > **Ações em massa**. Anteriormente, entradas permanentes para chamadas de API com falha eram adicionadas ao log de ação em massa.

<!-- AC-1607-->

* A criação automática de matrizes a partir de valores falsos não é mais permitida. [GitHub-34499](https://github.com/magento/magento2/issues/34499), [GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Padrão de codificação Adobe Commerce

<!-- magento/magento-coding-standard/pull/219-->

* Atualizado `phpunit/ phpunit` para a versão mais recente da `magento-coding-standard` repositório. [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* Atualização do `webonyx/graphql-php` dependência para a versão ^14.9 no repositório padrão de codificação do Adobe Commerce. [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* Adição de novo farejamento `Magento2.PHP.ArrayAutovivification` para o padrão de codificação Adobe Commerce para identificar a criação automática de arrays a partir de um valor falso. [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* Adição de novo farejamento `Magento2.Functions.DeprecatedFunction` para o padrão de codificação Adobe Commerce. [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* Adição de funções obsoletas ao sniff `Magento2.Functions.DiscouragedFunction` no padrão de codificação Adobe Commerce. [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* O `Magento2.Annotation.MethodAnnotationStructure` não falha mais com um falso positivo. [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### Galeria de Mídia

<!-- AC-1054-->

* O `bin/magento media-gallery:sync` O comando não falha mais em implantações nas quais o AWS S3 está ativado.

<!-- AC-1000-->

* Galeria de mídia adicionada recentemente Os títulos do submenu Conteúdo agora são exibidos quando os itens de menu excedem 11 e o **Habilitar Galeria de Mídia Antiga** a configuração está ativada. [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* O tempo de carregamento da guia Galeria de mídia ao editar um produto com muitas imagens foi aprimorado. [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS` O não aceita mais objetos como arrays. Para interpretar um objeto como uma matriz, execute um`array`). Essa prática também se aplica a outras opções que aceitam arrays. [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()` agora retorna um `CurlHandle` em vez de um recurso. O `curl_close()` não tem mais efeito. Em vez disso, a variável `CurlHandle` A instância é automaticamente destruída se não estiver mais referenciada. [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* Correção de erros nos testes MFTF para produtos baixáveis. [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* Removido `CliCacheFlushActionGroup` from `CatalogSearch`, `GroupedProduct`, `Newsletter`, `Paypal`, `Quote`e `Review` módulos. [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* Agora, as comparações não restritas entre números e strings não numéricas funcionam ao converter o número em string e comparar as strings. As comparações entre números e sequências numéricas continuam a funcionar como antes. Isso significa que 0 == &quot;not-a-number&quot; agora é considerado falso. [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()` agora faz a distinção entre consultas e fragmentos ausentes e vazios. [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* Atualização da base de código para evitar um erro fatal ao usar a variável `ReflectionType::isBuiltin()` método . [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### Novos grupos de ação

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### Grupos de ação

As ações repetitivas foram substituídas por grupos de ação nestes testes:

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest`  [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### Novos testes

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### Testes refatorado

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### Informativos

<!-- ACP2E-147-->

* Usuários com permissões apropriadas agora podem gerenciar assinaturas de boletins informativos de clientes conforme esperado. Anteriormente, somente administradores com permissões completas podiam gerenciar assinaturas de boletins informativos do cliente na página de conta do cliente Administrador .

### Pedido

<!-- MC-41981-->

* Os compradores agora podem reorganizar com êxito um pedido existente que contém um produto com a combinação de opções personalizadas de arquivo do tipo e lista suspensa do tipo da loja e do Administrador. Anteriormente, a Adobe Commerce exibia um erro e não processava o repedido.

<!-- MC-42746-->

* As faturas de pedidos que são pagos por crédito de loja e que têm impostos fixos sobre o produto (FPT) aplicados agora incluem o total geral correto.

<!-- MC-42332-->

* A página Detalhes da ordem de administração agora é carregada conforme esperado. Anteriormente, o Adobe Commerce exibia o seguinte erro ao carregar a página de detalhes do pedido para pedidos com determinados impostos: `Call to a member function getId() on array`.

<!-- MC-38521-->

* Os administradores com permissões restritas que incluem privilégios de pedido e envio agora podem visualizar a página do pedido como esperado. Anteriormente, a Adobe Commerce exibia um erro quando um administrador com essas permissões tentava visualizar um pedido. [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* Os compradores agora podem colocar um pedido que inclua um produto configurável filho quando uma quantidade máxima permitida for definida.

### Métodos de pagamento

<!-- AC-1830-->

* Os compradores agora podem usar o Braintree para fazer um pedido usando um endereço de cobrança sem uma região definida em implantações com 3DS habilitado. Anteriormente, o check-out congelava quando o comprador clicava **Colocar ordem** e a compra não pôde ser concluída. [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* A opção de pagamento Venmo agora é compatível.

<!-- AC-1228-->

* O PayPal agora pode ser rastreado por código BN.

<!-- AC-493-->

* `bin/magento setup:upgrade` O agora é executado como esperado ao atualizar do Adobe Commerce 2.4.2-p1. Anteriormente, o Adobe Commerce exibia este erro: `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`. [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* A ID de armazenamento correta agora é usada para recuperar cartões de crédito salvos durante o posicionamento do pedido do administrador. Os cartões de crédito armazenados agora são exibidos durante o posicionamento do pedido de acordo com a configuração do escopo do site. Anteriormente, quando um administrador tentava criar um pedido para um cliente a partir do Administrador e selecionava o método Cartões de crédito armazenados , nenhuma opção estava disponível para os cartões armazenados.

<!-- AC-344-->

* Anomalias com a exibição Crédito PayPal de quantias de cartão-presente foram resolvidas. Anteriormente, quando o Crédito PayPal era ativado e várias quantias de cartão-presente eram configuradas, se um comprador alterasse o valor de um cartão-presente, a loja não atualizava o valor para pagamentos por parcela. Esse era um problema conhecido no Adobe Commerce 2.4.3.

#### PayPal

<!-- MC-42154-->

* O Adobe Commerce não exibe mais um erro durante o check-out com o método de pagamento PayPal Express. Antes, embora o processo de finalização tenha sido concluído, o Adobe Commerce exibia o seguinte erro: `Something went wrong`.

<!-- AC-722-->

* O PayPal Express agora funciona como esperado no carrinho de compras. Anteriormente, ao clicar no **PayPal** para iniciar o check-out expresso do carrinho, o Adobe Commerce exibiu este erro:  `To check out, please sign in with your email address`. [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* O PayPal Payflow Pro agora executa a captura atrasada com as IDs de transação pai corretas em implantações nas quais o gateway do PayPal Payflow Pro com **Ação de pagamento** está definida como **Autorização**. A **Venda** A transação é enviada para o Fluxo de trabalho com uma ID de transação pai do token de cofre criado no check-out conforme esperado. Anteriormente, uma **Captura atrasada**  A transação foi criada e enviada para o Fluxo de Pagamento do PayPal. [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* Os compradores agora são redirecionados para a página de sucesso, conforme esperado após o pagamento com Pagamento de Pagamento Avançado concluído. Anteriormente, os compradores não eram redirecionados para esta página mesmo quando o pagamento era processado com êxito e nenhum erro era registrado.

### Desempenho

<!-- AC-705-->

* Foi adicionado um índice ao `magento_giftcardaccount.code` para melhorar o desempenho.

<!-- MC-42158-->

* O tempo de execução de carregamento da lista de módulos foi aprimorado.

<!-- AC-932-->

* O desempenho do cache do Termo de pesquisa popular melhorou. Anteriormente, quanto maior o valor de `search_query` tabela, quanto mais tempo uma consulta de pesquisa demorou para ser concluída. [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* Por padrão, o Adobe Commerce redimensiona imagens de forma síncrona durante a gravação do produto. Agora, os comerciantes podem redimensionar imagens como um processo assíncrono em segundo plano por pequenas edições em um `di.xml` arquivo.

<!-- ENGCOM-9168-->

* O desempenho do indexador de Produtos de categoria foi aprimorado em implantações de várias lojas. [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* O novo cache na memória para `glob()` chamadas do sistema melhora o desempenho ao reduzir o número de `glob()` chamadas .  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* O desempenho do processo assíncrono de reindexação da grade de pedidos foi aprimorado.

<!-- ACP2E-117-->

* O consumo de memória durante a exportação do produto foi otimizado.

<!-- ACP2E-325-->

* O carregamento de páginas de detalhes do produto com produtos relacionados foi otimizado. As consultas de condições do produto relacionadas também foram otimizadas.

### Preços

<!-- MC-42243-->

* A classificação de preço agora funciona conforme o esperado quando os preços do produto estão próximos ou iguais a zero e os catálogos compartilhados estão ativados. Anteriormente, os preços de nível zero eram ignorados durante a reindexação dos preços.

<!-- ACP2E-87-->

* O Adobe Commerce não gera mais um erro se o filtro de preço na página Categoria não contiver um segundo valor. Anteriormente, o Adobe Commerce exibia uma exceção no arquivo de log.

### ProductAlert

<!-- MC-41917-->

* O novo `product_alert` O consumidor melhora o envio de alertas do cliente criando mensagens de fila, executando o consumidor e melhorando o tempo de execução. Anteriormente, a Adobe Commerce lançava uma exceção de falta de memória ao enviar mais de 100.000 alertas de produto. A Adobe Commerce também levou mais de 20 horas para enviar todos os alertas.

### Vídeo do produto

<!-- MC-42105-->

* O Adobe Commerce agora ativa a variável **Salvar** e preenche automaticamente os campos quando você insere um URL incompleto ao adicionar um vídeo (Administrador **Catálogo**  > **Produtos** > **Adicionar vídeo**). Anteriormente, o **Salvar** foi desativado e os campos não foram preenchidos.

### Autorizações de Devolução de Produto (RMA)

<!-- MC-42987-->

* A grade Criar Produto de Devolução de Administrador agora exibe imposto, incluindo preços somente para produtos configurados para exibir imposto com preços. Anteriormente, o Adobe Commerce não verificava as configurações de exibição na `tax/calculation/price_includes_tax` sinalizador.

### Resenhas

* A exibição da lista de produtos agora exibe a classificação correta de produtos. [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* As revisões agora estão visíveis como esperado quando um comprador clica **Revisão** na página de produtos da loja.

<!-- ACP2E-111-->

* A classificação de estrelas do produto agora é consistente em todas as visualizações de Grade e Lista na página de lista de produtos da loja. Anteriormente, o mesmo produto podia ter classificações diferentes nos modos de exibição de Grade e Lista.

### Recompensas

<!-- ACP2E-129-->

* O Histórico de Equilíbrio de Pontos Reembolsáveis e Pontos Reembolsáveis agora exibe o mesmo saldo. Agora, os pontos expirados são deduzidos corretamente. Anteriormente, o Saldo dos Pontos de Recompensa não refletia com precisão os pontos expirados.

<!-- ACP2E-158-->

* Os pontos de recompensa expirados agora são marcados como **Expirado** na seção Motivo da grade Histórico de pontos de recompensa da loja.

### Vendas

<!-- MC-42025-->

* O desempenho das atualizações da grade de vendas no modo assíncrono para tabelas com grandes conjuntos de dados após a atualização para o MariaDB 10.2.34 foi aprimorado.

<!-- MC-42531-->

* O Adobe Commerce agora remove as tags HTML, conforme esperado, da loja **Conta** > **Meus pedidos** > **Exibir pedido** página. Anteriormente, o Adobe Commerce exibia as tags de HTML na seção de comentários da loja do pedido do cliente.

<!-- MC-42377-->

* Cobertura de teste automatizada para verificar a existência de um índice de `sales_shipment_grid.order_id` foi adicionada.

<!-- MC-43163-->

* `POST V1/orders` As chamadas de agora atualizam atributos de extensão sem erro. Anteriormente, ocorria um erro de sintaxe SQL.

### Pesquisar {#search-heading}

<!-- MC-42799-->

* As opções de Navegação em camadas para o intervalo de preço agora funcionam como esperado com atributos de preço personalizados. O Adobe Commerce usa a configuração da etapa de navegação do preço ao filtrar atributos de preço personalizados. Anteriormente, a Adobe Commerce usava a configuração manual da etapa.

<!-- MC-42545-->

* A loja agora mostra todas as subcategorias da categoria atual na navegação em camadas, independentemente do número de categorias disponíveis no catálogo.

<!-- MC-41706-->

* As pesquisas no catálogo de Elasticsearch agora não fazem distinção entre diacríticos. Anteriormente, as pesquisas por termos sem acento resultavam em resultados diferentes das pesquisas no mesmo termo com acento.

<!-- ACP2E-8-->

* O peso da pesquisa agora é definido corretamente em atributos SKU que contêm caracteres especiais.

<!-- ACP2E-36-->

* `category_name` foi adicionado aos códigos de atributo de produto reservado pelo sistema. O Adobe Commerce agora mostra um erro se um usuário tentar criar um atributo de produto com o código de atributo `category_name`. Anteriormente, os produtos não eram listados na categoria esperada e um erro de Elasticsearch era registrado.

<!-- ACP2E-68-->

* Termos de pesquisa populares foram atualizados após cada consulta de pesquisa do GraphQL.

<!-- ACP2E-249-->

* O Adobe Commerce agora adiciona campos de preço corretos ao mapeamento do índice de preço de Elasticsearch. Anteriormente, campos de preço incorretos eram adicionados ao índice com ID de loja em vez da ID do site.

### Envio

<!-- MC-42758-->

* O email de remessa agora inclui o número de rastreamento somente para a remessa atual. Anteriormente, quando uma ordem incluía várias entregas, o email de cada remessa incluía os números de rastreamento de todas as entregas relacionadas à ordem.

<!-- MC-42396-->

* O Adobe Commerce agora atualiza o minicarrinho com sucesso quando um comprador exclui um produto do carrinho enquanto está no modo de várias entregas e, em seguida, alterna para um único endereço de envio. Anteriormente, os preços do produto não eram atualizados como esperado.

<!-- AC-267-->

* A importação de taxas de tabela agora funciona como esperado ao usar o adaptador de armazenamento S3. Anteriormente, o Adobe Commerce exibia esse erro: `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`. [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- MC-42577-->

* Agora você pode desabilitar emails de atualização de entrega como esperado de **Lojas**  > **Configuração**  >  **Vendas**  >  **Emails de vendas**. [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* O Adobe Commerce agora exibe o custo de frete grátis (0) nos totais da página Administração e fatura de loja. Anteriormente, quando o envio era zero em um pedido, a Adobe Commerce não exibia o valor de envio nos totais no total de envio da página da fatura.

<!-- ACP2E-120-->

* Os pedidos de tarifas às transportadoras marítimas em linha foram reduzidos de vários pedidos para um. O seguro e o preço de manuseio de pacotes por item/pacote agora são calculados corretamente. Anteriormente, o Adobe Commerce exibia taxas de envio incorretas para métodos de envio FedEx.

<!-- ACP2E-174-->

* O Adobe Commerce agora exibe as taxas de UPS ao criar etiquetas de envio para envio de Porto Rico. Anteriormente, a Adobe Commerce não exibia essas taxas de UPS.

<!-- ACP2E-227-->

* O endereço da rua de envio agora é totalmente limpo conforme esperado após a remoção da caixa de entrada. Anteriormente, a caixa de texto retinha um ou mais caracteres após a exclusão do endereço.

### Estágios

<!-- MC-42194  -->

* As imagens e os vídeos de atualização agendados do produto agora são salvos corretamente. Anteriormente, vídeos, URLs, títulos e descrições eram removidos após a criação de uma nova atualização programada.

<!-- MC-42501-->

* O Adobe Commerce agora exibe o atributo Preço mínimo anunciado no formulário Agendar nova atualização para as exibições de armazenamento para as quais o atributo está ativado.

<!-- MC-42590-->

* O Adobe Commerce agora exibe apenas uma guia Imagens no formulário Atualização programada do produto, conforme esperado. Anteriormente, o Adobe Commerce duplicava essa guia.

<!-- MC-23994-->

* O status do estoque do produto agora é exibido corretamente nas visualizações de Agendamento de atualização. Anteriormente, o status do produto era exibido como indisponível quando um produto anteriormente desativado era ativado durante a criação da Atualização de agendamento.

### Loja

<!-- MC-42884-->

* O recurso Fazer logon como cliente agora funciona conforme o esperado em implantações que contêm vários armazenamentos em URLs diferentes. Anteriormente, a Adobe Commerce não carregava a loja correta, mesmo ao acessar o domínio de loja correto.

### Ferramenta de análise do site

<!-- ACP2E-240-->

* Os comerciantes agora podem acessar a Ferramenta de análise do site conforme esperado. Anteriormente, pares de chaves quebrados impediam que alguns comerciantes acessassem a ferramenta.

### Imposto

<!-- MC-41924-->

* O Adobe Commerce agora calcula corretamente o subtotal do minicarrinho quando um cliente exclui um item após selecionar o envio para vários endereços.

<!-- MC-41945-->

* O Adobe Commerce agora mostra a mesma taxa de imposto em todas as páginas de check-out quando o carrinho de compras contém apenas produtos virtuais.

<!-- AC-714-->

* Os preços de nível para produtos configuráveis agora exibem valores de imposto exatos incluídos e excluídos na loja. Anteriormente, os mesmos valores eram exibidos para os impostos incluídos e excluídos. [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### Teste

<!-- magento/magento2/pull/34798-->

* Os testes da WebAPI agora são compatíveis com o PHP 8.1. [GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* Os testes de integração agora são compatíveis com o PHP 8.1. [GitHub-34567](https://github.com/magento/magento2/issues/34567), [GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* Os comerciantes podem agora testar a experiência do comprador do país em que o comprador está localizado, em vez da localização do comerciante.

<!-- AC-266-->

* O consumo de memória do teste de integração foi reduzido, o que melhora o desempenho do teste e reduz o tempo necessário para a conclusão do teste.

<!-- MC-41955-->

* Adição de um teste para verificar o formato de atributo de data personalizado para vitrine e administração.

<!-- AC-1517-->

* Correção de erros com `StorefrontPOWorkflowVerifyApprovalFlowTabTest`. [GitHub-34378](https://github.com/magento/magento2/issues/34378)

<!-- AC-1571-->

* Os testes funcionais foram estabilizados para compatibilidade com PHP 8.x. [GitHub-34327](https://github.com/magento/magento2/issues/34327), [GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* Correção de problemas funcionais em testes da WebAPI. [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* Correção de erros que resultavam em testes estáticos falsos positivos. [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* A cobertura do teste foi atualizada para `call_user_func_array`. [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* O `Magento\GraphQl\CatalogGraphQl\ProductSearchTest` o teste não gera mais esse erro quando executado com o AWS Elasticsearch: `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`.

<!-- magento/magento2/pull/33699-->

* Correção de vários avisos não críticos de teste de unidade, renomeando todas as variáveis do modelo para incluir a variável `Mock` sufixo e remoção de referências a uma classe obsoleta do Object Manager. [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* O `Magento\Framework\MessageQueue\TopologyTest` agora é compatível com o AWS MQ para [!DNL RabbitMQ] serviço. Anteriormente, esse teste falhava com esta mensagem: `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`. <!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* Os testes de unidade agora são compatíveis com o PHP 8.1. [GitHub-3441](https://github.com/magento/magento2/issues/34441)

#### Ensaios da unidade

Os seguintes testes de unidade foram refatorados para uso `PHPUnit` em vez de `AspectMock`:

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase`  [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest`  [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### Tema

<!-- MC-41887-->

* As mensagens de notificação agora são exibidas corretamente quando o Adobe Commerce tem um subcaminho configurado em seu URL base.

<!-- MC-42469-->

* Adicionou um `aria-label` elemento para o modelo de página da loja para indicar a página para a qual o comprador irá navegar ao clicar em um link. Anteriormente, o mesmo texto do link era usado para links de páginas diferentes. [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* O Adobe Commerce não exibe mais uma mensagem de erro ao carregar a página inicial de uma loja com tema personalizado preexistente. Anteriormente, o Adobe Commerce exibia esta mensagem:  `The store will not work correctly in the case when cookies are disabled`.

### Traduções e localidades

<!-- AC-285 MC-41400-->

* O `UserExpiration` o validador não falha mais com `de_DE` e `uk_UA` localidades. Anteriormente, o Adobe Commerce exibia um erro quando um administrador tentava definir uma data de expiração ao criar um novo usuário do Administrador com localidades definidas como `de_DE` ou `uk_UA`. [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- MC-41583 AC-989-->

* Os nomes de região suíça agora são consistentemente apresentados em inglês nos formulários criar ou editar endereço . [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* Atualizado `zip_codes.xml` padrões para Guernsey suportar códigos postais GY10 para a Ilha de Sark. [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* Adição de regiões da Bielorrússia ao `directory_country_region` tabela. [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* Foram solucionadas anomalias na exibição de vitrines das localidades filipinas (Filipinas). [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* Agora é possível inserir com êxito a data de nascimento de um cliente ao criar uma nova conta em lojas definidas como uma localidade portuguesa (Portugal). Anteriormente, o Adobe Commerce exibia um erro ao tentar criar uma conta. [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* A página de detalhes do produto agora é exibida com êxito com a localidade Árabe (Arábia Saudita). Anteriormente, essa localidade quebrou a página de detalhes do produto.

### interface

<!-- AC-258-->

* Correção de erros com testes MFTF que usam `maps.googleapis.com`.

<!-- MC-41850-->

* O Adobe Commerce agora corta os caracteres de espaço ininterruptos do campo de entrada de email do formulário Fale conosco . Anteriormente, o formulário era enviado sem a remoção dos caracteres de espaço que não eram quebrados da entrada de email (se fornecida), o que causava erros nos arquivos de log. O **Responder para** também estava ausente da mensagem de email de contato gerada para o administrador da loja.

<!-- MC-42793-->

* A Adobe Commerce agora exibe produtos relacionados, produtos de venda adicional e produtos de venda cruzada de acordo com suas posições no Administrador.

<!-- MC-42502-->

* `.action-close` os botões agora funcionam conforme esperado quando `Multiselect` é usada em um modal. Anteriormente, o `action-close` não funcionou porque herdou o CSS do  `.action-close` do modal. [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* O snippet do Offers rich agora está presente no campo de preço principal na exibição Produto. Anteriormente, esse trecho estava faltando nesse campo no bloco de produtos relacionados na exibição Produto, o que resultava na exibição incorreta dos preços nos resultados da pesquisa do Google. [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* Problemas com a altura modal em dispositivos que executam o iOS foram resolvidos. [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* Os menus suspensos Ações agora são posicionados corretamente na loja. [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* Os erros de acessibilidade com a navegação no carrinho e as páginas de check-out foram resolvidos. [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* Agora, os leitores de tela podem ler todos os elementos de formulário relevantes nas páginas do produto.

<!-- AC-872-->

* Ordem de classificação de widget de produto do catálogo de loja (**Catálogo** > **Categoria** > **Produtos**) agora corresponde à ordem configurada no Administrador. [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* O seletor de região agora funciona como esperado na página Criar uma conta . [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* A grade do cliente Administrador agora exibe todos os dados do cliente, incluindo os recém-adicionados `date` atributos personalizados, conforme esperado. Anteriormente, o Adobe Commerce exibia um erro e não exibia a grade do cliente Administrador corretamente quando a variável `date` conjunto de atributos foi definido como uma coluna.

<!-- AC-1280-->

* Os rótulos de entrada na **Catálogo**  >  **Produto** a página de detalhes foi alterada para refletir com precisão a finalidade da entrada. Os campos para os quais a entrada do usuário não é necessária não exibem mais rótulos com um asterisco.

<!-- AC-1275-->

* A barra de ferramentas do editor de rich text agora pode ser acessada usando a tecla Tab.

<!-- AC-1284-->

* O nome acessível do controle agora inclui o texto de seu rótulo visível para o número de itens por lista suspensa de página.

<!-- AC-1287-->

* A tabela controla os **Catálogo** > **Produto** a página de detalhes agora tem rótulos visíveis e um nome acessível quando a tabela é recolhida.

<!-- AC-1285-->

* Agora, os botões em toda a loja têm nomes acessíveis exclusivos e descritivos. Anteriormente, os botões divididos com um botão de texto e um botão de seta para baixo adjacente tinham o mesmo nome acessível.

<!-- AC-1168-->

* Adicionado um **Hoje** exibir a opção nos gráficos do painel Pedidos e Quantias de Administração para fornecer um resumo das vendas e pedidos durante o dia. [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* O estado ativo (clique) da seleção múltipla **Fechar** agora funciona de forma consistente. [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* O Adobe Commerce não exibe mais esta mensagem após a atualização quando o Modo de restrição de cookie está desativado: `The store will not work correctly in the case when cookies are disabled`. [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* Imagens de produtos de tela inteira agora são exibidas corretamente em temas com a direção de navegação em miniatura vertical em dispositivos móveis. Anteriormente, as imagens de produtos eram dimensionadas ou invisíveis incorretamente em temas com a direção de navegação em miniatura vertical em dispositivos móveis no modo de tela cheia.

<!-- ACP2E-23-->

* As mensagens de erro na página de detalhes do produto não desaparecem mais rapidamente quando a variável **Sincronizar produtos de widget com o armazenamento de back-end** a configuração está ativada.

<!-- ACP2E-70-->

* A validação de valores negativos foi adicionada ao **Quantidade a Retornar** no campo Criar novo formulário de devolução.

<!-- ACP2E-105-->

* O Adobe Commerce não exibe mais endereços duplicados quando um comprador clica **Alterar Endereço** na página Revisar e Pagamentos em uma implantação em que a variável **Pesquisa de endereço** a configuração está ativada.

<!-- ACP2E-136-->

* O **Adicionar produtos** Agora está ativado como esperado para administradores com permissões restritas enquanto trabalham no escopo de visualização da loja na página Categoria do administrador.

<!-- ACP2E-169-->

* Agora, os pontos de interrupção da exibição são consistentes no Adobe Commerce.

<!-- ACP2E-199-->

* O Adobe Commerce agora exibe corretamente os atributos personalizados de data do cliente com localidades personalizadas na página do cliente Administrador.

<!-- MC-41760-->

* As imagens adicionadas usando o Construtor de páginas não são mais duplicadas na loja quando exibidas com uma largura de janela do navegador de 768px. Anteriormente, com essa largura de janela do navegador, o Adobe Commerce duplicava imagens na loja ao exibir a versão móvel e desktop das imagens.

### Regravações de URL

<!-- AC-1510-->

* As regravações de URL não são mais geradas novamente para todas as exibições de loja durante a criação de uma nova exibição de loja ao executar `bin/magento setup:upgrade`. [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### Comerciante visual

<!-- ACP2E-19-->

* O Merchandiser visual **Mover do estoque para o final** a opção de classificação automática agora funciona conforme o esperado para produtos configuráveis quando todos os produtos simples estão indisponíveis.

<!-- ACP2E-61-->

* A regra do Visual Merchandiser não é mais salva quando nenhuma condição foi adicionada.

### Estrutura da API da Web

<!-- MC-42008-->

* As solicitações de API da Web para recursos autorautorizados do cliente não geram mais erros de autorização quando o carrinho de compras persistente está ativado.

<!-- MC-42313-->

* Agora é possível criar objetos usando as classes secundárias de `\Magento\Framework\Api\AbstractSimpleObjectBuilder` no PHP 7.3. Anteriormente, `preg_match` exibiu esta mensagem de aviso quando o Adobe Commerce foi hospedado no Redhat com PHP 7.3: `Warning: preg_match(): Compilation failed: unrecognized character follows...`.

<!-- MC-24548-->

* Os totais recuperados pelo `PUT /V1/guest-carts/:cartId/collect-totals` A solicitação agora é atualizada pela função correta `shippingMethod`. [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* Adicionar um novo desserializador à API REST não remove mais outros desserializadores. Anteriormente, a REST API aceitava um novo tipo de conteúdo, mas os tipos de conteúdo definidos pelo CORE para APIs não funcionavam mais e retornavam um erro 400. [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* Agora é possível remover uma substituição de um parâmetro definido em um `webapi.xml`arquivo. [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* A Adobe Commerce agora gera um `customertoken` pela GraphQL ou solicitações REST API, conforme esperado, após várias tentativas de logon com falha consecutivas. Anteriormente, a Adobe Commerce não verificava se o valor de `lock_expires_at` em `oauth_token_request_log` era superior à data e hora atuais e sempre retornava o número de tentativas com falha, o que impedia o cliente de fazer logon. [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* Adicionar uma ID de cotação mascarada a `QuoteRepository::getList` O não causa mais um loop infinito. Anteriormente, o uso do processador de pagamento que dependia da REST API para atualizar pedidos acionava esse comportamento. [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* O `/rest/all/V1/categories/<above_created_category_id>`  A chamada de PUT agora respeita os valores especificados por `available_sort_by`.  Anteriormente, o menu suspenso Classificação por lista de produtos disponível era selecionado com todas as opções possíveis na página Categoria e o **Usar tudo** foi selecionada. [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* O desempenho das solicitações de REST API para criar tokens de cliente foi aprimorado.

<!-- ACP2E-91-->

* Correção de um erro que ocorria ao **Adicionar código de armazenamento aos URLs** está definida como **Sim** e uma chamada REST não incluía um código de loja. Embora a carga fosse válida, a chamada retornava o seguinte erro: `Fatal error: Allowed memory size of ********** bytes exhausted (tried to allocate **** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`.

<!-- ACP2E-153-->

* Faturas parciais para o mesmo pedido agora podem ser criadas simultaneamente usando a REST API.

### Lista de desejos

<!-- MC-41880-->

* O Adobe Commerce não renderiza mais uma lista de desejos na barra lateral de categorias quando a variável **Mostrar na barra lateral** a opção de lista de desejos está desativada. Anteriormente, a Adobe Commerce ignorava essa opção.

### WYSIWYG

<!-- ACP2E-17-->

* O PageBuilder agora renderiza corretamente os widgets personalizados com o editor WYSIWYG.

## Problemas conhecidos

**Problema**: Os comerciantes podem notar avisos de downgrade da versão do pacote durante a atualização do Adobe Commerce 2.4.4 para o Adobe Commerce 2.4.4-p1. Essas mensagens podem ser ignoradas. A discrepância nas versões do pacote resulta de anomalias durante a geração do pacote. Nenhuma funcionalidade de produto foi afetada. Consulte a [Pacotes baixados após a atualização de 2.4.4 para 2.4.4-p1](https://support.magento.com/hc/en-us/articles/8214752983949)  Artigo da Base de conhecimento para uma discussão sobre cenários afetados e soluções alternativas.

**Problema**: Os comerciantes não podem submeter reembolsos parciais para pedidos pagos com o Apple Pay through Braintree. Quando um comerciante tenta criar um aviso de crédito para uma restituição parcial da fatura da ordem, a **Quantidade para reembolso** não é editável.  **Solução alternativa**: Aplicar patch `braintree-disabled-partial-capture-for-applepay-googlepay.patch`. Consulte a [Adobe Commerce 2.4.4: Não é possível criar faturas parciais](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) Artigo da Base de conhecimento.  <!-- BUNDLE-3088-->

**Problema**: Os compradores não podem adicionar um produto ao carrinho quando nenhuma opção estiver selecionada na Administração **Loja** >  **Configuração** > **Geral** > **Opções de país** > **Permitir países**. Em vez disso, o Adobe Commerce exibe este seguinte erro de console: `Failed to load resource: the server responded with a status of 400 (Bad Request)`. <!-- AC-2564-->

**Problema**: A descrição do Dotdigital em **Encontrar parceiros e extensões** > **Magento Marketplace** está desatualizado. Esta é uma descrição atualizada:

A Dotdigital é uma plataforma de engajamento do cliente que ajuda profissionais de marketing e desenvolvedores digitais a fornecer comunicações na jornada do cliente. Aproveitamos o poder dos dados do cliente, potencializando o envolvimento, a conversão e a fidelidade de marcas à medida que elas crescem e dimensionam. Os clientes adoram nossa plataforma fácil de usar que conecta dados primários em todos os sistemas, superando insights poderosos e automatizando mensagens preditivas entre canais.

Mais de 350 funcionários da Dotdigital atendem empresas de médio e médio porte em todo o mundo e em todos os setores. Aspiramos a inspirar marketing responsável e estamos comprometidos com sustentabilidade, privacidade e segurança. A Dotdigital tem orgulho de ser a primeira plataforma mundial de automação de marketing neutra em carbono, certificada para ISO 14001, ISO 27701 e ISO 27001.

Consulte [Dotdigital — Automação de marketing](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html) para obter informações de compra e download.

## Contribuições comunitárias

Estamos gratos à comunidade Magento Open Source mais ampla e gostaríamos de reconhecer os seus contributos para esta versão.

A equipe de engenharia da Comunidade [Colaboradores de Magento](https://magento.com/magento-contributors) mantém uma lista dos principais indivíduos e parceiros contribuintes por mês, trimestre e ano. Nessa página de Contribuidores, você pode seguir os links para suas PRs mescladas no GitHub.

### Contribuições de parceiros

O quadro a seguir destaca as contribuições dos parceiros. Essa tabela lista o Parceiro que contribuiu com a solicitação de pull, o número da solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### Contribuições individuais

A tabela a seguir identifica as contribuições dos membros da comunidade. Essa tabela lista o membro da comunidade que contribuiu com a solicitação de pull, o número da solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### Requisitos do sistema

Nossa pilha de tecnologia é baseada em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](../../../installation/system-requirements.md).

### Instruções de instalação e atualização

Você pode instalar o Adobe Commerce 2.4.4 usando [Composer](../../../installation/composer.md).

## Kits de ferramentas de migração

A Ferramenta de migração de dados ajuda a transferir os dados de armazenamento do Magento 1.x existentes para o Magento 2.x. Essa interface de linha de comando inclui funções de verificação, rastreamento de progresso, registro e teste. Para obter instruções de instalação, consulte [Instalar a ferramenta Migração de dados](../../../tools/data-migration-tool/install.md). Considere explorar ou contribuir para a variável [Repositório de migração de dados](https://github.com/magento/data-migration-tool).

O [Kit de ferramentas de migração de código](https://github.com/magento-commerce/code-migration) ajuda a transferir extensões e personalizações de loja do Magento 1.x existentes para o Magento 2.x. A interface da linha de comando inclui scripts para conversão de módulos e layouts do Magento 1.x.
