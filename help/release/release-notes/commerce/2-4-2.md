---
title: Notas de versão do Adobe Commerce 2.4.2
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.2 do Adobe Commerce.
source-git-commit: 4c3a5b6462668993dcfb0ecb9327a7ffc47ced44
workflow-type: tm+mt
source-wordcount: '16459'
ht-degree: 0%

---


# Notas de versão do Adobe Commerce 2.4.2

O Adobe Commerce 2.4.2 apresenta aprimoramentos no desempenho e na segurança, além de melhorias significativas na plataforma. As melhorias de segurança incluem a expansão do suporte para a `SameSite` para todos os cookies. As melhorias B2B concentram-se no suporte a pagamentos em linha para ordens de compra. Elasticsearch 7.9.x e Redis 6.x agora são compatíveis.

Esta versão inclui mais de 280 novas correções para código principal e 35 melhorias de segurança. Inclui a resolução de quase 290 problemas do GitHub por parte de nossos membros da comunidade. Essas contribuições da comunidade variam desde uma pequena limpeza do código principal até melhorias significativas em GraphQL.

Todos os problemas conhecidos identificados em 2.4.1 foram corrigidos nesta versão.

{{bics}}

## Aplicar `AC-3022.patch` continuar a oferecer à DHL como transportadora

A DHL introduziu o schema versão 6.2 e descontinuará o schema versão 6.0 em breve. Adobe Commerce 2.4.4 e versões anteriores que oferecem suporte à integração com a DHL somente a versão 6.0. Os comerciantes que implantam essas versões devem se aplicar `AC-3022.patch` logo que possível, continuar a oferecer à DHL como transportadora marítima. Consulte a [Aplicar um patch para continuar oferecendo a DHL como transportadora](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) Artigo da Base de conhecimento para obter informações sobre como baixar e instalar o patch.

## Patch de segurança disponível

Os comerciantes agora podem instalar correções de segurança sensíveis ao tempo sem aplicar as centenas de correções funcionais e aprimoramentos que uma versão trimestral completa oferece (por exemplo, 2.4.1-p1). O Patch 2.4.0.12 (Pacote Composer 2.4.1-p1) é um patch de segurança que fornece correções para vulnerabilidades que foram identificadas em nossa versão trimestral anterior, 2.4.1. Todos os hotfixes que foram aplicados à versão 2.4.1 foram incluídos neste patch de segurança. A *hotfix* fornece uma correção para uma versão lançada que soluciona um problema ou bug específico.)

Para obter informações gerais sobre patches de segurança, consulte [Introdução à nova versão do patch de segurança](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). Para obter instruções sobre como baixar e aplicar patches de segurança (incluindo patch 2.4.1-p1), consulte [Instalação no local de início rápido](../../../installation/composer.md). Os patches de segurança incluem somente correções de erros de segurança, não os aprimoramentos de segurança adicionais incluídos no patch completo.

## Outras informações de versão

Embora o código para esses recursos seja fornecido com versões trimestrais , vários desses projetos (por exemplo, B2B, Page Builder e Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros desses projetos estão documentadas nas informações separadas da versão específica do projeto, disponíveis na documentação de cada projeto.

## Destaques

Procure os seguintes destaques nesta versão.

### Melhorias substanciais na segurança

Esta versão inclui mais de 35 correções de segurança e melhorias na segurança da plataforma. Todas as correções de segurança foram enviadas para 2.4.1-p1 e 2.3.6-p1.

#### Mais de 35 aprimoramentos de segurança que ajudam a fechar as vulnerabilidades de execução de código remoto (RCE) e script entre sites (XSS)

Até à data, não ocorreram ataques confirmados relacionados com estas questões. No entanto, certas vulnerabilidades podem ser exploradas para acessar informações do cliente ou tomar as sessões do administrador. A maioria desses problemas exige que um invasor obtenha acesso primeiro ao Administrador. Como resultado, lembramos que você deve tomar todas as medidas necessárias para proteger seu administrador, incluindo, entre outras, esses esforços:  de IP incluir na lista de permissões, [autenticação de dois fatores](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html), uso de uma VPN, uso de um local exclusivo em vez de `/admin`e boa higiene de senhas. Consulte [Aviso de segurança do Adobe](https://helpx.adobe.com/security/products/magento/apsb21-08.html) para uma discussão sobre estas questões fixas.

#### Melhorias adicionais na segurança

As melhorias de segurança para esta versão incluem:

* Todos os cookies principais agora são compatíveis com o `SameSite` atributo.

* O aplicativo agora exibe mensagens que identificam conteúdo potencialmente mal-intencionado em campos de descrição de produto e categoria quando o usuário tenta salvar valores nesses campos.

* As operações do sistema de arquivos nos Componentes foram padronizadas e rígidas para evitar uploads mal-intencionados.

* As violações da Política de segurança de conteúdo principal (CSP) foram corrigidas.

{{cve-notice}}

### Melhorias na infraestrutura

Esta versão contém aprimoramentos na qualidade principal, que melhoram a qualidade da Estrutura e dessas áreas funcionais: Conta do Cliente, Catálogo, CMS, OMS, Importação/Exportação, Promoções e Direcionamento, Carrinho e Check-out, B2B, e Preparo e Pré-visualização.

### Aprimoramentos da plataforma

* [**Elasticsearch 7.9.x agora é compatível**](../../../installation/system-requirements.md). Embora seja recomendável executar o Elasticsearch 7.9.x, a versão 2.4.x permanece compatível com o Elasticsearch 7.4.x. <!-- MC-36867-->

* 2.4.2 foi testado com [Versão 6.4](../../../installation/system-requirements.md). A versão 2.4.x permanece compatível com o Varnish 6.x.

* [**O Redis 6.x agora é compatível**](../../../installation/system-requirements.md). A versão 2.4.x permanece compatível com o Redis 5.x. <!-- MC-34853-->

* 2.4.2 agora é compatível com o **Composer 2.x**. Recomendamos que os comerciantes migrem para o Composer 2.x. Embora você possa instalar esta versão usando o Composer 1.x, o Composer 1.x logo chegará ao fim da vida útil. Para obter uma visão geral dos recursos do Composer 2.x, consulte [O Composer 2.0 já está disponível!](https://blog.packagist.com/composer-2-0-is-now-available/)

A capacidade de configurar uma instalação para usar um banco de dados dividido foi descontinuada nesta versão. Os comerciantes que atualmente usam o banco de dados dividido devem começar a planejar reverter para ou migrar para um único banco de dados ou usar uma abordagem alternativa. Consulte a [Substituição da funcionalidade do banco de dados dividido no Adobe Commerce](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog para obter uma visão geral desse problema.  Consulte [Reverter de um banco de dados dividido para um único banco de dados](../../../configuration/storage/revert-split-database.md) para instruções de migração.

### Melhorias de desempenho

Esta versão inclui aprimoramentos de código que aumentam o desempenho da API e o tempo de resposta do administrador para implantações com catálogos grandes. Várias melhorias de escalabilidade permitem que a versão 2.4.2 ofereça suporte nativo a catálogos complexos até 20 vezes maior do que em versões anteriores.

### GraphQL

Esta versão adiciona a cobertura GraphQL para os seguintes recursos:

* Adição de suporte para várias listas de desejos. Você pode usar GraphQL para [criar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-wishlist.html), [excluir](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-wishlist.html)e [renomear](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-wishlist.html) listas de desejos, bem como [mover](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-products-between-wishlists.html) ou [copiar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/copy-products-between-wishlists.html) entre eles. <!-- MC-32356-->

* Adição de suporte para autorizações de mercadorias devolvidas (RMA). Os compradores podem [solicitar um retorno](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-return.html). Se o comerciante aceitar a solicitação, ele poderá executar tarefas como [adicionar um comentário](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-return-comment.html) e [adicionar informações de rastreamento](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-return-tracking.html). <!-- MC-34596-->

* Adição de suporte para os seguintes recursos B2B:
   * Empresas. Você pode adicionar empresa [administradores](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company.html), [usuários](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company-user.html), [funções](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company-role.html)e [equipes](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-company-team.html). <!-- MC-33861-->
   * Crédito da empresa. O [query da empresa](https://devdocs.magento.com/guides/v2.4/graphql/queries/company.html) O inclui detalhes sobre o histórico de crédito da empresa. <!-- MC-33862-->
   * Listas de solicitações. Você pode [criar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-requisition-list.html), [excluir](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-requisition-list.html)e [atualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-requisition-list.html) listas de requisição. O suporte também inclui a capacidade de [adicionar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-requisition-list.html), [atualizar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html), [excluir](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-requisition-list-items.html), [copiar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/copy-items-between-requisition-lists.html)e [mover](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-items-between-requisition-lists.html) itens dentro de uma lista de requisições, bem como adicionar itens da lista de requisições [no carrinho](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-requisition-list-items-to-cart.html). <!-- MC-34312-->

* Adição de suporte para uniões no GraphQL. [GitHub-29425](https://github.com/magento/magento2/issues/29425) <!-- ENGCOM-8291 -->

* Suporte adicionado para [listas de comparação](https://devdocs.magento.com/guides/v2.4/graphql/queries/compare-list.html). Os compradores podem [criar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-compare-list.html) e [excluir](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-compare-list.html) listas de comparação e [adicionar](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-compare-list.html) e [remove](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-compare-list.html) para as listas de comparação. Além disso, os compradores que criam uma lista de comparação como convidado podem fazer logon como cliente e [reter](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-compare-list-to-customer.html) suas listas de comparação.

* Adicionado o [`generateCustomerTokenAsAdmin`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/generate-customer-token-as-admin.html) e atualizou a `Customer` para oferecer suporte à assistência de compra remota.

* Adição de suporte à localização nas lojas para oferecer suporte a tarefas como alteração de idiomas, carrinhos e moedas. <!-- MC-37801-->

* O esquema GraphQL foi aprimorado para otimizar a recuperação de dados do produto para produtos configuráveis com muitas variantes. <!-- MC-36138-->

* As IDs de objeto do tipo inteiro foram substituídas por `uid` atributos do tipo ID. <!-- MC-36346-->

* Adicionado o `staging` para a [`ProductInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/product-interface.html) e [`CategoryInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/category-interface.html) para determinar se um produto é preparado e exibir suas informações de campanha associadas. <!-- MC-33897-->

Consulte a [Guia do desenvolvedor GraphQL](https://devdocs.magento.com/guides/v2.4/graphql/) para obter detalhes sobre essas melhorias.

### B2B

2.4.2 apresenta B2B v1.3.1. Esta versão inclui suporte para pagamentos online para ordens de compra, bem como para várias correções de erros.

**As ordens de compra agora podem ser concluídas usando métodos de pagamento online**. Os compradores B2B são solicitados a selecionar seu método de pagamento preferencial para cada [ordem de compra](https://docs.magento.com/user-guide/stores/b2b-purchase-order-flow.html) durante o check-out inicial. Após a aprovação da ordem de compra, os compradores são solicitados a inserir detalhes de pagamento para converter a ordem de compra em uma ordem final.

Para suportar um fluxo de trabalho completo para aceitar pagamentos online, este recurso também:

* Substitui os modelos de método de pagamento existentes durante o check-out inicial para manter a conformidade com o PCI.

* Mantém a compatibilidade com métodos de pagamento de terceiros, personalizados e desenvolvidos pela comunidade.

* Notifica os compradores por email quando eles precisam adicionar detalhes de pagamento a uma ordem de compra aprovada.

* Permite a personalização de emails do Administrador, o que permite que os comerciantes usem modelos consistentes com sua marca.

* Apresenta um `Approved – Pending Payment` para que as ordens de compra sejam claramente exibidas quando a ação for necessária.

* Impede que códigos de desconto sejam adicionados ou removidos na etapa de pagamento final, o que garante que o valor total da ordem permaneça inalterado para ordens de compra aprovadas.

* Permite que os compradores alterem o método de pagamento durante a etapa de pagamento final para manter a flexibilidade e aumentar a conversão.

Esta versão também inclui várias correções de erros. Consulte [Notas de versão B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### PWA Studio

Esta versão do PWA Studio inclui:

* Internacionalização e localização. Venia agora oferece suporte para vários idiomas e moedas.

* Melhoria na estrutura de extensibilidade para suportar alterações de código por meio de extensões.

* Componentes iniciais de recursos relacionados a Minha conta, como Lista de desejos, Pagamentos salvos, Catálogo de endereços e Histórico de pedidos.

* Várias otimizações de desempenho e correções de erros.

Para obter informações sobre aprimoramentos e correções de erros, consulte [Versões de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [compatibilidade](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões compatíveis.

### Page Builder

Esta versão inclui aprimoramentos na migração de conteúdo do Page Builder e na personalização de CSS do Page Builder:

* Os desenvolvedores agora podem criar um estilo de saída do tipo de conteúdo de forma diferente por janela de visualização sem usar o `!important` diretiva.

* O conteúdo migrado para o Page Builder não é mais preenchido com o estilo em linha padrão.

* O Page Builder não requer mais que todos os tipos de conteúdo sejam colocados em uma linha. O [Etapa do Page Builder](https://docs.magento.com/user-guide/cms/page-builder-workspace.html#stage) agora está inicialmente em branco e oferece suporte à adição dos seguintes tipos de conteúdo diretamente no estágio: Linhas, Colunas, Guias, Código HTML, Blocos, Blocos Dinâmicos.

* As margens e os remendos predefinidos não são mais necessários para tipos de conteúdo.

* O novo dispositivo móvel [alternador de visor](https://docs.magento.com/user-guide/cms/page-builder-workspace.html#viewports) e o escopo viewport para valores de campos de formulário permite que usuários e desenvolvedores executem estas ações:

   * Visualize o conteúdo em diferentes portas de exibição durante a criação.

   * Otimizar o parâmetro do campo de altura mínima em tipos de conteúdo diferentes para cada janela de visualização. (Somente um parâmetro (altura mínima) é suportado imediatamente. Desenvolvimento personalizado necessário para habilitar a otimização móvel para outros parâmetros de conteúdo.)

   * Adicione o escopo do campo a campos personalizados e conjuntos de campos (desenvolvedores).

### Orientação interativa no produto

O Interative In-Product Guidance fornece aos comerciantes dicas de uso e informações do Administrador sobre novos anúncios de recursos, guias de apresentação, informações sobre integração e dicas de ferramentas.  **Os administradores devem aceitar o Administrador para receber orientação no produto se esse recurso não estiver ativado**. Consulte [Coleta de dados de uso](https://docs.magento.com/user-guide/stores/admin.html) e [Uso do administrador](https://docs.magento.com/user-guide/configuration/advanced/admin.html#admin-usage).

### Integração do Adobe Stock

Esta versão inclui a Adobe Stock Integration v2.1.1.

### Galeria de Mídia

**Novos recursos de função para a Galeria de mídia**. Esta versão oferece aos comerciantes a capacidade de limitar o acesso do administrador somente à galeria de mídia e controlar quem pode executar estas ações:

* Inserir ativos de mídia no conteúdo

* Fazer upload de ativos

* Editar detalhes de ativos

* Excluir ativos da Galeria de mídia

* Gerenciar a estrutura de pastas.

**Imagens otimizadas na Web no conteúdo**. Os comerciantes agora podem usar [representação de imagem otimizada para a web](https://docs.magento.com/user-guide/cms/media-gallery-image-optimization.html) em conteúdo em vez de imagens de alta resolução. A imagem original permanece não modificada na Galeria de Mídia e a representação da imagem é gerada dinamicamente quando a imagem é inserida no conteúdo.

### Aprimoramentos de suporte ao AWS S3

O suporte ao Amazon Simple Storage Service (AWS S3) foi aprimorado para incluir suporte a:

* Armazenamento de objetos e extensibilidade futura

* [Armazenamento de arquivos de mídia](../../../configuration/remote-storage/remote-storage.md) no AWS S3

O suporte para AWS S3 foi adicionado a todos os módulos, incluindo B2B, PageBuilder e Adobe Stock Integration.

### Estrutura de teste funcional (MFTF)

O MFTF 3.2.1 já está disponível. Esta versão introduz tolerância a erros em testes e na geração do conjunto de testes. Os aprimoramentos e correções de erros adicionais estão descritos na seção [Código de alteração da estrutura de teste funcional](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### Sistema de Gestão de Ordens (OMS)

O conector MCOM é totalmente compatível com a versão 2.4.2. As correções de erros e as melhorias no conector estão descritas em [Notas de versão do Connector](https://omsdocs.magento.com/release-notes/connector/index.html). Esta versão inclui melhorias na interface da linha de comando OMS, que agora fornece informações detalhadas que os parceiros e as equipes de suporte podem usar para solucionar problemas `retry`, `queue_prune`, `order_sync`, `message process`e `catalog export` processos.

### Extensões desenvolvidas do fornecedor

Consulte os seguintes artigos para obter atualizações sobre recursos e alterações desta versão:

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html). O Amazon Pay foi descontinuado nesta versão e será removido no Magento 2.5.0. A versão 2.4.3 e superior conterá apenas atualizações para compatibilidade e correções para erros principais.

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [Klarna](https://docs.magento.com/user-guide/payment/klarna.html)

* [Nuvem de vértex](https://docs.magento.com/user-guide/tax/vertex.html)

* [Revisões do produto Yotpo](../../../upgrade/modules/upgrade.md)

## Problemas corrigidos

Corrigimos centenas de problemas no código principal 2.4.2.

### Instalação, atualização, implantação

<!-- MC-38429-->

* A capacidade de configurar uma instalação para usar um banco de dados dividido foi descontinuada nesta versão. Consulte a [Substituição da funcionalidade do banco de dados dividido no Adobe Commerce](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) Publicação DevBlog.

<!-- MC-36472-->

* Os comerciantes agora podem atualizar com êxito uma implantação de Open Source que executa o MySQL 8.x para uma implantação do Commerce. Anteriormente, o aplicativo lançava uma exceção quando `AUTO_INCREMENT` valores revertidos para valores iniciais para todas as tabelas em que `row_id` foi adicionado durante a atualização.

<!-- ENGCOM-7280 -->

* O aplicativo agora exibe uma mensagem de erro que identifica o caminho usado para criar o patch se ocorrer um erro durante a execução `bin/magento/setup:db:generate-patch`. [GitHub-27523](https://github.com/magento/magento2/issues/27523)

<!-- ENGCOM-8029 -->

* `block_html`, `full_page`e `layout` os caches agora estão desabilitados conforme esperado depois `bin/magento/setup:upgrade` execução. [GitHub-28186](https://github.com/magento/magento2/issues/28186)

<!-- ENGCOM-8184 -->

* A versão mínima necessária do PHP em `bootstrap.php` foi atualizada. [GitHub-30004](https://github.com/magento/magento2/issues/30004)

<!-- MC-38788-->

* Agora você pode executar `bin/magento/setup:upgrade` após instalar os dados de amostra. Anteriormente, ao tentar executar `bin/magento/setup:upgrade`, o aplicativo exibiu esse erro: `unable to apply data patch magento\catalogrulesampledata\setup\patch\data\installcatalogrulesampledata for module magento_catalogrulesampledata`. O aplicativo também exibiu esse erro no log do sistema: `main.ERROR: Sample Data error: Unable to unserialize value. Error: Syntax error`. [GitHub-30685](https://github.com/magento/magento2/issues/30685)

<!-- MC-36785-->

* Agora é possível definir uma chave de API do YouTube na linha de comando, conforme esperado. Anteriormente, o aplicativo retornava esse erro ao tentar executar `bin/magento config:sensitive:set catalog/product_video/youtube_api_key`: `There are no sensitive configurations to fill`.

<!-- ENGCOM-8163 -->

* Agora, o aplicativo atende aos `maxMessages` valores definidos em `queue_consumer.xml`. Anteriormente, o aplicativo usava apenas os valores de configuração da implantação. [GitHub-29522](https://github.com/magento/magento2/issues/29522)

<!-- ENGCOM-8243 -->

* A geração de URL para uma nova loja agora funciona como esperado quando a loja é criada usando `bin/magento setup:config:import`. Anteriormente, as regravações de URL não eram geradas em ambientes de produção. [GitHub-30025](https://github.com/magento/magento2/issues/30025)

<!-- ENGCOM-8230 -->

* O aplicativo não exibe mais essa pergunta ao executar `bin/magento setup:install` para se conectar ao banco de dados existente: `Overwrite the existing configuration for db-ssl-verify?[Y/n]`. [GitHub-29612](https://github.com/magento/magento2/issues/29612)

### AdminGWS

<!-- MC-37040-->

* O **Adicionar nova classificação** e o botão **Salvar**, **Excluir**, **Redefinir** Os botões não estão mais disponíveis no **Lojas** > **Atributo** > **Classificação** para um administrador com permissões restritas.

<!-- MC-35804-->

* O Administrador agora exibe dados somente de sites aos quais o administrador conectado tem permissões. Anteriormente, o Administrador exibia dados de todos os sites na implantação.

<!-- MC-35027-->

* Todos os sites selecionados agora são armazenados em `gws_websites` independentemente do tamanho da ID do site. Anteriormente, as IDs do site eram truncadas e a lista de sites selecionados não era armazenada no banco de dados. As funções de usuário não foram salvas corretamente e o aplicativo exibiu esse erro quando um comerciante tentou alterar e salvar uma função: `The "X" store ID is incorrect. Verify the store ID and try again`.

<!-- MC-37223-->

* O aplicativo agora exibe a contagem correta de itens nas grades de administração para usuários de administração restritos. Anteriormente, as contagens exibidas para essas grades refletiam dados de todos os países, enquanto as próprias grades exibiam dados de países específicos apenas. (Essa correção corrige um problema com Segmentos de clientes, Regras de preço do catálogo, Regras de preço do carrinho, Todos os usuários, Usuários bloqueados e grades de funções do usuário).

<!-- MC-34156-->

* Administradores cujas permissões excluem `Magento_Catalog::edit_product_design` (Editar design de produto) agora pode criar um novo produto salvando um produto existente com um novo nome na exibição de loja selecionada. Anteriormente, o aplicativo exibia esse erro:  `Not allowed to edit the product's design attributes`. [GitHub-28106 ](https://github.com/magento/magento2/issues/28106)

<!-- MC-36406-->

* O aplicativo não exibe mais a variável **Adicionar atributo** botão em páginas em **Lojas** > Atributos quando um administrador não tem as permissões apropriadas para criar essas entidades. Anteriormente, o aplicativo exibia um erro 404 quando um administrador de site que não tinha as permissões apropriadas tentava criar um **Conjunto de atributos** ou **Cliente** atributo.

<!-- ENGCOM-8230 -->

* O aplicativo não gera mais um erro quando você tenta alterar `backend-frontname` usando o `ssh` após instalar o Adobe Commerce. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

### Integração do Adobe Stock

<!-- ENGCOM-8020-->

* Suporte adicionado para leitura `exif_image.png` ou `exif-image.jpeg` metadados. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8194 8094 8147 -->

* O conteúdo exibido ao clicar no marcador de Exibição padrão para a Galeria de mídia não é mais filtrado. Anteriormente, a exibição padrão continha um filtro que era aplicado de `url-filter` aplicador. [GitHub-1813](https://github.com/magento/adobe-stock-integration/issues/1813), [GitHub-1789](https://github.com/magento/adobe-stock-integration/issues/1789), [GitHub-1780](https://github.com/magento/adobe-stock-integration/issues/1780)

<!-- ENGCOM-8070 -->

* A lógica foi removida do controlador WYSIWYG OnInsert (`Magento\Cms\Controller\Adminhtml\Wysiwyg\Images\OnInsert::execute()`) e adicionados ao `Model\Wysiwyg\Images\PrepareImage::execute()` modelo. [GitHub-1504](https://github.com/magento/adobe-stock-integration/issues/1504)

<!-- ENGCOM-8081 -->

* A emulação de área foi removida do `media-content:sync` comando (`\Magento\MediaContentSynchronization\Console\Command\Synchronize::execute`). [GitHub-1784](https://github.com/magento/adobe-stock-integration/issues/1784)

### Analytics

<!-- MC-37137-->

* O Relatório avançado agora funciona conforme o esperado para vários ambientes no mesmo domínio. Anteriormente, os arquivos CSV que eram gerados pelos Relatórios avançados falhavam porque aspas duplas eram evitadas com barras invertidas em vez de com outra aspa dupla, conforme exigido pela RFC4180 padrão do CSV.

<!-- MC-35996-->

* O `analytics_collect_data` agora o job é executado com êxito ao usar a porta padrão ou não padrão para se conectar ao MySQL em `env.php`. Anteriormente, `analytics_collect_data` gerou um erro ao usar a porta não padrão.

<!-- MC-35407-->

* Arquivos CSV gerados por `analytics_collect_data` agora são evitadas corretamente. Anteriormente, esses arquivos não eram gerados com o escape correto, o que impedia a geração de relatórios de Inventário.

### Braintree

* Os compradores agora podem usar o Apple Pay para fazer um pedido com êxito de produtos virtuais. Anteriormente, o aplicativo exibia esse erro:  `There are no shipping methods available for you right now. Please try again or use an alternative payment method`.

* O método de pagamento de Check-out PayPal Express padrão agora funciona conforme o esperado com o método de pagamento de Cartão de Crédito Braintree. Anteriormente, o aplicativo não exibia a variável **PayPal** quando o método de pagamento de Cartão de Crédito do Braintree foi ativado.

### Produtos do pacote

<!-- MC-34063-->

* O aplicativo não define mais preços para itens filho de produto de pacote de preço fixo em aspas.

<!-- MC-38050-->

* A classificação de preço agora funciona conforme o esperado quando os produtos do pacote incluem produtos indisponíveis. Anteriormente, a classificação do preço em ordem decrescente não exibia produtos em ordem decrescente de preço.

<!-- MC-38576-->

* O aplicativo agora aplica automaticamente uma quantidade padrão de 1 para opções de produto de pacote quando há muitas opções. Anteriormente, os comerciantes tinham que atribuir manualmente uma quantidade padrão a cada opção.

<!-- ENGCOM-8159 -->

* A página de criação da fatura de pedido agora exibe os produtos secundários para produtos de pacote conforme esperado. [GitHub-27350](https://github.com/magento/magento2/issues/27350)

<!-- MC-38460 -->

* O aplicativo agora atribui preços de produto corretos quando você reorganiza produtos simples que fazem parte de um produto de pacote com um preço personalizado. Anteriormente, definir um preço personalizado em um produto de pacote resultava em preços incorretos em produtos simples anexados quando reordenados. [GitHub-30343](https://github.com/magento/magento2/issues/30343)

<!-- MC-30348 -->

* Chamada de POST `/V1/order/{orderId}/ship` enviar um pedido que contém um produto de pacote agora marca o pedido como concluído conforme esperado. Anteriormente, o aplicativo exibia esta mensagem de erro: `You can't create a shipment without products`. [GitHub-9762](https://github.com/magento/magento2/issues/9762)

### Carrinho e check-out

<!-- MC-34264-->

* O avaliador de método de envio agora funciona conforme o esperado quando atributos de endereço personalizados estão presentes na etapa de envio do fluxo de trabalho de check-out. Anteriormente, o aplicativo exibia esta mensagem de erro: `{"message":"Error occurred during \"custom_attributes\" processing. A custom attribute is specified with a missing attribute code. Verify the code and try again."}` [GitHub-27505](https://github.com/magento/magento2/issues/27505)

<!-- MC-35783-->

* O aplicativo agora exibe a variável `You have no items in your shopping cart` no minicarrinho, conforme esperado, quando um comprador remove o único item em seu carrinho. Anteriormente, os dados do carrinho não eram atualizados para `checkout/cart/removeFailed` quando um comprador removeu o único item e o aplicativo exibiu esta mensagem: `1 product requires your attention`.

<!-- MC-36088-->

* O aplicativo não exibe mais o custo de envio de um pedido para um método de entrega não aplicável. Anteriormente, o aplicativo exibia um preço de 0 para um método de envio não aplicável no fluxo de trabalho de finalização.

<!-- MC-36598-->

* O endereço de faturamento padrão de um cliente agora é selecionado quando a variável **Meu endereço de faturamento e envio é o mesmo** A caixa de seleção no fluxo de trabalho de finalização está desmarcada.

<!-- MC-36685-->

* Os administradores podem adicionar um produto a um carrinho de compras por SKU do Administrador sem ser redirecionado do Administrador. O administrador não é mais redirecionado para uma página de loja e o aplicativo exibe o produto na seção Itens do carrinho de compras, conforme esperado.

<!-- MC-36750-->

* O aplicativo agora exibe mensagens de erro informativas ao fazer upload de um arquivo CSV que contém vários tipos de erros ao adicionar produtos ao carrinho por SKU. Anteriormente, o aplicativo exibia uma página em branco e uma mensagem de erro genérica ao clicar **Escolher arquivo** on **Gerenciar carrinho de compras** > **Adicionar ao carrinho de compras por SKU**.

<!-- MC-37351-->

* O conteúdo do carrinho não é mais perdido quando um comprador muda de uma loja para outra em um domínio diferente.

<!-- MC-38000-->

* Os compradores agora podem concluir um pedido com êxito usando Check-out com vários endereços ao usar vários métodos de envio. Anteriormente, o aplicativo exibia esse erro: `There has been an error processing your request`. [GitHub-30197](https://github.com/magento/magento2/issues/30197)

<!-- MC-38048-->

* O aplicativo agora exibe o país padrão correto na página de envio do fluxo de trabalho de check-out quando o comprador altera a visualização da loja do carrinho de compras.

<!-- MC-38309-->

* O aplicativo agora exclui a sessão atual ao limpar as sessões do cliente após uma redefinição de senha pós-logout quando um comprador convidado está conectado. Anteriormente, o aplicativo esvaziava o carrinho de compras quando o comprador redefinia sua senha.

<!-- MC-36884-->

* O aplicativo agora exibe o país padrão correto para uma exibição de loja quando um comprador altera a exibição de loja no carrinho de compras. Anteriormente, quando a visualização da loja era alterada no carrinho, o país padrão estava incorreto.

<!-- MC-38723-->

* A sequência na qual as permissões de catálogo são configuradas não impede que os administradores com as permissões corretas adicionem produtos ao carrinho. Anteriormente, o aplicativo não verificava o `addToCart` configurações para o grupo de clientes atual. Como resultado, quando um administrador tentou adicionar um produto ao carrinho, o aplicativo gerou um erro.

<!-- MC-38746-->

* Chamadas redundantes para o `/rest/V1/guest-carts/cart_id/totals-information` O endpoint no carrinho foi removido, o que melhorou o desempenho do carrinho. Anteriormente, quando um comprador adicionava um produto ao carrinho e depois visualizava o carrinho, o aplicativo chamava o `collectAddressTotals` método várias vezes.

<!-- MC-38833-->

* O aplicativo não exibe mais a variável **Região** para um país no fluxo de trabalho de check-out quando a variável **Permitir Escolha de Estado se for Opcional para País** está desativada. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- MC-38813-->

* O aplicativo não repete mais um endereço de entrega no fluxo de trabalho de finalização da loja quando um pedido é reordenado do Administrador.

<!-- MC-38814-->

* Correção de problemas com o projeto de `AdminMediaGalleryInsertLargeImageFileSizeTest`.

<!-- MC-37321-->

* Todos os novos registros na `quote` tabela para convidados recebem um valor de 1 na variável `customer_is_guest field`. Anteriormente, para cada novo convidado que adicionava um produto ao carrinho, o registro era atribuído um 0 no`quote.customer_is_guest` campo.

<!-- ENGCOM-8091 -->

* O **Enviar** O botão na seção Revisar e pagar do fluxo de trabalho de finalização foi movido para dentro `<form id="purchaseorder-form"...></form>`, o que possibilita o envio implícito de formulário sem alterar qualquer JavaScript. [GitHub-27925](https://github.com/magento/magento2/issues/27925)

<!-- ENGCOM-8428 -->

* O aplicativo não exibe mais a variável **Região** no fluxo de trabalho de check-out quando a variável **Permitir Escolha de Estado se for Opcional para País** está desativada. [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- ENGCOM-8442 -->

* O aplicativo agora atualiza corretamente o subtotal de itens do carrinho quando um comprador clica **Atualizar carrinho de compras** ao fazer check-out com vários endereços. [GitHub-30408](https://github.com/magento/magento2/issues/30408)

<!-- ENGCOM-8283 -->

* O aplicativo não gera mais uma exceção quando `config.xml` existem nós para métodos de pagamento que não estão instalados no momento. Anteriormente, o aplicativo exibia uma exceção durante o check-out. [GitHub-29555](https://github.com/magento/magento2/issues/29555)

<!-- ENGCOM-8215 -->

* O aplicativo agora renderiza nomes de produtos que contêm caracteres especiais corretamente no minicarrinho. [GitHub-29075](https://github.com/magento/magento2/issues/29075)

<!-- ENGCOM-8308 -->

* O aplicativo agora define o pacote de desconto correto para a taxa de tabela. Anteriormente, o aplicativo não aplicava uma regra de carrinho que definia um desconto no carrinho quando calculava a taxa da tabela. [GitHub-30169](https://github.com/magento/magento2/issues/30169)

### Regra de preço do carrinho

* As regras de preço do carrinho agora são aplicadas conforme esperado quando os subtotais de pedido são calculados sem incorporar imposto. O novo `Subtotal (Incl. Tax)` foi adicionada como condição de regra de preço do carrinho.

<!-- MC-37884-->

* A aplicação de uma regra de preço com um cupom usando GraphQL agora funciona como esperado quando a variável **Desconto de valor fixo para o carrinho inteiro** é usada.

### Catálogo

<!-- MC-34100-->

* O aplicativo agora exibe todos os produtos reativados na loja como esperado. Anteriormente, quando um produto era desativado e depois reativado, o aplicativo não exibia o produto até que o cache da página Varnish fosse limpo ou a loja reindexasse porque o cache da página não era invalidado após reativar um produto.

<!-- MC-37745-->

* A reindexação parcial de catálogos grandes agora funciona como esperado. Anteriormente, os produtos desapareciam aleatoriamente da página de categoria da loja durante a reindexação com o `catalogsearch_fulltext` indexador parcial.

<!-- MC-35123-->

* Os compradores agora podem reordenar uma ordem faturada de um produto com opções personalizáveis conforme esperado. Anteriormente, o aplicativo exibia esse erro quando um comprador tentava reordenar: `{"0":"The product's required option(s) weren't entered. Make sure the options are entered and try again`.

<!-- MC-35212-->

* Agora é possível definir com êxito a variável **Layout** na página Design da categoria para **Nenhuma atualização de layout**. Anteriormente, o aplicativo revertia para **Categoria - Largura completa** quando você atribuiu o **Nenhuma atualização de layout** valor.

<!-- MC-35490-->

* Os problemas com o pedido de classificação de produtos na loja foram resolvidos. Anteriormente, quando o aplicativo indexava os preços do produto, definia ocasionalmente um produto configurável `min_price` e `max_price` a 0 no `catalog_product_index_price` tabela, que afetou a ordem de classificação de preços na loja.

<!-- MC-35608-->

* O aplicativo agora atualiza com sucesso atributos rotulados `Product Type`. Anteriormente, porque a função `product_type` foi reservado no código, o aplicativo exibiu esta mensagem ao tentar atualizar um `Product Type` atributo: `An attribute with the same code (product_type) already exists.`

<!-- MC-36214-->

* O aplicativo não altera mais a posição de um vídeo carregado na seção Imagens e vídeos da página de detalhes do produto ao salvar o produto. Anteriormente, o novo valor de índice era atribuído à nova posição da imagem (posição na lista) e, se as posições da imagem existentes não eram alinhadas com seus valores de índices, a nova imagem era colocada incorretamente na lista.

<!-- MC-36548-->

* O **Adicionar ao carrinho** agora funciona como esperado sempre que a função **Adicionar ao carrinho** está disponível para clicar. Anteriormente, se você clicasse nesse botão várias vezes enquanto aguardava o carregamento de uma página de produto, o aplicativo exibiria esse erro: `Invalid Form Key. Please refresh the page`.

<!-- MC-37006 36835-->

* O aplicativo não libera mais o cache de categoria quando um comerciante adiciona ou remove produtos desativados de ou para uma categoria. Anteriormente, o aplicativo limpava o cache de categorias relacionadas apesar do status do produto. As categorias também não eram atribuídas quando uma categoria era salva, o que resultava na limpeza do cache de categoria.

<!-- MC-37347-->

* Filtragem de produto de catálogo no **Todas as visualizações de armazenamento** agora o escopo funciona corretamente. Anteriormente, os produtos com status de `Enabled` ou `Disabled` eram exibidos na grade enquanto filtravam somente os produtos ativados ou desativados.

<!-- MC-38038-->

* A reindexação parcial não resulta mais em produtos perdidos e categorias vazias.

<!-- MC-38315-->

* A nova ordem agora funciona como esperado quando **Usar calendário do JavaScript** está ativado (**Lojas** > **Configuração** > **Catálogo** > **Opções personalizadas de data e hora**). Anteriormente, quando essa configuração era ativada, o aplicativo exibia esse erro quando você tentava reordenar o pedido feito anteriormente pelo Administrador: `Please specify date required option(s)`.

<!-- MC-38719-->

* O aplicativo agora exibe a moeda correta em implantações de vários sites durante a criação do preço da camada.

<!-- MC-38914-->

* Os atributos personalizados de imagem do produto agora são evitados corretamente. O `data-src` tem o mesmo valor que `src` , conforme esperado. Anteriormente, os símbolos especiais de URL eram escapados.

<!-- MC-37665-->

* A atualização de uma categoria por meio da API REST não desativa mais a variável **Usar valor padrão** na configuração Ativar categoria, Incluir no menu e Atributos da chave do URL.

<!-- MC-36832-->

* Habilitar permissões de categoria do Administrador não resulta mais em falha ao armazenar páginas de categoria em cache de página inteira durante visitas repetidas à página de categoria. Anteriormente, as visitas subsequentes à página não eram atendidas a partir do cache, como esperado, e o desempenho era degradado.

<!-- MC-35363-->

* Salvar uma categoria agora libera somente o cache de bloco relacionado a esta categoria. Anteriormente, o aplicativo limpava o cache para todos os blocos de categoria.

<!-- MC-30626-->

* O preço de uma opção personalizada com um preço percentual agora é convertido na moeda base da loja ativa em implantações de várias lojas. Anteriormente, o preço de uma opção personalizada com um preço percentual era convertido incorretamente. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- MC-38890-->

* O aplicativo agora recria imagens com sucesso, e essas imagens são visíveis no Administrador, como esperado, sempre que um comerciante envia dados da galeria de mídia usando o POST `rest/all/V1/products`. Anteriormente, o aplicativo recriava as imagens, mas as excluía quando um comerciante enviava dados da galeria de mídia via POST `rest/all/V1/products` se as imagens tiverem sido excluídas em `pub/media` mas ainda havia registros em mídia ainda continham registros para essas imagens. Como resultado, o comerciante viu apenas espaços reservados no Administrador porque as imagens foram criadas e excluídas durante o processo de atualização.

<!-- MC-36903-->

* Os registros agora são excluídos como esperado quando você desatribuiu um item de um site. Anteriormente, as imagens eram duplicadas quando o POST `rest/all/V1/products` foi executado.

<!-- MC-38413-->

* O `/V1/categories/{categoryId}/products` chamada agora retorna uma lista de todos os produtos que pertencem à categoria principal conforme esperado. Anteriormente, se um produto pertencia a mais de uma subcategoria da categoria principal, o aplicativo exibia esse tipo de erro: `Internal Error. Details are available in the application log file. Report ID: webapi-5f8579e37db54`.  [GitHub-30461](https://github.com/magento/magento2/issues/30461)

<!-- MC-32996-->

* O `/V1/products/attributes/:attributeCode/options` O endpoint REST agora oferece suporte à atualização de uma opção de atributo existente.

<!-- MC-30626 ENGCOM-8475-->

* O preço de uma opção personalizada com um preço percentual agora é convertido na moeda base da loja ativa em implantações de várias lojas. Anteriormente, o preço de uma opção personalizada com um preço percentual era convertido incorretamente. [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- ENGCOM-8395 -->

* Os comerciantes agora podem salvar um novo atributo com êxito durante a criação do produto. Anteriormente, o aplicativo não salvava o atributo e o redirecionava para a página inicial da exibição de loja quando tentava salvar o atributo. [GitHub-30362](https://github.com/magento/magento2/issues/30362)

<!-- ENGCOM-7997 -->

* As grades do produto no **Vendas** > **Pedidos** e **Catálogo** > **Produtos** As páginas agora listam todas as lojas relevantes, não apenas a loja criada mais recentemente. [GitHub-29267](https://github.com/magento/magento2/issues/29267)

<!-- ENGCOM-6698 -->

* O repositório de produtos agora usa `store_id` quando disponível para salvar valores de atributo de um produto existente.  Anteriormente, a classe de repositório de produtos substituía a ID de loja de produtos e sempre atribuía a ID de loja padrão. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### Regra de catálogo

<!-- MC-35065-->

* As regras de preço do catálogo agora funcionam como esperado com opções personalizadas nas páginas de detalhes do produto. Anteriormente, os preços do produto nessa página não refletiam as regras de preços aplicáveis ao catálogo. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

<!-- MC-34265-->

* Os caches de produtos e catálogos agora expiram conforme programado. Anteriormente, os caches expiravam diariamente porque `сron` executou o `catalogrule_apply_all` tarefa uma vez por dia, que reindexou todas as regras de catálogo e os indexadores dependentes e limpou o cache para todos os produtos e categorias.

### Limpeza

#### Limpeza de tipo e gramática

<!-- ENGCOM-7967 -->

* O título da página Falha do pedido foi revisado para precisão. Anteriormente, esta página era intitulada: **Recebemos seu pedido!**.  [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-8101 -->

* Remoção de espaços desnecessários em `app/code/Magento/Contact/view/frontend/templates/form.phtml`. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-7716 -->

* Correção de um erro de digitação na mensagem de ajuda do `bin/magento/setup:config:set` subcomando. [GitHub-28802](https://github.com/magento/magento2/issues/28802)

<!-- ENGCOM-8058 -->

* gramática corrigida no PHPDoc para o `framework/Registry.php` arquivo. [GitHub-29661](https://github.com/magento/magento2/issues/29661)

<!-- ENGCOM-8273 -->

* Remoção de espaço em branco irrelevante de `app/code/Magento/Catalog/Helper/Product/View.php`. [GitHub-30601](https://github.com/magento/magento2/issues/30601)

<!-- ENGCOM-8181 -->

* Correção de um erro de digitação em um nome de função em `app/code/Magento/Ui/view/base/web/js/form/element/ui-select.js`. [GitHub-29987](https://github.com/magento/magento2/issues/29987)

<!-- ENGCOM-8478 -->

* Corrigida a pluralização de &quot;item&quot; no minicarrinho e no resumo da ordem de finalização. [GitHub-29920](https://github.com/magento/magento2/issues/29920)

<!-- ENGCOM-8309 -->

* Remoção do espaço em branco em elementos em linha em filtros de navegação em camadas de marcação. [GitHub-30448](https://github.com/magento/magento2/issues/30448)

<!-- ENGCOM-8056 -->

* `rl` foi corrigido para `url` em  `\Magento\Framework\Filter\Template\Tokenizer\Parameter`.  [GitHub-29185 ](https://github.com/magento/magento2/issues/29185)

#### Limpeza de código

<!-- MC-37922-->

* Um HTML `<br>` A tag foi removida da área Verificar dados da  **Sistema**  >  **Importar** página.

<!-- ENGCOM-8028 -->

* `ChangeQuoteControl` foi refatorado. [GitHub-29673](https://github.com/magento/magento2/issues/29673)

<!-- ENGCOM-8027 -->

* `AccessChangeQuoteControl` e os testes de unidade foram refatorados. [GitHub-29672](https://github.com/magento/magento2/issues/29672)

<!-- ENGCOM-8053 -->

* Corrigido o estilo de código da declaração de tipo de retorno em `app/code/Magento/Captcha/CustomerData/Captcha.php`. [GitHub-29712](https://github.com/magento/magento2/issues/29712)

<!-- ENGCOM-8288 -->

* Correção da posição da lista de botões na página Novo atributo .

<!-- ENGCOM-8315 -->

* Adição da classe de bloco correta para o front-end `viewModel` exemplo de referência para o `\Magento\Framework\View\Element\Template` classe . [GitHub-30450](https://github.com/magento/magento2/issues/30450)

<!-- ENGCOM-8090 -->

* Um conjunto de campos redundante no formulário Regra de venda foi removido. [GitHub-29599](https://github.com/magento/magento2/issues/29599)

<!-- ENGCOM-8448 -->

* O código desnecessário foi removido do `hierarchy/edit.phtml` modelo .

<!-- ENGCOM-8446 -->

* Comentário PHPdoc corrigido em `app/code/Magento/CatalogImportExport/Model/Export/Product.php`. [GitHub-30833](https://github.com/magento/magento2/issues/30833)

<!-- ENGCOM-8277 -->

* A anotação de docblock para o `PublisherInterface` foi corrigida. [GitHub-30190](https://github.com/magento/magento2/issues/30190)

<!-- ENGCOM-8264 -->

* Argumentos corrigidos no `getStatusByState` método . [GitHub-30173](https://github.com/magento/magento2/issues/30173)

<!-- ENGCOM-8235 -->

* Descrição correta do método em `app/code/Magento/Quote/Model/Cart/Totals/ItemConverter.php`. [GitHub-30125](https://github.com/magento/magento2/issues/30125)

<!-- ENGCOM-8242 -->

* Remoção de atribuições de variável redundantes na mesma linha em vários arquivos. [GitHub-30133](https://github.com/magento/magento2/issues/30133)

<!-- ENGCOM-8263 -->

* Alterado `@param string $attribute` para `@param AbstractAttribute|string[]|string $attribute` em `EntityAbstract.php`. [GitHub-30191](https://github.com/magento/magento2/issues/30191)

<!-- ENGCOM-8142 -->

* Tags inválidas (por exemplo, `@package` e `@subpackage`) foram removidas dos blocos de ancoragem em toda a base de código. [GitHub-30061](https://github.com/magento/magento2/issues/30061)

<!-- ENGCOM-8117 -->

* Parâmetros não utilizados na construção do `AdvancedPricing` classe foram removidas. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### Produtos configuráveis

<!-- MC-35016-->

* Filtrar produtos configuráveis fora do estoque por preço agora exibe resultados dentro do intervalo de preço correto.

<!-- MC-38930-->

* Um produto virtual não altera mais o tipo quando seu status é alterado de ativado para desativado (ou vice-versa). Anteriormente, o aplicativo alterava o tipo de produto de virtual para simples quando o status era alterado.

<!-- MC-38197-->

* O `getValue()` O método não aciona mais um erro fatal ao atualizar carrinhos.

<!-- MC-34444-->

* Os produtos configuráveis que estão disponíveis em vários sites não mostram mais produtos filhos simples que não estão atribuídos ao site específico. [GitHub-28291](https://github.com/magento/magento2/issues/28291)

<!-- ENGCOM-8202 -->

* As páginas de produtos de vitrine agora exibem os preços da camada sem impostos, como esperado. [GitHub-12225](https://github.com/magento/magento2/issues/12225)

<!-- ENGCOM-8134 8174-->

* Os preços do MSRP para produtos configuráveis agora são convertidos na moeda escolhida corretamente. Anteriormente, o aplicativo exibia os preços na moeda errada e exibia este erro:  `Call to a member function setAppliedTaxes() on null`. [GitHub-26526](https://github.com/magento/magento2/issues/26526), [GitHub-29603](https://github.com/magento/magento2/issues/29603)

<!-- ENGCOM-8234 -->

* Os comerciantes agora podem salvar um rótulo de opção de atributo de amostra de texto específico de loja com um valor de 0 (zero). Anteriormente, um valor de 0 era substituído pelo valor da opção Admin label . [GitHub-30073](https://github.com/magento/magento2/issues/30073)

<!-- ENGCOM-8117 -->

* Parâmetros não utilizados na construção do `AdvancedPricing` classe foram removidas. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### cron

<!-- MC-37712-->

* A lista de mensagens do sistema agora reflete com precisão as atualizações do produto após `cron` O foi executado e o aplicativo atualizou os produtos conforme agendado.

<!-- ENGCOM-8164 -->

* Um índice com base em `schedule_id` e `status` foi adicionado ao `cron_schedule` tabela. [GitHub-29601](https://github.com/magento/magento2/issues/29601)

### Atributos personalizados do cliente

<!-- MC-23545-->

* O aplicativo agora exibe os atributos do cliente do tipo `file` na página Informações da conta após a criação. Anteriormente, quando você tentava salvar um novo atributo desse tipo, o aplicativo exibia os seguintes erros: `The "newAttribute" attribute value is empty. Set the attribute and try again` e `Validation is failed`.

<!-- MC-23544-->

* O aplicativo agora exibe corretamente os valores de atributos personalizados de várias linhas do cliente. Anteriormente, nem todos os dados eram exibidos.

<!-- MC-36978-->

* O aplicativo agora alerta os compradores quando eles inserem uma data de nascimento inválida ao criar uma conta. Anteriormente, o validador ignorava as configurações de local e os compradores eram redirecionados para a Página Criar nova conta do cliente com um erro de data inválido.

<!-- MC-38846-->

* Os atributos de endereço personalizados agora são incluídos conforme esperado na etapa Pagamento do fluxo de trabalho de finalização.

<!-- MC-38114-->

* Atributos de seleção múltipla de endereço personalizado agora são exibidos corretamente durante o check-out de convidado e na página Detalhes do pedido de Administração e Minha Conta.

<!-- MC-37581-->

* Agora, os atributos de endereço personalizados são exibidos corretamente na área Minha conta e na página Detalhes do pedido do administrador .

<!-- MC-37101-->

* Agora você pode excluir um zero à esquerda em um atributo personalizado do cliente ao `Input Type` está definida como `Text` e `Input Validation` está definida como `Numeric Only`.

<!-- MC-36721-->

* O aplicativo agora exporta com êxito dados do cliente que incluem um valor de atributo de gênero personalizado.

<!-- MC-34650-->

* O aplicativo agora salva valores de atributos personalizados do cliente para usuários B2B, conforme esperado. Anteriormente, os atributos personalizados do cliente criados para adicionar ou editar usuários da empresa não eram vinculados ao formulário Adicionar novo usuário e, como resultado, os valores do atributo não eram salvos. Além disso, o atributo de data personalizado foi derivado do banco de dados como uma string e não foi convertido para o formato de data adequado para exibição de frente de loja.

### Cliente

<!-- MC-35771-->

* O widget de calendário do campo de data de nascimento da página de conta do cliente da loja agora usa a localidade de loja designada.

<!-- MC-38498-->

* O aplicativo não salva mais entradas duplicadas de um endereço de cliente durante a finalização de um repedido para um cliente existente do Administrador.

<!-- MC-37393-->

* A exclusão de todos os endereços de vários clientes do Administrador agora exclui todos os endereços da lista de endereços do cliente e remove os endereços de faturamento e envio padrão. Anteriormente, o aplicativo excluía o endereço da lista de endereços do cliente, mas não removia os endereços de faturamento e envio padrão.

<!-- MC-37377-->

* A guia Admin customer address agora exibe corretamente a contagem de endereços depois que um administrador executa uma exclusão em massa de endereços. Anteriormente, o aplicativo incluía endereços excluídos em sua contagem.

<!-- MC-36718-->

* O formato DateTime da variável **Data de nascimento** na página de registro do cliente foi corrigido. Anteriormente, o zero à esquerda que precedia um dia com um único dígito estava ausente.

<!-- MC-36024-->

* Validação do formato de data para o **Data de nascimento** O campo agora funciona antes que o comprador clique no botão **Criar uma conta** botão. Anteriormente, um comprador podia inserir um valor em um formato inválido e quando clicava no **Criar uma conta** , o comprador foi redirecionado para a página Criar nova conta do cliente com um erro de data inválido.

<!-- MC-33867-->

* O aplicativo não gera mais um erro fatal quando um administrador tenta salvar uma nova conta de cliente que contém dados inválidos para um atributo.

<!-- MC-36258-->

* O aplicativo não gera mais um erro 400 quando um cliente tenta acessar seu carrinho de compras em uma implantação em que o Magento Shipping foi instalado anteriormente e o tema Luma padrão está implantado no momento. Anteriormente, o aplicativo não filtrava os nomes das seções criadas por módulos previamente instalados/ativados que não eram compatíveis com o Administrador antes de enviar solicitações para o servidor, o que gerava erros.

<!-- MC-35812-->

* O aplicativo agora exibe uma mensagem como esperado quando um comprador cria uma conta de convidado quando a variável **Solicitar confirmação de emails** está ativada e `Magento\Customer\Controller\Account\CreatePost` foi substituída. Anteriormente, o aplicativo não permitia esse tipo de personalização do processo de registro do usuário e, sob essas condições, o status de confirmação por email do usuário era considerado completo, o novo usuário era conectado automaticamente e nenhuma mensagem de erro era exibida.

<!-- ENGCOM-8039 -->

* O aplicativo agora atribui um comprador ao grupo correto de clientes quando o comprador faz um pedido com um grupo de clientes não padrão em uma loja onde **Ativar Atribuição Automática ao Grupo de Clientes** estiver ativado. [GitHub-26976](https://github.com/magento/magento2/issues/26976)

<!-- MC-39783-->

* A grade de clientes administradores agora está disponível conforme esperado quando o site não padrão é excluído em uma implantação de vários sites, quando os índices são definidos como **Atualizar por agendamento**. Anteriormente, o aplicativo não exibia a grade e exibia este erro:  `[2020-12-09 11:31:54] report.CRITICAL: The website with id 2 that was requested wasn't found. Verify the website and try again. \{"exception":"[object] (Magento\\Framework\\Exception\\NoSuchEntityException(code: 0): The website with id 2 that was requested wasn't found. Verify the website and try again. at /var/www/html/magento24ee/vendor/magento/module-store/Model/WebsiteRepository.php:110)"}`

### dotdigital

* O tratamento de erros foi aprimorado ao recuperar listas de programas da dotdigital Engagement Cloud.

* O valor que é sincronizado na coluna de nome da loja durante a sincronização de convidado agora é o nome de exibição da loja como esperado. Anteriormente, o nome do site era incluído nesta coluna.

* Adição de uma verificação de matriz antes de fazer o looping sobre as automações de status do pedido depois que um pedido é salvo.

* Solução de problemas com atualizações do Composer que resultavam da dependência do módulo dotdigital em `magento/module-authorization`.

### Baixável

<!-- ENGCOM-7679 -->

* O aplicativo não lista mais um produto para download na guia Meus produtos para download depois que o produto para download é parcialmente reembolsado. [GitHub-28388](https://github.com/magento/magento2/issues/28388)

### Bloco dinâmico (antigo banner)

<!-- MC-23938-->

* O aplicativo não exibe mais um bloco dinâmico na loja depois que você excluiu o segmento do cliente associado ao bloco.

<!-- MC-37322-->

* Agora, o aplicativo leva em consideração corretamente as regras de preço do catálogo ao determinar se um bloco dinâmico deve ser exibido.

### EAV

<!-- MC-35934-->

* Atributos personalizados que usam `\Magento\Eav\Model\Entity\Attribute\Backend\ArrayBackend` Agora use valores padrão se nenhum valor for fornecido na carga quando um produto for criado por uma chamada de API.

### Email

<!-- ENGCOM-7961 -->

* `\Magento\Config\Model\Config\Source\Email\Template::toOptionArray` não gera mais um erro quando `setPath()` não é chamado antes `toOptionArray()`. [GitHub-29315](https://github.com/magento/magento2/issues/29315)

<!-- MC-36777-->

* O aplicativo agora converte corretamente texto simples em HTML ao clicar **Retornar A Versão Html** ao carregar um template de email.

<!-- MC-34803-->

* O email enviado para clientes que contêm faturas parciais agora inclui subtotais de itens precisos. Anteriormente, o subtotal neste email era o total da quantidade solicitada, não a quantidade total da quantidade faturada.

<!-- MC-38337-->

* O aplicativo agora envia lembretes de email para todos os clientes relevantes com endereços de email válidos. Anteriormente, o aplicativo parava de enviar emails de lembrete para os clientes depois de encontrar um endereço inválido.

<!-- ENGCOM-7517 -->

* O envio de email de vendas no modo assíncrono agora funciona como esperado depois que um produto é removido de um catálogo. Anteriormente, o envio assíncrono de email era bloqueado e o aplicativo exibia este erro:  `main.ERROR: Cron Job sales_send_order_invoice_emails has an error: Call to a member function getData() on null. Statistics: {"sum":0,"count":1,"realmem":0,"emalloc":0,"realmem_start":73400320,"emalloc_start":37177640} [] []main.CRITICAL: Error when running a cron job {"exception":"[object] (RuntimeException(code: 0): Error when running a cron job at /var/www/html/vendor/magento/module-cron/Observer/ProcessCronQueueObserver.php:327, Error(code: 0): Call to a member function getData() on null at /var/www/html/vendor/magento/module-catalog/Helper/Image.php:502)"} []`. [GitHub-26878](https://github.com/magento/magento2/issues/26878)

<!-- ENGCOM-8381 -->

* O aplicativo não copia mais um cliente no email de confirmação de pedido quando `sales_email/order_comment/enabled` está desativado e `sales_email/order_comment/copy_method` está definida como `bcc`. [GitHub-29915](https://github.com/magento/magento2/issues/29915)

### Estruturas

<!-- MC-24195-->

* Os grupos de filtros personalizados agora são aplicados corretamente ao pesquisar nos clientes. Anteriormente, o `afterSearch` A função não possuía filtros OU conforme esperado. [GitHub-24576](https://github.com/magento/magento2/issues/24576)

<!-- MC-36942-->

* As imagens na página inicial de uma loja agora são renderizadas com êxito. Anteriormente, o HTML de origem da página estava corrompido porque as três barras consecutivas no código base64 da imagem eram interpretadas incorretamente como um comentário.

<!-- MC-37369-->

* O DatePicker agora funciona corretamente ao filtrar pedidos na lista de Pedidos de Administração em lojas usando a localidade Árabe (`ar_SA - Saudi Arabia`).

<!-- MC-38344-->

* O DatePicker agora exibe a data correta depois que um comerciante salva uma regra de preço de carrinho em uma implantação. [GitHub-30382](https://github.com/magento/magento2/issues/30382)

<!-- MC-31085-->

* O aplicativo agora representa corretamente o agrupamento de milhares em árabe e os símbolos separadores decimais em árabe. Anteriormente, símbolos árabes eram aparados. [GitHub-26676](https://github.com/magento/magento2/issues/26676)

<!-- MC-30631-->

* O aplicativo agora exclui sessões de banco de dados expiradas do banco de dados `session` como esperado.

### Correções gerais

<!-- MC-38105-->

* Agora é possível configurar um manipulador de sessão nativa que seja diferente do manipulador definido em `php.ini`. Anteriormente, `SessionManager` não definiu memcache como `save_handler`, mas em vez disso usou o `session_handler`. o aplicativo emitiu este erro: `main.CRITICAL: Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 {"exception":"[object] (Exception(code: 0): Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in ../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 at ../vendor/magento/framework/App/ErrorHandler.php:61)"}`. [GitHub-24717](https://github.com/magento/magento2/issues/24717)

<!-- ENGCOM-8052 -->

* Foram efetuadas as seguintes melhorias no `LoginAsCustomer` módulos:

   * Substituído o `around` plug-in com `after`

   * Código redundante removido

   * Substituído `(bool)->getValue()` com `isSetFlag`. [GitHub-29689](https://github.com/magento/magento2/issues/29689)

<!-- ENGCOM-8093 -->

* O recarregamento de todas as seções de dados do cliente por curinga (*) não causa mais solicitações de `customer/section/load` para gerar um erro 400. [GitHub-28154](https://github.com/magento/magento2/issues/28154)

<!-- ENGCOM-7994 -->

* O aplicativo agora passa exceções que ocorrem quando um layout é renderizado no modo de produção para `var/report`. [GitHub-29606](https://github.com/magento/magento2/issues/29606)

<!-- MC-38587-->

* O aplicativo não redireciona mais os clientes para a página inicial ao alterar a visualização da loja. O `\Magento\VersionsCmsUrlRewrite\Model\StoreSwitcher::switch()` O método agora redireciona os compradores para a página inicial somente quando `$urlPath` não foi encontrado para a segunda visualização de loja.

<!-- ENGCOM-7527 -->

* O aplicativo agora gera uma exceção quando um cliente que não existe solicita uma redefinição de senha. [GitHub-26288](https://github.com/magento/magento2/issues/26288)

<!-- MC-33687 ENGCOM-8497-->

* O aplicativo agora exibe uma mensagem de erro informativa quando um administrador tenta salvar uma conta de cliente que contém um valor inválido para um atributo do cliente ao fazer upload de um arquivo que contém esse valor de atributo. Anteriormente, o aplicativo gerava um erro fatal. [GitHub-30295](https://github.com/magento/magento2/issues/30295)

<!-- ENGCOM-8400 -->

* O aplicativo agora aplica o **Logotipo para HTML Print View** configuração para armazenar PDF de fatura como esperado. [GitHub-24730](https://github.com/magento/magento2/issues/24730)

<!-- ENGCOM-8425 -->

* `static::` foi substituída por `self::` em toda a base de código para acessar constantes privadas. [GitHub-30781](https://github.com/magento/magento2/issues/30781)

<!-- ENGCOM-8395 -->

* O aplicativo agora abre a página Novo atributo , como esperado, quando um comerciante clica no **Criar novo atributo** duas vezes durante a criação do produto. Anteriormente, o aplicativo exibia uma página vazia e exibia um erro. [GitHub-30361](https://github.com/magento/magento2/issues/30361)

<!-- ENGCOM-8426 -->

* O aplicativo não exibe mais a variável `The coupon code has been accepted` após a remoção de um cupom. [GitHub-30255](https://github.com/magento/magento2/issues/30255)

<!-- ENGCOM-8396 -->

* Agora, os administradores podem atribuir widgets a categorias específicas. [GitHub-30009](https://github.com/magento/magento2/issues/30009)

<!-- ENGCOM-8216 -->

* Seletor de atributo `input[type=datetime]` foi substituído por um seletor de tipo de entrada menos específico. [GitHub-30064](https://github.com/magento/magento2/issues/30064)

<!-- ENGCOM-8282 -->

* O aplicativo agora exibe valores específicos da loja associados a atributos de categoria personalizados, conforme esperado. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-8287 -->

* O aplicativo agora exibe um prompt perguntando se o grupo de clientes deve ser alterado ao clicar no botão **Validar número de IVA** na página de criação do pedido quando o endereço da loja e o destino de envio pertencerem a diferentes países da UE. [GitHub-29652](https://github.com/magento/magento2/issues/29652)

<!-- ENGCOM-8031 -->

* O `\Magento\Catalog\Model\ImageUploader` foi refatorado para usar o novo `moveFileFromTmp`  método . [GitHub-29598](https://github.com/magento/magento2/issues/29598)

<!-- ENGCOM-8178 -->

* O aplicativo agora exibe uma mensagem de erro mais informativa quando um comerciante tenta criar um atributo de produto com `product_type` e `type_id` códigos para serem mais descritivos. [GitHub-28479](https://github.com/magento/magento2/issues/28479)

<!-- ENGCOM-8135 -->

* Lógica de validação corrigida para o **Duração do token do cliente (horas)**  e **Duração do token de administrador (horas)** nos campos Admin **Lojas**  >  **Configurações** >  **Serviços**  > **OAuth** página. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-8132 -->

* O aplicativo agora analisa corretamente o texto que contém `}}` no campo de conteúdo do widget. [GitHub-12087](https://github.com/magento/magento2/issues/12087)

<!-- ENGCOM-8098 -->

* Agora você pode remover um filtro da página Categorias de produto . Anteriormente, ao tentar excluir o filtro, o aplicativo não permitia remover o filtro e exibia este erro:  `Something went wrong`. [GitHub-8538](https://github.com/magento/magento2/issues/8538)

<!-- ENGCOM-8050 -->

* `Magento\Framework\MessageQueue\ConfigInterface` agora pode ser instanciado quando o módulo opcional `Magento_MessageQueue` está desativado. Anteriormente, o aplicativo exibia esse erro: `PHP Fatal error:  Uncaught Error: Cannot instantiate interface Magento\Framework\MessageQueue\ConfigInterface in /var/www/magento2/magento2/lib/internal/Magento/Framework/ObjectManager/Factory/AbstractFactory.php:121`. [GitHub-26080](https://github.com/magento/magento2/issues/26080)

<!-- ENGCOM-7312 -->

* A lógica que determina quando o aplicativo pode recuperar o valor de email do armazenamento persistente foi aprimorada. Anteriormente, o aplicativo exibia campos de senha preenchidos na página de check-out quando um usuário não registrado retornava à página de check-out após ter preenchido o campo de email pela primeira vez. [GitHub-26903](https://github.com/magento/magento2/issues/26903)

<!-- ENGCOM-7777 -->

* Falta `aclResource` foi adicionado ao cabeçalho Admin `AdminNotification` bloco da barra de ferramentas. Anteriormente, a entrada da barra de ferramentas de Notificação do administrador ficava visível mesmo quando o usuário administrador não tinha permissões de recurso de função para visualizá-la. [GitHub-29067](https://github.com/magento/magento2/issues/29067)

<!-- ENGCOM-8022 -->

* O `framework/database/select` `where` manipulador de funções agora `type` corretamente. [GitHub-29590](https://github.com/magento/magento2/issues/29590)

<!-- ENGCOM-8260 -->

* Utilização ineficiente de `array_merge` em loops foi aprimorado em toda a base de código, o que melhorou o desempenho em vários lugares, incluindo no processo de implantação de conteúdo estático. [GitHub-30183](https://github.com/magento/magento2/issues/30183)

<!-- ENGCOM-8445 -->

* A duração padrão da sessão de Administrador foi movida do módulo de criptografia para o módulo de segurança. [GitHub-30859](https://github.com/magento/magento2/issues/30859)

<!-- ENGCOM-8425 -->

* O aplicativo agora verifica se há constantes privadas em uma classe e exibe um aviso se houver algum `static::` chama-os. Anteriormente, o aplicativo exibia esse erro: `Undefined class constant`.

<!-- ENGCOM-8219 -->

* Regras adicionadas a `editorconfig` para suportar o recuo de arquivos JSON e YAML, dois espaços. [GitHub-30066](https://github.com/magento/magento2/issues/30066), [GitHub-30063](https://github.com/magento/magento2/issues/30063)

<!-- ENGCOM-8079 -->

* O `FlushCacheByTags` A classe foi atualizada para usar after-plug-ins em vez de round-plug-ins. [GitHub-29558](https://github.com/magento/magento2/issues/29558)

<!-- ENGCOM-8358 -->

* `MessageValidator` não falha mais em arrays de hash que não incluem um `0` elemento. [GitHub-30563](https://github.com/magento/magento2/issues/30563)

<!-- ENGCOM-8370 -->

* O código na `checkout_index_index.xml` O arquivo foi aprimorado pela remoção de `sortOrder` from `messages`, `authentication`, `progressBar`, `estimation`e `sidebar checkout` componentes. [GitHub-30550](https://github.com/magento/magento2/issues/30550)

<!-- ENGCOM-8379 -->

* Conteúdo em `calc` agora é escapado, o que resulta em correto `calc` no arquivo de saída CSS. Anteriormente, o aplicativo retornava um erro `calc` valor. [GitHub-30542](https://github.com/magento/magento2/issues/30542)

<!-- ENGCOM-8030 -->

* O gerador de reescrita de URL agora define o objeto de categoria `url_key`, `url_path`e  `store_id` para armazenar valores padrão ao salvar substituições de URL de categoria para o escopo global. Anteriormente, ele era salvo `url_key`, `url_path`e `store_id` com os valores da última ID de armazenamento processada. [GitHub-29585](https://github.com/magento/magento2/issues/29585)

<!-- ENGCOM-8250 -->

* `\Magento\Widget\Controller\Adminhtml\Widget\Instance\Validate` O agora reconhece um valor de resultado de frase como uma mensagem de erro e o envia ao usuário durante a validação do widget. [GitHub-27397](https://github.com/magento/magento2/issues/27397)

<!-- ENGCOM-8311 -->

* A lista codificada de atributos de categoria em  `Magento\Catalog\Model\Category\DataProvider::getFieldsMap()` foi substituída por uma lista de atributos gerados a partir do cache. [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-7759 -->

* Hash redundante de `req.http.host/client.ip` O foi removido e o hash é manipulado pelo VCL incorporado da Varnish. [GitHub-29988](https://github.com/magento/magento2/issues/29988)

<!-- ENGCOM-8302 -->

* Adição de um retorno de chamada de falha ao `Magento_Ui` carregador de arquivos. [GitHub-29557](https://github.com/magento/magento2/issues/29557)

<!-- ENGCOM-8405 -->

* Um `acl.xml` inconsistência ocorrida quando `Magento_LoginAsCustomerAssistance` foi ativado, mas `Magento_LoginAsCustomerAdminUi` ou `Magento_LoginAsCustomerLog` desativados foi corrigido. Anteriormente, quando o administrador com essas credenciais tentava fazer logon no Administrador, o aplicativo exibia uma página em branco e exibia esse erro ao :  `Exception #0 (LogicException): Could not create an acl object: Invalid Document Element 'resource': The attribute 'title' is required but missing. Line: 13`. [GitHub-30680](https://github.com/magento/magento2/issues/30680)

<!-- ENGCOM-8157 -->

* O aplicativo não lança mais um `Undefined class constant` erro quando um `Interceptor` é gerado durante a criação do plug-in. [GitHub-28981](https://github.com/magento/magento2/issues/28981), [GitHub-29879](https://github.com/magento/magento2/issues/29879)

<!-- ENGCOM-8108 -->

* O aplicativo agora lida corretamente com mensagens e registros para operações em massa assíncronas. Anteriormente, embora os produtos tenham sido atualizados, a variável `magento_operation` e `queue_message_status` as tabelas não eram atualizadas corretamente e as mensagens do sistema estavam incorretas. [GitHub-29718](https://github.com/magento/magento2/issues/29718)

<!-- ENGCOM-8388 -->

* Um comprador agora é redirecionado para a página Definir uma nova senha, conforme esperado ao clicar **Definir uma nova senha** no email Redefinir senha quando **Solicitar confirmação de emails** está habilitado para a loja. Anteriormente, o comprador era redirecionado para o **Esqueceu sua senha** na página de logon. [GitHub-27954](https://github.com/magento/magento2/issues/27954)

<!-- ENGCOM-8337 -->

* Correção do erro de conversão de matriz em string ao salvar a configuração de sistema de linha com valores padrão. [GitHub-30314](https://github.com/magento/magento2/issues/30314)

<!-- ENGCOM-8440 -->

* Agora você pode definir argumentos para filas de mensagens. [GitHub-30216](https://github.com/magento/magento2/issues/30216)

<!-- ENGCOM-8384 -->

* O coletor de arquivos base agora respeita `AppState->emulateAreaCode()`. [GitHub-39656](https://github.com/magento/magento2/issues/29656)

<!-- ENGCOM-8441 -->

* O novo `BlockByIdentifier` A classe suporta a recuperação de um bloco de layout com base no identificador de bloco CMS. Como resultado, quando um bloco CMS é removido do cache, o aplicativo também limpa o cache de bloco de layout. [GitHub-28309](https://github.com/magento/magento2/issues/28309)

<!-- ENGCOM-8385 -->

* Correção de problemas com conversão de argumento numérico em filas. Anteriormente, ao declarar uma fila com numérico `type` argumentos na `queue_topology.xml`, o valor do argumento foi convertido em string. [GitHub-29615](https://github.com/magento/magento2/issues/29615)

## Cartões de presente

<!-- MC-38989-->

* Emails que contêm um código de cartão-presente agora são enviados somente após o pedido ter sido salvo com sucesso quando a função **Criar uma conta de cartão-presente quando um item de pedido for solicitado** a configuração está ativada. Anteriormente, um código de cartão-presente era reutilizado e enviado a clientes diferentes se uma conta de cartão-presente fosse gerada quando os itens eram solicitados, mas uma exceção ocorria após o envio do cartão-presente virtual.

<!-- MC-36496-->

* O aplicativo não duplica mais pedidos de cartão-presente. Anteriormente, quando um comprador solicitava um cartão-presente, o aplicativo fornecia dois códigos-presente. Isso ocorreu porque `cron` tarefas chamadas `\Magento\GiftCard\Observer\GenerateGiftCardAccountsInvoice::execute()`e esse método não verificou se os códigos do cartão-presente já haviam sido gerados durante a criação da fatura.

<!-- MC-35058-->

* Agora, os comerciantes podem cancelar a atribuição de produtos de categorias conforme esperado. Anteriormente, o aplicativo exibia um erro semelhante a este: `Could not save product "4" with position 0 to category 3`.

<!-- ENGCOM-8326 -->

* Suporte adicionado para link simbólico `root` em páginas de erros e no modo de manutenção. Anteriormente, se a variável `root` ou `magento/pub` eram ligados simbolicamente a um diretório diferente, o processador de erros (`Magento\Framework\Error\Processor`) não gerou um URL de arquivo de exibição correto. [GitHub-30296](https://github.com/magento/magento2/issues/30296)

<!-- ENGCOM-8087 -->

* Adição de ausente `order_data` array para `EmailSender` classes. Isso alinhamento dessas classes com a recomendação do Magento para usar variáveis escalar em vez de objetos nos templates de email. [GitHub-29604](https://github.com/magento/magento2/issues/29604)

### Gerenciador de tags da Google

<!-- MC-34818-->

* O Gerenciador de tags da Google `productClick` agora funciona conforme o esperado. Anteriormente, `productClick` não foi acionado em produtos nas páginas de listagem, e o Gerenciador de tags da Google não pôde capturar esse evento.

<!-- MC-38781-->

* As opções de produto configuráveis do Google Tag Manager agora são atualizadas conforme esperado no datalayer depois que você edita opções de produto configuráveis no carrinho. Anteriormente, os dados do `removeFromCart` O evento foi reescrito incorretamente quando a opção do produto foi alterada e a quantidade permaneceu a mesma.

### GraphQL

<!-- MC-37615-->

* O `urlResolver` O query agora lida com os parâmetros de consulta corretamente.

<!-- ENGCOM-8422 -->

* O `urlResolver` query não retorna mais NULL quando um nó e página CMS personalizados são especificados como entrada. [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209 ENGCOM-8386-->

* O `category` query não retorna mais categorias secundárias de uma categoria principal que foi desabilitada. [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* O `category` query agora retorna o caminho correto de uma imagem de categoria quando as regravações de URL estão desativadas.

<!-- MC-36648 8321-->

* O `resetPassword` agora retorna uma mensagem mais informativa quando ocorre um erro. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078 ENGCOM-8504-->

* Resultados em cache do `products` são invalidadas conforme esperado quando as posições do produto são alteradas. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- MC-35355 ENGCOM-8404-->

* O `products` agora retorna os resultados esperados quando a variável `category_id` é especificado com o `in` palavra-chave. [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8373 -->

* O `categories` e `categoryList` As consultas agora consideram a disponibilidade da categoria com base na configuração de permissões de categoria e na ID da categoria pai. [GitHub-29880](https://github.com/magento/magento2/issues/29880), [GitHub-30624](https://github.com/magento/magento2/issues/30624)

<!-- MC-37603-->

* O `updateProductsInWishList` agora valida corretamente os itens da lista de desejos. [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- ENGCOM-8430 PWA-1107-->

* Substituição de vários atributos no `ProductInterface` e `CategoryInterface` para impedir a sua utilização na loja. [GitHub-30625](https://github.com/magento/magento2/issues/30625)

* Os preços agora ficam ocultos dos resultados da consulta de produtos quando as permissões de categoria são definidas para ocultá-los. [GitHub-29926](https://github.com/magento/magento2/issues/29926)

<!-- MC-36898 PWA-1299-->

* Agora você pode usar o `addProductsToWishList` mutação para adicionar um produto de pacote com uma quantidade definida pelo usuário a uma lista de desejos.

<!-- MC-36648 -->

* As mutações que adicionam produtos ao carrinho agora honram as permissões do catálogo. [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-36946 -->

* O tempo de resposta GraphQL para adicionar às operações do carrinho foi aprimorado.

<!-- ENGCOM-8099 -->

* O `products` agora retorna os valores de preço da camada conforme esperado. [GitHub-29168](https://github.com/magento/magento2/issues/29168)

<!-- ENGCOM-7528 -->

* Remoção de um redundante `getMappedNums` de um loop em `lib/internal/Magento/Framework/GraphQl/Query/EnumLookup.php`. [GitHub-30031](https://github.com/magento/magento2/issues/30031)

<!-- ENGCOM-8172 -->

* O `products` O query não retorna mais um erro quando o produto consultado tem um produto relacionado desativado. [GitHub-28892](https://github.com/magento/magento2/issues/28892)

<!-- MC-37395 -->

* O `cart` agora retorna os preços que foram convertidos na moeda correta (a moeda de exibição padrão). Anteriormente, a consulta retornava o valor do preço do item na moeda de base e o código monetário era retornado como moeda de exibição padrão.

<!-- MC-37388-->

* GraphQL agora respeita as permissões de catálogo. O aplicativo restringe quais itens são retornados para um `products` query com base no grupo de clientes do comprador.

<!-- MC-39690-->

* Adicionado o `customizable_option` para vários tipos de dados que implementam a variável `CartItemInterface`.

<!-- MC-39744-->

* Adição de atributos para a `storeConfig` query para retornar informações de armazenamento, grupo de armazenamento e site.

<!-- MC-37414-->

* A função `SelectedCustomizableOption.type` atributo. Além disso, a variável `customizable_options` em várias implementações do `CartItemInterface` agora não são nulas.

<!-- MC-23860-->

* A funcionalidade de pesquisa do `products` query não retorna mais itens nos quais as permissões de categoria foram habilitadas.

<!-- MC-37726-->

* O `products` query retorna a moeda correta para exibições de armazenamento que têm várias moedas.

<!-- MC-37727-->

* Rótulos para `products` agora, os filtros de consulta retornam valores traduzidos, quando aplicável para exibições de armazenamento não padrão.

<!-- MC-37728-->

* Valores de moeda de armazenamento fixos em cartões-presente no carrinho.

<!-- MC-38443-->

* Adicionado o `ConfigurableProductOptionsSelection` tipo de dados, que contém metadados correspondentes às opções configuráveis selecionáveis de um produto. Use este objeto em uma `products` para minimizar o número de itens da galeria de mídia exibidos à medida que o comprador seleciona opções de produto configuráveis.

### Produtos agrupados

<!-- MC-35361-->

* O query products agora retorna todos os dados esperados para produtos agrupados. Anteriormente, `product_links` era uma matriz vazia.

<!-- MC-37718-->

* Um produto agrupado agora é listado como indisponível na página de edição do produto quando todos os produtos simples secundários estão indisponíveis.

<!-- MC-37249-->

* O status de um produto agrupado agora é atualizado corretamente na página de edição do produto quando o status de seus produtos simples filho muda para esgotado. Anteriormente, o item de estoque de inventário para o pai do produto agrupado não era atualizado após seus filhos alterarem o status de estoque.

### Imagens

<!-- MC-36942-->

* As imagens na página inicial de uma loja agora são renderizadas com êxito. Anteriormente, o HTML de origem da página estava corrompido porque as três barras consecutivas no código base64 da imagem eram interpretadas incorretamente como um comentário.

<!-- ENGCOM-8116 -->

* A dependência do `fileinfo` A extensão do foi removida do módulo CMS. Anteriormente, o aplicativo exibia um erro ao tentar fazer upload de uma imagem usando o carregador de imagem, que é iniciado quando você clica no **Inserir imagem** ao adicionar conteúdo. [GitHub-24332](https://github.com/magento/magento2/issues/24332), [GitHub-16531](https://github.com/magento/magento2/issues/16531), [GitHub-29852](https://github.com/magento/magento2/issues/29852)

<!-- ENGCOM-8020 -->

* Suporte adicionado para leitura `exif_image.png` ou `exif-image.jpeg` metadados. [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- MC-37042-->

* As imagens agora são exibidas pelo widget Carrossel de eventos do catálogo após o carregamento conforme esperado. Anteriormente, o `catalog_event_status_checker` trabalho cron excluído imagens enviadas.

<!-- ENGCOM-8296 -->

* As cores das imagens CMYK agora são renderizadas corretamente. Quando o adaptador Imagick agora detecta que uma imagem aberta tem um espaço de cores CMYK, o espaço de cores é convertido em SRGB. Anteriormente, essas imagens eram renderizadas com cores invertidas. [GitHub-22375](https://github.com/magento/magento2/issues/22375)

<!-- ENGCOM-8251 -->

* Valores booleanos não são mais definidos para `image_with_border.phtml`. Redundante `max-width` e `height` as configurações foram removidas de `.product-image-photo`. (Esses valores já estão definidos globalmente na imagem por meio dos estilos de redefinição.) [GitHub-30186](https://github.com/magento/magento2/issues/30186)

### Importar/exportar

<!-- MC-35081-->

* Endereço do cliente `region_id` não recebe mais um `NULL` ao importar endereços de clientes usando um arquivo CSV (`entity type = "customer address"` e `import behavior = "add/update"`) do qual determinados valores de campo foram excluídos.

<!-- MC-35295-->

* Agora é possível ocultar imagens de produtos na loja durante a importação.

<!-- MC-35395-->

* Um processo agendado de importação de produto agora atualiza produtos com campos de dados corretos quando o arquivo CSV também contém entradas incorretas. Anteriormente, nenhuma entrada era atualizada se o arquivo CSV incluísse entradas incorretas quando **Em Erro: Continuar Processando** foi ativado.

<!-- MC-35836-->

* Quando um produto importado `qty` definido como 0, mas `is_in_stock set` como 1 no arquivo CSV, o produto não está listado na página categoria e a página de detalhes do produto o identifica como indisponível. Anteriormente, os produtos com esses valores estavam visíveis na loja após a importação.

<!-- MC-38433-->

* A importação de CSV não ignora mais o `dropdown` e `textarea` para atributos adicionais. Anteriormente, esses valores de atributo não eram atualizados durante a importação.

<!-- MC-37933-->

* O arquivo CSV de exportação do produto agora é exibido na lista Admin de arquivos CSV de exportação, conforme esperado. Anteriormente, o aplicativo exibia um erro ao executar este comando: `bin/magento queue:consumers:start exportProcessor --single-thread --max-messages=10000`.

<!-- MC-37672-->

* O aplicativo não gera mais um erro ao importar dados CSV que incluem caracteres do alfabeto Bengali (Bangla).

<!-- MC-36410-->

* O aplicativo agora exibe uma mensagem de erro informativa quando um administrador clica em **Verificar dados** durante a importação de um arquivo que foi alterado desde a exportação ao trabalhar no Chrome. Anteriormente, o aplicativo exibia um erro de console, mas não informava ao usuário como proceder.

<!-- ENGCOM-8252 -->

* O aplicativo não duplica mais imagens do produto ao importar os mesmos dados CSV do produto mais de uma vez. [GitHub-21885](https://github.com/magento/magento2/issues/21885)

<!-- ENGCOM-8262 -->

* O limite de 90 caracteres para nomes de arquivo de imagem em `vendor/magento/framework/File/Uploader.php` foi removida.  Anteriormente, o comprimento do nome do diretório e do arquivo não podia exceder 255 caracteres. O aplicativo importou produtos com imagens cujo nome de arquivo excedeu esse limite, mas não importou o arquivo de imagem. [GitHub-29377](https://github.com/magento/magento2/issues/29377)

<!-- ENGCOM-8153 -->

* Os códigos de cupom agora podem ser exportados com êxito para CSV ou XML. Anteriormente, o aplicativo exibia um erro 404 ao clicar **Exportar CSV** ou **Exportar XML** quando você tentou exportar cupons. [GitHub-29277](https://github.com/magento/magento2/issues/29277)

<!-- ENGCOM-8252 -->

* Imagens de produto duplicadas agora são removidas após a importação de um arquivo CSV que contém imagens. [GitHub-14398](https://github.com/magento/magento2/issues/14398), [GitHub-21885](https://github.com/magento/magento2/issues/21885)

## Índice

<!-- MC-38003-->

* Melhoramos o desempenho do indexador parcial. O aplicativo agora limpa as IDs de cache que foram alteradas para cada iteração em lote de 1000 ID. O contexto do cache não acumula mais IDs. Anteriormente, o contexto do cache acumulava IDs do cache para cada iteração em lote de 1000 ID e limpava o mesmo conjunto de IDs em cada iteração.

<!-- ENGCOM-7929 -->

* Foram corrigidas as inconsistências entre o sistema de reindexação parcial e o sistema de reindexação completo. Ambos os sistemas de indexação agora usam o mesmo código, que funciona corretamente. Anteriormente, ambos os sistemas de indexação usavam uma lógica diferente em relação aos indexadores compartilhados, o que potencialmente fazia com que os indexadores fossem invalidados após cada execução do sistema de reindexação parcial. [GitHub-29478](https://github.com/magento/magento2/issues/29478), [GitHub-29297](https://github.com/magento/magento2/issues/29297)

<!-- MC-38168-->

* Resolvemos problemas com o indexador manual que resultaram em páginas de categoria vazias ou na contagem reduzida de produtos em páginas de categoria. Problemas com páginas de categoria incompletas ou contagem de produtos ocorreram quando:

   * o `catalogsearch_fulltext` e `catalog_product_price` indexadores parciais foram executados em um catálogo grande até que esses indexadores concluíssem a execução.

   * o indexador parcial foi executado em `catalog_category_product` ou `catalog_product_category` índices e, ao mesmo tempo, um reíndice completo foi executado em um desses índices. Esses dois processos de indexação podem entrar em conflito, o que resultou em produtos ausentes das páginas de categoria.

   * `bin/magento indexer:reindex inventory` foi executado em um catálogo grande. Os produtos estavam faltando nas páginas de categoria até que a variável `catalogsearch_fulltext` indexador parcial concluiu a execução.

<!-- MC-39700-->

* Um indexador foi adicionado ao `Magento_Bulk` Tabela MySQL, que melhorou o desempenho de operações em massa.

<!-- MC-38806-->

* Os comentários nas tabelas do banco de dados agora refletem com precisão o status da tabela após a reindexação (`bin/magento indexer:reindex`). Anteriormente, os comentários da tabela após a reindexação continham os mesmos valores que os comentários contidos após uma nova instalação.

<!-- ENGCOM-7542 -->

* O `SELECT entity_id IN` A declaração foi aprimorada em implantações que implementam o MariaDB v.10.3.18, o que melhorou o desempenho da indexação de categoria de catálogo. [GitHub-25199](https://github.com/magento/magento2/issues/25199)

<!-- ENGCOM-8237 -->

* A Adobe Commerce melhorou o desempenho do cache, eliminando a liberação de tags várias vezes por instância do indexador. [GitHub-29890](https://github.com/magento/magento2/issues/29890)

### Infraestrutura

<!-- MC-34353-->

* Agora você pode usar `app/etc/env.php` para alterar o mediador de mensagens de MYSQL para AMQP.

<!-- MC-38242-->

* Problemas com o cálculo dos remanescentes para valores decimais para quantidades de produto foram corrigidos na biblioteca JavaScript relevante. O aplicativo calculava anteriormente frações decimais com mais de dois dígitos e, em seguida, exibia uma mensagem incorreta.

<!-- MC-38993 ENGCOM-8473-->

* O `\Magento\Authorization\Model\Rules::update` foi descontinuado. [GitHub-29128](https://github.com/magento/magento2/issues/29128)

<!-- ENGCOM-8000 -->

* O aplicativo não gera mais um erro fatal ao converter um objeto de data de UTC. Anteriormente, sob certas condições, a variável `convertConfigTimeToUtc` O método gerou uma exceção. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7987 -->

* `DataObject` foi substituída pelo modelo de produto em `\Magento\MediaGalleryCatalogUi\Ui\Component\Listing\Columns\Thumbnail::prepareDataSource`.[GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- ENGCOM-7914 -->

* O `RequireJS` O resolvedor não falha mais ao detectar recursos bloqueados. Anteriormente, o resolvedor não detectava corretamente se todos os recursos em uma página eram carregados ou manipulados adequadamente e a página continuava carregando. [GitHub-28116](https://github.com/magento/magento2/issues/28116)

<!-- ENGCOM-8229 -->

* A validação do código do Repositório de Atributos agora respeita `Magento\Eav\Model\Entity\Attribute::ATTRIBUTE_CODE_MAX_LENGTH` em vez de um valor codificado. [GitHub-29017](https://github.com/magento/magento2/issues/29017)

<!-- MC-35699-->

* A minificação de HTML não elimina mais barras triplas (//) das cadeias de HTML em arquivos PHTML. Anteriormente, barras triplas eram interpretadas como comentários durante a minificação e o restante da linha era completamente removido no arquivo PHTML gerado após a implantação.

<!-- MC-38201-->

* Os comerciantes agora podem configurar assinaturas de indexador no nível da coluna da tabela em vez do nível da tabela. Um novo argumento foi adicionado a `\Magento\Framework\Mview\View\Subscription` para permitir que colunas sejam ignoradas para uma exibição ou combinação de tabela específica. [GitHub-30243](https://github.com/magento/magento2/issues/30243)

<!-- MC-30171-->

* Clicar no **Adicionar ao carrinho** antes da página do produto, o JavaScript inicializou totalmente, não resulta em duplicatas `form_key` valores. Anteriormente, um produto podia ser adicionado ao carrinho com um em cache `form_key` que acionou uma exceção. When **Adicionar ao carrinho** foi clicado antes de o JavaScript ter sido totalmente inicializado e, em seguida, a variável `form_key` O valor enviado nos dados do formulário não correspondia à sessão do usuário e o produto não era adicionado ao carrinho. [GitHub-13746](https://github.com/magento/magento2/issues/13746)

<!-- ENGCOM-8107 -->

* O cliente cURL atual agora respeita nomes de cabeçalho que não diferenciam maiúsculas de minúsculas. Anteriormente, o `Set-Cookie` A comparação fazia distinção entre maiúsculas e minúsculas, o que poderia causar problemas em alguns servidores HTTP. [GitHub-29524](https://github.com/magento/magento2/issues/29524)

<!-- ENGCOM-8360 -->

* Formato XSD URN atualizado em `api-functional` e arquivos XML de caso de teste. [GitHub-30552](https://github.com/magento/magento2/issues/30552)

<!-- ENGCOM-8295 -->

* Um prefixo de evento e objeto de evento foram adicionados à coleção de valores de opções de produto de catálogo para melhorar a personalização do carregamento da coleção de `\Magento\Catalog\Model\ResourceModel\Product\Option\Value\Collection`. [GitHub-29621](https://github.com/magento/magento2/issues/29621)

<!-- ENGCOM-8261 -->

* Todas as ocorrências de `array_merge` foram refatorado para usar o formato recomendado no padrão de codificação. [GitHub-30005](https://github.com/magento/magento2/issues/30005)

<!-- ENGCOM-7718 -->

* A `head.additional` bloco do tipo `\Magento\Framework\View\Element\Text\ListText` foi adicionado ao `adminhtml` `default` layout (por `magento2/module-base`). [GitHub-29165](https://github.com/magento/magento2/issues/29165)

<!-- ENGCOM-8312 -->

* Adição do método de URL de escape ausente ao widget do módulo de modelo de layout. [GitHub-30036](https://github.com/magento/magento2/issues/30036)

<!-- ENGCOM-8127 -->

* O `\Magento\Framework\Filesystem\Io\File::read()` agora é compatível com `\Magento\Framework\Filesystem\Io\IoInterface::read()`. [GitHub-27866](https://github.com/magento/magento2/issues/27866)

### Klarna

* Remoção da dependência do módulo PayPal. [GitHub-29421](https://github.com/magento/magento2/issues/29421)

### Registro

<!-- ENGCOM-8443 -->

* O `Magento_Logging` Agora, o módulo registrou corretamente novos valores, bem como os valores que os precederam. Anteriormente, os valores na coluna Valor antes da alteração exibiam valores de N/A, independentemente de se tratar da primeira alteração ou da próxima, ou quando o valor padrão era retornado. [GitHub-26943](https://github.com/magento/magento2/issues/26943)

### Galeria de Mídia

<!-- ENGCOM-8014 -->

* O Administrador **Lojas**  >  **Configuração**  >  **Avançado**  >  **Sistema** A página foi atualizada para exibir o nome de produto correto (Galeria de mídia). Foram incluídas pequenas reformulações na interface do usuário. [GitHub-1738](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-8019 -->

* Os links na seção Usados na descrição das imagens da Galeria de mídia agora exibem uma grade que foi filtrada pela imagem selecionada conforme esperado. Anteriormente, a grade exibida não tinha o título correto e as entradas de lista não eram precisas. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019 -->

* Agora é possível editar várias imagens com êxito na Galeria de mídia. Anteriormente, não era possível adicionar tags a uma segunda imagem depois de adicionar tags a uma imagem. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015 -->

* O menu suspenso Tags agora fica vazio conforme o esperado depois que você remove tags de uma imagem na Galeria de mídia. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

<!-- ENGCOM-8146 -->

* O processamento em lote de mensagens da fila de sincronização do Media Gallery agora é suportado. [GitHub-1724](https://github.com/magento/adobe-stock-integration/issues/1724)

<!-- ENGCOM-8064 -->

* O aplicativo agora exibe uma página 404 conforme esperado quando você tenta abrir a Galeria de Mídia quando **Galeria de Mídia Avançada** está desativado.  [GitHub-1760](https://github.com/magento/adobe-stock-integration/issues/1760)

<!-- ENGCOM-8072 -->

* `MediaGalleryMetadata` agora ignora o leitor de segmentos se ocorrer uma exceção e, em vez disso, analisa e exibe os metadados da imagem conforme esperado. Anteriormente, os metadados da imagem ficavam vazios devido a uma exceção no `exif_read_data` leitor de segmento. [GitHub-1782](https://github.com/magento/adobe-stock-integration/issues/1782)

<!-- ENGCOM-8069 -->

* O comprimento do nome da pasta já não impede que uma imagem seja carregada na Galeria de Mídia. Agora a Galeria de Mídia define a coluna de caminho como tipo `text`. [GitHub-1778](https://github.com/magento/adobe-stock-integration/issues/1778)

<!-- ENGCOM-8217 -->

* O carregador de imagem agora exibe o tamanho de imagem correto quando uma representação é inserida da Galeria de Mídia. [GitHub-1806](https://github.com/magento/adobe-stock-integration/issues/1806)

<!-- ENGCOM-8467 -->

* A verificação de caminho foi adicionada ao `Mediagallery` plug-in do carregador. Anteriormente, a validação falhava e o aplicativo não importava produtos quando **Habilitar Galeria de Mídia Antiga** foi desativado. [GitHub-30649](https://github.com/magento/magento2/issues/30649)

<!-- ENGCOM-8057 -->

* `Magento_Cms::media_gallery` Subrecursos ACL foram adicionados e aplicados para a nova Galeria de Mídia para suportar permissões configuradas para as seguintes operações discretas:

   * Fazer upload de ativos
   * Inserir ativos no conteúdo
   * Excluir ativos
   * Criar pastas
   * Excluir pastas. [GitHub-1487](https://github.com/magento/adobe-stock-integration/issues/1487)

<!-- ENGCOM-8047 -->

* As sequências de texto e os nomes de pastas da Long Media Gallery não são mais cortadas. Anteriormente, o aplicativo exibia texto cortado e imagens e exibia esta mensagem:  `We couldn't find any records`. [GitHub-1763 ](https://github.com/magento/adobe-stock-integration/issues/1763), [GitHub-1758 ](https://github.com/magento/adobe-stock-integration/issues/1758)

<!-- ENGCOM-8042 -->

* O aplicativo não exibe mais a variável **Adicionar Selecionado** quando nenhuma imagem for selecionada durante a edição de conteúdo para uma nova página. [GitHub-1769](https://github.com/magento/adobe-stock-integration/issues/1769)

<!-- ENGCOM-8047 -->

* Os filtros agora são aplicados conforme esperado na variável **Conteúdo**  >  **Galeria de Mídia** Grade de categoria. [GitHub-1763 ](https://github.com/magento/adobe-stock-integration/issues/1763)

<!-- ENGCOM-8183 -->

* A configuração das opções de ponto de interrupção de multiplicação da galeria agora funciona conforme o esperado. Anteriormente, a configuração de opções do ponto de interrupção não funcionava corretamente porque `mediaCheck` a função de consulta de mídia de saída foi acionada no carregamento da página. [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### MFTF

<!-- ENGCOM-8359 -->

* Substituição de ações repetitivas por grupos de ação em `CheckStaticBlocksTest`. [GitHub-30561](https://github.com/magento/magento2/issues/30561)

<!-- ENGCOM-8267 -->

* `AdminUpdateCategoryAndMakeInactiveTest` e `VerifyChildCategoriesShouldNotIncludeInMenuTest` foram refatoradas para cumprir as práticas recomendadas do MFTF. [GitHub-30058](https://github.com/magento/magento2/issues/30058)

<!-- ENGCOM-8458 -->

* Remoção de duplicatas `AdminOpenCMSBlocksGridActionGroup`. [GitHub-30896](https://github.com/magento/magento2/issues/30896)

<!-- ENGCOM-8156 -->

* Substituído `AdminOpentCmsBlockActionGroup` com AdminOpenCmsBlockActionGroup. [GitHub-29839](https://github.com/magento/magento2/issues/29839)

<!-- ENGCOM-8226 -->

* Obsoleto `GoToAttributeGridPageActionGroup`. [GitHub-30103](https://github.com/magento/magento2/issues/30103)

<!-- ENGCOM-8061 -->

* Adição de grupos de ação ao `Analytics` módulo. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-7334 -->

* Atualizado `CheckCheckoutSuccessPageAsRegisterCustomerTest` e `CheckCheckoutSuccessPageAsGuestTest` para cancelar pedidos criados após a execução de testes. [GitHub-28324](https://github.com/magento/magento2/issues/28324)

<!-- ENGCOM-8214 -->

* Removido `AdminNavigateToPageGridActionGroup` devido à redundância. [GitHub-29838](https://github.com/magento/magento2/issues/29838)

<!-- ENGCOM-8280 -->

* Um problema com `StorefrontProductListWidgetWithSharedCatalogTest` que causou o teste a ser ignorado foi resolvido. [GitHub-322](https://github.com/magento/partners-magento2b2b/issues/322)

<!-- ENGCOM-8122 -->

* Implementado `ActionGroup` para navegar até a página de checkout. [GitHub-29843](https://github.com/magento/magento2/issues/29843)

<!-- ENGCOM-8124 -->

* Implementado `AdminOpenCreateNewCMSPageActionGroup` para navegar para criar a nova página CMS. [GitHub-29824](https://github.com/magento/magento2/issues/29824)

<!-- ENGCOM-8268 -->

* Correção de problemas de ignorado em testes MFTF na página CMS para a Galeria de Mídia. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

<!-- B2B-831 -->

* Títulos e descrições significativos foram adicionados aos testes MFTF para o `Company`, `CompanyCredit`, `CompanyPayment`, `CompanyShipping`e `ConfigurableSharedCatalog` módulos. [GitHub-30164](https://github.com/magento/magento2/issues/30164)

#### Novos testes

<!-- ENGCOM-7804 -->

* Adição de um teste para habilitar o email para um amigo no Administrador. [GitHub-29145](https://github.com/magento/magento2/issues/29145)

<!-- ENGCOM-8316 -->

* Adição de um teste para excluir um bloco CMS de uma grade por um administrador. [GitHub-30372](https://github.com/magento/magento2/issues/30372)

<!-- ENGCOM-7933 -->

* Adição de um teste para aplicar uma regra de carrinho de compras a um único item de pacote. [GitHub-28921](https://github.com/magento/magento2/issues/28921)

<!-- ENGCOM-8075 -->

* Testes adicionados para verificar se **Usado em** as informações de uma imagem da Galeria de mídia são exibidas após a entidade ser excluída. [GitHub-1774](https://github.com/magento/adobe-stock-integration/issues/1774)

#### Novos grupos de ação

* `AssertStorefrontCustomerLogoutSuccessPageActionGroup`. [GitHub-29841](https://github.com/magento/magento2/issues/29841) <!-- ENGCOM-8121 -->

* `AdminOpenConfigurationStoresPageActionGroup`. [GitHub-29848](https://github.com/magento/magento2/issues/29848) <!-- ENGCOM-8259 -->

* `ReloadPageActionGroup`. [GitHub-30683](https://github.com/magento/magento2/issues/30683) <!-- ENGCOM-8394 -->

* `StorefrontClickRefundTabCustomerOrderViewActionGroup`. [GitHub-30032](https://github.com/magento/magento2/issues/30032) <!-- ENGCOM-8203 -->

* `AdminOpenAdminThreeDSecurePageActionGroup`. [GitHub-29845](https://github.com/magento/magento2/issues/29845) <!-- ENGCOM-8115 -->

* `AdminCustomerClickFirstRowEditLinkActionGroup`.  [GitHub-29501](https://github.com/magento/magento2/issues/29501) <!-- ENGCOM-8043 -->

* `StorefrontClickAddToCartButtonActionGroup`. [GitHub-29823](https://github.com/magento/magento2/issues/29823) <!-- ENGCOM-8113 -->

* `AdminDeleteTaxRateActionGroup`. [GitHub-29940](https://github.com/magento/magento2/issues/29940) <!-- ENGCOM-8192 -->

* `AdminOpenWebConfigurationPageActionGroup`. [GitHub-29846](https://github.com/magento/magento2/issues/29846) <!-- ENGCOM-8126 -->

* `AdminOpenGeneralConfigurationPageActionGroup`. [GitHub-29847](https://github.com/magento/magento2/issues/29847) <!-- ENGCOM-8114 -->

* `AdminOrderClickSubmitOrderActionGroup`. [GitHub-29649](https://github.com/magento/magento2/issues/29649) <!-- ENGCOM-8023 -->

* `AdminOpenCatalogProductPageActionGroup`. [GitHub-29941](https://github.com/magento/magento2/issues/29941) <!-- ENGCOM-8209 -->

* `AdminClickInvoiceButtonIntoOrderActionGroup`. [GitHub-25399](https://github.com/magento/magento2/issues/25399) <!-- ENGCOM-8210 -->

* `AdminGridBulkActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminGridColumnShowActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminOpenIndexManagementPageActionGroup`. [GitHub-29825](https://github.com/magento/magento2/issues/29825) <!-- ENGCOM-8123 -->

* `AdminOpenCatalogSearchTermIndexPageActionGroup`. [GitHub-29844](https://github.com/magento/magento2/issues/29844) <!-- ENGCOM-8128 -->

* `AdminClickAddProductToggleAndSelectProductTypeActionGroup`. [GitHub-30917](https://github.com/magento/magento2/issues/30917) <!-- ENGCOM-8439 -->

* `StorefrontCheckoutClickSaveAddressButtonActionGroup`. [GitHub-30916](https://github.com/magento/magento2/issues/30916) <!-- ENGCOM-8454 -->

* `AdminOpenCurrencyRatesPageActionGroup`. [GitHub-30783](https://github.com/magento/magento2/issues/30783) <!-- ENGCOM-8432 -->

* `AdminClickGetShippingMethodsAndRatesActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `AdminSelectFixedShippingMethodActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `StorefrontClickProceedToCheckoutActionGroup`. [GitHub-30926](https://github.com/magento/magento2/issues/30926) <!-- ENGCOM-8438 -->

* `StorefrontOpenMyAccountPageActionGroup`. [GitHub-29842](https://github.com/magento/magento2/issues/29842) <!-- ENGCOM-8143 -->

### Informativo

<!-- MC-38789-->

* Agora, os usuários administradores podem editar uma conta de cliente conforme esperado quando o cliente assinar um informativo em fila. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8034 -->

* O aplicativo agora reenvia a confirmação da assinatura do boletim informativo se o comprador não confirmar a assinatura do boletim informativo. [GitHub-28422](https://github.com/magento/magento2/issues/28422)

<!-- ENGCOM-8429 -->

* Agora é possível editar uma conta do cliente conforme esperado quando ele estiver inscrito em um boletim informativo na fila. [GitHub-30645](https://github.com/magento/magento2/issues/30645)

### Métodos de pagamento

<!-- MC-35161-->

* Os métodos de pagamento agora são carregados no Administrador para todos os sites, conforme esperado, em uma implantação de várias lojas.

<!-- MC-36954-->

* O aplicativo não exibe mais a variável `Purchase Order number is a required field` mensagem acima do campo de código do cupom antes de o comprador inserir qualquer informação em implantações nas quais a Ordem de Compra foi configurada como a única opção de pagamento disponível.

<!-- MC-35152-->

* O aplicativo agora conclui os pagamentos do Payflow Pro com êxito quando o nome do comprador contém letras acentuadas. Anteriormente, o pagamento não era concluído e o aplicativo registrava esse erro: `report.CRITICAL: String to be escaped was not valid UTF-8 or could not be converted`.

<!-- ENGCOM-8173 -->

* Os compradores convidados agora podem colocar pedidos PayPal quando **Atribuição Automática ao Grupo de Clientes** estiver ativado. O pagamento é processado no gateway do PayPal, o pedido é criado no Magento e o comprador vê a página de agradecimento do pedido. Anteriormente, o pedido era processado com êxito no gateway PayPal, mas o pedido não era criado no Adobe Commerce. O comprador foi redirecionado para a página de revisão do pedido, onde o aplicativo exibiu este erro: `Failed address validation: %1" error`. [GitHub-25399](https://github.com/magento/magento2/issues/25399)

#### PayPal

<!-- MC-35692-->

* Os comerciantes podem agora fazer com êxito um pedido do Administrador após mudar de um método de pagamento que usa um cartão de crédito para um método de pagamento que não é cartão de crédito. Anteriormente, quando um comerciante clicava no **Enviar pedido** , o processo de carregamento foi iniciado, mas nunca concluído, e o pedido não foi feito.

<!-- MC-37649-->

* O aplicativo não cria mais pedidos duplicados quando um pedido é feito com o PayPal Express. Anteriormente, quando um comprador tentava pagar um pedido com o PayPal Express, mas o PayPal retornava um erro, o aplicativo ainda criava o pedido. Isso resultou em pedidos duplicados no site do comerciante. [GitHub-13952](https://github.com/magento/magento2/issues/13952)

<!-- MC-38829-->

* Os relatórios de Liquidação de PayPal agora estão disponíveis em **Relatórios** > **Vendas** > **Liquidação de PayPal** conforme esperado. Anteriormente, o aplicativo não listava esses relatórios na grade do relatório de liquidação PayPal e exibia esta mensagem: `We couldn't find any records`.

<!-- MC-39442-->

* Clicar no **PayPal** durante o check-out, o não aciona mais um redundante `web-api` chame. Anteriormente, duas solicitações eram acionadas, o que dobrava a cobrança do produto.

### Desempenho

<!-- MC-37705-->

* Problemas de desempenho em `module-catalog-import-export/Model/Import/Product/Option.php` foram endereçadas. O tempo necessário para exportar ou importar mais de 100.000 registros foi reduzido. Consulte a [A importação/exportação demora mais do que o esperado com um grande número de opções de produto](https://support.magento.com/hc/en-us/articles/360050695772) Artigo da Base de conhecimento.

<!-- MC-37799-->

* `Magento_Csp/Model/BlockCache` O foi refatorado para reduzir o consumo de memória e a geração de cadeias de caracteres em cache desnecessariamente grandes. Anteriormente, as páginas que incluíam scripts e estilos dinamicamente da lista de permissões geralmente enfrentavam problemas de desempenho. [GitHub-29964](https://github.com/magento/magento2/issues/29964)

<!-- MC-37816 -->

* Melhoramos o desempenho das exportações programadas de catálogos que incluem mais de 100.000 produtos que usam consumidores.

<!-- MC-38306 -->

* O aplicativo não libera mais o cache de categoria quando você adiciona ou salva um produto desativado em uma categoria. Anteriormente, o aplicativo liberava o cache para categorias relacionadas, apesar do status do produto, o que afetava o desempenho do servidor.

<!-- MC-38518 -->

* O tempo de carregamento da página para atualizar a quantidade de produto no carrinho de compras foi aprimorado. Anteriormente, o aplicativo executava várias consultas separadas para cada produto no carrinho de compras, o que aumentava o tempo de carregamento da página.

<!-- MC-39700 -->

* Um indexador foi adicionado ao `Magento_Bulk` Tabela MySQL, que melhorou o desempenho de operações em massa.

<!-- MC-38593 -->

* O aplicativo agora armazena em cache as IDs secundárias de produtos configuráveis. Isso melhorou o desempenho do carregamento de página ao reduzir o número de solicitações de banco de dados. [GitHub-30585 ](https://github.com/magento/magento2/issues/30585)

<!-- MC-37594 -->

* O carregamento do painel de Administração foi aprimorado. Anteriormente, o aplicativo exibia os nomes das guias como uma lista antes da página concluir o carregamento.

<!-- MC-37417 -->

* O gerenciamento do cache de Redis foi aprimorado com a adição de limites de expiração para caches de layout. Anteriormente, os caches Redis atingiam a memória máxima alocada rapidamente em grandes implantações, e o aplicativo gerava erros em operações de gravação.

<!-- ENGCOM-8016 -->

* O desempenho do check-out foi aprimorado pela remoção de um query de banco de dados redundante em `app/code/Magento/Catalog/Model/CategoryLink.php`. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- ENGCOM-8290 -->

* `Magento\Framework\DB\Adapter\Pdo\Mysql->isTableExists` O foi refatorado para melhorar o desempenho. Chamadas redundantes para `SHOW TABLE STATUS` para verificar a existência de uma tabela, foi reduzido. [GitHub-29662](https://github.com/magento/magento2/issues/29662)

<!-- ENGCOM-8258 -->

* `getPageLayoutsConfig` agora é salvo no cache, o que melhorou o desempenho do config builder. [GitHub-29546](https://github.com/magento/magento2/issues/29546)

<!-- MC-35614-->

* O desempenho da Adobe Commerce durante operações de edição e salvamento para segmentos de clientes que contêm mais de 3.000.000 clientes foi aprimorado.

### Persistente

<!-- MC-36647 -->

* Os compradores não podem mais fazer um pedido depois que o cookie da sessão tiver expirado quando o carrinho persistente estiver ativado. Em vez disso, o aplicativo exibe a página de logon para que o comprador possa fazer logon. Anteriormente, o aplicativo fazia o pedido. O aplicativo não validou corretamente o cliente persistente quando `PHPSESSID` expiraram, e `customerSession` foi recriado a partir das informações persistentes.

<!-- MC-39127-->

* O aplicativo agora exibe a mensagem Welcome , como esperado, depois que um comprador entra em uma loja onde o carrinho de compras persistente está ativado. Anteriormente, o aplicativo exibia a variável **Você não?** após fazer logon.

<!-- MC-38269-->

* O aplicativo não exibe mais a variável **Você não?** quando um cliente seleciona a variável **Lembre-se de mim** ao fazer logon em uma implantação na qual o carrinho de compras persistente está habilitado.

<!-- MC-37109-->

* O aplicativo não exibe mais o conteúdo do carrinho do cliente depois que a sessão do cliente expira. Anteriormente, o aplicativo exibia esse erro quando um cliente convidado tentava fazer check-out quando o carrinho de compras persistente estava ativado: `No such entity with cartid = 0`.

### Preços

<!-- MC-34394-->

* As atualizações de preços assíncronas consecutivas não interferem mais umas nas outras e o status correto é atribuído a cada operação. Anteriormente, se uma atualização de preço assíncrona falhasse, todas as atualizações de preço assíncronas a seguir falhariam até que o consumidor da fila correspondente fosse reiniciado. [GitHub-27865](https://github.com/magento/magento2/issues/27865)

### Relatórios

<!-- MC-36652 38925-->

* **Relatórios** > **Marketing** > **Produtos em carrinhos** agora exibe somente o registro no escopo permitido do usuário que está gerando o relatório. Anteriormente, todos os dados estavam disponíveis para todos os escopos.

<!-- MC-38074-->

* O aplicativo agora usa a moeda especificada no escopo da função do comerciante que gera o relatório ao exibir a moeda do produto no relatório Produtos no carrinho.

<!-- MC-37934-->

* Os recursos de produtos Visualizados recentemente e Comparados Recentemente agora exibem estatísticas de diferentes lojas e sites na Administração, conforme esperado, em uma implantação de várias lojas. Anteriormente, esses recursos não levavam em conta todas as lojas ou sites.

<!-- MC-37217-->

* Os preços nos relatórios de Ordem agora usam o símbolo de moeda correto.

<!-- ENGCOM-8314 -->

* O aplicativo agora verifica a existência de um token quando um usuário clica no painel de Administração **Ir para Relatório avançado** botão.  Se o token existir, o aplicativo exibirá a página Relatórios avançados . Se o token não estiver configurado, o aplicativo exibirá uma página informativa no Guia do Usuário. [GitHub-25411](https://github.com/magento/magento2/issues/25411)

### Autorizações de Devolução de Produto (RMA)

<!-- MC-36057-->

* As opções selecionadas agora se aplicam a itens de linha divididos quando você divide um RMA. Anteriormente, os valores para Razão de Retorno, Condição de Item e Resolução não eram salvos.

<!-- MC-35360-->

* Agora é possível excluir informações de rastreamento e envio de uma RMA quando o pacote do JavaScript está ativado.

<!-- MC-36757-->

* Os administradores com acesso restrito a apenas produtos em um escopo de site específico agora podem adicionar um item a um retorno mesmo quando esse item não estiver mais no escopo de site.

### Resenhas

<!-- MC-37145-->

* O número de classificações exibidas em **Lojas** > **Atributo** > **Classificação** agora corresponde à contagem de classificações em uma implantação de vários sites. [GitHub-30258](https://github.com/magento/magento2/issues/30258)

<!-- MC-37117-->

* A página Nova revisão agora é carregada conforme esperado ao clicar no botão **Nova revisão** botão em Admin **Marketing** > **Todas as revisões**. Clicar em um produto nesta página abre o novo formulário de revisão esperado para esse produto.

<!-- ENGCOM-8383 -->

* O aplicativo não gera mais esse erro quando você tenta editar um pedido do Administrador **Marketing**  >  **Todas as revisões**: `Uncaught TypeError: Event.observe is not a function`. [GitHub-30388](https://github.com/magento/magento2/issues/30388)

### Recompensas

<!-- MC-38257-->

* Os pontos de recompensa são agora calculados como esperado para ordens tributáveis quando uma ordem parcial é concluída.

<!-- MC-37244-->

* Os comerciantes podem agora emitir com êxito um reembolso parcial para um pedido que foi comprado com pontos de recompensa e que, subsequentemente, reembolsará o pedido restante. Anteriormente, os comerciantes não podiam reembolsar os pontos de recompensa do pedido restante.

<!-- MC-37113-->

* O aplicativo não exibe mais esse erro quando um comprador reaplica pontos de recompensa após removê-los: `You removed the reward points from this order`.

<!-- MC-37032-->

* Os pontos de recompensa agora são calculados corretamente quando um cliente coloca um pedido usando uma moeda não base em uma loja que suporta várias moedas.

### Vendas

<!-- MC-36219-->

* O `order_created_at` da coluna `sales_shipment_grid` O agora é atualizado conforme esperado após cada atualização.

<!-- MC-36405-->

* Agora é possível reorganizar com êxito um produto com uma data de opções personalizada de uma loja para a qual **Usar calendário do JavaScript** estiver ativado. Anteriormente, ao tentar reordenar, o aplicativo não adicionava o item ao carrinho e exibia este erro: `Could not add the product with SKU "simp1" to the shopping cart: Please specify date required option(s).`

<!-- MC-36533-->

* O aplicativo não fecha mais imediatamente um pedido quando um comprador verifica um pedido que consiste em um produto virtual com um custo total de $0 em implantações em que o método de checkout de subtotal zero está ativado.

<!-- MC-36755-->

* O aplicativo não arquiva mais um pedido antes de processá-lo. Anteriormente, a ação de seleção múltipla na grade da ordem de administração afetava pedidos não selecionados.

<!-- MC-37371-->

* A grade do aviso de crédito agora exibe o símbolo de moeda correto quando o Riyal da Arábia Saudita (SAR) estiver definido como a moeda base.

<!-- MC-37880-->

* O aplicativo agora exibe consistentemente as informações de endereço de envio conforme esperado na página do pedido durante o check-out.

<!-- MC-38666-->

* O valor de `total_qty` agora corresponde ao valor de `total_qty_ordered` em faturas de vendas.

<!-- MC-38717-->

* O envio assíncrono de emails de vendas agora envia email somente para os pedidos que foram criados após a data da última atualização. Anteriormente, o aplicativo não filtrava emails por data quando o envio assíncrono era ativado.

<!-- MC-39135-->

* O aplicativo agora envia um email de fatura conforme esperado quando um pedido é feito pelo Administrador.

<!-- MC-38917-->

* O aplicativo agora limpa os dados de pedido existentes durante uma sessão em que um comerciante cria um novo pedido para um cliente do Administrador.

<!-- MC-38915-->

* Agora é possível alterar o grupo de clientes para novos clientes que são criados por meio de um pedido de Administrador ao **Ativar Atribuição Automática ao Grupo de Clientes** estiver ativado. Também é possível atribuir um grupo de clientes com base na validação de IVA. Anteriormente, ao validar o número de IVA, o objeto de solicitação não verificava a solicitação atribuída `group_id`. Por padrão, ele usou o padrão `group_id`.

<!-- MC-37539-->

* O aplicativo não altera mais o status de um status de pedido personalizado com `Suspected Fraud` status para `Processing` depois que um comerciante cria uma remessa parcial usando a REST API.

### Regra de Vendas

<!-- MC-34793-->

* Os códigos de cupom que foram aplicados com base no método de entrega não são mais aplicados quando um comprador altera o método de entrega. Anteriormente, o aplicativo não limpava os códigos de cupom quando os compradores trocavam os métodos de envio.

<!-- MC-34649-->

* Os compradores não podem aplicar um código de cupom com mais frequência do que a **Usos por cliente** a fixação de licenças. Anteriormente, se um comprador tinha várias janelas do navegador abertas e faziam vários pedidos simultaneamente, cada pedido recebia o desconto, mesmo que a variável **Usos por cliente** tinha um valor de **1**.

### Pesquisar

<!-- MC-35095-->

* O Elasticsearch não gera mais um erro de modificador desconhecido quando um comprador pesquisa em um sinônimo de pesquisa. Anteriormente, o escaper não possuía um símbolo de barra de escape em expressões regulares, o que resultava em um erro fatal.

<!-- MC-37577-->

* A pesquisa avançada não retorna mais os filhos dos produtos configuráveis como resultados de pesquisa individual quando os produtos secundários foram configurados com visibilidade definida como **Não visível individualmente**.

<!-- MC-37954-->

* O tipo de Elasticsearch de nomes de produtos nos resultados da pesquisa não diferencia mais maiúsculas de minúsculas.

<!-- ENGCOM-8329 -->

* A página de resultados da pesquisa agora é armazenada em cache como esperado quando a variável **definir Número dos principais resultados de pesquisa para armazenar em cache como 0** está ativada no Admin **Lojas**  >  **Configuração**  >  **Catálogo**  >  **Catálogo**  > **Pesquisa no catálogo**.

<!-- MC-36807-->

* O indexador de pesquisa de catálogo agora é executado sem gerar um erro devido ao limite do campo de Elasticsearch. Anteriormente, o aplicativo exibia esse erro: `Limit of total fields [xxx] in index [m24dev_product_1_v10] has been exceeded`.

<!-- MC-35491-->

* O desempenho da pesquisa de catálogo foi aprimorado. Desabilitando **Ativar sugestões de pesquisa** (**Lojas** > **Configuração** > **Catálogo** > **Pesquisa no catálogo** ) funciona conforme o esperado. Anteriormente, o aplicativo consultava o MySQL `search_query` tabela em vez de Elasticsearch para sugestões de pesquisa de preenchimento automático. [GitHub-25534](https://github.com/magento/magento2/issues/25534)

<!-- MC-35256-->

* O Elasticsearch agora filtra os preços do produto da mesma forma que o MySQL. O tipo de campo `price_*`  foi alterado de `float` para `double` no índice Elasticsearch para melhorar a precisão e corrigir um erro de ponto flutuante.

<!-- ENGCOM-8393 -->

* Um ouvinte de evento de detalhamento foi adicionado ao Administrador para ativar o formulário de pesquisa global quando uma barra é inserida. [GitHub-29551](https://github.com/magento/magento2/issues/29551)

<!-- MC-24217-->

* O Elasticsearch não gera mais um erro, mas, em vez disso, não exibe nenhum produto como esperado quando uma `string` é usado para filtrar produtos por atributo com um `integer` ou `decimal` tipo de back-end. Anteriormente, o aplicativo exibia esse erro em `exception.log`: `number format exception`.

<!-- ENGCOM-8303 -->

* O Elasticsearch não gera mais uma exceção quando um termo de pesquisa contém um  `/`.  [GitHub-25886](https://github.com/magento/magento2/issues/25886), [GitHub-25110](https://github.com/magento/magento2/issues/25110)

* A pesquisa agora está desativada como esperado para um grupo de clientes selecionado na consulta de produtos quando a variável **Não permitir pesquisa no catálogo por** a configuração nas Permissões gerais de categoria está ativada. [GitHub-29927](https://github.com/magento/magento2/issues/29927)

<!-- ENGCOM-8466 -->

* Os resultados da pesquisa não incluem mais aspas múltiplas da mesma palavra. [GitHub-30104](https://github.com/magento/magento2/issues/30104)

### Envio

<!-- MC-38247 -->

* O processo de finalização não falha mais quando uma interrupção da rede interrompe a conexão com o método de envio da DHL. Em vez disso, o aplicativo exibe outros métodos de envio disponíveis. Anteriormente, o processo de checkout parava quando a conexão com o envio da DHL era interrompida e o aplicativo exibia esse erro: `Sorry, no quotes are available for this order at this time`. [GitHub-29902](https://github.com/magento/magento2/issues/29902)

<!-- MC-35194-->

* Os campos que descrevem o método de delivery de UPS em Admin **Lojas** >  **Configuração** > **Vendas** > **Métodos de delivery** agora estão ativadas conforme esperado.

<!-- MC-35633-->

* Remessas criadas por meio do POST `/rest/V1/shipment` O endpoint agora atualiza os pedidos corretamente. Anteriormente, o aplicativo criava uma entrega, mas o status da entrega permanecia no estado de processamento.

<!-- MC-37120-->

* O aplicativo não remove mais produtos simples do carrinho de compras quando outro produto é removido do carrinho antes do check-out com Enviar para vários endereços. [GitHub-30259](https://github.com/magento/magento2/issues/30259)

<!-- MC-38031-->

* A página Revisão do pedido agora exibe a quantia de imposto antes da quantia de frete conforme esperado para pedidos enviados para vários endereços.

<!-- ENGCOM-8257 -->

* O rastreamento de remessa de UPS agora indica um status de `Delivered On` somente quando um pacote tiver sido entregue. [GitHub-30032](https://github.com/magento/magento2/issues/30032)

<!-- MC-38825-->

* O aplicativo agora exibe o subtotal correto do carrinho para pedidos que contêm um produto virtual quando o comprador navega de volta ao carrinho, fazendo check-out com vários endereços.

<!-- MC-38682-->

* Os comerciantes agora podem criar um rótulo de remessa a partir da página de remessa para um pedido existente que usa o envio FedEx quando o pacote JavaScript está ativado. Anteriormente, o aplicativo exibia um erro quando o comerciante clicava no **Criar etiqueta de remessa** botão.

<!-- MC-36953-->

* O link de rastreamento de remessa no email de confirmação de remessa enviado aos clientes agora funciona como esperado. Anteriormente, esse link retornava um erro 404.

<!-- ENGCOM-8025 -->

* O aplicativo agora exibe uma mensagem de erro informativa quando um comprador faz o check-out usando vários endereços e remove todos os produtos diferentes de um produto virtual. [GitHub-25595](https://github.com/magento/magento2/issues/25595)

<!-- ENGCOM-8253 -->

* Agora você pode criar um rótulo de envio conforme esperado para um pedido parcial. Anteriormente, quando você tentava criar um rótulo de envio para apenas um item de um pedido, o aplicativo adicionava todos os produtos ao pacote e a validação falhava. [GitHub-29552](https://github.com/magento/magento2/issues/29552)

<!-- ENGCOM-8154 -->

* A validação do método de entrega não é mais ignorada ao chamar `/V1/guest-carts/:cartId/totals-information`. [GitHub-25147](https://github.com/magento/magento2/issues/25147)

### Mapa do site

<!-- MC-37306-->

* Mapas de site gerados por `cron` agora inclua URLs de imagem corretos. Anteriormente, o caminho de imagem em cache gerado estava incorreto em implantações de várias lojas.

### Estágios

<!-- MC-39046 -->

* A página Editar Página Inicial agora exibe todas as atualizações programadas conforme esperado ao verificar se há atualizações programadas da página inicial. Anteriormente, o aplicativo exibia apenas uma das várias atualizações programadas.

<!-- MC-34988 -->

* Envio de 0 com o `/rest/V1/products/special-price-information` o endpoint de preço especial agora salva o preço e retorna a programação conforme esperado.

<!-- MC-35362 -->

* As importações programadas agora são executadas conforme esperado quando o arquivo CSV de importação contém uma BOM (marca de ordem de byte).

<!-- MC-38026 -->

* O aplicativo não remove mais a classe do corpo do layout quando um comerciante agenda uma atualização de categoria.

<!-- MC-38234 -->

* As alterações de produto reprogramadas agora não são mais apagadas após uma `cron` executar.

<!-- MC-38759-->

* O aplicativo não gera mais um erro quando você tenta agendar uma atualização para uma categoria. Anteriormente, o aplicativo exibia esse erro ao clicar **Salvar** na página Agendar nova atualização: `Something went wrong while saving the Magento\Catalog\Api\Data\CategoryInterface`.

<!-- MC-38455-->

* O `rest/V1/products/special-price` Agora, a API pode ser usada para programar preços especiais de produtos para várias lojas. Anteriormente, o aplicativo exibia um erro quando um comerciante agendava uma atualização de preço para várias lojas para o mesmo `from` e `to` hora em que uma reversão está disponível na hora de início do novo agendamento.

### Loja

<!-- ENGCOM-7543 -->

* O Admin e o seletor de loja principal agora refletem as alterações feitas na ordem de classificação de loja no Admin. [GitHub-13401](https://github.com/magento/magento2/issues/13401)

<!-- ENGCOM-8274 -->

* O aplicativo agora cria URLs corretos para categorias e produtos depois que a chave de URL de nível superior de uma exibição de loja é alterada. Anteriormente, quando a árvore de categoria de uma exibição de loja continha modificada  `url_keys`, se uma chave de categoria não fosse alterada, mas a chave dos pais da categoria fosse alterada, o código original usaria a visualização de armazenamento padrão da categoria ao criar URLs. [GitHub-28633](https://github.com/magento/magento2/issues/28633)

### Regras do Target

<!-- MC-34998-->

* O carregamento de páginas de detalhes do produto foi otimizado. Adicionamos índices para tabelas de banco de dados que otimizam consultas de condições de regras de destino para muitos casos.

<!-- MC-36288-->

* As regras do Target para produtos relacionados agora funcionam quando a variável `is one of` A condição usada para o recurso Produtos para exibição contém várias condições. Anteriormente, quando essa condição continha vários valores, ela não era analisada.

### Imposto

<!-- MC-37666-->

* A validação de IVA em um pedido de convidado não resulta mais no aplicativo que salva a cotação com uma Classe de Imposto do Cliente incorreta. [GitHub-30018](https://github.com/magento/magento2/issues/30018)

<!-- MC-37761-->

* Os pedidos enviados para vários endereços agora podem ser salvos durante o check-out quando o FPT estiver configurado. Anteriormente, depois de concluir um pedido para vários endereços, o aplicativo exibia uma página em branco em vez da página de sucesso do pedido.

<!-- ENGCOM-8158 -->

* As páginas de detalhes do produto da vitrine agora exibem novos e antigos preços com e sem impostos, conforme esperado. [GitHub-27500](https://github.com/magento/magento2/issues/27500), [GitHub-11998](https://github.com/magento/magento2/issues/11998)

### Teste

<!-- MC-37364-->

* `bin/magento dev:tests:run` O agora inicia os seguintes testes conforme esperado: tudo, unidade, integração, integração tudo, estático, estático-tudo, integridade, herdado e padrão.

<!-- MC-38488-->

* `AdminMediaGalleryInsertLargeImageFileSizeTest` foi refatorado.

<!-- ENGCOM-8158 -->

* Os testes de unidade agora são compatíveis com a PHPUnit 8. [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-8009 -->

* `\Magento\TestFramework\TestCase\WebapiAbstract` agora contém uma função que oferece suporte à comparação de arrays aninhados grandes de resultados esperados e reais em testes. Chaves irrelevantes no resultado agora podem ser ignoradas. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-8024 -->

* `AdminMediaGalleryCatalogUiEditCategoryGridPageTest` não falha mais aleatoriamente. [GitHub-1764](https://github.com/magento/adobe-stock-integration/issues/1764)

<!-- ENGCOM-8041 -->

* `dev/tests/integration/testsuite/Magento/Customer/Controller/AccountTest` melhorou. (`assert` agora se baseia em `XPath` seletor em vez de `assertStringContainsString`.) [GitHub-29700](https://github.com/magento/magento2/issues/29700)

<!-- ENGCOM-8017 -->

* Adição da cobertura de teste para o `AdminAnalytics` módulo. [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-8266 -->

* Os testes funcionais de integração e API agora são compatíveis com o PHPUnit 9.3. [GitHub-30146](https://github.com/magento/magento2/issues/30146)

<!-- MC-35798 8109-->

* Correção de problemas com GraphQL `testRequestCacheTagsForCategoryListOnMultipleIds` teste. [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-8327 -->

* O teste de disponibilidade de moeda para crédito da empresa foi automatizado.

<!-- ENGCOM-7762 -->

* Os valores do cabeçalho que incluem URLs agora são analisados corretamente em `ApiFunctional TestFramewor`k. [GitHub-26425](https://github.com/magento/magento2/issues/26425)

<!-- ENGCOM-8382 -->

* `—no-tablespaces` foi adicionado a todas as ocorrências de `mysqldump`, que permite que os testes de integração sejam executados sem o `PROCESS` privilégio (necessário desde o MySQL 5.7.31 / 8.0.21 para executar `mysqldump` por padrão). [GitHub-30566](https://github.com/magento/magento2/issues/30566)

### Tema

<!-- ENGCOM-8419 -->

* Um novo `--no-parent` sinalizador foi adicionado ao `bin/magento setup:static-content:deploy` que impede que os pais de um tema sejam compilados. Esse novo sinalizador permite melhorar significativamente o desempenho do processo de implantação de conteúdo estático, evitando uma compilação desnecessária. Observe que esse novo sinalizador não funciona ao usar o `compact` estratégia. [GitHub-30184](https://github.com/magento/magento2/issues/30184)

<!-- MC-37630 -->

* A configuração de design não gera mais operações DDL. Anteriormente, quando a configuração de design era atualizada, o aplicativo gerava instruções DDL que poderiam acionar erros do MySQL.

<!-- ENGCOM-8112 -->

* Código redundante no `Magento_ConfigurableProduct` O módulo no tema Admin foi removido.  [GitHub-29857](https://github.com/magento/magento2/issues/29857)

<!-- ENGCOM-8144 -->

* A navegação de estilos menores redundantes e as propriedades não usadas no tema em branco foram removidas. [GitHub-29914](https://github.com/magento/magento2/issues/29914)

<!-- ENGCOM-8285 -->

* Adição da funcionalidade de navegação recolhível ao tema em branco na visualização móvel. [GitHub-30237](https://github.com/magento/magento2/issues/30237)

<!-- ENGCOM-7803 -->

* O carregamento de fontes da Web para temas foi otimizado.  [GitHub-29526](https://github.com/magento/magento2/issues/29526)

<!-- ENGCOM-8068 -->

* Os desenvolvedores agora podem especificar o tipo de fonte ao declarar uma fonte personalizada em um tema. [GitHub-29719](https://github.com/magento/magento2/issues/29719)

### Tradução e localidades

<!-- MC-36836 -->

* O Seletor de data da grade de Pedidos de administrador agora funciona conforme o esperado quando a localidade de Administrador é Árabe (`ar_SA - Saudi Arabia`).

<!-- MC-38476 -->

* O aplicativo não exibe mais uma mensagem de erro quando um comprador insere um endereço argentino com um código de postagem válido ao registrar ou adicionar um novo endereço. Anteriormente, o aplicativo exibia esse erro: `Provided Zip/Postal Code seems to be invalid. Example: 1234. If you believe it is the right one you can ignore this notice.`

<!-- MC-38663-->

* O aplicativo não gera mais um erro quando um comprador insere um código postal de cinco dígitos para um endereço coreano.

<!-- ENGCOM-8244 -->

* Adição de suporte para as regiões do Uruguai definidas no [ISO 3166-2:UY](https://en.wikipedia.org/wiki/ISO_3166-2:UY). [GitHub-29729](https://github.com/magento/magento2/issues/29729)

<!-- ENGCOM-8220 -->

* `zip_codes.xml` O foi atualizado para impor oito dígitos para códigos postais brasileiros. [GitHub-29984](https://github.com/magento/magento2/issues/29984)

<!-- ENGCOM-8304 -->

* Melhoria na localização das frases não localizadas restantes. [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8380 -->

* O espaço reservado para entrada de pesquisa de grade agora pode ser traduzido. [GitHub-30510](https://github.com/magento/magento2/issues/30510)

<!-- ENGCOM-8018 -->

* Agora, o aplicativo baixa módulos JavaScript de traduções em linha somente quando estão ativados.  [GitHub-29553](https://github.com/magento/magento2/issues/29553)

### interface

<!-- MC-38509-->

* O **Criar uma conta** O botão na página Criar nova conta permanece ativo quando um comprador insere dados inválidos. Anteriormente, esse botão estava desativado, o que impedia os compradores de tentar criar uma conta novamente depois de fazer um erro. Esse era um problema conhecido na versão 2.4.1. [GitHub-30513](https://github.com/magento/magento2/issues/30513)

<!-- MC-38698-->

* O carregamento da grade de envio na página Editar ordem de administração foi aprimorado.

<!-- MC-37870-->

* O aplicativo agora exibe a variável  **Igual Ao Endereço De Faturamento** caixa de seleção como esperado na página do pedido quando os produtos foram adicionados ao carrinho por SKU.

<!-- ENGCOM-8007 -->

* A classe CSS que definiu largura limitada agora é aplicada como esperado para **Hora de início** campos em Admin **Loja**  >  **Configuração**  >  **Catálogo**  >  **Mapa do Site XML**  >  **Configurações de geração**.  [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992 -->

* Correção de problemas de exibição com o rótulo da caixa de seleção Termos e condições .  [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7948 -->

* O aplicativo não exibe mais o código CSS de um bloco de preço de camada na página do produto quando os preços de camada não estão disponíveis. [GitHub-29194](https://github.com/magento/magento2/issues/29194)

<!-- ENGCOM-8084 -->

* A posição dos botões na página de detalhes da exibição de imagem foi reordenada para estar em conformidade com as diretrizes da interface do usuário.  [GitHub-1783](https://github.com/magento/adobe-stock-integration/issues/1783)

<!-- ENGCOM-8342 -->

* O campo de texto do código de cupom agora é exibido na largura adequada em navegadores Internet Explorer/EDGE.

<!-- ENGCOM-7630 -->

* O `@button__border-radius` agora é definida na variável `lib/web/css/source/lib/variables/_buttons.less` biblioteca.  `border-radius` tem um valor padrão de `3px`. Anteriormente, `border-radius` foi codificada.  [GitHub-28674](https://github.com/magento/magento2/issues/28674)

<!-- ENGCOM-8067 -->

* O botão de pesquisa Enviar (lupa) no campo de mini pesquisa agora é desativado até que o comprimento mínimo da string de pesquisa seja atingido. [GitHub-29704](https://github.com/magento/magento2/issues/29704)

<!-- MC-38807-->

* O **Visualizar modelo** O botão agora funciona como esperado na página Editar fila .

<!-- MC-35624-->

* Ajustada a posição do cursor desde o meio até o início do **Mensagem** no campo **Minha conta** > **Registro do Presente** > **Compartilhar Registro de Presente**.

<!-- MC-33497-->

* Os problemas de exibição com o layout da coluna na página Adicionar exportação agendada foram resolvidos.

<!-- MC-31892-->

* O aplicativo agora preserva o valor de um atributo quando você move o atributo de um grupo para outro.

<!-- MC-37635-->

* O aplicativo agora exibe um ícone de calendário ao lado do **Data** campo de entrada como esperado na loja Criar uma página de conta.

<!-- ENGCOM-8085 -->

* Adição de uma variável com peso de fonte para `lib/web/css/source/lib/variables/_typography.less`. [GitHub-29778](https://github.com/magento/magento2/issues/29778)

<!-- ENGCOM-8211 -->

* A visibilidade do filtro agora funciona com a visibilidade da coluna, conforme esperado nas grades de administração.  [GitHub-30345](https://github.com/magento/magento2/issues/30345)

<!-- ENGCOM-7977 -->

* O banner exibido pelo aplicativo na página Logon de administrador como cliente permanece no topo da página quando o usuário rola. [GitHub-29354](https://github.com/magento/magento2/issues/29354)

<!-- ENGCOM-8152 -->

* A interface do usuário seleciona opções de componentes que não estão mais visíveis quando `this.disabled(true)` está definida. [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7901 -->

* O `@font-family-name__base` não é mais usada ao carregar a fonte Open Sans. [GitHub-29515](https://github.com/magento/magento2/issues/29515)

<!-- ENGCOM-8120 -->

* O atributo WAI-ARIA `aria-atomic="true"` foi adicionado à tag do contêiner de erro. [GitHub-29560](https://github.com/magento/magento2/issues/29560)

<!-- ENGCOM-8175 -->

* As grades do Componente da interface do usuário agora exibem uma contagem precisa dos itens selecionados. Anteriormente, as grades indicavam um número incorreto de seleções quando uma pesquisa por palavra-chave selecionava todos os itens de grade e o comprador posteriormente desmarcava alguns itens antes de marcar a caixa de seleção de cabeçalho. [GitHub-29968](https://github.com/magento/magento2/issues/29968)

<!-- ENGCOM-8118 -->

* O aplicativo não exibe mais o HTML não renderizado nas páginas de visão geral de fatura e remessa. [GitHub-29958](https://github.com/magento/magento2/issues/29958)

<!-- ENGCOM-8066 -->

* Clicar **Opções** no Administrador **Lojas**  >  **Taxas de Moeda**  agora direciona os usuários para a seção opções de moeda expandidas da página Configuração do sistema . [GitHub-29336](https://github.com/magento/magento2/issues/29336)

<!-- ENGCOM-8361 -->

* Aprimoramento do suporte para a exibição de um widget dependendo de outra condição para `adminhtml` widgets ao usar um tipo de widget seletor. [GitHub-13316](https://github.com/magento/magento2/issues/13316), [GitHub-7252](https://github.com/magento/magento2/issues/7252), [GitHub-6868](https://github.com/magento/magento2/issues/6868)

<!-- ENGCOM-8336 -->

* O preenchimento do texto foi aprimorado nas caixas de diálogo pop-up de confirmação no tema Luma. [GitHub-30452](https://github.com/magento/magento2/issues/30452)

### Cofre

<!-- MC-39109-->

* O `Vault` O módulo agora reconhece códigos de método de pagamento da solicitação para o serviço de gerenciamento de informações de pagamento. Anteriormente, quando um comprador fazia um pedido usando um cartão de crédito de Braintree salvo, o aplicativo exibia esse erro mesmo quando um método de pagamento válido era usado: `The requested Payment Method is not available`.

### Vertex

* As sugestões de endereço agora são removidas conforme esperado quando um endereço é modificado.

* Uma condição de corrida que impedia alguns clientes de salvar seu endereço no painel da conta foi resolvida.

* A validação do endereço de vértice não adiciona mais a página Edição de endereço ao cache de página inteira em determinadas condições.

* O imposto calculado em texto agora é considerado quando a entrega livre é configurada para um valor incluindo imposto.

### Estrutura da API da Web

<!-- MC-23904 ENGCOM-8421-->

* Agora você pode usar o POST `V1/invoice/:invoiceId/refund` para reembolsar uma NFF que tenha uma quantidade zero de produtos e zero taxas de frete (por exemplo, `{"items": [{"qty": 0, "orderItemId": 6, "extensionAttributes": {}}], "appendComment": false, "notify": true, "isOnline": true, "arguments": {"adjustment_negative": 0.0, "adjustment_positive": 0.99, "shipping_amount": 0}}.` ) Anteriormente, o aplicativo exibia esse erro: `You can't create a creditmemo without products`. [GitHub-23069](https://github.com/magento/magento2/issues/23069)

<!-- MC-33732 -->

* Agora você pode usar o POST `V1/categories` para criar ou atualizar uma categoria. Anteriormente, o aplicativo não salvava o valor se a variável `default_sort_by` foi definido como uma matriz. Quando a variável `default_sort_by` foi definido como uma string, o aplicativo exibiu este erro: `Error occurred during \"custom_attributes\" processing. Attribute \"default_sort_by\" has invalid value. The \"string\" value's type is invalid. The \"string[]\" type was expected. Verify and try again.`

<!-- MC-35740 -->

* Uso do POST `V1/invoices/:id/capture` a captura de informações de pagamento agora funciona conforme o esperado. Anteriormente, o aplicativo autorizava a ordem, mas a capturava apenas no site do gateway de pagamento.

<!-- MC-37794 -->

* Ao usar o POST `V1/order/:orderId/ship` para criar uma remessa parcial, o ponto de extremidade retorna o número correto de produtos entregues.

<!-- MC-38425-->

* Faturas criadas usando o POST `V1/order/:orderID/invoice` agora reflete com precisão o pagamento parcial por crédito de loja. Anteriormente, quando um pedido era parcialmente pago com crédito de loja, a fatura era criada sem considerar o crédito de loja.

<!-- MC-36830-->

* O GET `rest/all/V1/categories` e GET `rest/all/V1/categories?rootCategoryId=2` chamadas de retorno preenchidas `name` e `product_count` campos como esperado para todas as categorias na árvore. Anteriormente, os valores dos campos de categoria estavam vazios. O plug-in resolvedor de nomes de tabela retornou um nome de tabela incorreto para buscar a contagem de produtos por categoria.

<!-- ENGCOM-8286 -->

* O PUT `V1/categories/:id` o endpoint agora armazena os dados necessários para criar redirecionamentos 301 para chaves de URL da categoria quando a variável `save_rewrites_history` é fornecido. [GitHub-29174](https://github.com/magento/magento2/issues/29174), [GitHub-30240](https://github.com/magento/magento2/issues/30240)

### Lista de desejos

<!-- MC-33626-->

* Os compradores agora podem adicionar um produto a uma lista de desejos quando o produto for atribuído a uma fonte de inventário personalizada. [GitHub-3018](https://github.com/magento/inventory/issues/3018)

<!-- MC-35416-->

* Agora, os administradores podem acessar a página Gerenciar carrinho de compras na página do cliente Admin , depois que um cliente tiver adicionado um produto à lista de desejos da loja. Anteriormente, o aplicativo exibia o seguinte erro quando o administrador clicava no **Gerenciar carrinho de compras** botão: `An error has occurred. See error log for details`.

<!-- MC-35573-->

* O **Adicionar ao carrinho** agora funciona como esperado para usuários anônimos, convidados e que não estão conectados.

<!-- MC-34411-->

* Os compradores agora podem mover um produto de uma lista de desejos para outra com sucesso.

<!-- ENGCOM-8062 -->

* O aplicativo agora exibe as opções de atributo de produto configurável selecionadas na página de lista de desejos, conforme esperado. [GitHub-24091](https://github.com/magento/magento2/issues/24091),  [GitHub-22503](https://github.com/magento/magento2/issues/22503)

<!-- ENGCOM-7779 -->

* Implementado `ActionInterface` para `\Magento\Wishlist\Controller\Shared\Allcart`. [GitHub-29537](https://github.com/magento/magento2/issues/29537)

## Problemas conhecidos

**Problema**: O `[magento_root]/index.php` O arquivo foi removido e o aplicativo agora é executado de `/pub` por padrão para configurações do Apache. Os armazenamentos servidos de subpastas não funcionarão conforme esperado e podem exibir erros 404. **Solução alternativa**: Use links simbólicos para emular a instalação em subpastas. O exemplo a seguir usa duas lojas (`https://shop01.com/shop/` e `https://shop02.com/shop/`) para ilustrar como usar um link simbólico para emular uma instalação em subpastas.

1. Crie um subdiretório para `https://shop01.com/shop/`:

   ```bash
   mkdir magento_root/pub/shop01
   ```

   ```bash
   cd magento_root/pub/shop01
   ```

1. Crie links simbólicos para os diretórios pai da loja no diretório recém-criado:

   ```bash
   ln -s ../media media
   ```

   ```bash
   ln -s ../static static
   ```

   ```bash
   ln -s ../../../pub pub
   ```

   ```bash
   ln -s ../.htaccess .htaccess
   ```

   ```bash
   ln -s ../health_check.php health_check.php
   ```

1. Crie um `index.php` no novo diretório (`magento_root/pub/shop01/index.php`) e adicionar este conteúdo:

```php
   <?php
   require realpath(__DIR__) . '/../../../app/bootstrap.php';

   switch ($_SERVER['HTTP_HOST']) {
       case 'shop01.com':
       case 'www.shop01.com':
           $params = $_SERVER;
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_CODE] = 'shop01';
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_TYPE] = 'website';
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $params);
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
           break;

       default:
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $_SERVER);
           /** @var \Magento\Framework\App\Http $app */
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
       break;
   }
```

1. Configure o servidor Apache para apontar para o novo subdiretório. As configurações de implantação podem variar bastante. Veja um exemplo de configuração do servidor:

```xml
   <VirtualHost *:80>
       DocumentRoot "magento_root/pub/shop1"
       ServerName shop01.com
   </VirtualHost>
```

**Problema**: Os comerciantes devem ativar a funcionalidade TLS de Força Rápida do Administrador para habilitar o redirecionamento HTTP global para HTTPS para todas as páginas da loja. Consulte a [Redirecionar HTTP para HTTPS para todas as páginas na nuvem (Forçar TLS)](https://support.magento.com/hc/en-us/articles/360006296953) Artigo da Base de conhecimento. <!-- MC-39988-->

**Problema**: Não é possível usar a variável `addConfigurableProductToCart` Mudança GraphQL para adicionar um produto configurável a um carrinho em uma visualização de loja não padrão em uma implantação de várias lojas que executa o Inventário. (As vitrines de Luma não são afetadas.) o aplicativo exibe este erro: `Could not add item to cart. Please check required options and try again`. **Solução alternativa**: Use o `addProductsToCart` em vez disso. [GitHub-31660](https://github.com/magento/magento2/issues/31660)<!-- PWA-1298-->

**Problema**: O aplicativo não envia informações de pagamento conforme esperado quando um comprador insere um código correto no campo CAPTCHA na página Pagamento, mas exibe este erro: `There has been an error processing your request`. Isso ocorre somente quando o comprador tenta colocar o pedido sem inserir o código CAPTCHA ou inseri-lo incorretamente.  **Solução alternativa**: Atualize a página. <!-- MC-40506-->

**Problema**: O aplicativo cria um pedido no Braintree, como esperado, quando um comprador clica **Pagar com Venmo**, mas não cria a ordem no Administrador. **Solução alternativa**: Nenhum. Consulte a [2.4.2 problema conhecido: O pagamento Braintree Venmo não funciona](https://support.magento.com/hc/en-us/articles/360054662652/)  Artigo da Base de conhecimento.  <!-- BUNDLE-2894-->

### Problemas conhecidos do B2B

**Problema**: Os compradores B2B podem usar métodos de pagamento online para ignorar o fluxo normal da ordem de compra. Este cenário pode ocorrer se o comprador puder reduzir todo o seu total de check-out para um 0 — por exemplo, por um código promocional ou cartão-presente — e subsequentemente remover o código ou cartão-presente. Mesmo nestas condições, o pedido continua a ordenar o montante correto com base nos preços dos artigos no catálogo que lhes foi atribuído. **Solução alternativa**: Desative cartões-presente e códigos de cupom quando os métodos de pagamento online estiverem ativados para aprovação de ordem de compra. <!-- B2B-1603-->

**Problema**: Os compradores são redirecionados para o carrinho de compras quando tentam fazer um pedido a partir de um pedido de compra usando o Check-out expresso do PayPal quando **Modo no contexto** está desativado. <!-- B2B-1604-->

**Problema**: O aplicativo às vezes exibe um erro 404 quando um comprador cria uma ordem de compra e, em seguida, navega até a página de finalização. Este erro ocorre quando um comprador criou anteriormente uma ordem de compra diferente com um método de pagamento online antes de navegar para a página de check-out sem concluir a compra anterior. O comprador ainda pode colocar a ordem de compra. **Solução alternativa**: Nenhum. <!-- B2B-1605-->

**Problema**: Os descontos de um método de pagamento específico persistem durante o check-out de uma ordem de compra mesmo quando o comprador altera seu método de pagamento durante o check-out final. Como resultado, os clientes podem receber um desconto ao qual não têm direito. Tal acontece porque, apesar da alteração do método de pagamento, continua a ser aplicada uma regra de carrinho para o método de pagamento original. **Solução alternativa**: Nenhum. Consulte a [2.4.2 Problema conhecido de B2B: o desconto permanece para Ordens de Compra on-line depois que o método de pagamento é alterado](https://support.magento.com/hc/en-us/articles/360054667312) Artigo da Base de conhecimento. <!-- B2B-1012 -->

**Problema**: O `deleteRequisitionListOutput` a consulta retorna detalhes sobre a lista de requisição excluída em vez das listas de requisição restantes. <!-- MC-39894-->

## Contribuições comunitárias

Estamos gratos à comunidade Magento Open Source mais ampla e gostaríamos de reconhecer os seus contributos para esta versão.

A equipe de engenharia da Comunidade [Colaboradores de Magento](https://magento.com/magento-contributors) mantém uma lista dos principais indivíduos e parceiros contribuintes por mês, trimestre e ano. Nessa página de Contribuidores, você pode seguir os links para suas PRs mescladas no GitHub.

### Contribuições de parceiros

O quadro a seguir destaca as contribuições dos parceiros. Essa tabela lista o Parceiro que contribuiu com a solicitação de pull, a solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-2-partner.md}}

### Contribuições individuais

A tabela a seguir identifica as contribuições dos membros da comunidade. Essa tabela lista as solicitações de pull externas, o número de problema do GitHub associado a ela (se disponível) e o membro da comunidade que contribuiu com a solicitação de pull.

{{$include /help/_includes/release-notes/engcomm-2-4-2-issues.md}}

### Requisitos do sistema

Nossa pilha de tecnologia é baseada em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](../../../installation/system-requirements.md).

### Instruções de instalação e atualização

Você pode instalar o Adobe Commerce 2.4.2 usando [Composer](../../../installation/composer.md).

## Kits de ferramentas de migração

A Ferramenta de migração de dados ajuda a transferir os dados de armazenamento do Magento 1.x existentes para o Magento 2.x. Essa interface de linha de comando inclui funções de verificação, rastreamento de progresso, registro e teste. Para obter instruções de instalação, consulte [Instalar a ferramenta Migração de dados](../../../tools/data-migration-tool/install.md). Considere explorar ou contribuir para a variável [Repositório de migração de dados](https://github.com/magento/data-migration-tool).

O [Kit de ferramentas de migração de código](https://github.com/magento-commerce/code-migration) ajuda a transferir extensões e personalizações de loja do Magento 1.x existentes para o Magento 2.x. A interface da linha de comando inclui scripts para conversão de módulos e layouts do Magento 1.x.
