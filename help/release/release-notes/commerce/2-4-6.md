---
title: Notas de versão do Adobe Commerce 2.4.6
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.6 do Adobe Commerce.
hide: true
hidefromtoc: true
source-git-commit: c0615e466ee5301f43116780ee83180b6d99039e
workflow-type: tm+mt
source-wordcount: '9659'
ht-degree: 0%

---


# Notas de versão do Adobe Commerce 2.4.6

>[!NOTE]
>
>As notas de versão fornecidas para versões do Beta estão incompletas e sujeitas a alterações por GA.

O Adobe Commerce 2.4.6 apresenta suporte para PHP 8.2. O PHP 8.1 permanece totalmente compatível, mas o suporte para PHP 7.4 foi removido. Ele inclui aprimoramentos significativos de desempenho e escalabilidade. As operações do GraphQL para operações de carrinho em massa e a resposta de renderização da árvore de categoria foram otimizadas.

Esta versão inclui mais de 300 correções e aprimoramentos de qualidade. As dependências do Core Composer e as bibliotecas de terceiros foram atualizadas para as versões mais recentes compatíveis com o PHP 8.2.

{{bics}}

## Outras informações de versão

Embora o código para esses recursos seja fornecido com versões trimestrais do código principal do Adobe Commerce, vários desses projetos (por exemplo, B2B, Page Builder e Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros desses projetos estão documentadas nas informações separadas da versão específica do projeto, disponíveis na documentação de cada projeto.

## Ambiente de teste 2.4.6-beta1

O Adobe Commerce 2.4.6-beta1 foi testado em relação às seguintes versões de componentes:

* Composer 2.2
* Elasticsearch 7.17/8.4
* Abrir Pesquisa 2.4
* MariaDB 10.6
* MySQL 8.0
* PHP 8.1
* RabbitMQ 3.9
* Redis 7.0
* Verniz 7.1.1

## Destaques do Adobe Commerce 2.4.6

Procure os seguintes destaques nesta versão.

### Melhorias de segurança

Esta versão inclui oito correções de segurança e melhorias na segurança da plataforma. Essas correções de segurança foram suportadas pela Adobe Commerce 2.4.5-p2 e pelo Adobe Commerce 2.4.4-p3.

Até à data, não ocorreram ataques confirmados relacionados com estas questões. No entanto, certas vulnerabilidades podem ser exploradas para acessar informações do cliente ou tomar as sessões do administrador. A maioria desses problemas exige que um invasor obtenha acesso primeiro ao Administrador. Como resultado, lembramos que você deve tomar todas as medidas necessárias para proteger seu administrador, incluindo, entre outras, esses esforços:

*  de incluir na lista de permissões IP
* [Autenticação de dois fatores](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* Uso de uma VPN
* Uso de um local exclusivo em vez de `/admin`
* Boa higiene das senhas

Consulte o Boletim de segurança do Adobe para obter a discussão mais recente sobre esses problemas corrigidos.

#### Melhorias adicionais na segurança

As melhorias de segurança desta versão melhoram a conformidade com as práticas recomendadas de segurança mais recentes, incluindo:

* As lacunas nos logs de ação de Administração foram abordadas com auditoria mais específica de ações nas exibições de grade, ações em massa e exportações.  <!-- AC-1553 -->

* A validação reCAPTCHA não falha mais durante o check-out quando ocorrem erros inesperados durante o processamento do pagamento. [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

### Aprimoramentos da plataforma

O PHP 8.1 permanece totalmente compatível. O Adobe Commerce 2.4.6 GA incluirá suporte para PHP 8.2. No entanto, o atraso na liberação do PHP 8.2 nos impediu de incluir suporte para ele neste beta. <!-- AC-6598 -->

O suporte ao PHP 7.4 foi removido desta versão. Não é possível executar o Adobe Commerce no PHP 7.4.

O Adobe Commerce 2.4.6-beta1 agora é compatível com:

* Composer 2.2.x <!-- AC-2839 -->

* Redis 7.0.x. Embora a compatibilidade com o Redis 6.2 permaneça, recomendamos implantar esta versão com o Redis 7.0.x, pois o Redis 6.2 será encerrado em abril de 2024. <!-- AC-6606 -->

* O OpenSearch agora é compatível com o mecanismo de pesquisa padrão para implantações locais e em nuvem do Adobe Commerce. Ele é compatível como um mecanismo de pesquisa independente para o Magento Open Source. Esta versão é compatível com OpenSearch v2.x e foi testada com o OpenSearch 2.4. Embora a compatibilidade com o OpenSearch 1.x permaneça, recomendamos usar esta versão com o OpenSearch 2.x. Você pode instalar e executar o Adobe Commerce e o Magento Open Source 2.4.6 com o OpenSearch 2.x no Cloud e no local [Pré-requisitos do mecanismo de pesquisa](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

* Elasticsearch 8.x <!-- AC-6597 -->

* MariaDB 10.6 (versão LTS). Esta versão ainda é compatível com o MariaDB 10.4, mas recomendamos atualizar para o MariaDB 10.6. <!-- AC-6921 -->



#### Outras atualizações e substituições

* O esquema DHL foi migrado da v6.2 para a v10.0. <!-- AC-3023-->

* As bibliotecas JavaScript desatualizadas foram atualizadas para suas versões mais recentes e as dependências desatualizadas foram removidas. Essas alterações são compatíveis com versões anteriores. <!-- AC-2036-->

* A compatibilidade do PHP 7.4 foi removida da base de código do Commerce.  <!-- AC-2841-->

* As dependências de fonte foram atualizadas para a nova versão LTS. As dependências incluem:<!-- AC-2656-->

   * `friendsofphp/php-cs-fixer`
   * `symfony/console`
   * `symfony/event-dispatcher`
   * `symfony/finder`
   * `symfony/process`
   * `web-token/jwt-framework`

* `jquery-migrate` O foi removido da base de código do Commerce. [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

* Atualizado `jQuery/fileUpload`biblioteca para v10.32  <!-- AC-2658-->

* Os componentes da estrutura Zend (ZF1) que atingiram o fim da vida útil foram removidos da base de código. Consulte [As alterações retroativas incompatíveis realçam](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

* As dependências do Laminas foram atualizadas para suportar o PHP 8.2. <!-- AC-7019-->

* Atualizado `web-token/jwt-framework` à v3.0.5.  (versão mais recente) <!-- AC-3772-->

* Atualizado `allure-framework/allure-phpunit` para v2.x. <!-- AC-2660-->

* Atualização do `Chart-js` biblioteca para v3.9.1  <!-- AC-2661-->


### Aprimoramentos de desempenho e escalabilidade

* **Desempenho aprimorado para operações que afetam muitos segmentos de clientes**. Os comerciantes podem melhorar o desempenho das operações que envolvem mais de 100 segmentos de clientes, permitindo uma nova configuração. O **Verificação em tempo real se o cliente corresponde por segmento** pode ser desativada conforme necessário para reduzir o tempo de processamento, reduzindo a validação de cada segmento de cliente em relação aos clientes. Consulte [Validação de segmentos de clientes](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#customer-segments-validation). <!-- AC-6832 ACPT-835-->

* **Nova configuração do sistema para limitar o número de produtos exibidos na grade do produto**. Os comerciantes podem usar o novo **Limite de Produtos na Grade** configuração para melhorar o desempenho da grade do produto. Esse limite é configurado para 20000 por padrão e afeta somente as coleções de produtos que são usadas pelos componentes da interface do usuário. A limitação do número de produtos exibidos pode aumentar o desempenho das operações de grades preenchidas com mais de 200.000 produtos. Consulte [Limite de produtos na grade](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#limit-number-of-products-in-grid)<!-- ACPT-42 -->

* **Desempenho de importação aprimorado (até 100.000 registros por minuto)**. Os comerciantes podem usar o novo `POST /rest/<store_view_code>/V1/import/csv` Ponto de extremidade da API REST para importar dados para o Adobe Commerce. Esse terminal fornece os mesmos recursos do recurso de importação do Administrador e oferece suporte ao uso de um arquivo CSV para criar, atualizar e remover produtos, preços de produtos e entidades do cliente.  <!-- ACPT-6 -->

* **Desempenho de processamento de pedidos de alta throughput aprimorado através do balanceamento de carga**. O Adobe Commerce 2.4.6 em clientes de infraestrutura em nuvem que têm um alto volume de pedidos simultâneos (1000 pedidos por minuto) agora pode melhorar o desempenho do processamento de pedidos equilibrando a carga em seu banco de dados em diferentes nós.  Os comerciantes podem reequilibrar essa carga ao habilitar conexões secundárias para o banco de dados MySQL e instâncias de Redis. Consulte [Processamento de pedidos com alta taxa de transferência](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/high-throughput-order-processing.html#load-balancing) <!-- ACPT-495 -->


### Atualizações de acessibilidade

O foco desta versão foi na criação de uma experiência de loja em Venia (PWA) mais perceptível, operável, compreensível e robusta. Esses aprimoramentos incluem:

<!-- AC-2479-->

* O rótulo do texto visual para a variável **[!UICONTROL Sign in]** agora corresponde ao nome acessível. (A prática recomendada é que o nome acessível de um elemento da interface comece com o texto visível do rótulo.)

<!-- AC-2481 2492-->

* Nomes descritivos acessíveis foram adicionados aos botões na loja.

<!-- AC-2488-->

* Foram adicionados rótulos descritivos verbais ao **[!UICONTROL Has Video]** caixas de seleção em filtros de pesquisa.

<!-- AC-2787-->

* Usuários somente de teclado agora podem acessar todas as funcionalidades de página na loja. Anteriormente, os compradores não podiam acessar links de subnavegação usando apenas pressionamentos de tecla.


### Integração do Adobe Commerce com o Adobe IMS

Os seguintes módulos do Adobe IMS foram dissociados do código principal do Adobe Commerce 2.4.6 e agora são empacotados como uma metapackage separada:

* `adobe-ims`
* `adobe-ims-api`
* `admin-adobe-ims`

O novo `adobe-ims-metapackage` v2.2.0 é fornecido com o Adobe Commerce 2.4.6. Nenhuma funcionalidade foi alterada nesta versão.<!-- CABPI-505-->


### B2B

O recurso Pedido de compra para empresas agora é totalmente exposto pela API do GraphQL. Esta versão apresenta dois schemas do GraphQL:

* O esquema GraphQL de Ordem de Compra abrange o usuário B2B da empresa e a funcionalidade de Gerenciamento de Ordem de Compra, como criar, editar e excluir OCs.
* Regra de compra O esquema GraphQL cobre a funcionalidade de regras de aprovação de ordem de compra, como a adição de regras de aprovação. Dependendo da função e das permissões da empresa, os usuários da empresa podem criar, editar, excluir ou exibir regras de aprovação.

Esta versão inclui várias correções de erros. As notas de versão Beta para B2B estão incluídas neste tópico. Você poderá encontrar as notas de versão do Adobe Commerce 2.4.6 GA para B2B em [Notas de versão B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).


### Braintree


<!-- BUNDLE-3107-->

* O **[!UICONTROL Pay Later]** botões e banners (mensagens) para Itália e Espanha foram habilitados para Braintree.

<!-- BUNDLE-3109-->

* A mensagem PayLater com o PayPal Vault foi ativada.

<!-- BUNDLE-3140-->

* Adição de Proteção contra Fraude e ganchos da Web ACH. O gancho da Web de Proteção contra Fraude é acionado quando uma decisão de risco é tomada no Braintree. O gancho da Web ACH é acionado quando o status de um pagamento ACH é atualizado para `settled` ou `settlement decline`.

<!-- BUNDLE-3141-->

* Adição do gancho da Web LPM (Métodos de pagamento local).

### GraphQL

As melhorias de desempenho do GraphQL incluem:

**Tempo de resposta aprimorado ao consultar categorias com permissões de categoria ativadas**. Os tempos de resposta melhoraram ao consultar produtos em categorias para os quais as permissões de categoria estão ativadas e que contêm muitos grupos de clientes ou catálogos compartilhados. <!-- B2B-2179-->

**Desempenho otimizado da renderização da árvore de categoria no GraphQL**. O `categoryList` O query foi otimizado para oferecer suporte a clientes com um grande número de categorias. Os comerciantes que usam esse query para pesquisar mais de 1500 categorias com até cinco níveis de subcategorias aninhadas notarão uma melhoria no desempenho.
<!-- B2B-2484-->

**Tempos de resposta de consulta de operações de carrinho em massa reduzidos**. As mutações para adicionar produtos foram otimizadas para melhorar o desempenho da consulta ao adicionar até 500 produtos simples e configuráveis. Os produtos do pacote não são afetados. As mutações otimizadas incluem: `addProductsToCart`, `addConfigurableProductsToCart`, `addDownloadableProductsToCart`, `addSimpleProductsToCart`, `addVirtualProductsToCart`,`addWishlistItemsToCart`e `updateCartItems`. <!-- B2B-2331 2423-->

Consulte a [Guia do desenvolvedor do GraphQL](https://developer.adobe.com/commerce/webapi/graphql/) para obter detalhes sobre essas melhorias.


### Page Builder

O Page Builder v.1.7.3 é compatível com o Adobe Commerce 2.4.6.


### PWA Studio

O PWA Studio v.13.0.x é compatível com o Adobe Commerce 2.4.6. Ele inclui vários aprimoramentos para melhorar a acessibilidade. Para obter informações sobre correções de erros, consulte [Versões de PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [Compatibilidade da versão](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões principais compatíveis do Adobe Commerce.


## Problemas corrigidos

Estamos corrigindo centenas de problemas no código principal do Adobe Commerce 2.4.6. Um subconjunto de problemas corrigidos incluído no Adobe Commerce 2.4.6-beta1 está descrito abaixo.

### Instalação, atualização, implantação

<!-- ACP2E-1168-->

* A implantação de conteúdo estático não atinge mais o tempo limite ou falha durante implantações padrão ou compactas com vários locais e sites.

<!-- ACP2E-923-->

* A estratégia compacta não causa mais uma referência inválida a um domínio externo ao executar implantação de conteúdo estático (`bin/magento set:static-content:deploy -f --strategy compact`).

<!-- AC-5994-->

* Em execução `bin/magento setup:di:compile -vvv` (ou com o `-v` ou `-vv` opções) agora retorna uma mensagem informativa sobre falha. [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

* O Adobe Commerce não gera mais a seguinte exceção ao executar o `bin/magento setup:upgrade` em uma implantação que já está executando a ferramenta de migração de dados:  `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

* O `setup:db:status` O comando não falha mais em ambientes que executam o MySQL 8.0.29. Anteriormente, a saída do comando informava erroneamente que o schema declarativo estava desatualizado. [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

* O `composer install` comando não substitui mais `.gitignore` arquivos. [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

* Em execução `bin/magento sampledata:remove` para remover dados de amostra após a atualização no Linux alpino, não falhe mais com este erro: `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)

<!-- AC-6796-->

* As exceções e entradas de rastreamento de pilha de exceção agora são incluídas em `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->

* O Adobe Commerce agora lança um erro de validação de parâmetro quando você usa a linha de comando para definir uma conexão Redis sem uma senha.

### Acessibilidade

<!-- AC-6678 6679 6677-->

* O **[!UICONTROL Proceed to Checkout]**, **[!UICONTROL Review Order]** e **[!UICONTROL Place Order]** botões no fluxo de trabalho de finalização agora funcionam como esperado com a entrada do teclado.

<!-- AC-2485-->

* Indicação visual do foco nos botões ao usar **[!UICONTROL TAB]** ou **[!UICONTROL SHIFT + TAB]** navegar pelos controles de página agora funciona conforme o esperado.

#### Leitores de tela

<!-- AC-2498-->

* O leitor de tela da página de histórico do pedido agora lê a descrição correta da imagem.

Os leitores de tela agora anunciam:

* Contagem total de itens encontrada nos resultados da pesquisa como esperado <!--- AC-3522-->
* Nome do usuário conectado quando um usuário faz logon com êxito usando controles do teclado <!--- AC-6477-->
* O cabeçalho da página de resultados da pesquisa de produto agora lê o valor correto para o `<title>` elemento <!--- AC-2489-->
* Se os campos de entrada são obrigatórios <!--- AC-2494-->
* Corrija o estado atual dos elementos acordeão (recolhidos e expandidos) <!--- AC-2487-->
* Quando o conteúdo da página tiver sido atualizado depois que o usuário clicar no **[!UICONTROL Create an account]** botão <!---AC-6676-->

### B2B

Esta versão inclui várias correções de erros. As notas de versão Beta para B2B estão incluídas aqui. Você poderá encontrar as notas de versão do Adobe Commerce 2.4.6 GA para B2B em [Notas de versão B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

<!-- ACP2E-689-->

* O Adobe Commerce agora exibe os detalhes corretos durante o pagamento quando a opção Ordens de Compra está habilitada e uma cotação virtual que foi criada com a opção de pagamento PayPal foi selecionada. Anteriormente, os totais eram exibidos como zero nessas condições.

<!-- ACP2E-716-->

* O filtro Mostrar minhas aspas na página Minhas aspas agora funciona como esperado. Anteriormente, os resultados do filtro incluíam aspas de outros usuários administradores.

<!-- ACP2E-609-->

* A lista de grupos de clientes para a **Permitir Categoria de Navegação** não contém mais grupos de clientes relacionados a catálogos compartilhados.

<!-- ACP2E-1244-->

* O atributo do cliente Número de Imposto/IVA agora funciona conforme o esperado com contas de administrador da empresa tanto no Administrador quanto na loja. Os atributos Imposto/IVA personalizado não são mais necessários para criar uma conta de empresa. Anteriormente, quando um comerciante criava uma conta de empresa com um atributo Imposto/IVA personalizado, a Adobe Commerce exibia um erro de validação na loja e no Administrador.

<!-- ACP2E-1236-->

* Agora, a desativação do recurso de catálogo compartilhado em um escopo específico funciona corretamente. Anteriormente, o Adobe Commerce definia um escopo inválido quando um comerciante salvava a configuração do catálogo compartilhado.

<!-- ACP2E-1074-->

* O `discount_percent` da coluna `sales_order_item` agora a tabela de um produto é preenchida como esperado com a porcentagem de desconto quando a quantidade de desconto do item não está definida ou é maior ou igual à quantidade do item de pedido. Anteriormente, essa coluna não era preenchida quando uma regra de preço do carrinho era aplicada a este produto.

<!-- ACP2E-1203-->

* Usuários administradores agora podem salvar valores de atributos personalizados do cliente para usuários da empresa. Anteriormente, não era possível salvar os atributos personalizados do cliente para usuários da empresa.

<!-- ACP2E-1221-->

* Resolvemos problemas de desempenho com a validação de permissões da empresa fornecidas por meio do GraphQL, quando muitas permissões da empresa já foram atribuídas.

<!-- ACP2E-1242-->

* A Adobe Commerce não lança mais um erro na página do carrinho quando o Pedido rápido é usado para adicionar um produto em uma quantidade que excede o inventário disponível.

### Produtos do pacote

<!-- ACP2E-906-->

* Atualizar o produto do pacote por meio da API para uma exibição de loja específica agora não substitui outros dados de exibições de loja para o mesmo produto do pacote. Anteriormente, os títulos de opções de produto do pacote eram substituídos pelo primeiro título de opção para outras exibições de loja.

<!-- AC-3769-->

* Os produtos empacotados agora podem ser filtrados com êxito do Administrador **[!UICONTROL Catalog]** > **[!UICONTROL Products]** ao usar uma localidade holandesa. Anteriormente, o Adobe Commerce exibia esse erro ao tentar filtrar em `Type: Bundle Product`: `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

* A grade de produtos não gera mais uma exceção quando os produtos do pacote têm um preço especial que excede 1000. Anteriormente, quando você pesquisava o produto pelo SKU ou navegava até **[!UICONTROL Catalog]**  > **[!UICONTROL Products]**, o Adobe Commerce exibiu esse erro: `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

* As colunas em notas de crédito e PDF de fatura para pedidos que contêm uma combinação de pacote e produtos simples agora são renderizadas corretamente. Anteriormente, as colunas estavam distorcidas ou desalinhadas.

### Cache

<!-- ACP2E-134-->

* O cache de página inteira não é mais liberado após o cumprimento do pedido, a menos que o produto solicitado esteja indisponível. Anteriormente, o cache era removido para a categoria sempre que uma remessa era criada.

<!-- ACP2E-118-->

* Os caches de página de categoria não são mais invalidados quando a quantidade de estoque é alterada se o produto ainda estiver em estoque. O Adobe Commerce agora carrega páginas do cache em vez de regerá-las quando a quantidade do produto (e nada mais) na página de categoria da loja muda.

<!-- ACP2E-1321-->

* Agora os dados são armazenados em cache com êxito quando o cache L2 é configurado e os dados remotos são parcialmente removidos. Anteriormente, após liberar apenas o cache de dados sem hashes desses dados, o novo cache não era salvo enquanto os hash de dados existiam.

### Carrinho e check-out

<!-- ACP2E-965-->

* Os compradores agora podem adicionar um item adicional ao carrinho quando o carrinho contiver a quantidade mínima do produto simples.

<!-- ACP2E-964-->

* As chamadas REST API para recuperar dados do carrinho agora retornam a mesma `grand_total` e `base_grand_total` quando a moeda de armazenamento e a moeda de base são iguais. [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

* O valor exportado de **Quantidade máxima permitida no carrinho de compras** agora corresponde ao valor padrão definido na configuração Admin .

<!-- ACP2E-889-->

* A Adobe Commerce agora calcula corretamente o total geral de reembolsos de pedidos com um desconto para envio.

<!-- ACP2E-876-->

* O Google ReCAPTCHA agora funciona como esperado para pedidos de vitrine. Anteriormente, o Adobe Commerce exibia esses erros quando o Google ReCAPTCHA não era selecionado pela primeira vez antes de um comprador tentar fazer um pedido: `ReCaptcha validation failed, please try again` e `No such cart with id = ID`.

<!-- AC-2338-->

* A atualização de imagem CAPTCHA agora respeita a configuração de Administração e não é acionada quando a configuração está desativada. Anteriormente, a atualização era acionada sempre que o método de pagamento era alterado, independentemente da configuração estar ativada ou desativada. [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

* O Adobe Commerce agora exibe um pop-up de confirmação como esperado antes de redirecionar um comprador para a próxima página, quando o comprador alterar a quantidade do produto na página do carrinho sem atualizar o carrinho e tentar navegar para a próxima página.

<!-- AC-5987-->

* Os compradores agora podem diminuir a quantidade de um produto do carrinho depois que ele foi diminuído no Administrador. Anteriormente, a Adobe Commerce exibia o seguinte erro quando um comprador tentava diminuir a quantidade do produto: `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

* A Adobe Commerce não lança mais um erro no console do JavaScript quando a quantidade do produto excede o máximo configurado durante a finalização de várias remessas. Em vez disso, o Adobe Commerce agora exibe uma mensagem de erro informativa. [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

* A quantidade de item na página do carrinho de compras não é mais representada como um número negativo quando um comprador usa a tecla de seta para baixo em seu teclado para alterar a quantidade do produto. [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1242-->

* A Adobe Commerce não lança mais um erro na página do carrinho quando o Pedido rápido é usado para adicionar um produto em uma quantidade que excede o inventário disponível.

<!-- ACP2E-1232-->

* Os compradores não podem mais adicionar ao carrinho um produto de uma categoria que agora é proibida após alterar o grupo de clientes ao qual o comprador pertence. O Adobe Commerce agora verifica o acesso de permissões de grupos de clientes para categorias específicas quando as configurações de permissão foram alteradas.

<!-- ACP2E-926-->

* Os carrinhos de compras do cliente não são mais esvaziados antes da criação do pedido do administrador, e o conteúdo do carrinho é restaurado se o pedido for cancelado ou abandonado. Os itens agora são removidos do carrinho somente após a criação do pedido. Anteriormente, sempre que um usuário administrador tentava criar um pedido na página Gerenciar o carrinho de compras , o carrinho era esvaziado.

### Regra de preço do carrinho

<!-- AC-2242-->

* As opções de entrega sem regras de preço do carrinho definidas durante a criação da regra agora são aplicadas a pedidos conforme esperado. Anteriormente, as opções de frete grátis aplicadas durante a criação da regra eram ignoradas durante o check-out e o frete grátis não era permitido quando a regra era aplicada. [GitHub-35013](https://github.com/magento/magento2/issues/35013)

### Catálogo

<!-- ACP2E-1181-->

* O widget de lista de produtos não exibe mais preços incorretos ou em cache para um comprador conectado. O preço exibido no widget da página inicial agora corresponde ao endereço do comprador e é atualizado quando o comprador atualiza o endereço. Anteriormente, o cache do navegador não atualizava os preços do produto na página inicial com base nas regras de imposto do grupo de clientes.

<!-- ACP2E-1007-->

* O recurso de lista Comparar produtos agora funciona corretamente em uma implantação de vários sites e depende do site.

<!-- ACP2E-900-->

* O Adobe Commerce não exibe mais os dados da página anterior quando você recarrega uma página de detalhes do produto. Anteriormente, quando a página de detalhes do produto era recarregada, os dados da primeira guia eram mesclados com os dados recém-carregados por um segundo dividido.

<!-- ACP2E-816-->

* As categorias com subcategorias agora podem ser expandidas no menu principal em dispositivos móveis, conforme esperado. Anteriormente, os compradores não podiam abrir ou expandir categorias com subcategorias em implantações móveis. [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

* As listas de categorias agora são atualizadas conforme esperado quando um produto é atribuído a um novo site ou loja. Anteriormente, o indexador do preço do produto não era marcado como inválido e subsequentemente reativado em um `cron` é executado conforme esperado. Como resultado, a entrada de preço do produto estava ausente na tabela de índice de preço e não era exibida na nova loja ou site.

<!-- AC-6395-->

* A contagem de inventário da loja agora é precisa quando a variável **Exibir produtos fora de estoque** a configuração está ativada. [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

* A página da categoria não fica mais vazia quando o **Permitir todos os produtos por página** está ativada. [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

* O **Exibir produtos fora de estoque** a opção de configuração agora funciona como esperado quando ativada. Anteriormente, todos os produtos eram exibidos como esgotados na loja quando essa opção era ativada no Administrador. [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- AC-2631-->

* Os clientes atribuídos a um grupo de vendas por grosso agora podem adicionar um produto agrupado ao carrinho quando permitido pelas permissões de categoria. Se essa permissão não estiver definida para um grupo Cliente, a configuração terá prioridade.

<!-- ACP2E-1334-->

* Os produtos simples indisponíveis que são opções para um produto configurável agora são exibidos como desativados na loja quando **Exibir produtos fora de estoque** está definida como **[!UICONTROL Yes]**. Anteriormente, todas as opções eram exibidas como disponíveis, apesar do status e da disponibilidade real.

<!-- ACP2E-1306-->

* A classificação do produto por atributos booleanos agora funciona conforme o esperado. [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

* Os descontos de regras de preço de catálogo não são mais aplicados a opções de produto personalizadas de preço fixo, mas são aplicados somente ao preço original do produto.

<!-- ACP2E-1027-->

* Os produtos relacionados agora são buscados com sucesso na página de detalhes do produto da loja quando gerados pela regra do produto relacionada para atributos alfanuméricos do produto.  [GitHub-36285](https://github.com/magento/magento2/issues/36285)

<!-- ACP2E-1147-->

* A contagem de itens de categoria agora é precisa após a filtragem na página Catálogo quando **Mostrar sem estoque** estiver ativado. Anteriormente, a contagem de produtos esgotados era incorreta.

<!-- AC-6810-->

* As regras de preço do catálogo agora levam em consideração o escopo selecionado e são aplicadas aos produtos somente para os sites para os quais o atributo tem um valor de opção que corresponda à regra. Anteriormente, a regra não levava em conta o escopo selecionado em implantações de vários sites. [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

* As opções de amostra e os atributos de cor e tamanho agora são pré-selecionados na página de detalhes do produto quando um comprador modifica o produto configurável da página Meu carrinho. A versão do jQuery 3.x agora oferece suporte para `swatchRenderer` nome do widget, que agora é camel case.) Anteriormente, a opção de amostra não era pré-selecionada.

<!-- ACP2E-1361-->

* Os clientes agora são notificados sobre queda de preço do produto quando o cliente está inscrito no alerta de queda de preço. Anteriormente, as notificações de queda de preço nem sempre eram enviadas devido ao armazenamento em cache do nível do aplicativo.

<!-- ACP2E-1348-->

* Regras de catálogo baseadas em SKUs com a variável **não é um de** agora funciona conforme o esperado.

<!-- ACP2E-1239-->

* A imagem principal do produto na página de detalhes do produto não muda mais visivelmente para baixo durante o carregamento da página quando `product_image_white_borders` em temas `view.xml` está desativado. Anteriormente, a imagem do produto era visivelmente deslocada para baixo durante o carregamento da página devido a configurações de altura incorretas no Fotorama JavaScript.

### Produtos configuráveis

<!-- ACP2E-1148-->

* As opções de produto configuráveis agora são exibidas como esperado, como indisponíveis na loja, se a opção tiver sido criada com a quantidade definida como 0 e **Exibir produtos esgotados** estiver ativado.

<!-- ACP2E-1083-->

* A Adobe Commerce não gera mais um erro quando um usuário administrador adiciona produtos manualmente a um produto configurável que já tem muitos produtos simples atribuídos a ele. Anteriormente, o Adobe Commerce exibia esse erro: `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

* Os compradores não podem mais adicionar produtos configuráveis com uma quantidade venável de 0 ao carrinho de compras em implantações com pedidos de devolução desativados. A Adobe Commerce agora indica que o produto está indisponível. [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

* Criar um novo produto importando um produto configurável com muitas opções de uma visualização de loja diferente agora resulta em uma cópia exata do primeiro produto conforme esperado. Anteriormente, a ordem de classificação das opções configuráveis do novo produto estava incorreta e os títulos não eram traduzidos para o local da nova exibição de loja em implantações com várias exibições de loja e localidades. [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-995-->

* As amostras não são mais exibidas como disponíveis na loja quando a quantidade comercializável do produto configurável é 0. [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-535-->

* Os produtos configuráveis com todos os produtos secundários esgotados são exibidos como esgotados na loja.

### Cupons

<!-- ACP2E-1053-->

* A lógica de validação foi adicionada ao fluxo de trabalho Gerenciar códigos de cupom para impor as configurações de código do cupom ao gerar cupons. Anteriormente, a geração do código de cupom ignorava o **Tamanho do código** ao **Quantidade do cupom** era maior que 2500.

<!-- ACP2E-1029-->

* Agora, os pontos de recompensa são adicionados à conta de um cliente, conforme esperado, quando um cupom de recompensa é aplicado durante o check-out com o método de pagamento PayPal Express.

<!-- ACP2E-1225-->

* Agora é possível aplicar um código de cupom durante a criação do pedido de administrador quando a regra de preço do carrinho tiver peso como condição. Anteriormente, os códigos de cupom não eram definidos se outros campos não estivessem selecionados para o produto. [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

* Agora é possível filtrar relatórios de cupom por várias regras de preço do carrinho. [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

* As opções personalizadas agora são aplicadas e salvas quando um usuário administrador pressiona **[!UICONTROL Enter]** ao configurar um produto com opções personalizadas. Anteriormente, você podia selecionar opções e adicionar o produto a um pedido, mas as opções não eram salvas, e o usuário administrador era solicitado a selecionar novamente as opções do produto. [GitHub-35284](https://github.com/magento/magento2/issues/35284)

### cron

<!-- ACP2E-1243-->

* O `catalog_index_refresh_price` o trabalho cron agora é executado com êxito. Anteriormente, o Adobe Commerce registrava esse erro durante a execução da cron: `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### Moeda

<!-- ACP2E-1012-->

* Um espaço ausente entre símbolos e preços de moeda personalizados foi adicionado aos preços de produto da loja e do Administrador. A condição apropriada e a expressão regex foram adicionadas para permitir um NBSP personalizado em símbolos de moeda. Por exemplo, IDRx 105.00 era exibido anteriormente como IDRx105.00.

### Segmento do cliente

<!-- ACP2E-1185-->

* O filtro Sim/Não na grade de segmentos de clientes administradores durante a criação de uma nova regra de preço do carrinho agora funciona conforme o esperado.

### Email

<!-- ACP2E-1063-->

* A Adobe Commerce não envia mais emails duplicados de clientes depois que um pedido é criado do Administrador.

<!-- AC-2903-->

* Os endereços de email do cliente agora podem incluir diacríticos. Anteriormente, a validação de front-end proibia a criação de um usuário com diacríticos em seu endereço de email. [GitHub-12075](https://github.com/magento/magento2/issues/12075)

<!-- ACP2E-1200-->

* Os emails de ordem de administração não são mais enviados quando a variável **Confirmação de pedido de email** está desativada.  [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

* As opções de imagem não são mais exibidas como marcação de HTML no aviso de crédito, confirmação de pedido e emails de cliente da fatura (modelo padrão) para produtos com opções personalizadas.

### Estruturas

<!-- AC-6385-->

* Agora, os usuários administradores podem abrir o Administrador com êxito **[!UICONTROL Store]** > **[!UICONTROL Configuration]** quando nenhum país na página **Países da União Europeia** definição (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**). Anteriormente, quando um usuário administrador tentava abrir esta página, o Adobe Commerce exibia este erro: `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

* `jquery.cookie` as dependências agora funcionam conforme o esperado com dependências JavaScript. Anteriormente, não era possível usar aliases para `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

* O `bin/magento i18n:collect-phrases` o comando agora inclui `<title>` no arquivo CSV exportado. [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

* `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` agora suporta argumentos de construtor nomeados. Agora é possível chamar uma função definindo os parâmetros pelo nome.

<!-- AC-6545-->

* O uso da variável `mixed` O tipo como parâmetro ou tipo de retorno agora é suportado. Anteriormente. O Adobe Commerce exibiu esse erro PHP quando esse tipo era usado: `Type "mixed" cannot be nullable`. [GitHub-35579](https://github.com/magento/magento2/issues/35579)

<!-- AC-6223-->

* O `NewRelic` classe wrapper agora captura todos os descartáveis `TypeError` exceções. [GitHub-35854](https://github.com/magento/magento2/issues/35854)

<!-- magento/magento2/pull/35567-->

* O Adobe Commerce não assume mais erroneamente que uma categoria é a categoria principal de outra com base no caminho da categoria. Anteriormente, quando duas categorias eram adjacentes e uma ID de categoria começava com a ID de categoria de outra categoria, a Adobe Commerce presumia que as categorias tinham a mesma categoria principal. [GitHub-32464](https://github.com/magento/magento2/issues/32464)

<!-- ACP2E-1287-->

* Agora, os erros são registrados como esperado na variável `exception.log` arquivo. Anteriormente, embora os erros fossem registrados no `system.log` arquivo, erros não foram conectados `var/log/exception.log`.

<!-- AC-3752-->

* As integrações OAuth agora podem ser reautorizadas conforme esperado em implantações que executam o Adobe Commerce 2.4.3-p2. Anteriormente, a reautorização falhava com este erro: `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. A Adobe Commerce também tentou descriptografar valores não criptografados. [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

* Correto `rowId` agora é passado quando a categoria `urlKey` é salvo para categorias que têm categorias secundárias. Anteriormente, o erro `categoryId` foi transmitido ao salvar a categoria `URLKey`.

<!-- ACP2E-981-->

* O código do atributo do produto `event` foi adicionado à lista de códigos de atributos de produto reservados, o que elimina erros associados ao uso de um atributo com esse nome na loja. Anteriormente, o aplicativo exibia esse erro nas páginas de detalhes do produto e pesquisa/lista de produtos quando `event` foi utilizada:  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

* As mensagens de erro de validação de frente de loja que ocorrem durante o posicionamento do pedido agora são exibidas de forma consistente. Anteriormente, as mensagens apareciam, eram recolhidas e reapareciam. [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

* Os consumidores de AMQP não falham mais devido a uma `trim()` em implantações que executam o PHP 8.1. Anteriormente, quando o consumidor do AMQP começava após a instalação, o Adobe Commerce exibia este erro: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

### Correções gerais

<!-- ACP2E-1068-->

* O Adobe Commerce agora exibe um intervalo de tempo preciso quando um usuário administrador seleciona a variável **[!UICONTROL Last 24 Hours]** no painel Estatísticas do administrador . Anteriormente, o Adobe Commerce exibia um intervalo de tempo incorreto. Isso ocorreu porque o fuso horário do banco de dados permaneceu inalterado.

<!-- ACP2E-1066-->

* Memos de crédito agora podem ser gerados para quantidades inteiros e decimais. Anteriormente, somente quantidades inteiras eram suportadas.

<!-- ACP2E-1001-->

* A regra de validação de entrada do CEP do cliente para o tipo **somente numérico** O agora funciona conforme o esperado na **[!UICONTROL Edit Customer Address]** campo (**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**). Anteriormente, as informações de endereço do cliente eram salvas sem a validação do CEP.

<!-- ACP2E-975-->

* Usuários administradores com acesso restrito a um site agora podem fazer logon no Administrador com êxito usando o recurso Fazer logon como cliente .

<!-- ACP2E-873-->

* As contas de clientes compartilhadas globalmente agora têm endereços que são validados em relação à lista de países permitidos para o site atual e salvos com êxito. Anteriormente, essas contas eram validadas incorretamente em relação aos países permitidos do site em que o cliente estava registrado.

<!-- ACP2E-3167-->

* As navegações estruturais da hierarquia de página do CMS não são mais exibidas quando **Ativar a funcionalidade Hierarquia** está desativado. Anteriormente, as navegações estruturais eram exibidas e, quando os compradores clicavam nelas, uma página 404 era exibida. [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

* Remover um produto de todos os sites por meio do Administrador não causa mais o seguinte erro: `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

* Os clientes que excedem o número máximo de tentativas com falha de logon agora podem fazer logon após a redefinição de senha. [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

* O componente de linhas dinâmicas agora se comporta como esperado quando um usuário administrador adiciona um novo elemento. Anteriormente, o componente de linha se comportava incorretamente quando um novo produto simples era adicionado a um produto agrupado. [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

* Correção de erros de digitação e gramática incorreta no `app/code/Magento/Backend/etc/menu.xsd` arquivo.

<!-- magento/magento2/pull/35818-->

* O `app/code/Magento/Authorization/README.md` O arquivo foi atualizado para descrever com precisão a criação da tabela.

<!-- AC-6635-->

* `base64`Os URLs codificados não contêm mais caracteres reservados, conforme definido pela RFC 3986.  [GitHub-36042](https://github.com/magento/magento2/issues/36042)

<!-- magento/magento2/pull/35940-->

* O `recordLogin` foi atualizado para definir valores de login no modelo do usuário, bem como preservar os valores corretos no `logdate` e `lognum` dos campos `admin_user` tabela. Anteriormente, as tentativas de logon de usuários administradores atualizados não eram registradas.

<!-- AC-2553-->

* O módulo Relatórios do New Relic agora está em conformidade com a CSP, e os domínios do New Relic especificados para relatórios do navegador são incluídos nos cabeçalhos da CSP quando o rastreamento de dados do site é ativado. [GitHub-34707](https://github.com/magento/magento2/issues/34707)

<!-- magento/magento2/pull/35990-->

* Os modelos de problemas do GitHub foram convertidos em formulários de edição para problemas de experiência do desenvolvedor e solicitações de recursos.

<!-- ACP2E-961-->

* O `Is required` o atributo do cliente agora é implementado corretamente por escopo do site para o formulário de edição de cliente do administrador.

<!-- ACP2E-895-->

* O **[!UICONTROL Grid Filter Condition Type]** o campo de atributos de endereço do cliente e do cliente não fica mais visível na página de edição do atributo quando a variável **[!UICONTROL Use in Filter Option]s** está desativada.

<!-- AC-6020-->

* O Adobe Commerce agora exibe uma mensagem de erro informativa se um comerciante não inserir um valor de atributo de SKU opcional ao criar um produto. Anteriormente, o aplicativo exibia essa exceção quando o atributo era opcional: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

### Cartões de presente

<!-- ACP2E-851-->

* Agora, as quantidades de produtos de cartão-presente permanecem iguais à quantidade especificada em um arquivo CSV durante a importação. As verificações de opções existentes foram adicionadas e os valores anteriores foram atualizados com base em uma chave exclusiva. Anteriormente, as quantidades de cartões-presente eram dobradas quando os cartões-presente eram importados várias vezes.

### Quebra de presente

<!-- AC-3061-->

* O preço da quebra de oferta agora é exibido como esperado no bloco de resumo da ordem quando a quebra de oferta foi aplicada no nível da ordem a um pedido que contém produtos físicos e virtuais. Anteriormente, a Adobe Commerce não exibia o preço de empacotamento do presente.

### GraphQL

<!-- AC-1730-->

* `Types` que implementam várias interfaces no código GraphQL agora pode ser separado por um `&` , bem como `,` de acordo com a GraphQL `@doc`especificação.

<!-- ACP2E-885-->

* O `setShippingAddressesOnCart` agora suporta a definição de códigos de região numérica como `region`. Anteriormente, essa mutação funcionava incorretamente para valores de código de região numérica.

<!-- ACP2E-1237-->

* O `products` query agora retorna somente revisões associadas ao escopo especificado. Anteriormente, as consultas retornavam revisões de todas as lojas.

<!-- ACP2E-882-->

* As permissões de categoria agora são respeitadas durante as solicitações do GraphQL.

<!-- AC-1805-->

* O `customer` agora a consulta filtra em pedidos com um `from` e `to` corretamente. [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

* O `product` query agora retorna os dados de categoria corretos em agregação. Anteriormente, `attribute_code: category_uid` retornou o valor de `category_id` em vez de `category_uid`.

### Google ReCAPTCHA

<!-- AC-3179-->

* Um erro reCAPTCHA no `var/log/exception.log` O arquivo para o login do administrador do Google V3 reCAPTCHA foi resolvido e nenhuma mensagem de erro é registrada. Anteriormente, o seguinte erro era lançado a cada poucos segundos quando um usuário administrador configurava seus **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** configurações: `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)

### Imagem

<!-- ACP2E-905-->

* Atualização das recomendações sobre o tamanho do logotipo da guia PDF Invoice .

### Importar/exportar

<!-- ACP2E-957-->

* Importar um produto com a mesma Chave de URL numérica de um produto existente, mas sem seu caractere alfabético de terminal, não causa mais um erro de validação quando a variável **Sufixo do URL do produto** está definida como vazia no Administrador.

<!-- AC-6588-->

* O `bin/magento app:config:import`O comando agora importa com êxito o conteúdo de um `config.php` quando contiver determinados `cron` expressões. Anteriormente, a importação falhava com este erro: `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

* A exportação completa agora funciona corretamente quando o AWS S3 é usado como armazenamento remoto. Anteriormente, a exportação falhava devido ao tamanho do arquivo carregado.

<!-- AC-6825-->

* Agora você pode definir a contagem de erros permitida como 0 em Admin **[!UICONTROL System]** >  **[!UICONTROL Import]**.  [GitHub-36252](https://github.com/magento/magento2/issues/36252)

<!-- ACP2E-982-->

* O status do produto agora é importado corretamente quando as colunas de dados de inventário no arquivo CSV estão ausentes. Anteriormente, após a importação do produto, a origem padrão era atribuída automaticamente ao produto, sua quantidade era definida como zero e seu status era listado como esgotado quando as colunas de dados de inventário no arquivo CSV estavam ausentes.

<!-- ACP2E-841-->

* A importação de valores de precificação antecipada agora fornece a contagem correta de registros novos e atualizados quando a importação inclui mais de 100 registros. Anteriormente, a mensagem de sucesso da importação fornecia a contagem errada.

<!-- ACP2E-984-->

* Os arquivos CSV exportados agora contêm caminhos corretos para nomes de categorias que são salvos em vários idiomas. Uma ID de loja foi adicionada para coleção de categorias.  Anteriormente, os arquivos exportados continham caminhos mistos com idiomas diferentes em vez de um caminho de categoria derivado da visualização de armazenamento padrão.

<!-- ACP2E-1319-->

* A atualização das opções personalizadas de um produto em uma exibição de loja específica por meio da importação agora é concluída com êxito. Anteriormente, um erro de servidor interno era lançado se uma linha relacionada ao produto fosse dividida em vários lotes.

### Índice

<!-- AC-3152-->

* Indexador `batch_size` para `catalogpermissions_category` agora é alterado para o valor fornecido no `env.php` como esperado. Anteriormente, um erro de digitação no caminho do indexador `batch_size` substituição impediu a alteração do tamanho do lote para o valor fornecido em `env.php`. [GitHub-652](https://github.com/magento/partners-magento2ee/issues/652)

<!-- ACP2E-1296-->

* A reindexação de preço agora é executada com êxito quando o catálogo contém produtos de pacote não são atribuídos a nenhum site. Anteriormente, o seguinte erro ocorria quando o índice de preço do produto era executado: `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### Infraestrutura

<!-- ACP2E-869-->

* Adição da limpeza de `DATE` e `DATETIME` valores em despejos de banco de dados para suporte ao Adobe Commerce. Anteriormente, os campos do tipo datetime não eram limpos para tabelas de cliente/cotação/pedido na tabela de backup do banco de dados.

<!-- ACP2E-804-->

* O `escaper.js` `escapeHtml` agora converte o caractere especial (&amp;) do E comercial em `"$amp;"` por `InnerHtml` regra. Essa solução genérica soluciona problemas de conversão de referências de caracteres e caracteres especiais na caixa de entrada do título e salva o valor exato como inserido. Anteriormente, os caracteres de E comercial (&amp;) eram codificados incorretamente nos nomes de nó na hierarquia de conteúdo.

<!-- AC-5972-->

* Problemas com terceiros `colinmollenhour/php-redis-session-abstract` e o PHP 8.1 foram resolvidos. [GitHub-35634](https://github.com/magento/magento2/issues/35634)

<!-- AC-6868-->

* Proibido `@author` foi removida dos módulos em toda a base de código. [GitHub-36338](https://github.com/magento/magento2/issues/36338)

### Inventory management

Esta versão inclui várias correções de erros. As Notas de versão Beta do Inventory management estão incluídas aqui. Você poderá encontrar as notas de versão do Adobe Commerce 2.4.6 GA para Inventory management em [Notas de versão](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html).

<!-- ACP2E-1106-->

* A loja agora exibe produtos compostos (configuráveis, agrupados e agrupados) como em estoque quando os produtos secundários vendidos são retornados ao estoque. Anteriormente, a loja indicava que o produto compósito estava indisponível sob essas condições.

<!-- ACP2E-1033-->

* A contagem de produtos da lista de categorias agora está correta ao usar o Inventário no modo de origem única com o **Exibir produtos esgotados** configuração ativada. O Adobe Commerce agora verifica se um produto pode ser vendido na contagem.

<!-- ACP2E-1015-->

* As regras de Preço do carrinho para Entrega na loja agora funcionam como esperado quando o Inventário está ativado. Anteriormente, os descontos gerados pelas regras de preço do carrinho não eram aplicados nestas condições.

<!-- ACP2E-1003-->

* A atualização do inventário de produtos no modo agendado não limpa mais todos os caches. Anteriormente, o indexador de Inventário limpava todos os caches de configuração.

<!-- ACP2E-992-->

* O valor do atributo Permitir várias caixas para envio de um produto no Inventário avançado agora é salvo conforme esperado.

<!-- ACP2E-979-->

* A Adobe Commerce agora emite uma compensação de reserva precisa após um aviso de crédito de reembolso parcial para um pedido que foi colocado com a coleta na loja. Anteriormente, uma reserva incorreta era salva no `inventory_reservation` tabela quando um usuário administrador criou um aviso de crédito sem selecionar o **[!UICONTROL Return to Stock]** caixa de seleção.

<!-- ACP2E-952-->

* Produtos configuráveis não são mais mostrados como esgotados na loja quando uma de suas variações foi retornada manualmente para estoque em implantações que implementam o inventário de várias fontes.

<!-- ACP2E-925-->

* Posição da coluna na grade do produto (**[!UICONTROL Catalog]** > **[!UICONTROL Products]**) não reverte mais para a posição anterior após a página ser recarregada em implantações com várias fontes de inventário configuradas.

<!-- ACP2E-908-->

* A quantidade de estoque agora está correta após um aviso de crédito ser emitido para um produto virtual quando a variável **[!UICONTROL Back to stock]** caixa de seleção não está selecionada.

<!-- ACP2E-859-->

* Agora é possível salvar categorias com classificação automática de produto e escopo atribuídos ao estoque não padrão. Anteriormente, o Adobe Commerce não salvava a categoria e exibia este erro: `Something went wrong while saving the category`.

<!-- ACP2E-813-->

* O status de estoque de produto configurável agora é atualizado como esperado quando o produto é criado com todas as variações configuráveis indisponíveis.

<!-- ACP2E-924-->

* A ferramenta do analisador de inconsistência de reservas agora funciona corretamente com pedidos parcialmente entregues que contêm produtos configuráveis, agrupados e agrupados. Os tipos de produtos compostos agora são analisados. Anteriormente, os cancelamentos e reembolsos eram salvos somente para produtos principais, não para itens de pedidos de subprodutos de produtos configuráveis e de pacotes enviados juntos.

<!-- ACP2E-1180-->

* O Adobe Commerce não exibe mais um erro quando um usuário administrador tenta atribuir 200 ou mais fontes de inventário a um estoque ou produto.

<!-- ACP2E-1138-->

* Os comerciantes agora podem criar um aviso de crédito para um pedido do qual um produto foi excluído. Anteriormente, os comerciantes não podiam criar um aviso de crédito quando os produtos tinham sido excluídos do pedido após a criação de uma fatura. O aplicativo exibiu este erro: `Following products with requested skus were not found: s00001`.

<!-- ACP2E-1017 -->

* As lojas agora são filtradas com base em IDs de loja única e múltipla. O `event` o código do atributo do produto foi adicionado à lista de códigos de atributo reservados. Anteriormente, o Relatório de Estoque Baixo gerava uma exceção quando o módulo Inventário era instalado.

<!-- ACP2E-748 -->

* Agora, os filtros de navegação em camadas funcionam conforme o esperado, e os produtos indisponíveis agora são anexados à lista de produtos da categoria de loja. O novo `is_out_of_stock` o atributo sorting usa o mapeador de campo dinâmico do Elasticsearch para a coleção de produtos da loja.

### Galeria de Mídia

<!-- AC-3034-->

* A Galeria de Mídia herdada agora está desativada por padrão. Anteriormente, **Habilitar galeria de mídia antiga** foi definido como **[!UICONTROL Yes]**.

<!-- ACP2E-1302 -->

* A Nova Galeria de Mídia foi otimizada para melhorar o carregamento da árvore de diretórios na página de categoria.

### Logs

<!-- ACP2E-1312-->

* Agora você pode gerar relatórios do sistema para arquivos de log de 0 bytes. Anteriormente, o Adobe Commerce exibia um erro ao gerar um relatório para uma coleção de arquivos de log quando um ou mais arquivos estavam vazios.

### Pedido

<!-- ACP2E-1107-->

* A página Aviso de crédito da ordem de venda do Administrador agora exibe o total geral correto para pedidos criados com Crédito da Loja e várias NFFs. Anteriormente, o cálculo do total geral estava incorreto e o usuário não podia gerar um aviso de crédito.

<!-- ACP2E-998-->

* O prefixo do pedido passado no script de instalação agora é adicionado corretamente à ID do pedido.

<!-- ACP2E-790-->

* A página de detalhes do pedido agora é carregada com êxito quando o pedido contém um produto com um valor de texto personalizado longo. Anteriormente, a página de detalhes do pedido não era carregada e o valor na variável `sales_order_item.product_options` não era armazenada corretamente se um produto contivesse um valor longo para uma opção personalizada de texto.

<!-- ACP2E-3178-->

* O status do pedido de vitrine agora é preciso para pedidos parcialmente reembolsados. Anteriormente, uma encomenda permanecia no estado de transformação após a expedição quando era aplicada uma restituição parcial. [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

* O grupo de clientes agora é representado com precisão como **Não conectado** para um pedido criado por um usuário convidado. Anteriormente, o grupo de clientes era NULL em resumos de pedidos de convidados, o que afetava emails de confirmação e exportação de pedidos. [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

* Um status de **Fechado** agora é atribuído a ordens virtuais conforme esperado após um aviso de crédito ter sido emitido e o cliente ser reembolsado. Anteriormente, os produtos virtuais eram exibidos como **Concluído** na lista suspensa Status , mas **Fechado** no rodapé do pedido, comenta quando o comentário foi adicionado de Admin. [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

* Os convidados agora podem fazer pedidos para produtos com uma quantidade inferior a um, e a quantidade do produto agora é rigorosamente digitada como `float`. Anteriormente, porque a quantidade do produto era digitada rigorosamente como `int`, pedidos para uma quantidade de produto menor que uma falhou com esta mensagem: `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- AC-2998-->

* Os compradores agora podem reordenar os produtos configuráveis com opções personalizadas opcionais, conforme esperado. Anteriormente, o Adobe Commerce exibia este erro: `Some of the selected options are not currently available`. [GitHub-35409](https://github.com/magento/magento2/issues/35409)

<!-- ACP2E-1313-->

* Os reembolsos de envio agora são calculados corretamente quando a variável **Aplicar desconto em preços** a opção de configuração está definida como **incluindo impostos**.

<!-- ACP2E-1199-->

* As grades de fatura, remessa e aviso de crédito agora são atualizadas de forma assíncrona após o arquivamento de pedidos.

<!-- ACP2E-1194-->

* Pedidos duplicados não resultam mais de solicitações simultâneas e idênticas do GraphQL. As aspas agora são bloqueadas por até 10 segundos para impedir a criação duplicada de pedidos e a segunda solicitação falha com estes erros:  `The cart isn't active`  ou  `The order has already been placed and is currently processing`. Esse valor de bloqueio pode ser configurado por meio de id para a variável `Magento\Quote\Model\PlaceOrderMutex` classe `lockWaitTimeout` parâmetro. [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-1170-->

* Adicionar um comentário a um pedido arquivado não o retorna mais à grade de ordens não arquivadas, mantendo seu status arquivado.

<!-- ACP2E-860-->

* Os valores do atributo da empresa agora são exibidos conforme esperado nas seções endereço de faturamento e envio do fluxo de trabalho de finalização. Anteriormente, os atributos da empresa não eram exibidos corretamente na página de detalhes do pedido porque as lojas não eram definidas corretamente durante a criação do pedido. Os valores de atributos eram armazenados corretamente somente quando a variável **Mostrar empresa** propriedade foi definida como **[!UICONTROL optional]** para **Site principal** em implantações de várias lojas.

<!-- ACP2E-1117-->

* O `customer_address_id` agora é definido como esperado para um novo endereço de faturamento quando **[!UICONTROL My billing and shipping address are the same]** está marcada. Uma condição adicional foi introduzida para identificar se o endereço de faturamento é igual ao endereço de entrega antes de definir a ID de endereço do cliente para o endereço de entrega.

<!-- AC-6057-->

* Problemas de simultaneidade com o posicionamento do pedido foram resolvidos. Anteriormente, se dois pedidos eram feitos de navegadores diferentes no mesmo ou quase no mesmo tempo, ambos os pedidos tinham a mesma ID de pedido. [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

* Colocar uma ordem faturada automaticamente para um produto gratuito quando a indexação assíncrona estiver ativada agora funciona como esperado. Nenhuma entrada é adicionada à variável `sales_order_grid or sales_invoice_grid` para esses pedidos. Anteriormente, o Adobe Commerce gerava uma exceção porque o aplicativo tentava indexar as grades durante o posicionamento do pedido em vez de depender do `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)

### Page Builder

<!-- ACP2E-956-->

* Agora você pode usar o recurso de arrastar e soltar do Page Builder para importar imagens em massa para a galeria.

<!-- AC-2074-->

* Problemas com a regra de CSS do controle deslizante do Page Builder foram resolvidos. [GitHub-34527](https://github.com/magento/magento2/issues/34527)

<!-- ACP2E-978-->

* `Dropdown`, `Text area`e `Text field` agora estão disponíveis na lista de atributos de produto do Page Builder. Anteriormente, somente `Dropdown` e `Text area` os atributos estavam disponíveis.

### Pagamento

<!-- ACP2E-862-->

* O método de pagamento COD não é mais renderizado no fluxo de trabalho de check-out da loja quando a COD está isenta para o país especificado nos endereços de envio e faturamento. Anteriormente, as configurações de Administração para esse recurso não eram implementadas.

<!-- AC-1119-->

* As informações de pagamento de cofre não são mais mostradas na seção Pagamento do fluxo de trabalho de criação de ordens de administração se o comprador não tiver salvo um token. [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

* Os preços personalizados não são mais dobrados após um desconto ser aplicado pela regra de preço do carrinho. [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

* O status de novo pedido pendente agora é atendido como esperado quando um pedido é feito usando o método de pagamento Zero Subtotal Checkout .

#### Braintree

<!-- BUNDLE-3186-->

* Agora, os IDs de ordem são adicionados a solicitações de liquidação de transações de pagamento.

<!-- AC-3030-->

* O Adobe Commerce não gera mais o seguinte erro quando um comerciante clica em **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**: `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

* O `customerPaymentTokens` O query não retorna mais tokens de Braintree quando o cofre é desativado no Admin.

<!-- BUNDLE-3107-->

* O **[!UICONTROL Pay Later]** botões e banners foram habilitados para Itália e Espanha.

<!-- BUNDLE-3137-->

* Os usuários administradores agora podem criar um pedido ou reordenar quando o método de pagamento Braintree estiver ativado. Anteriormente, o Adobe Commerce exibia este erro: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

* O check-out usando o método de pagamento Braintree agora é concluído com êxito quando o Braintree PayPal está ativado e **Ativar Pagamentos com Cartão** está desativado. Anteriormente, a barra de progresso nunca era resolvida e o Adobe Commerce exibia esse erro de console: `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

* Proteção contra fraude, pagamento de ACH e ganchos da Web do método de pagamento local foram implementados. O gancho da web de proteção contra fraude é acionado somente se uma decisão de risco tiver sido tomada no Braintree. O gancho da Web da ACH é acionado somente após um pagamento da ACH ter sido atualizado para `settled` ou `settlement decline`.

<!-- BUNDLE-3143-->

* O **[!UICONTROL Tagline]** e **[!UICONTROL Layout]** os campos de configuração foram removidos de todos **[!UICONTROL PayPal]** na seção Estilo de administrador .

<!-- AC-2901-->

* Agora, as informações de pagamento de Braintree são salvas por loja e os compradores visualizam apenas as informações de cartão que foram salvas na loja em que estão fazendo compras. Anteriormente, os compradores podiam ver informações de cartão armazenadas de todas as lojas durante o check-out. [GitHub-34253](https://github.com/magento/magento2/issues/34253)

<!-- ACP2E-1229-->

* A opção de método de pagamento Braintree Vault permanece selecionada no fluxo de trabalho de finalização quando um comprador atualiza seu endereço de cobrança. Anteriormente, o método de pagamento era desmarcado quando o comprador desmarcava a opção **[!UICONTROL My billing and shipping address are the same]** botão.

<!-- BUNDLE-3184-->

* Os itens de linha agora são passados para transações de PayPal quando a variável **Enviar itens de linha** O campo de configuração é ativado em Admin.

<!-- BUNDLE-3187-->

* Lógica de validação do método de pagamento ACH **[!UICONTROL Account Number]** O campo agora oferece suporte para texto de quatro a 17 dígitos.

<!-- BUNDLE-3043-->

* O `customerPaymentTokens` O query não retorna mais tokens de Braintree quando o cofre é desativado do Administrador.

<!-- BUNDLE-3137-->

* Os usuários administradores agora podem criar um pedido ou repedido para clientes quando o método de pagamento Braintree estiver ativado. Anteriormente, o Adobe Commerce exibia este erro: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

* Os compradores agora podem usar o método de pagamento Braintree em lojas onde **Ativar Pagamentos com Cartão** foi desativado. Anteriormente, o Adobe Commerce exibia esse erro de JavaScript: `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`

### Desempenho

<!-- ACP2E-1028-->

* O indexador de preço agora exclui dados desatualizados conforme esperado após substituir registros durante a reindexação parcial de catálogos grandes. Anteriormente, o processo de reindexação removia registros desatualizados antes de substituí-los, o que ocasionalmente fazia os produtos desaparecerem temporariamente da loja. [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

* O desempenho do `bin/magento/setup:upgrade` O comando foi aprimorado. Anteriormente, esse comando recriava os acionadores do banco de dados, o que causava um tempo de inatividade significativo durante a execução do comando. Além disso, os indexadores não voltaram ao modo agendado e permaneceram no modo de salvamento. [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

* A atualização dos preços da camada por API agora é executada mais rápido. Anteriormente, a atualização dos preços da camada gerava desnecessários `SELECT` consultas, que atrasaram a execução quando muitos grupos de clientes foram atribuídos a um produto.

<!-- ACP2E-1090-->

* O desempenho do `SELECT` as operações de permissões da empresa foram aprimoradas.

<!-- ACP2E-1307-->

* O desempenho de carregamento de página melhorou quando a lista de produtos de widget de catálogo é carregada. Anteriormente, atributos não globais eram carregados diretamente do banco de dados.

### Relatórios

<!-- ACP2E-852-->

* O relatório de log de administração agora mostra uma precisão de **Valor antes da alteração** quando uma regra de categoria é atualizada.

<!-- ACP2E-1104-->

* O relatório de Total do pedido **from** e  **para** as datas agora são exibidas corretamente após a seleção no seletor de datas.

### Autorizações de Devolução de Produto (RMA)

<!-- ACP2E-1285-->

* O campo de comentário RMA (**[!UICONTROL Orders]** > **[!UICONTROL Return]**) não contém mais espaço em branco redundante. (O `<textarea>` e `<?php` As tags agora estão em uma linha.

<!-- ACP2E-1279-->

* O **[!UICONTROL Use Config Settings]** caixa de seleção para a **[!UICONTROL Enable RMA]** agora salva seu valor conforme esperado quando um produto é salvo.

### Resenhas

<!-- ACP2E-1214-->

* Usuários administradores com acesso restrito a um escopo específico agora podem excluir revisões de produtos conforme esperado.

### Funções

<!-- ACP2E-1277-->

* Adicionada uma ACL ausente para **[!UICONTROL Stores]** > **[!UICONTROL Configuration]**  >  **[!UICONTROL Services]**  > **[!UICONTROL OAuth]**. Anteriormente, não era possível definir o acesso a essa configuração do OAuth ao configurar permissões de função.

### Pesquisar

<!-- ACP2E-989-->

* As pesquisas por sequências entre aspas agora funcionam como esperado quando a variável **Mínimo de termos para correspondência** a configuração está ativada. Anteriormente, o Adobe Commerce exibia este erro: `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

* O **Ponto de acesso assinado** o filtro de pesquisa para registros do cliente nas grades do cliente da ordem de venda agora funciona como esperado durante a criação da ordem.

<!-- ACP2E-783-->

* A qualidade das sugestões de pesquisa foi aprimorada para consultas de várias palavras.

<!-- AC-6768-->

* Os resultados da pesquisa agora incluem saídas de opções esgotadas para todos os produtos disponíveis quando **Exibir produtos fora de estoque** está ativado [GitHub-36055](https://github.com/magento/magento2/issues/36055)

### Envio

<!-- ACP2E-670-->

* As taxas de frete para FedEx, USPS e UPS são calculadas corretamente quando a regra do Carrinho de Entrega Livre é definida para corresponder apenas a um subconjunto de itens no carrinho.

<!-- AC-937-->

* A página Envio de administrador não exibe mais a opção de frete gratuito quando o total do pedido é menor que o valor mínimo do pedido especificado que está qualificado para frete grátis. [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

* Agora, a Adobe Commerce respeita a configuração de administração do cliente **Mostrar empresa** configuração ao exibir endereço de entrega ou do cliente. Quando essa configuração estiver desativada, a empresa de entrega não será mais incluída no registro de entrega, no endereço do cliente ou no registro de pedido do banco de dados. Anteriormente, as informações eram exibidas apesar da configuração de desativação. [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

* Remoção de uma operação de salvamento supérflua em aspas ao estimar o envio.

<!-- magento/magento2/pull/35817-->

* `storeId` agora é aplicado diretamente de `$request->getStoreId()` para garantir que o escopo não seja perdido quando uma cotação for criada por um usuário administrador. Anteriormente, ocorriam problemas ocasionalmente com métodos de envio quando uma cotação era criada a partir do Administrador usando módulos de terceiros.

<!-- ACP2E-1304-->

* Agora, URLs compatíveis com SEO são gerados para produtos cujos `url_key` é substituída no nível de visualização da loja. Anteriormente, os URLs de produto de categoria não eram redirecionados para URLs compatíveis com SEO.

<!-- ACP2E-1196-->

* A Adobe Commerce não lança mais um erro de quantia mínima do pedido quando um desconto é aplicado aos custos de envio.

<!-- ACP2E-1190-->

* Os reembolsos de remessa agora são calculados corretamente quando o imposto é aplicado após um desconto ter sido aplicado ao frete.

<!-- ACP2E-910 AC-3182-->

* Todas as promoções aplicáveis para um carrinho solicitado por meio do GraphQL `cart` são retornadas juntas. As promoções incluem descontos de item de linha, regras/descontos do carrinho, cupons, cartões-presente e crédito de loja. [GitHub-35545](https://github.com/magento/magento2/issues/35545)

### Estágios

<!-- ACP2E-879-->

* Reagendar a data de término de uma atualização de preparo não resulta mais em erro após a conclusão da atualização. Anteriormente, os administradores não podiam abrir páginas de produto e grades de produto, e o Adobe Commerce exibia este erro: `report.CRITICAL: Exception: Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "1" already exists. in /home/muntianu/public_html/24dev/lib/internal/Magento/Framework/Data/Collection.php:407`.

<!-- ACP2E-776-->

* O painel de preparo agora exibe o número total correto de registros, e a paginação do painel agora funciona como esperado. Anteriormente. o painel exibia no máximo 20 registros.

<!-- ACP2E-1213-->

* As visualizações de armazenamento temporário de conteúdo agora são carregadas mais rapidamente em implantações com muitas lojas. A pré-indexação agora reindexa somente os armazenamentos selecionados.

<!-- ACP2E-919-->

* Os produtos agora podem ser adicionados ao carrinho de compras no modo de visualização de agendamento. A atualização dos links de navegação estrutural no modo de visualização de agendamento com esses parâmetros corrigiu esse problema: `version`, `timestamp`e `signature`.

### Imposto

<!-- AC-3201-->

* O **Exibir Subtotal de Imposto Zero** a configuração agora é aplicada conforme esperado para pedidos em implantações que oferecem vários métodos de envio. Anteriormente, o campo imposto zero estava visível na página do carrinho durante o check-out antes da seleção de um método de envio, mesmo quando essa configuração estava desativada. [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

* O Adobe Commerce agora pode exibir produtos agrupados com imposto na página categoria da loja em implantações que executam o PHP 8.1. Anteriormente, o Adobe Commerce não exibia uma lista de produtos e exibia essa exceção: `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

* Os comerciantes não podem mais mover uma atualização agendada para outra atualização que contenha a mesma ID de regra. Anteriormente, as atualizações de agendamento das regras de preço do carrinho criavam agendamentos duplicados quando uma atualização era movida para outra atualização que continha a mesma ID de regra.

<!-- ACP2E-1295-->

* A atribuição automática de grupo de clientes agora funciona quando não há ID de IVA associada ao endereço do cliente. Se o endereço não contiver um ID de IVA, ele será tratado como pertencente a um cliente não registrado para IVA e a Adobe Commerce alterará o grupo de clientes para um grupo não-IVA. Anteriormente, quando **Ativar Atribuição Automática ao Grupo de Clientes** foi ativada, a conta do cliente não foi atribuída automaticamente ao `customerGroup` quando o ID de IVA foi excluído da conta do cliente.

<!-- ACP2E-493-->

* Os blocos dinâmicos corretos agora são mostrados para as regras de catálogo de preparo no modo de visualização de preparo. Anteriormente, blocos dinâmicos não relacionados eram mostrados.

<!-- ACP2E-1080-->

* Agora, vários impostos são renderizados corretamente na seção Sumário de Imposto de NFFs e avisos de crédito quando várias entregas são aplicadas durante o check-out.

<!-- ACP2E-1076-->

* Os descontos não são mais aplicados quando um subtotal de pedido, incluindo imposto junto com a quantia de Imposto fixo do produto, excede a condição da regra do carrinho na página do carrinho. Anteriormente, os descontos eram aplicados mesmo quando o total excedia a condição da regra do carrinho.

<!-- ACP2E-913-->

* `VAT_ID` agora pode ser adicionado por meio de uma solicitação do GraphQL durante o check-out de um comprador convidado.

### Teste

<!-- ACP2E-1171-->

* Correção de erros de testes de unidade para diferentes versões do `ICU` e `libxml` bibliotecas.

<!-- ACP2E-1134-->

* Os desenvolvedores agora podem instruir o sistema a executar uma correção de dados em uma visualização de loja específica. O novo parâmetro opcional `scope` aceita uma `string` que corresponde ao alias de fixação de armazenamento.

<!-- ACP2E-1133-->

* Adição da capacidade de gerar várias instâncias de uma fixação de dados usando o `count` parâmetro.

### Traduções e localidades

<!-- ACP2E-912-->

* A tradução em linha agora funciona corretamente com caracteres especiais, incluindo caracteres unicode estendidos em frases localizadas em tags SCRIPT. Anteriormente, os caracteres japoneses eram renderizados incorretamente no script editado ao usar a tradução em linha.

<!-- ACP2E-844-->

* O `ñ` em um nome de produto, agora é convertido em `n` durante a geração da chave de URL.

<!-- AC-3499-->

* A saída da execução `bin/magento i18n:collect-phrases` O agora inclui traduções de modelo de email no `depend` é construído conforme esperado. [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

* Caracteres japoneses agora podem ser inseridos diretamente no conjunto de atributos da página do produto (caixa de combinação). Anteriormente, a inserção direta de caracteres japoneses nessa caixa de combinação resultava em caracteres alterados ou excluídos ao executar o navegador Firefox no MacOS. O  `textInput`  O atributo HTML, que pode lidar melhor com a conversão de caracteres japoneses em todos os navegadores, substituiu o `Value` e `valueUpdate` atributos.

### interface

<!-- ACP2E-1018-->

* A moeda específica do site agora é usada conforme esperado para colunas de Preço especial, Custo e MSRP na grade Produtos de administração. Anteriormente, o símbolo de moeda correto não era exibido na grade de produtos do catálogo de administração ao filtrar pela exibição de loja para um preço especial.

<!-- ACP2E-980-->

* A funcionalidade de arrastar e soltar das opções personalizadas do produto agora funciona como esperado. Agora é possível mover uma opção personalizável de uma página para outra quando houver várias páginas disponíveis na grade de opções personalizáveis.

<!-- ACP2E-866-->

* Os gráficos do painel de administração agora exibem intervalos de tempo YTD do início do ano civil atual até a data atual, conforme esperado. Anteriormente, os intervalos de datas incluíam durante 12 meses.

<!-- AC-3088-->

* Um favicon padrão ausente na página inicial da loja foi adicionado. [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

* O Administrador agora exibe com êxito a data de logon mais recente de cada usuário administrador. Anteriormente, quando um usuário administrador fazia logon no Administrador pela primeira vez, um valor de data de logon vazio era exibido na grade do usuário Administrador.


<!-- AC-3762-->

* O recurso de modelo de email de visualização (**[!UICONTROL Marketing]**  > **[!UICONTROL Communications]**  > **[!UICONTROL Email Templates]**) agora exibe modelos corretamente. Anteriormente, a imagem de visualização ficava truncada. [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

* Adicionado o `new-shipping-address-modal` classe para oferecer suporte ao estilo do novo modal de endereço de entrega.

<!-- magento/magento2/pull/35738-->

* Adição de texto informativo abaixo da variável `Search Weight` attribute&#39;s `Storefront Properties` campo de entrada em Admin **[!UICONTROL Stores]**  >  [!UICONTROL Attributes]  >  **[!UICONTROL Product]**.

<!-- AC-6442-->

* A grade do Cliente agora classifica como esperado em implantações com extensões personalizadas. `Shared` agora está definido como `false` para `SortOrderBuilder`. Anteriormente, esse construtor causava efeitos colaterais indesejados e clicar no título da grade do Cliente não tinha efeito. [GitHub-35939](https://github.com/magento/magento2/issues/35939)

<!-- ACP2E-1323-->

* As visualizações de email agora abrem em uma guia separada, em vez de uma janela pop-up, que fornece uma visualização mais ampla do conteúdo do email. Anteriormente, o conteúdo do email era truncado.

<!-- ACP2E-1299-->

* A função de filtro da grade de função do usuário (Administrador) **[!UICONTROL System]**  >  **[!UICONTROL Permissions]**  > **[!UICONTROL User roles]**  >  **[!UICONTROL Administrators]**) agora funciona conforme o esperado. O valor da matriz agora é tratado separadamente. Anteriormente, quando você tentava inserir um query nessa grade, o Adobe Commerce exibia esse erro de console e a página não carregava: `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

* A validação de valores de atributos foi adicionada ao criar um cliente por meio da REST API. O processo de criação agora falha quando valores de atributos inválidos são fornecidos. Anteriormente, não havia validação para gênero, que não é um campo obrigatório. Durante a criação do cliente, o valor passado para gênero foi salvo no `customer_entity` tabela.

<!-- AC-1105-->

* Os endereços adicionados durante o check-out agora mantêm o formato esperado. Anteriormente, linhas em branco eram ignoradas.

<!-- ACP2E-897-->

* Alterar a exibição de grade de colunas da grade do produto e selecionar novas colunas para uma exibição personalizada não aciona mais uma ação Selecionar todas as colunas da grade . Anteriormente, a caixa de coluna desaparecia e os produtos na grade eram selecionados ou desmarcados. [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

* Agora, os usuários administradores podem limpar o registro de tarefas concluídas pelo administrador com êxito. Anteriormente, o Administrador exibia este erro: `Something went wrong`.  [GitHub-36255](https://github.com/magento/magento2/issues/36255)

### Regravações de URL

<!-- ACP2E-808-->

* Alterar a visibilidade do produto para **Não visível individualmente** no escopo global Todas as exibições da loja agora remove somente as substituições de URL para exibições da loja que não substituíram o atributo de visibilidade. Alterar a visibilidade do produto dessa maneira também gera regravações de URL para todas as exibições da loja, incluindo aquelas que substituíram o atributo de chave do URL (mas não a configuração de visibilidade). Anteriormente, as regras de regravação de URL não eram aplicadas quando as configurações de visibilidade eram alteradas.

### Comerciante visual

<!-- ACP2E-1084-->

* Não é mais possível alterar manualmente as posições do produto nas listagens de categoria do Visual Merchandiser quando os produtos são correspondidos por regra.

<!-- ACP2E-985-->

* Usuários administradores com acesso restrito a apenas uma loja não podem mais arrastar e soltar produtos dentro de uma categoria no Visual Merchandiser. Em vez disso, agora eles podem usar o **[!UICONTROL Position]** para reorganizar a posição do produto. Anteriormente, esses usuários podiam alterar a posição do produto dentro de uma categoria apenas arrastando e soltando.

<!-- ACP2E-953-->

* A seção Products in Category da página de edição de categoria agora exibe a quantidade correta de produtos configuráveis. A coluna de tabela correta agora é usada para recuperar a quantidade de produtos configuráveis.

### Estrutura da API da Web

<!-- ACP2E-1207-->

* A REST API `DELETE /rest/V1/products/:sku/media/:entryId` agora retorna uma mensagem de erro se a imagem não for removida do produto porque está atribuída a uma função em outras visualizações de loja. Anteriormente, a API retornava uma resposta bem-sucedida, mesmo quando a imagem não era removida com êxito.

<!-- ACP2E-1155-->

* Os comerciantes agora podem usar a REST API para criar um aviso de crédito para um pedido com zero total geral. Anteriormente, o Adobe Commerce exibia esse erro: `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

* A página de edição do produto Administrador agora reflete com precisão as atribuições de um produto depois que a atribuição do site do produto foi alterada usando a REST API. [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

* As IDs de opção duplicadas não podem mais ser incluídas para atributos de várias seleções durante solicitações de API REST em massa para atualizar produtos. Anteriormente, você podia definir IDs de opção duplicadas para atributos de várias seleções ao enviar uma solicitação de API em massa para atualizar um produto. Quando esse atributo de seleção múltipla foi configurado para inclusão na navegação em camadas, a indexação de EAV falhou com um `Duplicate entry` erro.

<!-- ACP2E-778-->

* Os nomes de produtos em carrinhos de compras agora usam os valores da exibição de loja especificados conforme esperado. Anteriormente, os nomes de produtos no carrinho sempre retornavam o valor de exibição de loja padrão nas respostas do carrinho da API REST.

<!-- AC-5986-->

* Os valores de opção personalizados de item de carrinho agora podem ser atualizados usando a REST API. [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

* Solicitações de API em massa para mais de 20 `sourceItems` agora é concluído com êxito em implantações nas quais Inventário está ativado.

<!-- ACP2E-1209-->

* O status do estoque do produto composto (pacote, agrupado e configurável) é atualizado conforme esperado quando o status do estoque do produto filho é alterado por um REST `POST /rest/V1/inventory/source-items` chame.

<!-- ACP2E-1044-->

* O serviço de moeda fixa agora funciona como esperado com chaves geradas por ApiLayer, e as taxas de moeda são exportadas corretamente. Anteriormente, o Adobe Commerce exibia um erro quando um comerciante tentava importar as taxas de moeda por meio do Administrador.

<!-- ACP2E-726-->

* Agora você pode usar a REST API `/rest/V1/bulk?searchCriteria[filter_groups]` solicitação para consultar operações em massa por critérios de pesquisa. Anteriormente, o seguinte erro era retornado:  `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

* Os preços do produto agora são atualizados corretamente nas páginas de pesquisa do catálogo de Administração e de loja usando a API Gerenciar preço básico. [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### Lista de desejos

<!-- ACP2E-1013-->

* Os compradores agora podem adicionar produtos à lista de desejos depois de fazer logon. Anteriormente, devido a problemas com a validação da chave de formulário após o logon, a chave de formulário enviada com a solicitação adicionar à lista de desejos era invalidada.

<!-- ACP2E-341-->

* Os produtos agora são adicionados como esperado à lista de desejos da lista de produtos e exibem páginas depois que um cliente convidado confirmar sua conta de um email de confirmação. Anteriormente, os produtos não eram adicionados à lista de desejos após a confirmação da conta.

## Requisitos do sistema

Nossa pilha de tecnologia é baseada em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Instruções de instalação e atualização

Você pode instalar o Adobe Commerce 2.4.6 usando [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).