---
title: Notas de versão do Adobe Commerce 2.4.6
description: Saiba mais sobre novos recursos, melhorias, correções de erros e problemas conhecidos na versão 2.4.6 do Adobe Commerce.
exl-id: c25f3ad8-da18-421f-a77a-03f1cc9c45e4
source-git-commit: 1d5d0846680b7b810d8ed10f4be3787342baf742
workflow-type: tm+mt
source-wordcount: '9901'
ht-degree: 0%

---

# Notas de versão do Adobe Commerce 2.4.6

O Adobe Commerce 2.4.6 apresenta suporte para o PHP 8.2. O PHP 8.1 permanece totalmente suportado, mas o suporte para o PHP 7.4 foi removido. Ele inclui aprimoramentos significativos de desempenho e escalabilidade. As operações do GraphQL para operações de carrinho em massa e resposta de renderização da árvore de categorias foram otimizadas. Esta versão apresenta o metapackage de extensão do Adobe Commerce.

Esta versão inclui mais de 300 correções de qualidade e melhorias. As dependências do Core Composer e bibliotecas de terceiros foram atualizadas para as versões mais recentes que são compatíveis com o PHP 8.2.

{{bics}}

## Outras informações sobre a versão

Embora o código desses recursos esteja incluído nas versões do código principal do Adobe Commerce, vários desses projetos (por exemplo, B2B, Page Builder e Progressive Web Application (PWA) Studio) também são lançados independentemente. As correções de erros para esses projetos estão documentadas nas informações de versão separadas e específicas do projeto, disponíveis na documentação de cada projeto.

## Destaques do Adobe Commerce 2.4.6

Procure os seguintes destaques nesta versão.

### Aprimoramentos de segurança

Esta versão inclui oito correções de segurança e melhorias de segurança da plataforma.

Nenhum ataque confirmado relacionado a esses problemas ocorreu até o momento. No entanto, certas vulnerabilidades podem ser potencialmente exploradas para acessar informações do cliente ou assumir o controle de sessões de administrador. A maioria desses problemas exige que um invasor obtenha acesso ao Administrador primeiro. Como resultado, lembretes para tomar todas as medidas necessárias para proteger seu administrador são:

* IP ➡ incluir na lista de permissões
* [Autenticação de dois fatores](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* Uso de uma VPN
* Uso de um local único em vez de `/admin`
* Boa higiene de senha

Consulte [Boletim de segurança do Adobe](https://helpx.adobe.com/security/products/magento/apsb23-17.html) para obter a discussão mais recente sobre esses problemas corrigidos.

#### Aprimoramentos adicionais de segurança

Os aprimoramentos de segurança desta versão melhoram a conformidade com as práticas recomendadas de segurança mais recentes, incluindo:

* As lacunas nos logs de ação do administrador foram abordadas com auditorias mais específicas de ações nas exibições de grade, ações em massa e exportações. <!-- AC-1553 -->

* A validação do reCAPTCHA não falha mais durante o check-out quando erros inesperados ocorrem durante o processamento de pagamento. [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

* **Nova configuração do sistema para exigir confirmação por email quando um usuário administrador alterar seu email**. Para reduzir a vulnerabilidade do site, uma nova configuração do sistema (desativada por padrão) foi adicionada para exigir a confirmação por email quando um usuário administrador altera seu email: **[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Customer Configuration]** > **[!UICONTROL Account Information Options]** > **[!UICONTROL Require email confirmation if an email has been changed]**. Quando essa opção estiver habilitada, o aplicativo solicitará a confirmação por email sempre que o usuário administrador alterar seu endereço de email. O seguinte módulo é afetado por essa alteração: `Magento_Customer`. <!-- AC-3064 -->


### Aprimoramentos na plataforma

O Adobe Commerce 2.4.6 apresenta suporte para o PHP 8.2. O PHP 8.1 permanece totalmente suportado. <!-- AC-6598 -->

O suporte ao PHP 7.4 foi removido desta versão. Você não pode executar o Adobe Commerce 2.4.6 no PHP 7.4.

O Adobe Commerce 2.4.6 agora é compatível com:

* Composer 2.2.x. O Composer 1.x foi removido. <!-- AC-2839 -->

* Redis 7.0.x Embora a compatibilidade com o Redis 6.2 permaneça, recomendamos implantar esta versão com o Redis 7.0.x, pois o Redis 6.2 deve chegar ao fim da vida útil em 2024. <!-- AC-6606 -->

* O OpenSearch agora é compatível como o mecanismo de pesquisa padrão para implantações do Adobe Commerce no local e na nuvem. Ele é compatível como um mecanismo de pesquisa independente para o Magento Open Source. Esta versão é compatível com OpenSearch v2.x e foi testada com OpenSearch 2.5. Embora a compatibilidade com o OpenSearch 1.x permaneça, recomendamos usar esta versão com o OpenSearch 2.x. Você pode instalar e executar o Adobe Commerce e o Magento Open Source 2.4.6 com o OpenSearch 2.x na nuvem e no local [Pré-requisitos do mecanismo de pesquisa](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

* Elasticsearch 8.x Consulte [Atualizar o Elasticsearch](../../../upgrade/prepare/prerequisites.md#upgrade-elasticsearch). <!-- AC-6597 -->

* MariaDB 10.6 (versão LTS). Esta versão ainda é compatível com o MariaDB 10.4, mas recomendamos a atualização para o MariaDB 10.6. <!-- AC-6921 -->

#### Outras atualizações e substituições

* O esquema DHL foi migrado da v6.2 para a v10.0. <!-- AC-3023-->

* As bibliotecas JavaScript desatualizadas foram atualizadas para suas versões mais recentes e as dependências desatualizadas foram removidas. Essas alterações são compatíveis com versões anteriores. <!-- AC-2036-->

* A compatibilidade do PHP 7.4 foi removida da base de código do Commerce. <!-- AC-2841-->

* As dependências do Symfony foram atualizadas para a nova versão LTS. As dependências incluem:<!-- AC-2656-->

   * `friendsofphp/php-cs-fixer`
   * `symfony/console`
   * `symfony/event-dispatcher`
   * `symfony/finder`
   * `symfony/process`
   * `web-token/jwt-framework`

* `jquery-migrate` foi removido da base de código do Commerce. [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

* Atualizado `jQuery/fileUpload` para v10.32. <!-- AC-2658-->

* Os componentes da estrutura Zend (ZF1) que atingiram o fim da vida útil foram removidos da base de código. Consulte [Destaques de alterações incompatíveis com versões anteriores](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

* As dependências do Laminas foram atualizadas para suportar o PHP 8.2. <!-- AC-7019-->

* A variável `laminas/laminas-dependency-plugin` O plug-in do compositor foi removido. [GitHub-36515](https://github.com/magento/magento2/issues/36515) <!-- AC-7100-->

* Substituído `Zend_Filter` com `laminas/laminas-filter`. <!-- AC-5922-->

* Atualizado `web-token/jwt-framework` para v3.0.5. (versão mais recente) <!-- AC-3772-->

* Atualizado `allure-framework/allure-phpunit` para a v2.x. <!-- AC-2660-->

* Atualizado o `Chart-js` biblioteca para v3.9.1 <!-- AC-2661-->


### Aprimoramentos de desempenho e escalabilidade

* **Desempenho aprimorado para operações que afetam muitos segmentos de clientes**. Os comerciantes podem melhorar o desempenho de operações que envolvem mais de 100 segmentos de clientes ativando uma nova definição de configuração. A variável **[!UICONTROL Real-time Check if Customer is Matched by Segment]** essa configuração pode ser desativada conforme necessário para reduzir o tempo de processamento, reduzindo a validação de cada segmento de cliente em relação aos clientes. Consulte [Validação de segmentos de cliente](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#customer-segments-validation). <!-- AC-6832 ACPT-835-->

* **Nova definição de configuração do sistema para limitar o número de produtos exibidos na grade de produtos**. Os comerciantes podem usar o novo **[!UICONTROL Limit Number of Products in Grid]** para melhorar o desempenho da grade de produtos. Esse limite é configurado para 20000 por padrão e afeta somente as coleções de produtos usadas pelos componentes da interface do usuário. A limitação do número de produtos exibidos pode aumentar o desempenho das operações em grades com mais de 200.000 produtos. Consulte [Limitar número de produtos na grade](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#limit-number-of-products-in-grid)<!-- ACPT-42 -->

* **Desempenho de importação aprimorado (até 100.000 registros por minuto)**. Os comerciantes podem usar o novo `POST /rest/<store_view_code>/V1/import/csv` Endpoint da REST API para importar dados para o Adobe Commerce. Esse endpoint fornece os mesmos recursos que o recurso de importação de Admin e oferece suporte ao uso de um arquivo CSV para criar, atualizar e remover produtos, preços de produtos e entidades do cliente. Consulte [Importar dados](https://developer.adobe.com/commerce/webapi/rest/modules/import/). <!-- ACPT-6 -->

* **Desempenho de processamento de pedidos de alto throughput aprimorado por meio do balanceamento de carga**. O Adobe Commerce 2.4.6 em clientes de infraestrutura em nuvem que têm um alto volume de pedidos simultâneos (1000 pedidos por minuto) agora pode melhorar o desempenho do processamento de pedidos, equilibrando a carga em seu banco de dados em diferentes nós. Os comerciantes podem reequilibrar essa carga habilitando conexões secundárias para o banco de dados MySQL e instâncias Redis. Consulte [Processamento de pedidos com alto rendimento](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/high-throughput-order-processing.html#load-balancing) <!-- ACPT-495 -->


### Metappackage da extensão do Adobe Commerce

Esta versão apresenta o metapackage de extensão do Adobe Commerce v1.1.0, que agrupa automaticamente extensões selecionadas do Adobe Commerce com esta versão principal. As versões dessas extensões incluídas neste metapackage são instaladas quando `composer update` O está em execução, simplificando o processo de atualização dessas extensões ao atualizar para a versão principal mais recente. Essas extensões ainda manterão programações de lançamento independentes.

O metapackage de extensão do Adobe Commerce para Adobe Commerce 2.4.6 inclui estas duas extensões:

* [Parar check-out rápido](https://experienceleague.adobe.com/docs/commerce-merchant-services/quick-checkout/overview.html)
* [Eventos Adobe I/O para Adobe Commerce](https://developer.adobe.com/commerce/events/get-started/)

As versões futuras deste metapackage de extensão conterão extensões adicionais.

### Eventos Adobe I/O para Adobe Commerce

Adobe I/O Eventos para Adobe Commerce captura eventos comerciais e transfere dados do Adobe Commerce para outros sistemas Adobe. Os desenvolvedores podem criar aplicativos nativos em nuvem no Adobe Developer App Builder que assinam eventos do Commerce, como atualizações de inventário, alterações de status de pedido e atualizações de preço. Os desenvolvedores podem usar esse recurso para trocar dados com a orquestração de toda a jornada do comprador em seus sistemas de missão crítica.

### Atualizações de acessibilidade

O foco desta versão tem sido a criação de uma experiência de loja na Venia (PWA) que seja mais perceptível, operável, compreensível e robusta. Esses aprimoramentos incluem:

<!-- AC-2479-->

* O rótulo de texto visual para o **[!UICONTROL Sign in]** agora corresponde ao seu nome acessível. (A prática recomendada recomenda que o nome acessível de um elemento da interface comece com o texto do rótulo visível.)

<!-- AC-2481 2492-->

* Nomes descritivos acessíveis foram adicionados aos botões em toda a loja.

<!-- AC-2488-->

* Rótulos descritivos verbais foram adicionados ao **[!UICONTROL Has Video]** caixas de seleção em filtros de pesquisa.

<!-- AC-2787-->

* Os usuários somente de teclado agora podem acessar toda a funcionalidade de página na loja. Anteriormente, os compradores não podiam acessar links de subnavegação usando apenas pressionamentos de tecla.


### Integração do Adobe Commerce com o Adobe IMS

Os seguintes módulos do Adobe IMS foram dissociados do código principal do Adobe Commerce 2.4.6 e agora são empacotados como um metapackage separado:

* `adobe-ims`
* `adobe-ims-api`
* `admin-adobe-ims`

O novo `adobe-ims-metapackage` A v2.2.0 vem com o Adobe Commerce 2.4.6. Nenhuma funcionalidade foi alterada nesta versão.<!-- CABPI-505-->


### B2B

O recurso Pedidos de compra para empresas agora está totalmente exposto pela API do GraphQL. Esta versão apresenta dois esquemas do GraphQL:

* O esquema GraphQL de ordem de compra abrange a funcionalidade do Gerenciamento de ordens de compra do usuário da empresa B2B, como criar, editar e excluir ordens de compra. Consulte [Ordens de compra (B2B)](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/purchase-order/).
* Regra de ordem de compra O esquema GraphQL oferece a capacidade de criar, editar e excluir regras de aprovação, bem como validar manualmente ordens de compra. Consulte [Regras de aprovação de ordem de compra (B2B)](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/purchase-order-rule/).

Esta versão inclui várias correções de erros. Consulte [Notas de versão B2B](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).


### Braintree

<!-- BUNDLE-3107-->

* A variável **[!UICONTROL Pay Later]** botão e banners (mensagens) para a Itália e a Espanha foram ativados para o Braintree.

<!-- BUNDLE-3109-->

* As mensagens do PayLater com o PayPal Vault foram habilitadas.

<!-- BUNDLE-3140-->

* Adição dos ganchos da Web de Proteção contra fraude e ACH. O gancho da Web de Proteção contra fraude é acionado quando uma decisão de risco é tomada no Braintree. O gancho da Web ACH é acionado quando o status de um pagamento ACH é atualizado para `settled` ou `settlement decline`.

<!-- BUNDLE-3141-->

* Adição do gancho da Web LPM (Métodos de pagamento locais).

### GraphQL

Os aprimoramentos de desempenho do GraphQL incluem:

**Tempo de resposta aprimorado ao consultar categorias com permissões de categoria ativadas**. Os tempos de resposta melhoraram ao consultar produtos em categorias para as quais as permissões de categoria estão habilitadas e que contêm muitos grupos de clientes ou catálogos compartilhados. As alterações de código que suportam esse aprimoramento de desempenho incluem: <!-- B2B-2179 2404 2329-->

* A operação do resolvedor do GraphQL foi otimizada.
* O provedor de dados não redefine mais os dados em cache em tempo de execução para cada novo produto que está sendo processado, o que melhorou o desempenho. <!-- B2B-2452-->
* O processamento de permissões do produto foi otimizado no GraphQL Resolver. As permissões do produto agora são aplicadas às coleções de produtos, agora com base no produto.  <!-- B2B-2404-->
* Permissões otimizadas lidas em catálogos compartilhados no `addProductsToCart` mutação. <!-- B2B-2424-->
* As permissões do produto foram otimizadas com fragmentos integrados do produto. <!-- B2B-2459-->

**Desempenho otimizado da renderização da árvore de categorias**. A variável `categoryList` A consulta do foi otimizada para oferecer suporte a clientes com um grande número de categorias. Os comerciantes que usam essa consulta para pesquisar mais de 1.500 categorias com até cinco níveis de subcategorias aninhadas notarão uma melhoria de desempenho. O carregamento de filhos de categoria pela refatoração do código foi aprimorado com a remoção de chamadas de método desnecessárias, o aprimoramento do armazenamento em cache da árvore de categorias e o carregamento recursivo de dados de categoria.  As alterações de código que suportam esse aprimoramento de desempenho incluem: <!-- B2B-2484 2469 2472-->

* A busca de metadados de atributos personalizados para modelos de categoria foi aprimorada. <!-- B2B-2463-->
* A busca de ID de categoria foi aprimorada e `getChildren` As chamadas de foram reduzidas. <!-- B2B-2464-->
* O carregamento de crianças da categoria foi aprimorado.<!-- B2B-2469-->

**Tempos de resposta de consulta de operações de carrinho em massa reduzidos**. As mutações adicionar produto foram otimizadas para melhorar o desempenho da consulta ao adicionar até 500 produtos simples e configuráveis. Os produtos do pacote não são afetados. As mutações otimizadas incluem `addProductsToCart`, `addConfigurableProductsToCart`, `addDownloadableProductsToCart`, `addSimpleProductsToCart`, `addVirtualProductsToCart`,`addWishlistItemsToCart`, e `updateCartItems`. <!-- B2B-2331 2423-->

**a consulta do cliente agora oferece suporte à classificação de pedidos**. A variável `orders` objeto de saída do `customer` a consulta agora contém um campo de classificação. Agora você pode classificar pedidos por número de pedido ou data de criação e em ordem crescente ou decrescente. <!-- AC-6903-->

Novas mutações:

`deleteCustomer` <!-- AC-2879-->


### Page Builder

O Page Builder v.1.7.3 é compatível com o Adobe Commerce 2.4.6.


### PWA Studio

O PWA Studio v.13.0.x é compatível com o Adobe Commerce 2.4.6. Ele inclui várias melhorias para melhorar a acessibilidade. Para obter informações sobre correções de erros, consulte [Versões do PWA Studio](https://github.com/magento/pwa-studio/releases). Consulte [Compatibilidade de versão](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) para obter uma lista de versões do PWA Studio e suas versões Adobe Commerce core compatíveis.


### Problema conhecido

**Problema**: New Relic não é compatível com o PHP 8.2. Implantações executando New Relic podem executar Adobe Commerce 2.4.6 no PHP 8.1 mas não no PHP 8.2. **Solução alternativa**: Execute o Adobe Commerce 2.4.6 no PHP 8.1 até que uma nova versão do New Relic seja lançada que suporte o PHP 8.2. Esta versão está prevista para o verão de 2023. <!-- AC-7769-->

## Problemas corrigidos

Corrigimos centenas de problemas no código principal do Adobe Commerce 2.4.6. Um subconjunto dos problemas corrigidos incluídos no Adobe Commerce 2.4.6 está descrito abaixo.

### Instalação, atualização, implantação

<!-- ACP2E-1168-->

* A implantação de conteúdo estático não atinge mais o tempo limite ou falha durante implantações padrão ou compactas com vários locais e sites.

<!-- ACP2E-923-->

* A estratégia compacta não causa mais uma referência inválida a um domínio externo ao executar a implantação de conteúdo estático (`bin/magento set:static-content:deploy -f --strategy compact`).

<!-- AC-5994-->

* Execução `bin/magento setup:di:compile -vvv` (ou com o `-v` ou `-vv` opções) agora retorna uma mensagem informativa sobre a falha. [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

* O Adobe Commerce não lança mais a seguinte exceção quando você executa o `bin/magento setup:upgrade` em uma implantação que já está executando a ferramenta de migração de dados: `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

* A variável `bin/magento setup:db:status` comando não falha mais em ambientes que executam o MySQL 8.0.29. Anteriormente, a saída do comando afirmava erroneamente que o esquema declarativo estava desatualizado. [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

* A variável `composer install` comando não substitui mais `.gitignore` arquivos. [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

* Executando `bin/magento sampledata:remove` para remover dados de amostra após a atualização no Alpine Linux, não falhará mais com este erro: `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)


<!-- AC-6933-->

* `bin/magento setup:upgrade` agora é executado com sucesso após a primeira execução `composer install --no-dev`. [GitHub-36351](https://github.com/magento/magento2/issues/36351)

<!-- AC-6796-->

* As exceções e entradas de rastreamento de pilha de exceção agora são incluídas em `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->

* O Adobe Commerce agora lança um erro de validação de parâmetro ao usar a linha de comando para definir uma conexão Redis sem uma senha.

### Acessibilidade

<!-- AC-6678 6679 6677-->

* A variável **[!UICONTROL Proceed to Checkout]**, **[!UICONTROL Review Order]**, e **[!UICONTROL Place Order]** os botões no fluxo de trabalho de check-out agora funcionam conforme esperado com a entrada do teclado.

<!-- AC-2485-->

* Indicação visual de foco em botões ao usar **[!UICONTROL TAB]** ou **[!UICONTROL SHIFT + TAB]** navegar pelos controles de página agora funciona conforme esperado.

#### Leitores de tela

<!-- AC-2498-->

* O leitor de tela da página de histórico do pedido agora lê a descrição de imagem correta.

Os leitores de tela agora anunciam:

* Contagem total de itens encontrada nos resultados da pesquisa conforme esperado <!--- AC-3522-->
* Nome do usuário conectado quando um usuário fizer logon com êxito usando controles de teclado <!--- AC-6477-->
* O cabeçalho da página de resultados da pesquisa de produto agora lê o valor correto para o `<title>` element <!--- AC-2489-->
* Se os campos de entrada são obrigatórios <!--- AC-2494-->
* Corrigir o estado atual dos elementos do acordeão (recolhidos e expandidos) <!--- AC-2487-->
* Quando o conteúdo da página é atualizado depois que o usuário clica no **[!UICONTROL Create an account]** botão <!---AC-6676-->



### Produtos do pacote

<!-- ACP2E-906-->

* A atualização do produto do pacote por meio da API para uma exibição de loja específica agora não substitui outros dados de exibições de loja do mesmo produto do pacote. Anteriormente, os títulos de opção de produto de pacote eram substituídos pelo título da primeira opção para outras exibições da loja.

<!-- AC-3769-->

* Os produtos agrupados agora podem ser filtrados com êxito do Administrador **[!UICONTROL Catalog]** > **[!UICONTROL Products]** ao usar um idioma holandês. Anteriormente, o Adobe Commerce exibia esse erro quando você tentava filtrar em `Type: Bundle Product`: `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

* A grade de produtos não lança mais uma exceção quando os produtos de pacote têm um preço especial superior a 1000. Anteriormente, ao pesquisar o produto por SKU ou navegar até **[!UICONTROL Catalog]** > **[!UICONTROL Products]**, o Adobe Commerce emitiu este erro: `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

* As colunas no aviso de crédito e nos PDF de fatura para pedidos que contêm uma combinação de pacote e produtos simples agora são renderizadas corretamente. Anteriormente, as colunas estavam distorcidas ou desalinhadas.

<!-- ACP2E-1315-->

* Em consultas GraphQL que contêm um `BundleProduct` fragmento, o `items.options.product` o objeto contém dados conforme esperado. Anteriormente, o objeto podia ser nulo em algumas circunstâncias.

<!-- AC-6548-->

* Quantidades decimais para opções de pacote agora são renderizadas corretamente quando **[!UICONTROL Quantity uses decimals]** está ativado. Anteriormente, somente a parte inteira da quantidade era renderizada, não o componente fracionário. Por exemplo, uma quantidade de 1,5 foi renderizada como 1,0. [GitHub-35964](https://github.com/magento/magento2/issues/35964)

<!-- B2B-2453-->

* As consultas de produto do GraphQL agora retornam somente opções de produto agrupadas dentro do escopo da loja que está sendo consultada.

<!-- B2B-2455-->

* Os produtos que não estão atribuídos a categorias, mas que são opções de produto para pacotes ou produtos agrupados, agora são retornados em respostas quando o **[!UICONTROL Allow Category Browsing]** a definição de configuração está habilitada para o cliente que está enviando a consulta.

### Cache

<!-- ACP2E-134-->

* O cache de página inteira não é mais liberado após o preenchimento do pedido, a menos que o produto solicitado esteja esgotado. Anteriormente, o cache era removido para a categoria sempre que uma entrega era criada.

<!-- ACP2E-1321-->

* Agora, os dados são armazenados em cache com êxito quando o cache L2 é configurado e os dados remotos são parcialmente removidos. Anteriormente, após liberar somente o cache de dados sem os hashes desses dados, o novo cache não era salvo enquanto os hashes de dados existiam.

<!-- B2B-2471-->

* Defeitos corrigidos no `CatalogUrlResolverIdentity` e `CmsUrlResolverIdentity` que impedia o armazenamento em cache. Isso afetou o cache de consulta de rota em várias solicitações.

### Carrinho e check-out

<!-- ACP2E-965-->

* Os compradores agora podem adicionar mais um item ao carrinho quando o carrinho contém a quantidade mínima do produto simples.

<!-- ACP2E-964-->

* As chamadas da API REST para recuperar dados do carrinho agora retornam a mesma `grand_total` e `base_grand_total` valores quando a moeda de armazenamento e a moeda base são iguais. [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

* O valor exportado de **[!UICONTROL Maximum Qty Allowed in Shopping Cart]** agora corresponde ao valor padrão definido na definição da configuração de Administração.

<!-- ACP2E-889-->

* A Adobe Commerce agora calcula corretamente o total geral de reembolsos de pedidos com desconto para envio.

<!-- ACP2E-876-->

* O Google reCAPTCHA agora funciona conforme esperado para pedidos de vitrine. Anteriormente, o Adobe Commerce exibia esses erros quando o Google ReCAPTCHA não era selecionado pela primeira vez antes de um comprador tentar fazer um pedido pela primeira vez: `ReCaptcha validation failed, please try again` e `No such cart with id = ID`.

<!-- AC-2338-->

* A atualização da imagem CAPTCHA agora atende à definição da Configuração de administrador e não é acionada quando a definição está desativada. Anteriormente, a atualização era acionada sempre que o método de pagamento era alterado, independentemente da configuração estar ativada ou desativada. [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

* O Adobe Commerce agora exibe um pop-up de confirmação conforme esperado antes de redirecionar um comprador para a próxima página quando ele altera a quantidade do produto na página do carrinho sem atualizar o carrinho e, em seguida, tenta navegar até a próxima página.

<!-- AC-5987-->

* Os compradores agora podem diminuir a quantidade de um produto do carrinho depois que ela foi diminuída no Administrador. Anteriormente, o Adobe Commerce exibia o seguinte erro quando um comprador tentava diminuir a quantidade do produto: `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

* O Adobe Commerce não lança mais um erro no console do JavaScript quando a quantidade do produto excede o máximo configurado durante a finalização de remessa múltipla. Em vez disso, o Adobe Commerce agora exibe uma mensagem de erro informativa. [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

* A quantidade de itens na página do carrinho de compras não é mais representada como um número negativo quando um comprador usa a tecla de seta para baixo do teclado para alterar a quantidade do produto. [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1232-->

* Os compradores não podem mais adicionar ao carrinho um produto de uma categoria que agora não é permitida após alterar o grupo de clientes ao qual o comprador pertence. O Adobe Commerce agora verifica o acesso às permissões do grupo de clientes para categorias específicas quando as configurações de permissão forem alteradas.

<!-- ACP2E-926-->

* Os carrinhos de compras do cliente não são mais esvaziados antes da criação do pedido pelo administrador e o conteúdo do carrinho agora é restaurado se o pedido for cancelado ou abandonado. Os itens agora são removidos do carrinho somente após a criação do pedido. Anteriormente, sempre que um usuário administrador tentava criar um pedido na página Admin Gerenciar carrinho de compras, o carrinho era esvaziado.

<!-- AC-6939-->

* O minicarrinho agora exibe imagens corretas do produto depois que você executa `bin/magento catalog:image:resize`. Anteriormente, todas as imagens eram substituídas pela imagem padrão do espaço reservado do produto. [GitHub-35535](https://github.com/magento/magento2/issues/35535)

<!-- AC-2376-->

* O check-out agora pode ser concluído com êxito quando o endereço de entrega contiver um atributo de extensão. Anteriormente, o Adobe Commerce exibia este erro: `Object of class Magento\Quote\Api\Data\AddressExtension could not be converted to string`. [GitHub-34202](https://github.com/magento/magento2/issues/34202)

<!-- AC-2793-->

* A variável `addBundleProductsToCart` a mutação não adicionará mais produtos a uma cotação se uma opção de produto necessária não tiver valor. [GitHub-25676](https://github.com/magento/magento2/issues/25676)

<!-- B2B-2458-->

* O Adobe Commerce agora retorna uma mensagem informativa quando um `addProductsToCart` falha ao adicionar um produto ao carrinho com permissões insuficientes.

<!-- ACP2E-1242-->

* O Adobe Commerce não lança mais um erro na página do carrinho quando o Pedido rápido é usado para adicionar um produto em uma quantidade que excede o estoque disponível.

<!-- AC-6312-->

* A variável `setGiftOptionsOnCart` a mutação agora exige autorização do cliente para operações do carrinho do cliente.

### Regra de preço do carrinho

<!-- AC-2242-->

* As opções de entrega gratuita da regra de preço do carrinho definidas durante a criação da regra agora são aplicadas às ordens, conforme esperado. Anteriormente, as opções de frete gratuito aplicadas durante a regra criada eram ignoradas durante o check-out e o frete gratuito não era permitido quando a regra era aplicada. [GitHub-35013](https://github.com/magento/magento2/issues/35013)

<!-- ACP2E-1074-->

* A variável `discount_percent` coluna da `sales_order_item` a tabela de um produto agora é preenchida conforme esperado com a porcentagem de desconto quando a quantidade de desconto do item não está definida ou é maior ou igual à quantidade do item da ordem. Anteriormente, essa coluna não era preenchida quando uma regra de preço do carrinho era aplicada a este produto.

### Catálogo

<!-- ACP2E-1181-->

* O widget lista de produtos não exibe mais preços incorretos ou em cache para um comprador conectado. O preço exibido no widget da página inicial agora corresponde ao endereço do comprador e é atualizado quando o comprador atualiza o endereço. Anteriormente, o cache do navegador não atualizava os preços do produto na página inicial com base nas regras de imposto do grupo de clientes.

<!-- ACP2E-1007-->

* O recurso de lista Comparar produtos agora funciona corretamente em uma implantação de vários sites e depende do site.

<!-- ACP2E-900-->

* O Adobe Commerce não exibe mais os dados da página anterior quando você recarregar uma página de detalhes do produto. Anteriormente, quando a página de detalhes do produto era recarregada, os dados da primeira guia eram mesclados com os dados recém-carregados por uma divisão de segundo.

<!-- ACP2E-816-->

* As categorias com subcategorias agora podem ser expandidas no menu principal em dispositivos móveis, conforme esperado. Anteriormente, os compradores não podiam abrir ou expandir categorias com subcategorias em implantações móveis. [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

* As listagens de categoria agora são atualizadas conforme esperado quando um produto é atribuído a um novo site ou loja. Anteriormente, o indexador de preço do produto não era marcado como inválido e acionado novamente em um `cron` executar conforme esperado. Como resultado, a entrada de preço do produto não estava na tabela de índice de preço e não era exibida na nova loja ou site.

<!-- AC-6395-->

* A contagem de inventário da loja agora é precisa quando a variável **[!UICONTROL Display Out of Stock Products]** definição de configuração está habilitada. [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

* A página de categoria não fica mais vazia quando a variável **[!UICONTROL Allow All Products Per Page]** está ativada. [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

* A variável **[!UICONTROL Display Out of Stock Products]** A opção de configuração agora funciona conforme esperado quando ativada. Anteriormente, todos os produtos eram exibidos como indisponíveis na loja quando essa opção estava ativada no administrador. [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- AC-2631-->

* Os clientes atribuídos a um grupo Atacado agora podem adicionar um produto agrupado ao carrinho, quando permitido por permissões de categoria. Se essa permissão não for definida para um grupo de Clientes, a configuração terá prioridade.

<!-- ACP2E-1306-->

* A classificação de produtos por atributos booleanos agora funciona conforme esperado. [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

* Os descontos da regra de preço de catálogo não são mais aplicados às opções de produto personalizadas de preço fixo, mas são aplicados apenas ao preço original do produto.

<!-- ACP2E-1027-->

* Os produtos relacionados agora são obtidos com êxito na página de detalhes do produto da loja quando gerados pela regra de produto relacionada para atributos alfanuméricos do produto. [GitHub-36285](https://github.com/magento/magento2/issues/36285)

<!-- AC-6810-->

* As regras de preço de catálogo agora levam em conta o escopo selecionado e são aplicadas aos produtos somente para os sites para os quais o atributo tem um valor de opção que corresponde à regra. Anteriormente, a regra não levava em conta o escopo selecionado em implantações de vários sites. [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

* Os atributos de cor e tamanho das opções de amostra agora são pré-selecionados na página Detalhes do produto quando um comprador modifica o produto configurável na página Meu carrinho. (A versão 3.x do jQuery agora é compatível com o `swatchRenderer` nome do widget, que agora é camel case.) Anteriormente, a opção de amostra não era pré-selecionada.

<!-- ACP2E-1361-->

* Agora os clientes são notificados sobre quedas de preço do produto quando o cliente é inscrito no alerta de queda de preço. Anteriormente, as notificações de queda de preço nem sempre eram enviadas devido ao armazenamento em cache no nível do aplicativo.

<!-- ACP2E-1348-->

* Regras do catálogo baseadas em SKUs com a variável **[!UICONTROL is not one of]** A condição do agora funciona conforme esperado.

<!-- AC-729-->

* O Adobe Commerce não assume mais erroneamente que uma categoria é a categoria principal de outra com base no caminho da categoria. Anteriormente, quando duas categorias eram adjacentes e uma ID de categoria começava com a ID de categoria de outra categoria, a Adobe Commerce presumia que as categorias tinham a mesma categoria principal. [GitHub-32464](https://github.com/magento/magento2/issues/32464)


### Produtos configuráveis

<!-- ACP2E-1083-->

* O Adobe Commerce não emite mais um erro quando um usuário administrador adiciona produtos manualmente a um produto configurável que já tem muitos produtos simples atribuídos a ele. Anteriormente, o Adobe Commerce exibia este erro: `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

* Os compradores não podem mais adicionar produtos configuráveis com uma quantidade comercializável de 0 ao carrinho de compras em implantações com pedidos pendentes desativados. O Adobe Commerce agora indica que o produto está esgotado. [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

* A criação de um novo produto importando um produto configurável com muitas opções de uma visualização de loja diferente agora resulta em uma cópia exata do primeiro produto, conforme esperado. Anteriormente, a ordem de classificação das opções configuráveis do novo produto estava incorreta, e os títulos não eram traduzidos para o local do novo modo de exibição da loja em implantações com vários modos de exibição de loja e locais. [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-535-->

* Os produtos configuráveis com todos os produtos secundários indisponíveis agora são exibidos como indisponíveis na loja.

<!-- AC-6852-->

* As SKUs e os nomes de produtos configuráveis agora são exibidos com precisão. Anteriormente, o nome e os SKUs eram exibidos como indefinidos depois que você movia um grupo de atributos para cima do grupo Detalhes do produto em **[!UICONTROL Stores]** > **[!UICONTROL Attribute set]**. [GitHub-36309](https://github.com/magento/magento2/issues/36309)

### Cupons

<!-- ACP2E-1053-->

* A lógica de validação foi adicionada ao fluxo de trabalho Gerenciar códigos de cupom para aplicar as configurações de código do cupom ao gerar cupons. Anteriormente, a geração de código de cupom ignorava a **[!UICONTROL Code Length]** configuração quando a variável **Quantidade do Cupom** o valor era maior que 2500.

<!-- ACP2E-1029-->

* Os pontos de recompensa agora são adicionados à conta de um cliente conforme esperado quando um cupom de recompensa é aplicado durante o checkout com o método de pagamento PayPal Express.

<!-- ACP2E-1225-->

* Agora é possível aplicar um código de cupom durante a criação da ordem de Administrador quando a regra de preço do carrinho tem o peso como uma condição. Anteriormente, os códigos de cupom não eram definidos se outros campos não fossem selecionados para o produto. [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

* Agora você pode filtrar relatórios de cupom por várias regras de preço de carrinho. [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

* Agora as opções personalizadas são aplicadas e salvas quando um usuário administrador pressiona **[!UICONTROL Enter]** ao configurar um produto com opções personalizadas. Anteriormente, você podia selecionar opções e adicionar o produto a um pedido, mas as opções não eram salvas e o usuário administrador era solicitado a selecionar novamente as opções do produto. [GitHub-35284](https://github.com/magento/magento2/issues/35284)

<!-- AC-6688-->

* Os códigos de cupom agora podem ser exportados com êxito para XML do Excel. Anteriormente, o arquivo gerado não continha todos os códigos de cupom selecionados, mas apenas a quantidade de itens selecionados no seletor de itens por página.[GitHub-36073](https://github.com/magento/magento2/issues/36073)

### cron

<!-- ACP2E-1243-->

* A variável `catalog_index_refresh_price` o trabalho cron agora é executado com sucesso. Anteriormente, o Adobe Commerce registrava este erro durante a execução do cron: `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### Moeda

<!-- ACP2E-1012-->

* Um espaço ausente entre símbolos e preços de moeda personalizados foi adicionado aos preços de produtos de vitrine e administrador. A condição e expressão regex apropriadas foram adicionadas para permitir um NBSP personalizado em símbolos de moeda. Por exemplo, IDRx 105.00 era exibido anteriormente como IDRx105.00.

### Segmento do cliente

<!-- ACP2E-1185-->

* O filtro Sim/Não na grade Segmentos do cliente de administração durante a criação de uma nova regra de preço do carrinho agora funciona conforme esperado.

### E-mail

<!-- ACP2E-1063-->

* O Adobe Commerce não envia mais emails duplicados de um cliente depois que um pedido é criado pelo administrador.

<!-- ACP2E-1200-->

* Emails de pedido de administrador não são mais enviados quando o **[!UICONTROL Email order confirmation]** está desabilitada. [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

* As opções de imagem não são mais exibidas como marcação de HTML no aviso de crédito, confirmação de pedido e emails de cliente de fatura (modelo padrão) para produtos com opções personalizadas.

### Estruturas

<!-- AC-6385-->

* Os usuários administradores agora podem abrir o Administrador com êxito **[!UICONTROL Store]** > **[!UICONTROL Configuration]** página quando nenhum país na **Países da União Europeia** configuração (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**). Anteriormente, quando um usuário administrador tentava abrir essa página, o Adobe Commerce exibia este erro: `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

* `jquery.cookie` As dependências agora funcionam conforme esperado com as dependências do JavaScript. Anteriormente, não era possível usar aliases para `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

* A variável `bin/magento i18n:collect-phrases` agora inclui `<title>` texto no arquivo CSV exportado. [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

* `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` agora aceita argumentos de construtor nomeados. Agora você pode chamar uma função definindo os parâmetros pelo nome.

<!-- ACP2E-1287-->

* Agora os erros são registrados conforme esperado no `exception.log` arquivo. Anteriormente, embora erros fossem registrados no `system.log` arquivo, os erros não foram registrados `var/log/exception.log`.

<!-- AC-3758-->

* Os comerciantes agora podem especificar um provedor SMTP externo personalizado. [GitHub-26104](https://github.com/magento/magento2/issues/26104)

<!-- AC-3752-->

* As integrações OAuth agora podem ser reautorizadas, conforme esperado, em implantações que executam o Adobe Commerce 2.4.3-p2. Anteriormente, a reautorização falhava com este erro: `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. O Adobe Commerce também tentou descriptografar valores não criptografados. [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

* O correto `rowId` agora o parâmetro é passado quando a categoria `urlKey` é salvo para categorias que têm categorias secundárias. Anteriormente, o problema `categoryId` foi aprovado ao salvar a categoria `URLKey`.

<!-- ACP2E-981-->

* O código de atributo do produto `event` foi adicionado à lista de códigos de atributo de produto reservados, o que elimina erros associados ao uso de um atributo com esse nome na loja. Anteriormente, o aplicativo exibia esse erro nas páginas de detalhes do produto e de pesquisa/lista de produtos quando `event` foi usado:  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

* As mensagens de erro de validação da vitrine eletrônica que ocorrem durante o posicionamento do pedido agora são exibidas de forma consistente. Anteriormente, as mensagens apareciam, recolhiam-se e reapareciam. [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

* Os consumidores do AMQP não apresentam mais falhas devido a uma falha `trim()` função em deployment executando PHP 8.1. Anteriormente, quando o consumidor AMQP era iniciado após a instalação, o Adobe Commerce exibia este erro: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

<!-- AC-2882-->

* A variável `getFilteredTimerIds` O método do agora funciona conforme esperado.  Classe `Magento\Framework\Profiler\Driver\Standard\Stat` agora é compatível com o PHP 8.1. Anteriormente, o Adobe Commerce lançava uma exceção quando esse método era chamado. [GitHub-35307](https://github.com/magento/magento2/issues/35307)

<!-- AC-2784-->

* Remoção da dependência no `imagemin-svgo` biblioteca.

<!-- AC-2058-->

* O processo de minificação de modelo agora processa com êxito comentários consecutivos quando o primeiro comentário começa com `//`. [GitHub-34880](https://github.com/magento/magento2/issues/34880)

<!-- AC-2241-->

* Correção de uma consulta de banco de dados emitida pelo `BundleGraphQl` módulo que retornou este erro: `"debugMessage": "Notice: Undefined offset: 16 in vendor/magento/module-bundle-graph-ql/Model/Resolver/Options/Collection.php on line 130"`.[GitHub-34991](https://github.com/magento/magento2/issues/34991)

### Correções gerais

<!-- ACP2E-1068-->

* O Adobe Commerce agora exibe um intervalo de tempo preciso quando um usuário administrador seleciona a variável **[!UICONTROL Last 24 Hours]** no painel Estatísticas do administrador. Anteriormente, o Adobe Commerce exibia um intervalo de tempo incorreto. Isso ocorreu porque o fuso horário do banco de dados permaneceu inalterado.

<!-- ACP2E-1066-->

* Os avisos de crédito agora podem ser gerados para quantidades inteiras e decimais. Anteriormente, só havia suporte para quantidades inteiras.

<!-- ACP2E-1001-->

* A regra de validação de entrada de CEP do cliente para o tipo **somente numérico** agora funciona conforme esperado no **[!UICONTROL Edit Customer Address]** campo (**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**). Anteriormente, as informações de endereço do cliente eram salvas sem validação de código postal.

<!-- ACP2E-975-->

* Os usuários administradores com acesso restrito a um site agora podem fazer logon com êxito no Administrador usando o recurso Fazer logon como cliente.

<!-- ACP2E-873-->

* As contas de clientes compartilhadas globalmente agora têm endereços validados em relação à lista de países permitidos para o site atual e salvos com sucesso. Anteriormente, essas contas eram validadas incorretamente em relação aos países permitidos no site onde o cliente estava registrado.

<!-- AC-3167-->

* As navegações estruturais da hierarquia de página do CMS não são mais exibidas quando **[!UICONTROL Enable Hierarchy Functionality]** está desativado. Anteriormente, as navegações estruturais eram exibidas e, quando os compradores clicavam nelas, uma página 404 era exibida. [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

* A remoção de um produto de todos os sites por meio do Administrador não causa mais o seguinte erro: `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

* Os clientes que excederem o máximo de tentativas de logon com falha agora podem fazer logon após a redefinição da senha. [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

* O componente de linhas dinâmicas agora se comporta conforme esperado quando um usuário administrador adiciona um novo elemento. Anteriormente, o componente de linha se comportava incorretamente quando um novo produto simples era adicionado a um produto agrupado. [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

* Erros de digitação e gramática incorretos no `app/code/Magento/Backend/etc/menu.xsd` arquivo.

<!-- magento/magento2/pull/35818-->

* A variável `app/code/Magento/Authorization/README.md` O arquivo foi atualizado para descrever com precisão a criação de tabela.

<!-- magento/magento2/pull/35940-->

* A variável `recordLogin` O método foi atualizado para definir valores de logon no modelo do usuário, além de preservar os valores corretos na variável `logdate` e `lognum` campos de `admin_user` tabela. Anteriormente, as tentativas de logon de usuários administradores atualizados não eram registradas.

<!-- magento/magento2/pull/35990-->

* Modelos de problemas do GitHub foram convertidos em formulários de problemas para a experiência do desenvolvedor e solicitações de recursos.

<!-- ACP2E-961-->

* A variável `Is required` O atributo do cliente agora é implementado corretamente por escopo de site para o formulário de edição do cliente de Administração.

<!-- ACP2E-895-->

* A variável **[!UICONTROL Grid Filter Condition Type]** o campo de atributos de endereço do cliente e do cliente não estará mais visível na página de edição de atributos quando a variável **[!UICONTROL Use in Filter Option]s** está desabilitada.

<!-- AC-6020-->

* O Adobe Commerce agora exibe uma mensagem de erro informativa se um comerciante não inserir um valor de atributo SKU opcional ao criar um produto. Anteriormente, o aplicativo exibia essa exceção quando o atributo era opcional: `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

<!-- ACP2E-716-->

* A variável **[!UICONTROL Show my quotes]** filtro na guia **[!UICONTROL My Quotes]** A página agora funciona conforme esperado. Anteriormente, os resultados do filtro incluíam as cotações de outros usuários administradores.

### Cartões-presente

<!-- ACP2E-851-->

* As quantidades de produto do cartão-presente agora permanecem iguais à quantidade especificada em um arquivo CSV durante a importação. As verificações de opções existentes foram adicionadas e os valores antigos agora são atualizados com base em uma chave exclusiva. Anteriormente, os valores de cartão-presente eram duplicados quando os cartões-presente eram importados várias vezes.

### Invólucro de presente

<!-- AC-3061-->

* O preço de quebra de presente agora é exibido conforme esperado no bloco de resumo do pedido quando a quebra de presente é aplicada no nível do pedido a um pedido que contém produtos físicos e virtuais. Anteriormente, o Adobe Commerce não exibia o preço de embalagem do presente.

### GraphQL

<!-- AC-1730-->

* `Types` que implementam várias interfaces no código GraphQL agora podem ser separadas por um `&` assinar e `,` de acordo com a GraphQL `@doc`especificação.

<!-- ACP2E-885-->

* A variável `setShippingAddressesOnCart` mutação agora permite definir códigos de região numéricos como `region`. Anteriormente, essa mutação funcionava incorretamente para valores de código de região numérica.

<!-- ACP2E-1237-->

* A variável `products` a consulta agora retorna somente revisões associadas ao escopo especificado. Anteriormente, as consultas retornavam análises de todas as lojas.

<!-- ACP2E-882-->

* As permissões de categoria agora são respeitadas durante solicitações do GraphQL.

<!-- AC-1805-->

* A variável `customer` a consulta agora filtra em pedidos com um valor `from` e `to` intervalo correto. [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

* A variável `product` agora o query retorna os dados de categoria corretos na agregação. Anteriormente, `attribute_code.category_uid` retornou o valor de `category_id` em vez de `category_uid`.

<!-- AC-6084-->

* A variável `customerOrders` a consulta não lança mais um `\"model\" value should be specified`erro. [GitHub-35852](https://github.com/magento/magento2/issues/35852)

<!-- ACP2E-894-->

* A variável `customer` a consulta agora filtra pedidos com base no escopo. Agora é possível especificar se a consulta deve filtrar pedidos por loja, site ou globalmente.

<!-- ACP2E-1172-->

* A variável `categoryList` a consulta agora retorna uma contagem de produtos precisa para categorias pai ancoradas e não ancoradas. O novo `is_anchor` o atributo foi adicionado à lista de colunas selecionadas da coleção de categorias. Anteriormente, as solicitações retornavam uma contagem de produto 0. [GitHub-36300](https://github.com/magento/magento2/issues/36300)

<!-- AC-2500-->

* A variável `generateCustomerTokenAsAdmin` agora a mutação funciona conforme esperado ao criar um token para fazer logon em um armazenamento não padrão em uma implantação de vários armazenamentos. [GitHub-35084](https://github.com/magento/magento2/issues/35084)

<!-- AC-1731-->

* A variável `createEmptyCart` A mutação agora lança uma exceção, conforme esperado, quando um token expirado é usado. [GitHub-26112](https://github.com/magento/magento2/issues/26112)

<!-- AC-1965-->

* As mensagens de erro de consulta do carrinho se tornaram mais informativas. [GitHub-34546](https://github.com/magento/magento2/issues/34546)

<!-- AC-2798-->

* Dados de agregação na resposta de um `products` a consulta agora inclui valores corretos para o atributo de tipo de preço `attribute_code` e `label`. [GitHub-28878](https://github.com/magento/magento2/issues/28878)

<!-- AC-6685-->

* A variável `products` a consulta retorna informações de categoria conforme esperado quando o prefixo do banco de dados tem um valor não nulo. Anteriormente, retornava um erro `Internal server error`. [GitHub-36117](https://github.com/magento/magento2/issues/36117)

<!-- AC-1003-->

* Tipo de retorno corrigido para o `getCustomerIsGuest` método. [GitHub-29529](https://github.com/magento/magento2/issues/29529)

<!-- B2B-2221-->

* A variável `Magento\CatalogGraphQl\Plugin\DesignLoader` plug-in foi refatorado.

<!-- B2B-2379-->

* Agora, o recarregamento do carrinho é acionado apenas uma vez, conforme esperado, quando o carrinho é inicializado por mutações do GraphQL. Anteriormente, o carregamento do carrinho acionava revalidação desnecessária do carrinho em relação ao inventário de estoque, que consumia recursos significativos sempre que o carrinho era carregado.

<!-- AC-1726-->

* Adição de `gift_message` digite para o `OrderItemInterface`. [GitHub-29418](https://github.com/magento/magento2/issues/29418)

<!-- AC-2454-->

* As opções de produto retornadas nas respostas do GraphQL agora incluem apenas os produtos que estão no catálogo ao qual o usuário pertence. Se o usuário pertencer a um catálogo compartilhado, somente os produtos nos catálogos compartilhados serão retornados. Se o usuário for um convidado ou não fizer parte de um catálogo compartilhado personalizado, apenas os produtos no catálogo público serão retornados.


### Google ReCAPTCHA

<!-- AC-3179-->

* Um erro reCAPTCHA no `var/log/exception.log` O arquivo para o logon do Google V3 reCAPTCHA Admin foi resolvido e nenhuma mensagem de erro é registrada. Anteriormente, o seguinte erro era gerado a cada poucos segundos quando um usuário administrador configurava seus **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** configurações: `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)

### Imagem

<!-- ACP2E-905-->

* Atualização das recomendações sobre o tamanho do logotipo para a guia da fatura de PDF.

### Importar/exportar

<!-- ACP2E-957-->

* A importação de um produto com a mesma chave de URL numérica que um produto existente, mas sem seu caractere alfabético terminal, não causa mais um erro de validação quando a variável **[!UICONTROL Product URL Suffix]** está definido como vazio na caixa de diálogo Admin.

<!-- AC-6588-->

* A variável `bin/magento app:config:import`comando agora importa com êxito o conteúdo de um `config.php` quando contiver determinados `cron` expressões. Anteriormente, a importação falhava com este erro: `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

* A exportação completa agora funciona corretamente quando o AWS S3 é usado como armazenamento remoto. Anteriormente, a exportação falhava devido ao tamanho do arquivo carregado.

<!-- ACP2E-982-->

* O status do produto agora é importado corretamente quando as colunas de dados do inventário no arquivo CSV estão ausentes. Anteriormente, após a importação do produto, a origem padrão era atribuída automaticamente ao produto, sua quantidade era definida como zero e seu status era listado como indisponível quando as colunas de dados do inventário no arquivo CSV estavam ausentes.

<!-- ACP2E-841-->

* A importação de valores de precificação antecipada agora fornece a contagem correta para registros novos e atualizados quando a importação inclui mais de 100 registros. Anteriormente, a mensagem de sucesso da importação fornecia a contagem errada.

<!-- ACP2E-984-->

* Os arquivos CSV exportados agora contêm caminhos corretos para nomes de categoria que são salvos em vários idiomas. Uma ID de loja foi adicionada à coleção de categorias. Anteriormente, os arquivos exportados continham caminhos mistos com idiomas diferentes em vez de um caminho de categoria derivado da visualização de armazenamento padrão.

<!-- ACP2E-1319-->

* A atualização de opções personalizadas de um produto em uma exibição de loja específica por meio da importação agora é concluída com sucesso. Anteriormente, um erro interno de servidor era lançado se uma linha relacionada ao produto fosse dividida em vários lotes.

<!-- AC-6926-->

* A variável `Fixer.io` o serviço de importação agora funciona conforme esperado. As taxas de moeda agora são importadas com sucesso. [GitHub-36010](https://github.com/magento/partners-magento2ee/issues/36010)


### Índice

<!-- AC-3152-->

* Indexador `batch_size` para o `catalogpermissions_category` agora o índice foi alterado para o valor fornecido na variável `env.php` conforme esperado. Anteriormente, havia um erro de digitação no caminho do indexador `batch_size` a substituição impediu a alteração do tamanho do lote para o valor fornecido em `env.php`. [GitHub-652](https://github.com/magento/partners-magento2ee/issues/652)

<!-- ACP2E-1296-->

* A reindexação de preço agora é executada com sucesso quando o catálogo contém produtos de pacote que não estão atribuídos a nenhum site. Anteriormente, o seguinte erro ocorria quando o índice de preço do produto era executado: `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### Infraestrutura

<!-- ACP2E-869-->

* Adição de higienização de `DATE` e `DATETIME` valores em despejos de banco de dados para suporte do Adobe Commerce. Anteriormente, os campos do tipo datetime não eram corrigidos para tabelas de clientes/cotações/pedidos na tabela de backup do banco de dados.

<!-- ACP2E-804-->

* A variável `escaper.js` `escapeHtml` A função agora converte o caractere especial E comercial (&amp;) em `"$amp;"` por `InnerHtml` regra. Essa solução genérica resolve problemas de conversão de referências a caracteres e caracteres especiais na caixa de entrada de título e salva o valor exato conforme inserido. Anteriormente, os caracteres de E comercial (&amp;) eram codificados incorretamente nos nomes de nó na hierarquia de conteúdo.

<!-- AC-5972-->

* Problemas com o terceiro `colinmollenhour/php-redis-session-abstract` módulo e PHP 8.1 foram resolvidos. [GitHub-35634](https://github.com/magento/magento2/issues/35634)

### Galeria de mídia

<!-- AC-3034-->

* A Galeria de mídia herdada agora está desativada por padrão. Anteriormente, **[!UICONTROL Enable old Media gallery]** foi definido como **[!UICONTROL Yes]**.

<!-- ACP2E-1302 -->

* A Galeria de novas mídias foi otimizada para melhorar o carregamento da árvore de diretório na página de categoria.

### Logs

<!-- ACP2E-1312-->

* Agora você pode gerar relatórios do sistema para arquivos de log de 0 bytes. Anteriormente, o Adobe Commerce emitia um erro ao gerar um relatório para uma coleção de arquivos de log quando um ou mais arquivos estavam vazios.

### Pedido

<!-- ACP2E-1107-->

* A página de aviso de crédito de ordem de venda de Administrador agora exibe o total geral correto para pedidos criados com Crédito de loja e várias faturas. Anteriormente, o cálculo do total geral estava incorreto e o usuário não podia gerar um memorando de crédito.

<!-- ACP2E-998-->

* O prefixo do pedido passado no script de instalação agora é adicionado corretamente à ID do pedido.

<!-- ACP2E-790-->

* A página de detalhes do pedido agora é carregada com êxito quando o pedido contém um produto com um valor de texto personalizado longo. Anteriormente, a página de detalhes do pedido não carregava e o valor no `sales_order_item.product_options` A coluna não era armazenada corretamente se um produto contivesse um valor longo para uma opção personalizada de texto.

<!-- AC-3178-->

* O status do pedido de vitrine agora é preciso para pedidos parcialmente reembolsados. Anteriormente, um pedido permanecia no estado de processamento após a entrega quando um reembolso parcial era aplicado. [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

* O grupo de clientes agora é representado precisamente como **Não conectado** para um pedido criado por um usuário convidado. Anteriormente, o grupo de clientes era NULL nos resumos de pedidos de convidados, o que afetava os emails de confirmação e a exportação de pedidos. [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

* Um status de **[!UICONTROL Closed]** agora está atribuído a pedidos virtuais conforme esperado depois que um aviso de crédito é emitido e o cliente é reembolsado. Anteriormente, os produtos virtuais eram exibidos como **[!UICONTROL Complete]** no menu suspenso Status, mas **[!UICONTROL Closed]** no rodapé do pedido, comenta quando o comentário foi adicionado pelo administrador. [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

* Os clientes agora podem fazer pedidos de produtos com uma quantidade inferior a um e a quantidade do produto agora é estritamente digitada como `float`. Anteriormente, como a quantidade do produto era estritamente digitada como `int`, os pedidos para uma quantidade de produto menor que um falharam com esta mensagem: `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- ACP2E-1313-->

* Os reembolsos de envio agora são calculados corretamente quando o **[!UICONTROL Apply discount on prices]** a opção de configuração está definida como **[!UICONTROL including taxes]**.

<!-- ACP2E-1199-->

* As grades de nota fiscal, remessa e aviso de crédito agora são atualizadas de forma assíncrona depois que os pedidos são arquivados.

<!-- ACP2E-1194-->

* Os pedidos duplicados não resultam mais de solicitações GraphQL simultâneas e idênticas. Agora, as cotas são bloqueadas por até 10 segundos para evitar a criação de pedidos duplicados, e a segunda solicitação falha com estes erros: `The cart isn't active` ou `The order has already been placed and is currently processing`. Esse valor de bloqueio pode ser configurado por meio de ID para o `Magento\Quote\Model\PlaceOrderMutex` classe `lockWaitTimeout` parâmetro. [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-1170-->

* Adicionar um comentário a um pedido arquivado não o retorna mais à grade pedidos não arquivados, mantendo seu status arquivado.

<!-- ACP2E-860-->

* Os valores de atributo da empresa agora são exibidos conforme esperado nas seções de endereço de entrega e cobrança do fluxo de trabalho de finalização da compra. Anteriormente, os atributos da empresa não eram exibidos corretamente na página de detalhes do pedido porque as lojas não eram definidas corretamente durante a criação do pedido. Os valores de atributo eram armazenados corretamente somente quando a variável **Mostrar Empresa** propriedade foi definida como **[!UICONTROL optional]** para **Site principal** em implantações de várias lojas.

<!-- ACP2E-1117-->

* A variável `customer_address_id` agora o valor é definido conforme esperado para um novo endereço de cobrança quando **[!UICONTROL My billing and shipping address are the same]** está marcada. Uma condição adicional foi introduzida para identificar se o endereço de faturamento é igual ao endereço de entrega antes de definir a ID do endereço do cliente para o endereço de entrega.

<!-- AC-6057-->

* Problemas de simultaneidade com o posicionamento do pedido foram resolvidos. Anteriormente, se dois pedidos eram feitos em navegadores diferentes ao mesmo tempo, ou quase ao mesmo tempo, ambos os pedidos eram atribuídos à mesma ID de pedido. [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

* Fazer um pedido faturado automaticamente para um produto gratuito quando a indexação assíncrona estiver ativada agora funciona conforme esperado. Nenhuma entrada é adicionada à `sales_order_grid or sales_invoice_grid` para esses pedidos. Anteriormente, o Adobe Commerce gerava uma exceção porque o aplicativo tentava indexar as grades durante a inserção do pedido em vez de depender `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)

### Page Builder

<!-- ACP2E-956-->

* Agora você pode usar o recurso de arrastar e soltar do Page Builder para importar imagens em massa para a galeria.

<!-- AC-2074-->

* Problemas com a regra CSS do controle deslizante do Page Builder foram resolvidos. [GitHub-34527](https://github.com/magento/magento2/issues/34527)

<!-- ACP2E-978-->

* `Dropdown`, `Text area`, e `Text field` Os atributos do agora estão disponíveis na lista de atributos de produto do Page Builder. Anteriormente, somente `Dropdown` e `Text area` atributos estavam disponíveis.

### Pagamento

<!-- ACP2E-862-->

* O método de pagamento COD não é mais renderizado no fluxo de trabalho de check-out da vitrine eletrônica quando o COD está isento para o país especificado nos endereços de entrega e cobrança. Anteriormente, as definições de configuração de administrador para esse recurso não eram implementadas.

<!-- AC-1119-->

* As informações de pagamento do cofre não são mais exibidas na seção Pagamento do fluxo de trabalho de criação de ordem do Administrador se o comprador não tiver salvo um token. [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

* Os preços personalizados não são mais duplicados depois que um desconto é aplicado pela regra de preço do carrinho. [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

* O novo status de pedido pendente agora é respeitado conforme esperado quando um pedido é feito usando o método de pagamento Check-out de subtotal zero.

<!-- ACP2E-1121-->

* As configurações de email de convidado agora são respeitadas durante a criação de pedidos para um comprador convidado com o PayPal Express via GraphQL. Anteriormente, o endereço de email definido era substituído pelo endereço de email definido na conta do PayPal.

#### Braintree

<!-- BUNDLE-3186-->

* As IDs de pedido agora são adicionadas às solicitações de liquidação para transações de pagamento.

<!-- AC-3030-->

* O Adobe Commerce não lança mais o seguinte erro quando um comerciante clica em **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**: `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

* A variável `customerPaymentTokens` O query não retorna mais tokens Braintree quando o cofre é desativado no Admin.

<!-- BUNDLE-3107-->

* A variável **[!UICONTROL Pay Later]** botão e banners foram ativados para a Itália e a Espanha.

<!-- BUNDLE-3137-->

* Os usuários administradores agora podem criar um pedido ou um novo pedido quando o método de pagamento Braintree está habilitado. Anteriormente, o Adobe Commerce exibia este erro: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

* A finalização usando o método de pagamento Braintree agora é concluída com êxito quando o Braintree PayPal é ativado e **[!UICONTROL Enable Card Payments]** está desativado. Anteriormente, a barra de progresso nunca era resolvida, e o Adobe Commerce exibia este erro de console: `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

* Foram implementados os ganchos da Web de proteção contra fraudes, pagamento ACH e método de pagamento local. O gancho da Web de proteção contra fraude é acionado somente se uma decisão de risco tiver sido tomada no Braintree. O gancho da Web ACH é acionado somente depois que um pagamento ACH é atualizado para `settled` ou `settlement decline`.

<!-- BUNDLE-3143-->

* A variável **[!UICONTROL Tagline]** e **[!UICONTROL Layout]** os campos de configuração foram removidos de todos **[!UICONTROL PayPal]** na seção Estilo do Administrador.

<!-- ACP2E-1229-->

* A opção de método de pagamento do Cofre de Braintree permanece selecionada no fluxo de trabalho de finalização quando um comprador atualiza seu endereço de faturamento. Anteriormente, o método de pagamento era desmarcado quando o comprador desmarcava a variável **[!UICONTROL My billing and shipping address are the same]** botão.

<!-- BUNDLE-3184-->

* Os itens de linha agora são transmitidos para transações do PayPal quando a variável **[!UICONTROL Send Line Items]** A definição da configuração do está ativada no Admin.

<!-- BUNDLE-3187-->

* Lógica de validação no método de pagamento ACH **[!UICONTROL Account Number]** O campo agora aceita texto de quatro a 17 dígitos.

<!-- BUNDLE-3043-->

* A variável `customerPaymentTokens` O query não retorna mais tokens Braintree quando o cofre é desativado no Admin.

<!-- BUNDLE-3137-->

* Os usuários administradores agora podem criar um pedido ou um novo pedido para clientes quando o método de pagamento Braintree estiver ativado. Anteriormente, o Adobe Commerce exibia este erro: `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

* Os compradores agora podem usar o método de pagamento Braintree em vitrines onde **[!UICONTROL Enable Card Payments]** foi desativado. Anteriormente, o Adobe Commerce exibia este erro de JavaScript: `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`

### Desempenho

<!-- ACP2E-1028-->

* O indexador de preços agora exclui dados desatualizados, conforme esperado, após substituir registros durante a reindexação parcial de catálogos grandes. Anteriormente, o processo de reindexação removia registros desatualizados antes de substituí-los, o que fazia com que os produtos desaparecessem temporariamente da loja ocasionalmente. [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

* O desempenho do `bin/magento/setup:upgrade` foi aprimorado. Anteriormente, esse comando recriava os acionadores do banco de dados, o que causava um tempo de inatividade significativo durante a execução do comando. Além disso, os indexadores não voltaram ao modo agendado e permaneceram no modo de salvamento. [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

* A atualização dos preços de nível por API agora é executada mais rapidamente. Anteriormente, a atualização dos preços de nível gerava desnecessários `SELECT` consultas, que atrasaram a execução quando muitos grupos de clientes foram atribuídos a um produto.

<!-- ACP2E-1307-->

* O carregamento de páginas que incluem a lista de produtos do widget de catálogo foi otimizado. Anteriormente, os atributos não globais eram carregados diretamente do banco de dados.

### Relatórios

<!-- ACP2E-852-->

* O relatório de log do Administrador agora mostra uma **[!UICONTROL Value before change]** quando uma regra de categoria é atualizada.

<!-- ACP2E-1104-->

* O relatório Total do pedido **de** e **para** as datas agora são exibidas corretamente após a seleção no seletor de datas.

<!-- BUNDLE-3147-->

* A variável `ANDROID_PAY_CARD` constante em `Braintree/Ui/Component/Report/Listing/Column/PaymentType.php` substituiu `GOOGLE_PAY_CARD`. Isso soluciona problemas com o relatório de Braintree.

### Autorizações de devolução de produto (RMA)

<!-- ACP2E-1285-->

* O campo de comentário RMA (**[!UICONTROL Orders]** > **[!UICONTROL Return]**) não contém mais espaços em branco redundantes. (O `<textarea>` e `<?php` as tags agora estão em uma linha.

<!-- ACP2E-1279-->

* A variável **[!UICONTROL Use Config Settings]** caixa de seleção para a **[!UICONTROL Enable RMA]** O campo agora salva seu valor conforme esperado quando um produto é salvo.

### Resenhas

<!-- ACP2E-1214-->

* Os usuários administradores com acesso restrito a um escopo específico agora podem excluir análises de produtos conforme esperado.

### Funções

<!-- ACP2E-1277-->

* Adição de uma ACL ausente para **[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Services]** > **[!UICONTROL OAuth]**. Anteriormente, não era possível definir o acesso a essa configuração do OAuth ao configurar permissões de função.

### Pesquisar {#search-heading}

<!-- ACP2E-989-->

* As pesquisas por strings entre aspas agora funcionam como esperado quando o **[!UICONTROL Minimum Terms to Match]** definição de configuração está habilitada. Anteriormente, o Adobe Commerce exibia este erro: `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

* A variável **Ponto de inscrição** o filtro de pesquisa de registros de clientes nas grades do cliente da ordem de venda agora funciona como esperado durante a criação da ordem.

<!-- ACP2E-783-->

* A qualidade das sugestões de pesquisa foi aprimorada para consultas de várias palavras.

<!-- AC-6768-->

* Os resultados da pesquisa agora incluem saídas de opções indisponíveis para todos os produtos disponíveis quando **[!UICONTROL Display Out Of Stock Products]** está ativado [GitHub-36055](https://github.com/magento/magento2/issues/36055)

### Envio

<!-- ACP2E-670-->

* As taxas de envio para FedEx, USPS e UPS são calculadas corretamente quando a regra Carrinho de remessa gratuita é definida para corresponder apenas a um subconjunto de itens no carrinho.

<!-- AC-937-->

* A página Administração de remessa não exibe mais a opção de remessa gratuita quando o total do pedido é menor que o valor mínimo do pedido especificado que é elegível para remessa gratuita. [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

* O Adobe Commerce agora homenageia o cliente administrador **[!UICONTROL Show Company]** definição de configuração ao exibir o endereço de entrega ou do cliente. Quando esta configuração estiver desabilitada, a empresa de remessa não será mais incluída na remessa, no endereço do cliente ou no registro de pedido do banco de dados. Anteriormente, as informações eram exibidas apesar da desativação da configuração. [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

* Remoção de uma operação de salvamento supérflua em cotações ao estimar o envio.

<!-- magento/magento2/pull/35817-->

* `storeId` o escopo agora é aplicado diretamente de `$request->getStoreId()` para garantir que o escopo não seja perdido quando uma cotação for criada por um usuário administrador. Anteriormente, ocorriam problemas ocasionalmente com métodos de envio quando uma cotação era criada do Administrador usando módulos de terceiros.

<!-- ACP2E-1304-->

* URLs compatíveis com SEO agora são gerados para produtos cujas `url_key` A configuração é substituída no nível da exibição de loja. Anteriormente, os URLs de produto de categoria não eram redirecionados para URLs amigáveis para SEO.

<!-- ACP2E-1196-->

* O Adobe Commerce não lança mais um erro de valor mínimo do pedido quando um desconto é aplicado aos custos de envio.

<!-- ACP2E-1190-->

* Os reembolsos de envio agora são calculados corretamente quando o imposto é aplicado após um desconto ter sido aplicado ao envio.

<!-- ACP2E-910 AC-3182-->

* Todas as promoções aplicáveis a um carrinho solicitado por meio do GraphQL `cart` são retornados juntos. As promoções incluem descontos de item de linha, regras/descontos de carrinho, cupons, cartões-presente e crédito de loja. [GitHub-35545](https://github.com/magento/magento2/issues/35545)

<!-- AC-2363-->

* Adição de `price_excl_tax` e `price_excl_tax` tipos para a saída do `setShippingMethodsOnCart` mutação. [GitHub-31206](https://github.com/magento/magento2/issues/31206)

<!-- AC-1096-->

* IDs de envio exclusivas agora são passadas nas respostas do GraphQL, conforme esperado, com detalhes de envio de pedidos enviados para vários endereços para consultas do GraphQL.

### Estágios

<!-- ACP2E-879-->

* O reagendamento da data de término de uma atualização de preparo não resulta mais em erro depois que a atualização é concluída. Anteriormente, os administradores não podiam abrir páginas e grades de produtos, e o Adobe Commerce exibia este erro: `report.CRITICAL: Exception: Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "1" already exists`.

<!-- ACP2E-776-->

* O painel de preparação agora exibe o número total correto de registros, e a paginação do painel agora funciona conforme esperado. Anteriormente. o painel exibiu no máximo 20 registros.

<!-- ACP2E-1213-->

* As visualizações de preparo de conteúdo agora carregam mais rápido em implantações com muitas lojas. A opção Visualizar reindexação agora reindexa somente os armazenamentos selecionados.

<!-- ACP2E-919-->

* Os produtos agora podem ser adicionados ao carrinho de compras no modo de visualização de agendamento. A atualização de links de navegação estrutural no modo de visualização de agendamento com esses parâmetros corrigiu esse problema: `version`, `timestamp`, e `signature`.

### Imposto

<!-- AC-3201-->

* A variável **[!UICONTROL Display Zero Tax Subtotal]** a configuração agora é aplicada conforme esperado para pedidos em implantações que oferecem vários métodos de envio. Anteriormente, o campo de imposto zero estava visível na página do carrinho durante o check-out antes de um método de envio ser selecionado, mesmo quando essa configuração estava desativada. [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

* O Adobe Commerce agora pode exibir produtos agrupados com impostos na página de categoria da loja em implantações executando o PHP 8.1. Anteriormente, o Adobe Commerce não exibia uma lista de produtos e gerava esta exceção: `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

* Os comerciantes não podem mais mover uma atualização agendada para outra atualização que contenha a mesma ID de regra. Anteriormente, as atualizações de agendamento para regras de preço do carrinho criavam agendamentos duplicados quando uma atualização era movida para outra atualização que continha a mesma ID de regra.

<!-- ACP2E-1295-->

* A atribuição automática de grupo de clientes agora funciona quando não há ID de IVA associada ao endereço do cliente. Se o endereço não contiver uma ID de IVA, ele será tratado como pertencente a um cliente não registrado para IVA e a Adobe Commerce alterará o grupo de clientes para um grupo não-IVA. Anteriormente, quando **[!UICONTROL Enable Automatic Assignment to Customer Group]** foi ativado, a conta do cliente não foi atribuída automaticamente à `customerGroup` quando a ID de IVA foi excluída da conta do cliente.

<!-- ACP2E-493-->

* Os blocos dinâmicos corretos agora são mostrados para regras de catálogo em etapas no modo de visualização de preparo. Anteriormente, blocos dinâmicos não relacionados eram exibidos.

<!-- ACP2E-1080-->

* Agora, vários impostos são renderizados corretamente na seção Resumo de Impostos de NFFs e avisos de crédito quando a entrega múltipla é aplicada durante a finalização da compra.

<!-- ACP2E-1076-->

* Os descontos não são mais aplicados quando um subtotal de pedido, incluindo imposto junto com o valor de Imposto fixo do produto excede a condição de regra do carrinho na página do carrinho. Anteriormente, os descontos eram aplicados mesmo quando o total excedia a condição da regra do carrinho.

<!-- ACP2E-913-->

* Agora você pode especificar um `vat_id` ao usar o GraphQL para adicionar ou atualizar o endereço de um comprador convidado.

### Teste

<!-- ACP2E-1171-->

* Correção de erros de testes de unidade para diferentes versões do `ICU` e `libxml` bibliotecas.

<!-- ACP2E-1134-->

* Os desenvolvedores agora podem instruir o sistema a executar uma correção de dados em uma visualização de loja específica. O novo parâmetro opcional `scope` aceita um `string` que corresponde ao alias de fixação da loja.

<!-- ACP2E-1133-->

* Adição da capacidade de gerar várias instâncias de uma correção de dados usando o `count` parâmetro.

<!-- AC-6860-->

* Removido não nativo `array_first` função das dependências de desenvolvimento no quadro MFTF.

### Traduções e códigos de idiomas

<!-- ACP2E-912-->

* A tradução em linha agora funciona corretamente com caracteres especiais, incluindo caracteres unicode estendidos em frases localizadas em tags SCRIPT. Anteriormente, os caracteres japoneses eram renderizados incorretamente no script editado ao usar a tradução em linha.

<!-- ACP2E-844-->

* A variável `ñ` o caractere em um nome de produto agora é convertido em `n` durante a geração da chave de URL.

<!-- AC-3499-->

* A saída da execução `bin/magento i18n:collect-phrases` agora inclui traduções de modelo de email em `depend` O é construído conforme esperado. [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

* Agora, os caracteres japoneses podem ser inseridos diretamente no conjunto de atributos da página do produto (caixa de combinação). Anteriormente, a inserção direta de caracteres japoneses nessa caixa de combinação resultava na alteração ou exclusão de caracteres ao executar o navegador Firefox no MacOS. A variável `textInput` O atributo HTML, que pode lidar melhor com a conversão de caracteres japoneses em todos os navegadores, substituiu o `Value` e `valueUpdate` atributos.

<!-- ACP2E-1238-->

* A variável `getOptions` O método do agora busca corretamente `price` atribuir valores de etiqueta com base na exibição de loja. Anteriormente, a variável `price` o atributo foi convertido durante as operações do GraphQL para a exibição de loja incorreta.

### IU

<!-- ACP2E-1018-->

* A moeda específica do site agora é usada conforme esperado para colunas de Preço especial, Custo e MSRP na grade de produtos do administrador. Anteriormente, o símbolo de moeda correto não era exibido na grade de produto do catálogo de administração ao ser filtrado pela exibição da loja por um preço especial.

<!-- ACP2E-980-->

* A funcionalidade arrastar e soltar das opções personalizadas do produto agora funciona conforme esperado. Agora é possível mover uma opção personalizável de uma página para outra quando há várias páginas disponíveis na grade de opções personalizáveis.

<!-- ACP2E-866-->

* Os gráficos do painel do administrador agora exibem intervalos de tempo YTD do início do ano civil atual para a data atual, conforme esperado. Anteriormente, os intervalos de datas eram incluídos por mais de 12 meses.

<!-- AC-3088-->

* Um favicon padrão ausente na página inicial da loja foi adicionado. [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

* O Administrador agora exibe com êxito a data de logon mais recente de cada usuário administrador. Anteriormente, quando um usuário administrador fazia logon no Admin pela primeira vez, um valor de data de logon vazio era exibido na grade de usuários do Admin.


<!-- AC-3762-->

* O recurso de visualização de modelo de email (**[!UICONTROL Marketing]** > **[!UICONTROL Communications]** > **[!UICONTROL Email Templates]**) agora exibe os modelos corretamente. Anteriormente, a imagem de visualização era truncada. [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

* Adição de `new-shipping-address-modal` classe para oferecer suporte ao estilo do novo modal de endereço de entrega.

<!-- magento/magento2/pull/35738-->

* Adição de texto informativo abaixo de `Search Weight` do atributo `Storefront Properties` campo de entrada em Admin **[!UICONTROL Stores]**  > [!UICONTROL Attributes] > **[!UICONTROL Product]**.

<!-- ACP2E-1323-->

* As visualizações de email agora abrem em uma guia separada, em vez de em uma janela pop-up, que fornece uma visualização mais ampla do conteúdo do email. Anteriormente, o conteúdo do email era truncado.

<!-- ACP2E-1299-->

* A função de filtro para a grade da função de usuário (Administrador **[!UICONTROL System]** > **[!UICONTROL Permissions]** > **[!UICONTROL User roles]** > **[!UICONTROL Administrators]**) agora funciona conforme esperado. O valor da matriz agora é manipulado separadamente. Anteriormente, ao tentar inserir uma consulta nessa grade, o Adobe Commerce exibia o seguinte erro de console e a página não carregava: `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

* A validação para valores de atributo foi adicionada ao criar um cliente por meio da API REST. O processo de criação agora falha quando valores de atributos inválidos são fornecidos. Anteriormente, não havia validação para gênero, que não é um campo obrigatório. Durante a criação do cliente, o valor transmitido para o gênero foi salvo na variável `customer_entity` tabela.

<!-- ACP2E-1105-->

* Os endereços adicionados durante o check-out agora mantêm o formato esperado. Anteriormente, as linhas em branco eram ignoradas.

<!-- ACP2E-897-->

* Alterar a exibição de grade de colunas da grade de produtos e selecionar novas colunas para uma exibição personalizada não aciona mais uma ação Selecionar todas as colunas da grade. Anteriormente, a caixa de coluna desaparecia e os produtos na grade eram selecionados ou desmarcados. [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

* Os usuários administradores agora podem limpar o log de tarefas concluídas pelo administrador com êxito. Anteriormente, o Administrador exibia este erro: `Something went wrong`. [GitHub-36255](https://github.com/magento/magento2/issues/36255)

<!-- AC-7525-->

* A configuração do Cabeçalho do tema `Welcome Text` agora pode conter um caractere de aspas simples. Anteriormente, o Adobe Commerce exibia este erro de JavaScript: `Uncaught SyntaxError: Unable to process binding "ifnot: function(){return customer().fullname }"`.

### Substituições de URL

<!-- ACP2E-808-->

* Alteração da visibilidade do produto para **[!UICONTROL Not Visible Individually]** no escopo global Todas as exibições de loja agora remove apenas substituições de URL para exibições de loja que não substituíram o atributo de visibilidade. Alterar a visibilidade do produto dessa maneira também gera regravações de URL para todas as exibições da loja, incluindo aquelas que substituíram o atributo de chave de URL (mas não a configuração de visibilidade). Anteriormente, as regras de regravação de URL não eram aplicadas quando as configurações de visibilidade eram alteradas.

### Visual Merchandiser

<!-- ACP2E-1084-->

* Não é mais possível alterar manualmente as posições dos produtos nas listagens de categoria do Visual Merchandiser quando os produtos são correspondidos por regra.

<!-- ACP2E-985-->

* Os usuários administradores com acesso restrito a apenas uma loja não podem mais arrastar e soltar produtos em uma categoria no Visual Merchandiser. Em vez disso, agora eles podem usar o **[!UICONTROL Position]** coluna para reorganizar a posição do produto. Anteriormente, esses usuários podiam alterar a posição do produto em uma categoria somente ao arrastar e soltar.

<!-- ACP2E-953-->

* A seção Produtos na categoria da página de edição de categoria agora exibe a quantidade correta de produtos configuráveis. A coluna de tabela correta agora é usada para recuperar a quantidade de produtos configuráveis.

### Estrutura da API da Web

<!-- ACP2E-1207-->

* A API REST `DELETE /rest/V1/products/:sku/media/:entryId` agora retorna uma mensagem de erro se a imagem não for removida do produto porque está atribuída a uma função em outras visualizações da loja. Anteriormente, a API retornava uma resposta bem-sucedida mesmo quando a imagem não era removida com sucesso.

<!-- ACP2E-1155-->

* Os comerciantes agora podem usar a REST API para criar um memorando de crédito para um pedido com total geral zero. Anteriormente, o Adobe Commerce exibia este erro: `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

* A página de edição do produto Admin agora reflete com precisão as atribuições de um produto depois que a atribuição do site do produto foi alterada usando a REST API. [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

* IDs de opção duplicadas não podem mais ser incluídas para atributos de seleção múltipla durante solicitações em massa da API REST para atualizar produtos. Anteriormente, você podia definir IDs de opção duplicadas para atributos de seleção múltipla ao enviar uma solicitação de API em massa para atualizar um produto. Quando esse atributo de seleção múltipla foi configurado para inclusão na navegação em camadas, a indexação EAV falhou com uma `Duplicate entry` erro.

<!-- ACP2E-778-->

* Os nomes de produtos nos carrinhos de compras agora usam os valores de exibição da loja especificados conforme esperado. Anteriormente, os nomes de produtos no carrinho sempre retornavam o valor padrão de exibição da loja nas respostas do carrinho da API REST.

<!-- AC-5986-->

* Os valores de opção personalizados do item de carrinho agora podem ser atualizados usando a API REST. [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

* Solicitações de API em massa para mais de 20 `sourceItems` agora são concluídas com êxito nas implantações em que o Inventário está ativado.

<!-- ACP2E-1044-->

* O serviço de moeda Fixer agora funciona conforme esperado com chaves geradas via ApiLayer e as taxas de moeda são exportadas corretamente. Anteriormente, o Adobe Commerce emitia um erro quando um comerciante tentava importar taxas de moeda por meio do Administrador.

<!-- ACP2E-726-->

* Agora você pode usar a REST API `/rest/V1/bulk?searchCriteria[filter_groups]` solicitação para consultar operações em massa por critérios de pesquisa. Anteriormente, o seguinte erro era retornado: `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

* Os preços dos produtos agora são atualizados corretamente nas páginas de pesquisa do catálogo de administração e loja usando a API Gerenciar preço base. [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### Lista de desejos

<!-- ACP2E-1013-->

* Os compradores agora podem adicionar produtos à lista de desejos depois de fazer logon. Anteriormente, devido a problemas com a validação da chave de formulário após o logon, a chave de formulário enviada com a solicitação de adição à lista de desejos era invalidada.

<!-- ACP2E-341-->

* Os produtos agora são adicionados conforme esperado à lista de desejos da lista de produtos e páginas de exibição depois que um cliente convidado confirma sua conta a partir de um email de confirmação. Anteriormente, os produtos não eram adicionados à lista de desejos após a confirmação da conta.

<!-- ACP2E-1175-->

* A variável `addProductsToWishlist` o query agora retorna uma mensagem de erro informativa quando um comprador tenta adicionar um item a uma lista de desejos com um valor inválido para o produto `select` opção personalizada. Anteriormente, a validação do servidor para o valor da opção personalizada suspensa estava ausente, o que resultava em um valor inválido no banco de dados. Como resultado, o endpoint retornou este erro interno do servidor: `GraphQL endpoint returns Internal server error with "Call`.

## Problema conhecido

**Problema**: as etiquetas da regra de vendas por etapa podem ser incompatíveis após uma atualização para o Adobe Commerce 2.4.6 ou posterior a partir de versões de produto anteriores à 2.4.5. **Solução alternativa**: Aplique ACSD-50625_2.4.5-P1.patch durante a atualização antes da etapa Atualizar metadados. Consulte [problemas de rótulos de salesRules ao atualizar de versões anteriores à 2.4.5](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/salesRule-labels-upgrade-from-versions-under-2.4.5.html) Artigo da knowledge base.

Etapas gerais para resolver esse problema:

1. Baixe o patch necessário. Consulte a [problemas de rótulos de salesRules ao atualizar de versões anteriores à 2.4.5](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/salesRule-labels-upgrade-from-versions-under-2.4.5.html) Artigo da knowledge base.
2. Siga as etapas de atualização descritas na fase Gerenciar pacotes do processo de atualização [Executar uma atualização](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).
3. Aplique este patch durante a atualização após a fase Gerenciar pacotes e antes da fase Atualizar metadados. Consulte [Como aplicar um patch de compositor fornecido pelo Adobe](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html) .
4. Conclua o processo de atualização.

**Problema**: Não é possível criar um aviso de crédito quando o frete gratuito está ativado (**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Delivery Methods]**) e o preço de envio exibido inclui imposto. Quando você tenta criar um aviso de crédito, o Adobe Commerce lança esta exceção: `"Division by zero".vendor/magento/module-sales/Model/Order/Creditmemo/Total/Tax.phpLine 139`. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

**Solução alternativa**: um hot fix para esse problema está disponível. Ir para [Ferramenta Quality Patches: Pesquisar patches](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html) e procure pelo patch ACSD-50814.

### Contribuições do parceiro

A tabela a seguir destaca as contribuições feitas pelos Parceiros. Esta tabela lista o Parceiro que contribuiu com a solicitação de pull, o número da solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-6-partner.md}}

### Contribuições individuais do contribuinte

A tabela a seguir identifica as contribuições dos membros da comunidade. Esta tabela lista o membro da comunidade que contribuiu com a solicitação de pull, o número da solicitação de pull externa e o número do problema do GitHub associado a ela (se disponível).

{{$include /help/_includes/release-notes/engcomm-2-4-6-issues.md}}

## Requisitos do sistema

Nossa pilha de tecnologia é construída em PHP e MySQL. Para obter mais informações, consulte [Requisitos do sistema](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## Instruções de instalação e atualização

É possível instalar o Adobe Commerce 2.4.6 usando [Compositor](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
